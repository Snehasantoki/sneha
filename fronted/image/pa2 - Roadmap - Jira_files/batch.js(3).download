;try{window.performance.mark('com.atlassian.jira.jira-quick-edit-plugin,jira.create.issue,jira.webresources,com.atlassian.jira.plugins.jira-dnd-attachment-plugin,com.pyxis.greenhopper.jira,com.atlassian.jira.plugins.jira-wiki-editor,com.pyxis.greenhopper.jira_batch_file_eval:start');} catch(e){};;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:import-issues', location = 'jira-quick-edit-plugin/js/form/import-issues/import-issues.js' */
define("quick-edit/form/import-issues",["jira/container-api"],function(t){"use strict";var e=function(){},i=AJS.contextPath();return e.setForm=function(t){this.form=t},e.bindImportIssueUrl=function(){var n=e.getImportIssue();n.click(function(){var e="/secure/BulkCreateSetupPage!default.jspa?externalSystem=com.atlassian.jira.plugins.jim-plugin:bulkCreateCsv";t.navigate(e,function(){window.location=i+e},{replace:!1})})},e.getImportIssue=function(){return this.form.$element.find("#import-issues")},e});;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jquery"),d=[];return{current:null,addInstance:function(){d.push(this)},hideInstances:function(){var i=this;t(d).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(i){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var n=this.dropdown;o()||i||setTimeout(function(){var i=t(window),o=n.offset().top+n.prop("offsetHeight")-i.height()+10;i.scrollTop()<o&&t("html,body").animate({scrollTop:o},300,"linear")},100)}},hideDropdown:function(){this.displayed!==!1&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=t(o),this.dropdown.css({display:"none"}),t(document).keydown(function(i){9===i.keyCode&&n.hideDropdown()}),i.target?t.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",t(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),t(document.body).click(function(){n.displayed&&n.hideDropdown()})}}}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/objects","jquery","jira/featureflags/feature-manager"],function(e,t,n,o){return function(){var i,s=function(e,t){s.t&&(clearTimeout(s.t),s.t=void 0),s.t=setTimeout(e,1e3*t)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeInputField:function(e,t){e&&t&&(this.field.val(t).focus(),this.hiddenField&&(this.hiddenField.val(e),this.hiddenField.trigger("change")),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(n){var o=this,i=t.copyObject(n);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){o.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&n.error&&n.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i)},addSuggestionControls:function(e){function t(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),n(this).removeClass("active")}function r(e){var t=d.suggestionNodes[e.data.index],n=Array.isArray(t)&&t.length>2;if(d.strictModeEnabledForUserPickers){var o=d.suggestionNodes[e.data.index];d.completeInputField(o[1],o[3])}else if(n){var i=t.length>3?t[3]:void 0;d.completeInputField(t[1],i)}else d.completeField(d.suggestionNodes[d.selectedIndex][1])}var d=this,l=function(e,t){var n=d.autoSelectFirst===!1?-1:0;return d.allowArrowCarousel?e>t?n:e<n?t:e:e>t?t:e<n?(d.responseContainer.scrollTop(0),n):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&(h()||p()?g(d.suggestionNodes[d.selectedIndex])||d.suggestionNodes[d.selectedIndex][0].addClass("active"):d.suggestionNodes[d.selectedIndex][0].addClass("active"))},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},c=function(){return o.isFeatureEnabled("jira.jql.autoselectfirst")},p=function(){return o.isFeatureEnabled("com.atlassian.rm.jpo.soft-deprecate-jql-parenty-clauses")},h=function(){return o.isFeatureEnabled("com.atlassian.rm.jpo.soft-deprecate-jql-parent-link")},f=function(e){return p()&&g(e)||h()&&g(e)},g=function(e){return e.length>0&&e[0].length>0&&"className"in e[0][0]&&e[0][0].className.includes("deprecated-dropdown-option")},v=function(e){if(d.responseContainer.is(":visible")&&13===e.keyCode){if(u()&&!d.pendingRequest){var t=d.suggestionNodes[d.selectedIndex][1],n=Array.isArray(t)&&t.length>2;if(f(d.suggestionNodes[d.selectedIndex]))return e.preventDefault(),void e.stopPropagation();if(d.strictModeEnabledForUserPickers){var o=d.suggestionNodes[d.selectedIndex];d.completeInputField(o[1],o[3])}else if(n){var i=t.length>3?t[3]:void 0;d.completeInputField(t[1],i)}else d.completeField(d.suggestionNodes[d.selectedIndex][1]);c()&&d.dispatcher(d.field.val())}e.preventDefault(),e.stopPropagation()}},m=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),40===e.keyCode){if(a(d.selectedIndex+1),d.selectedIndex>=0){var t=d.responseContainer.height(),n=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();n-t>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-t+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(38===e.keyCode){if(a(d.selectedIndex-1),d.selectedIndex>=0){var o=d.suggestionNodes[d.selectedIndex][0].position().top;o<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+o-2)}e.preventDefault()}else if(9===e.keyCode)if(u()){var i=d.suggestionNodes[d.selectedIndex][1],s=Array.isArray(i)&&i.length>2;if(d.strictModeEnabledForUserPickers){var r=d.suggestionNodes[d.selectedIndex];d.completeInputField(r[1],r[3])}else if(s){var l=i.length>3?i[3]:void 0;d.completeInputField(i[1],l)}else d.completeField(d.suggestionNodes[d.selectedIndex][1]);e.preventDefault()}else d.dropdownController.hideDropdown()};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var C=0;C<d.suggestionNodes.length;C++){var w={instance:this,index:C};f(d.suggestionNodes[C])?this.suggestionNodes[C][0].unbind("click").unbind("mouseover").unbind("mouseout").bind("mousedown",function(e){e.preventDefault()}):this.suggestionNodes[C][0].bind("mouseover",w,t).bind("mouseout",w,s).bind("click",w,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(n(this.field).keypress(v),n(this.field).keydown(m),this.keyboardHandlerBinded=!0),a(d.autoSelectFirst===!1?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=n(document.createElement("div")),this.responseContainer.addClass("suggestions medium-long-field"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(t){return this.field.val().length>=this.minQueryLength&&(t.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||38!==t.keyCode&&40!==t.keyCode)||e.call(this)),t}}(),addMultiSelectAdvice:function(e){var t=this,o=function(e){if(!o.isAlerting){o.isAlerting=!0;var i=n(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+e+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),o.isAlerting=!1})},4)})}};n.aop.before({target:this,method:"dispatcher"},function(t){var o=this.field.val();return t[0]=n.trim(o.slice(o.lastIndexOf(e)+1)),t}),n.aop.before({target:this,method:"completeInputField"},function(t){var i=t[0],s=this.field.val().split(e),r=n(s).map(function(){return n.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(o(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){n.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),n.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready")}),e}),n.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeInputField"},function(e){return this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeField"},function(e){return this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&27!==e.keyCode||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),27===e.keyCode&&e.stopPropagation()),e})},init:function(e){var t=this,o=13,s=9;this.set(e),this.field=this.field||n("#"+this.fieldID);var r=this.field.val();this.field.attr("autocomplete","off").keyup(function(e){t.disabled||(e.keyCode!==o&&e.keyCode!==s&&t.strictModeEnabledForUserPickers&&!t.field.val()&&t.hiddenField.val(""),t.keyUpHandler(e))}).keydown(function(e){r=t.field.val();var n=27;e.keyCode===n&&t.responseContainer&&t.responseContainer.is(":visible")&&e.preventDefault()}).click(function(e){i===t&&e.stopPropagation()}).blur(function(){t.pendingRequest&&t.pendingRequest.abort()}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){return function(){var s=t.begetObject(e);return s.dispatcher=function(e){var t=this;e.length<this.minQueryLength||(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var s=t.getAjaxParams();s.data.query=e,s.success=function(s){t.saveResponse(e,s),t.responseContainer.scrollTop(0),t.renderSuggestions(s)},t._makeRequest(s)},t.queryDelay))},s.getAjaxParams=function(){},s.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},s.saveResponse=function(e,t){"string"==typeof e&&"object"==typeof t&&(this.requested||(this.requested={}),this.requested[e]=t)},s}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this)),a=n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container");a.find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId),t&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", "))))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),s.issuePickerEnabled===!0&&d({fieldID:s.fieldId,delimChar:s.singleSelectOnly===!0?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","jquery"],function(e,t,i,r,a,o){var s=function(t){function s(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var n=a.begetObject(e),l=!0;return n.getAjaxParams=function(){var e={url:contextPath+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"};return l&&(e.headers={"x-atlassian-force-account-id":"true"}),e},n.renderSuggestions=function(e){if(s(this.field)||!i.isSelenium()&&!r.elementIsFocused(this.field))return!1;var t,a=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=o("<ul/>").appendTo(this.responseContainer),o(e.users).each(function(){l?a.push([o("<li/>").html(this.html).appendTo(t),this.accountId,this.accountId,this.displayName]):a.push([o("<li/>").html(this.html).appendTo(t),null!=this.name?this.name:"",this.accountId,this.displayName])})),e.footer&&this.responseContainer.append(o("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),a.length>0&&(n.addSuggestionControls(a),o(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),a},t.minQueryLength=2,t.queryDelay=.25,n.init(t),n};return s.init=function(e){o("fieldset.user-picker-params",e).each(function(){var i=t(o(this)),r=i.fieldId||i.fieldName,a=o("#"+r+"_container");a.find("a.popup-trigger").click(function(e){var t,s=contextPath;if(e.preventDefault(),i.formName||(i.formName=a.find("#"+r).parents("form").attr("name")),s+=i.actionToOpen?i.actionToOpen:"/secure/popups/UserPickerBrowser.jspa",s+="?formName="+i.formName+"&",s+="multiSelect="+i.multiSelect+"&",s+="decorator=popup&",s+="element="+r,i.fieldConfigId&&(s+="&fieldConfigId="+i.fieldConfigId),i.projectId)if(o.isArray(i.projectId))for(var n in i.projectId)s+="&projectId="+n;else s+="&projectId="+i.projectId;t=window.open(s,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),t.opener=self,t.focus()});var n=e?e.find("#"+r):null,l=e?e.find("#hidden-"+r):null,d=i["enable-strict-mode-for-this-user-picker"];i.userPickerEnabled===!0&&s({field:n,hiddenField:l,fieldID:r,fieldConfigID:i.fieldConfigId,projectId:i.projectId,delimChar:i.multiSelect===!1?void 0:",",ajaxData:{fieldName:i.fieldName},strictModeEnabledForUserPickers:d})})},s}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t,i){i!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&(JIRA.UserAutoComplete.init(t),JIRA.IssueAutoComplete.init(t))}),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t,i){i!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&AJS.$("fieldset.user-searcher-params",t).each(function(){var e=JIRA.parseOptionsFromFieldset(AJS.$(this)),i=AJS.$("#"+e.fieldId+"_container",t);if(e.userPickerEnabled===!0)var r=JIRA.UserAutoComplete({fieldID:e.fieldId,delimChar:e.multiSelect===!0?",":void 0,ajaxData:{fieldName:e.fieldName}});var s=function(i){var s=AJS.$("#"+e.fieldId,t),o=AJS.$("#"+e.fieldId+"Image",t),l=AJS.$("#"+e.fieldId+"GroupImage",t),a=AJS.$("#"+e.fieldId+"_desc",t);"select.list.none"===i?(s.val("").attr("disabled","true"),o.hide(),l.hide(),a.hide()):(s.removeAttr("disabled"),"select.list.group"===i?(o.hide(),l.show(),e.userPickerEnabled===!0&&(r.disable(),a.hide())):(o.show(),l.hide(),e.userPickerEnabled===!0&&(r.enable(),a.show())))};AJS.$("#"+e.userSelect,t).change(function(){var e=AJS.$(this).find("option:selected").attr("rel");s(e)}).find("option:selected").each(function(){s(AJS.$(this).attr("rel"))}),i.find("a.user-popup-trigger").click(function(t){var i=contextPath+"/secure/popups/UserPickerBrowser.jspa?";i+="formName="+e.formName+"&",i+="multiSelect="+e.multiSelect+"&",i+="decorator=popup&",i+="element="+e.fieldId;var r=window.open(i,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");r.opener=self,r.focus(),t.preventDefault()}),i.find("a.group-popup-trigger").click(function(t){var i=contextPath+"/secure/popups/GroupPickerBrowser.jspa?";i+="formName="+e.formName+"&",i+="multiSelect="+e.multiSelect+"&",i+="decorator=popup&",i+="element="+e.fieldId;var r=window.open(i,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");r.opener=self,r.focus(),t.preventDefault()})})})}();;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.js' */
define("jira/admin/group-browser/group-label-lozenge",["jquery","jira/skate"],function(e,t){t("group-label-lozenge",{type:t.type.CLASSNAME,attached:function(t){e(t).tooltip({gravity:"w",html:!0})}})});;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = 'includes/jira/admin/group-browser/group-label-lozenge.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),JIRA.Templates.groupLabelLozenge=function(e,l){return""+aui.lozenges.lozenge({text:e.label.text,title:e.label.title,isSubtle:!0,extraClasses:"group-label-lozenge"})};;
;
/* module-key = 'jira.webresources:groupbrowser', location = '/includes/jira/admin/group-browser/group-browser.js' */
require(["jquery","jira/admin/group-browser/group-label-lozenge"],function(i){i(function(){i(".operations-list .aui-button[disabled]").tooltip({gravity:"e",html:!1})})});;
;
/* module-key = 'jira.webresources:group-pickers', location = 'includes/jira/field/templates/groupPickerUtil.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.GroupPickerUtil&&(JIRA.Templates.GroupPickerUtil={}),JIRA.Templates.GroupPickerUtil.formatResponseWithLabels=function(e,s){return""+JIRA.Templates.GroupPickerUtil.formatResponse(soy.$$augmentMap(e,{showLabels:!0}))},JIRA.Templates.GroupPickerUtil.formatResponse=function(e,s){var t='<div class="group-suggestion-item"><span class="group-suggestion-item__name">'+soy.$$filterNoAutoescape(e.html)+"</span>";if(e.showLabels){t+='<span class="group-suggestion-item__labels group-labels-lozenges">';for(var a=e.labels,o=a.length,l=0;l<o;l++){var p=a[l];t+=JIRA.Templates.groupLabelLozenge({label:p})+" "}t+="</span>"}return t+="</div>"};;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/templates/group-picker-util-template-wrapper.js' */
define("jira/field/group-picker-util/templates",[],function(){"use strict";return window.JIRA.Templates.GroupPickerUtil});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/groupPickerUtil.js' */
define("jira/field/group-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery","jira/field/group-picker-util/templates"],function(e,t,i,r){var n=function(n,a){var s=[],u=a?r.formatResponseWithLabels:r.formatResponse;return i(n).each(function(r,n){var a=new t({weight:r,label:n.header});i(n.groups).each(function(){a.addItem(new e({value:this.name,label:this.name,title:this.name,html:u(this),highlighted:!0}))}),s.push(a)}),s};return{formatResponseWithLabels:function(e){return n(e,!0)},formatResponse:function(e,t){return n(e,t)},formatResponseWithoutLabels:function(e){return n(e,!1)}}}),AJS.namespace("JIRA.GroupPickerUtil",null,require("jira/field/group-picker-util"));;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initMultiGroupPickers.js' */
define("jira/field/init-multi-group-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,r,s){function n(i){i.find(".js-default-multi-group-picker").each(function(){var i=e(this),a=i.data("show-labels")===!0,r=i.data("user-name");new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,ajaxOptions:{data:function(e){return{userName:r,query:e,exclude:i.val()}},url:contextPath+"/rest/api/2/groups/picker",query:!0,formatResponse:a?s.formatResponseWithLabels:s.formatResponseWithoutLabels}})})}r.bind(a.NEW_CONTENT_ADDED,function(e,t,a){a!==i.panelRefreshed&&n(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initSingleGroupPickers.js' */
define("jira/field/init-single-group-pickers",["jira/ajs/select/single-select","jquery","jira/ajs/list/item-descriptor","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,n,r,s){function l(a){a.find(".js-default-single-group-picker").each(function(){var a=t(this),n=a.find("option[data-empty]"),r=a.data("show-labels")===!0,l=a.data("user-name");new e({element:this,itemAttrDisplayed:"label",revertOnInvalid:!0,ajaxOptions:{data:function(e){return{userName:l,query:e,exclude:a.val()}},url:contextPath+"/rest/api/2/groups/picker",query:!0,formatResponse:function(e){var t=s.formatResponse(e,r);return n.length&&""!==a.val()&&t.push(new i({value:"",label:n.text(),highlighted:!0})),t}}})})}r.bind(n.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&l(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/init/init-group-pickers-webresource.js' */
require("jira/field/init-multi-group-pickers"),require("jira/field/init-single-group-pickers");;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,t,i){function a(t,a){i(t).each(function(){a.addItem(new e({value:this.accountId,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))})}return{formatResponse:function(a){var r=[];return i(a).each(function(a,n){var l=new t({weight:a,label:n.footer});i(n.users).each(function(){l.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),r.push(l)}),r},formatResponseByAccountId:function(e){var r=[];return i(e).each(function(e,i){var n=new t({weight:e,label:i.footer});a(i.users,n),r.push(n)}),r},inviteCapableFormatResponseByAccountId:function(e){var r=[];return i(e).each(function(e,i){var n=new t({weight:e,label:i.footer,showLabel:i.total>0});a(i.users,n),r.push(n)}),r}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/rolePickerUtils.js' */
define("jira/field/role-picker-utils",["jira/ajs/list/item-descriptor","jira/analytics/web-client","jquery"],function(e,i,s){return{formatResponse:function(r){r&&i.sendUIEvent({source:"createIssueModal",actionSubjectId:"restrictIssueDropDown",actionSubject:"dropdown",action:"clicked"});var t=[];return s(r).each(function(){var i="";this.currentUserRole&&(i='<div class="flex-row"><div class="current-user">'+"You"+"</div></div>");var s='<div class="add-issue-restriction-flex-body"><div class="add-issue-restriction-role-picker flex-column"><div><span class="add-issue-restriction-name">'+AJS.escapeHtml(String(this.name))+'</span></div><div><span class="add-issue-restriction-description">'+AJS.escapeHtml(String(this.description))+"</span></div></div> "+i+"</div>";t.push(new e({value:this.id,label:this.name,allowDuplicate:!1,html:s}))}),t}}}),AJS.namespace("JIRA.RolePickerUtils",null,require("jira/field/role-picker-utils"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","jira/ajs/select/single-select","jira/ajs/select/suggestions/invite-capable-suggest-handler","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter"],function(e,t,a,s,n,r,i,u){function o(s){var n="/rest/api/1.0/users/picker";e(".js-default-user-picker",s).each(function(){var a=e(this);if(!a.data("aui-ss")){var s={showAvatar:!0,excludeConnectUsers:a.data("exclude-connect-users")},r=a.data("inputValue");new t({element:a,submitInputVal:!0,showDropdownButton:!!a.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+n,query:!0,data:s,formatResponse:i.formatResponse},inputText:r})}}),e(".js-default-user-picker-by-account-id",s).each(function(){var a=e(this);if(!a.data("aui-ss")){var s={showAvatar:!0,excludeConnectUsers:a.data("exclude-connect-users")},r=a.data("inputValue");new t({element:a,submitInputVal:!0,showDropdownButton:!!a.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+n,query:!0,headers:{"x-atlassian-force-account-id":!0},data:s,formatResponse:i.formatResponseByAccountId},inputText:r})}}),e(".js-invite-capable-user-picker-by-account-id",s).each(function(){var s=e(this);if(!s.data("aui-ss")){var r={showAvatar:!0,excludeConnectUsers:s.data("exclude-connect-users")},o=s.data("inputValue");new t({element:s,submitInputVal:!0,showDropdownButton:!!s.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+n,query:!0,headers:{"x-atlassian-force-account-id":!0},data:r,formatResponse:i.inviteCapableFormatResponseByAccountId},inputText:o,suggestionsHandler:a})}})}r.bind(n.NEW_CONTENT_ADDED,function(e,t,a){a!==s.panelRefreshed&&o(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),a=e("jira/ajs/select/multi-select"),i=e("jira/util/formatter");return a.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:contextPath+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util"],function(e,t,i,n,r,s,a){function u(i){i.find(".js-default-multi-user-picker").each(function(){e(this);new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:contextPath+"/rest/api/1.0/users/picker",query:!0,data:function(e){return{showAvatar:!0,query:e}},formatResponse:a.formatResponse}})}),i.find(".js-default-multi-user-picker-by-accountId").each(function(){e(this);new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:contextPath+"/rest/api/1.0/users/picker",query:!0,headers:{"x-atlassian-force-account-id":!0},data:function(e){return{showAvatar:!0,query:e}},formatResponse:a.formatResponseByAccountId}})})}r.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiRolePickers.js' */
define("jira/field/init-multi-role-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/role-picker-utils","jira/analytics/web-client"],function(e,t,i,s,n,c,o){function r(e){e.find(".js-default-multi-role-picker").each(function(){AJS.$(".js-default-multi-role-picker").each(function(){const e=this.getAttribute("data-project-key")||null;e&&(o.sendScreenEvent({name:"issueRestrictionsDropDown",attributes:{projectKey:e,projectType:"software"}}),new AJS.MultiSelect({element:this,itemAttrDisplayed:"label",showDropdownButton:!0,ajaxOptions:{data:function(e){return{query:e}},error:function(t){o.sendOperationalEvent({source:"issueRestrictionsDropDown",actionSubject:"issueRestrictionRoleDetailsFailure",action:"clicked",attributes:{location:"global-issue-create",projectKey:e,error:t}})}.bind(this),url:contextPath+"/rest/api/3/project/"+e+"/internal/roledetails",query:!1,headers:{"x-atlassian-force-account-id":!0},formatResponse:c.formatResponse,removeOnUnSelect:!0,allowDuplicate:!1}}),this.selected=function(){o.sendUIEvent({source:"createIssueModal",actionSubjectId:"restrictIssueDropDownRestrictionsAdded",actionSubject:"dropdown",action:"clicked",attributes:{location:"global-issue-create",projectKey:e}})},this.unselect=function(){o.sendUIEvent({source:"createIssueModal",actionSubjectId:"restrictIssueDropDownRestrictionsRemoved",actionSubject:"dropdown",action:"clicked",attributes:{location:"global-issue-create",projectKey:e}})},this.$select=AJS.$("#issuerestriction-multi-select"),this.$select.bind("selected",this.selected),this.$select.bind("unselect",this.unselect)),AJS.$(this).attr("select2","true")})})}n.bind(s.NEW_CONTENT_ADDED,function(e,t,s){s!==i.panelRefreshed&&r(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers"),require("jira/field/init-multi-role-pickers");;
;
/* module-key = 'jira.webresources:team-pickers', location = '/includes/jira/field/team/utils.js' */
define("jira/field/team/utils",["jquery","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor"],function(e,a,i){return{formatResponse:function(e){const t=new i({weight:1,label:"Suggestions"});return e.forEach(function(e){t.addItem(new a({value:e.id.replace(/^ari:cloud:teams::team\//,"").replace(/^ari:cloud:identity::team\//,""),label:e.displayName,html:e.displayName,icon:e.smallAvatarImageUrl,allowDuplicate:!1,highlighted:!0}))}),[t]}}});;
;
/* module-key = 'jira.webresources:team-pickers', location = '/includes/jira/field/team/initPickers.js' */
define("jira/field/team/init-pickers",["jquery","jira/ajs/select/single-select","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/team/utils","jira/analytics/web-client","jira/featureflags/feature-manager"],function(e,t,n,a,i,s,c,r,o){function u(e){const t="/gateway/api/graphql",n="query orgId($cloudIds: [ID!]) { tenantContexts(cloudIds: $cloudIds) { orgId } }";return fetch(t,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:n,variables:{cloudIds:[e]}})}).then(function(e){return e.ok?e.json():null}).catch(function(e){return null})}function l(a,i){const s=a?"/gateway/api/v3/teams/search":"/gateway/api/teams/v2/search",o={url:s,query:!0,data:function(e){return{limit:20,q:e,organizationId:a}},formatResponse:c.formatResponse},u={itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:o};i.find(".js-default-team-picker").each(function(){const a=this;e(this).is("[multiple]")?new n(Object.assign({element:a},u)):new t(Object.assign({element:a},u));var i=!1;e(a).change(function(){i=!0,r.sendUIEvent({source:"QuickCreateIssue",actionSubject:"userPicker",action:"clicked",attributes:{context:"team"}})});const s=e(a).parent().find("input");e(s).focus(function(){i=!1}),e(s).blur(function(){i||r.sendUIEvent({source:"QuickCreateIssue",actionSubject:"userPicker",action:"cancelled",attributes:{context:"team"}})})})}s.bind(i.NEW_CONTENT_ADDED,function(e,t,n){var i,s=o.isFeatureEnabled("platform.teams.use-v3-api",!1),c=AJS.Meta.get("cloud-id");n!==a.panelRefreshed&&(s?u(c).then(function(e){e&&e.data&&e.data.tenantContexts&&(i=e.data.tenantContexts[0].orgId),l(i,t)}):l(i,t))})});;
;
/* module-key = 'jira.webresources:ie-imitation-placeholder', location = '/includes/jira/field/IEImitationPlaceholder.js' */
require(["jquery"],function(e){e.fn.ieImitationPlaceholder=function(){function a(){var a=e(this);""===a.val()&&(a.val(a.attr("placeholder")),a.addClass("input-placeholder"))}function l(){var a=e(this);a.val()===a.attr("placeholder")&&(a.val(""),a.removeClass("input-placeholder"))}function i(){t.each(l)}if(e.browser.msie){var r=this,t=r.find("[placeholder]");t.focus(l),t.blur(a),r.submit(i),t.each(a)}}});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/ProjectIssueTypeSelect.js' */
define("jira/field/project-issue-type-select",["jira/lib/class"],function(e){return e.extend({init:function(e){var s,t=this;this.$project=e.project,this.issueTypeSelect=e.issueTypeSelect,this.$projectIssueTypesSchemes=e.projectIssueTypesSchemes,this.$issueTypeSchemeIssueDefaults=e.issueTypeSchemeIssueDefaults,this.$defaultIssueTypes=e.defaultIssueTypes,this.projectIssueTypeSchemes=JSON.parse(this.$projectIssueTypesSchemes.html()),this.issueTypesSchemeDefaults=JSON.parse(this.$issueTypeSchemeIssueDefaults.html()||"[]"),this.defaultIssueTypes=JSON.parse(this.$defaultIssueTypes.html()||"[]"),t.$project.length>0&&(s=t.$project.val(),0===t.$projectIssueTypesSchemes.length?t.setIssueTypeForProject(s):t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(s)),this.$project.change(function(){var e=t.$project.val();0===t.$projectIssueTypesSchemes.length?t.setIssueTypeForProject(e):t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(e))}))},getIssueTypeSchemeForProject:function(e){return this.projectIssueTypeSchemes[e]},getDefaultIssueTypeForProject:function(e){return this.defaultIssueTypes[e]},getDefaultIssueTypeForProjectWithSchemeId:function(e){return this.issueTypesSchemeDefaults[e]},setIssueTypeForProject:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueTypeWithProjectId(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setIssueTypeScheme:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueType(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setDefaultIssueTypeWithProjectId:function(e){var s=this.getDefaultIssueTypeForProject(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)},setDefaultIssueType:function(e){var s=this.getDefaultIssueTypeForProjectWithSchemeId(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)}})}),AJS.namespace("JIRA.ProjectIssueTypeSelect",null,require("jira/field/project-issue-type-select"));;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectIssueTypeSelect.js' */
define("jira/field/init-project-issue-type-select",["jira/ajs/select/suggestion-collection-model","jquery","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/project-issue-type-select"],function(e,t,s,i,l,r,d){function n(i){var l=i||t("body");l.find(".issuetype-field").each(function(i){var r=l.find(".project-field, .project-field-readonly"),n=t(this),a=l.find("#"+n.attr("id")+"-projects"),o=l.find("#"+n.attr("id")+"-defaults"),p=l.find(".qf-field.qf-field-issuetype"),u=l.find("input#request-or-issue-type-field"),f=l.find("div#request-or-issue-type-field-options");if(u.length){var c=new s({element:u,revertOnInvalid:!0,model:e});p.hide(),u.data("options",f.data("suggestions"));var y=l.find("input.request-type-field"),j=c.model.selectedDescriptors&&c.model.selectedDescriptors[0];j&&(y.attr("value",j.properties.payload.requestTypeKey),n.attr("value",j.properties.payload.issueTypeId))}else{var v=new s({element:n,revertOnInvalid:!0,model:e});v.model.remove(""),r.length>0&&new d({project:r.eq(i),issueTypeSelect:v,projectIssueTypesSchemes:a,issueTypeSchemeIssueDefaults:o,defaultIssueTypes:o})}})}r.bind(l.NEW_CONTENT_ADDED,function(e,t,s){s!==i.panelRefreshed&&n(t)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initIssueTypePickers.js' */
;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectPickers.js' */
define("jira/field/init-project-pickers",["jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t,l){function s(n){n.find(".project-field").each(function(){new e({element:this,revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:i})})}l.bind(t.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/init/init-jira-project-issuetype-fields-webresource.js' */
require("jira/field/init-project-issue-type-select"),require("jira/field/init-project-pickers");;
;
/* module-key = 'jira.webresources:jira-fields', location = 'includes/jira/field/field-templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),JIRA.Templates.Fields.username=function(e,s){return""+(e.escape?soy.$$escapeHtml(e.displayName):soy.$$filterNoAutoescape(e.displayName))},JIRA.Templates.Fields.recipientUsername=function(e,s){return'<li data-username="'+soy.$$escapeHtml(e.username)+'" title='+soy.$$escapeHtml(e.username)+'><span><span class="user-hover" rel="'+soy.$$escapeHtml(e.username)+'"><img alt="" src="'+soy.$$escapeHtml(e.icon)+'" title="'+JIRA.Templates.Fields.username(e)+'"><span title="'+JIRA.Templates.Fields.username(e)+'">'+JIRA.Templates.Fields.username(e)+"</span></span>"+(e.readOnly?"":'<button type="button" class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml(AJS.format("Remove watcher: {0}",e.username))+"</span></button>")+"</span></li>"},JIRA.Templates.Fields.recipientEmail=function(e,s){return'<li data-email="'+soy.$$escapeHtml(e.email)+'" title='+soy.$$escapeHtml(e.email)+'><span><img src="'+soy.$$escapeHtml(e.icon)+'" title="'+soy.$$escapeHtml(e.email)+'"><span title="'+soy.$$escapeHtml(e.email)+'">'+soy.$$escapeHtml(e.email)+'</span><span class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete"></span></span></span></li>'};;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/util/formatter","jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery"],function(e,t,i,s,a,l){var n=a();return t.extend({_getDefaultOptions:function(){return l.extend(!0,this._super(),{ajaxOptions:{url:n+"/includes/js/ajs/layer/labeldata.js",query:!0,formatResponse:this._formatResponse},removeDuplicates:!0,removeOnUnSelect:!0,userEnteredOptionsMsg:"New Label"})},isValidItem:function(e){return!/\s/.test(e)},_handleServerSuggestions:function(e){e&&e.token&&l.trim(this.$field.val())!==e.token||this._super(e)},_handleSpace:function(){""!==l.trim(this.$field.val())&&this.handleFreeInput()&&this.hideSuggestions()},keys:{Spacebar:function(e){this._handleSpace(),e.preventDefault()}},_formatResponse:function(t){var a=new i({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});return t&&t.suggestions&&l.each(t.suggestions,function(){a.addItem(new s({value:this.label,label:this.label,html:this.html,highlighted:!0}))}),[a]},handleFreeInput:function(){var e=l.trim(this.$field.val()).match(/\S+/g);if(e){for(var t,i=0;t=e[i];i++)this.addItem({value:t,label:t});this.model.$element.trigger("change")}this.$field.val("")}})}),AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker")),AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPickerFactory.js' */
define("jira/field/label-picker-factory",["jira/field/label-picker","jira/data/parse-options-from-fieldset","jquery","exports"],function(e,i,t,a){a.createPicker=function(a,r){var s=i(a),d=t("#"+s.id,r),l=s.issueId,c={};/customfield_\d/.test(s.id)&&(c.customFieldId=parseInt(s.id.replace("customfield_",""),10)),new e({element:d,ajaxOptions:{url:contextPath+"/rest/api/1.0/labels"+(l?"/"+l:"")+"/suggest",data:c}})}});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.Item.js' */
define("jira/field/multi-user-list-picker/item",["jira/util/data/meta","jira/ajs/control","jquery"],function(e,t,i){return t.extend({init:function(e){this._setOptions(e),this.$lozenge=this._render("item"),this.$removeButton=this.$lozenge.find(".remove-recipient"),this._assignEvents("instance",this),this._assignEvents("lozenge",this.$lozenge),this._assignEvents("removeButton",this.$removeButton),this.$lozenge.prependTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{item:function(){var t,n=this.options.descriptor;return n.noExactMatch()!==!0?(t={escape:!1,username:n.value(),icon:n.icon(),displayName:AJS.escapeHtml(n.label())},i(JIRA.Templates.Fields.recipientUsername(t))):(t={email:n.value(),icon:e.get("default-avatar-url")},i(JIRA.Templates.Fields.recipientEmail(t)))}},_events:{instance:{remove:function(){this.$lozenge.remove()}},removeButton:{click:function(e){e.stopPropagation(),this.trigger("remove")}}}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.js' */
define("jira/field/multi-user-list-picker",["jira/util/formatter","jira/field/multi-user-list-picker/item","jira/ajs/select/suggestions/user-list-suggest-handler","jira/ajs/select/multi-select","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jira/ajs/group","jquery"],function(e,t,i,r,s,n,a,l){return r.extend({init:function(r){function u(e){var t=[];return l(e).each(function(e,i){var r=new n({weight:e,label:i.footer});l(i.users).each(function(){r.addItem(new s({value:this.accountId,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),t.push(r)}),t}var o="/rest/api/1.0/users/picker";l.extend(r,{itemAttrDisplayed:"label",userEnteredOptionsMsg:"Email address",showDropdownButton:!1,removeOnUnSelect:!0,ajaxOptions:{url:contextPath+o,query:!0,headers:{"x-atlassian-force-account-id":!0},data:{showAvatar:!0},formatResponse:u},suggestionsHandler:i,itemGroup:new a,itemBuilder:function(e){return new t({descriptor:e,container:this.$selectedItemsContainer})}}),this._super(r)},_createFurniture:function(e){this._super(e),this.options.description&&this._render("description",this.options.description).insertAfter(this.$field)},updateItemsIndent:l.noop,_renders:{selectedItemsWrapper:function(){return l('<div class="recipients" />')},selectedItemsContainer:function(){return l("<ol />")},description:function(e){return l("<div />").addClass("description").text(e)}}})}),AJS.namespace("JIRA.MultiUserListPicker",null,require("jira/field/multi-user-list-picker")),AJS.namespace("JIRA.MultiUserListPicker.Item",null,require("jira/field/multi-user-list-picker/item"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCascadingSelects.js' */
define("jira/field/init-cascading-selects",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function a(i){e(i||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each(function(){function i(){var i,n=t.find("option:selected").attr("class");n!==a&&(i=e("<span />").insertAfter(d),d.detach(),d.find("option").each(function(e,i){i.parentNode.removeChild(this)}),d.insertAfter(i),i.remove(),c.filter("."+t.find("option:selected").attr("class")).appendTo(d),s.hasClass(t.find("option:selected").attr("class"))?d.val(s.val()):d.val(d.find("option:first").val()),a=n)}var n=e(this),t=n.find(".cascadingselect-parent"),a=(t.find("option"),""),d=n.find(".cascadingselect-child"),c=d.find("option"),s=d.find(":selected");t.bind("cascadingSelectChanged",i).change(function(){e(this).trigger("cascadingSelectChanged")}).trigger("cascadingSelectChanged")})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&a(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/ComponentPicker.js' */
define("jira/field/component-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,n,s,i,r){return s.extend({init:function(e){this._super(e),this.suggestionsHandler=new n(this.options,this.model)},_getDefaultOptions:function(t){var n=!1;return t&&t.element&&(n=r(t.element).data("create-permission")),n?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Component"}):this._super(t)},_selectionHandler:function(e,n){var s=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor"),o=i.find(s,function(e){return e.label()===r.label()});o||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Component.new.selected",[r.value()])),this._super(e,n)}})}),AJS.namespace("JIRA.ComponentPicker",null,require("jira/field/component-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initComponentPickers.js' */
define("jira/field/init-component-pickers",["jira/field/component-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,n,r,t,i,o){function l(r){new e({element:r,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid component.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var n,r=o(e);return n=r.is("select")?r:r.find("select")}function c(e,n){n=n||s.join(", "),o(n,e).each(function(){var e=a(this);e.length&&l(e)})}var s=["div.aui-field-componentspicker.frother-control-renderer","td.aui-field-componentspicker.frother-control-renderer","tr.aui-field-componentspicker.frother-control-renderer"];r.bind(t.NEW_CONTENT_ADDED,function(e,n,r){r!==i.panelRefreshed&&c(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initMultiselectPickers.js' */
define("jira/field/init-multi-select-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/util/formatter"],function(e,t,i,n,l,r){function s(e){new t({element:e,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,submitInputVal:!0,expandAllResults:!0})}function a(t){var i,n=e(t);return i=n.is("select")?n:n.find("select")}function u(t,i){i=i||c.join(", "),e(i,t).each(function(){var e=a(this);e.length&&s(e)})}var c=["div.aui-field-multiselectpicker.frother-control-renderer"];l.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initDatePickers.js' */
define("jira/field/init-date-pickers",["jquery","jira/data/parse-options-from-fieldset","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,t,d,n){function a(t){e(t||document.body).find("div.aui-field-datepicker").add("tr.aui-field-datepicker").add("td.aui-field-datepicker").each(function(){function d(){a.prop("disabled",r.is(":checked"))}var n=e(this),a=n.find("input:text"),r=n.find("#useCurrentDate"),f=i(n.find("fieldset.datepicker-params"));f.context=t,Calendar.setup(f),r.length&&(d(),r.click(d))})}n.bind(d.NEW_CONTENT_ADDED,function(e,i,d){d!==t.panelRefreshed&&a(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLegacyGroupPickers.js' */
define("jira/field/init-legacy-group-pickers",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,r,t){function n(i){e(i||document.body).find("div.aui-field-grouppicker").add("tr.aui-field-grouppicker").add("td.aui-field-grouppicker").each(function(){function i(e){e.preventDefault(),window.open(n,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes")}var r=e(this),t=r.find("a.grouppicker-trigger"),n=t.attr("href");t.click(i)})}t.bind(r.NEW_CONTENT_ADDED,function(e,r,t){t!==i.panelRefreshed&&n(r)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initIssuePickers.js' */
define("jira/field/init-issue-pickers",["jira/field/issue-picker","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/util/formatter"],function(e,i,n,t,s,r){function u(i){s(i||document.body).find(".aui-field-issuepicker").each(function(){new e({element:s(this),userEnteredOptionsMsg:"Enter issue key",uppercaseUserEnteredOnSelect:!0})})}i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&u(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLabelPickers.js' */
define("jira/field/init-label-pickers",["jira/field/label-picker-factory","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,a){function t(e){var i,n=a(e);return i=n.is(c)?n:n.find(c)}function l(i,n){n=n||".aui-field-labelpicker",a(n,i).each(function(){var n=t(this);n.length>0&&e.createPicker(n,i)})}var c="fieldset.labelpicker-params";i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==r.panelRefreshed&&l(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/VersionPicker.js' */
define("jira/field/version-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,s,i,n,r){return i.extend({init:function(e){this._super(e),this.suggestionsHandler=new s(this.options,this.model)},_getDefaultOptions:function(t){var s=!1;return t&&t.element&&(s=r(t.element).data("create-permission")),s?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Version"}):this._super(t)},_selectionHandler:function(e,s){var i=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor"),l=n.find(i,function(e){return e.label()===r.label()});l||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Version.new.selected",[r.value()])),this._super(e,s)}})}),AJS.namespace("JIRA.VersionPicker",null,require("jira/field/version-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initVersionPickers.js' */
define("jira/field/init-version-pickers",["jira/field/version-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,t,s){function l(n){new e({element:n,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid version.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var i,n=s(e);return i=n.is("select")?n:n.find("select")}function o(e,i){i=i||".aui-field-versionspicker.frother-control-renderer",s(i,e).each(function(){var e=a(this);e.length&&l(e)})}n.bind(r.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&o(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCommentControls.js' */
define("jira/field/init-comment-controls",["jira/skate","jira/ajs/select/security-level-select","jira/wikipreview/wiki-preview"],function(e,i,t){e("jira-wikifield",{type:e.type.CLASSNAME,created:function(e){var i={fieldId:e.getAttribute("field-id"),trigger:e.querySelector(".wiki-preview").id,issueKey:e.getAttribute("issue-key"),rendererType:e.getAttribute("renderer-type")};t(i,e).init()}}),e("security-level",{type:e.type.CLASSNAME,created:function(e){var t=e.querySelector("#commentLevel");t&&new i(t)}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLogWorkControls.js' */
define("jira/field/init-log-work-controls",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,t,a,i){function n(e,t){var a=i(e).find("#worklog-logworkcontainer"),n=i(e).find("#worklog-timetrackingcontainer"),d=i(e).find("#log-work-activate");t?(a.removeClass("hidden"),n.addClass("hidden"),d.prop("checked",!0)):(a.addClass("hidden"),n.removeClass("hidden"),d.prop("checked",!1))}function d(e){i("#log-work-adjust-estimate-new-value, #log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked",e).val()+"-value",e).removeAttr("disabled"),i("input[name=worklog_adjustEstimate],input[name=adjustEstimate]",e).change(function(){i("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i(this).val()+"-value",e).removeAttr("disabled")}),i("#delete-log-work-adjust-estimate-new-value").change(function(){i("#delete-log-work-adjust-estimate-new").prop("checked",!0)}),i("#delete-log-work-adjust-estimate-manual-value").change(function(){i("#delete-log-work-adjust-estimate-manual").prop("checked",!0)}),i(e).find("#log-work-activate").change(function(){n(e,i(this).is(":checked"))})}e.bind(t.VALIDATE_TIMETRACKING,function(e,t){n(t,!0)}),e.bind(t.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&d(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initPriorityPickers.js' */
define("jira/field/init-priority-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function r(i){i.find("select#priority").each(function(i,n){new e({element:n,revertOnInvalid:!0})})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&r(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initParentPickers.js' */
define("jira/field/init-parent-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,n,i,t){function s(n){n.find("select#parent").each(function(n,i){new e({element:i,revertOnInvalid:!0})})}t.bind(i.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initInlineAttach.js' */
define("jira/field/init-inline-attach",["jquery","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/analytics","jira/jquery/plugins/attachment/inline-attach"],function(i,n,e,t,a){function r(i){i.find("input[type=file]:not('.ignore-inline-attach')").inlineAttach()}n.bind(e.NEW_CONTENT_ADDED,function(i,n,e){if(e!==t.panelRefreshed)try{r(n)}catch(i){a.send({name:"field.inline.attach.error",properties:{reason:i}})}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/issue/initIssueFields.js' */
require(["jira/skate","jira/ajs/select/single-select","jira/ajs/select/multi-select","jira/util/formatter","jquery"],function(e,t,l,s,a){e("single-select-issue-field",{type:e.type.CLASSNAME,attached:function(e){a(e).hasClass("aui-ss-select")||new t({element:e,revertOnInvalid:!0})}}),e("multi-select-issue-field",{type:e.type.CLASSNAME,attached:function(e){a(e).hasClass("multi-select-select")||new l({element:e,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,expandAllResults:!0})}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/init/init-jira-fields-webresource.js' */
require("jira/field/init-cascading-selects"),require("jira/field/init-component-pickers"),require("jira/field/init-multi-select-pickers"),require("jira/field/init-date-pickers"),require("jira/field/init-legacy-group-pickers"),require("jira/field/init-issue-pickers"),require("jira/field/init-label-pickers"),require("jira/field/init-version-pickers"),require("jira/field/init-comment-controls"),require("jira/field/init-log-work-controls"),require("jira/field/init-priority-pickers"),require("jira/field/init-parent-pickers"),require("jira/field/init-inline-attach");try{const featureManager=require("jira/featureflags/feature-manager");featureManager.isFeatureEnabled("jira.teams.enable-new-custom-field-types")&&require("jira/field/team/init-pickers")}catch(i){const logger=require("jira/util/safe-logger");logger.safeError("webapp-webresources.init-jira-fields","Failed to require jira/field/team/init-pickers")};
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'jira-quick-edit-plugin/soy/quickform.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.QuickForm&&(JIRA.Templates.QuickForm={}),JIRA.Templates.QuickForm.field=function(e,i){return""+soy.$$filterNoAutoescape(e.editHtml)},JIRA.Templates.QuickForm.fieldPicker=function(e,i){return'<div class="qf-picker"><div class="qf-picker-header"><dl><dt>'+soy.$$escapeHtml("Show Fields:")+"</dt>"+(e.isConfigurable?'<dd><a class="qf-unconfigurable" href="#">'+soy.$$escapeHtml("All")+"</a></dd><dd>"+soy.$$escapeHtml("Custom")+"</dd>":"<dd>"+soy.$$escapeHtml("All")+'</dd><dd><a class="qf-configurable" href="#">'+soy.$$escapeHtml("Custom")+"</a></dd>")+'<div class="whereismycf-qfpicker-link" id="qf-picker-custom-link"></div></dl></div><div class="qf-picker-content '+(e.isConfigurable?"":"qf-picker-unconfigurable")+'"></div><div class="qf-picker-footer"></div></div>'},JIRA.Templates.QuickForm.configurablePickerButton=function(e,i){return'<a title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</a>"},JIRA.Templates.QuickForm.unconfigurablePickerButton=function(e,i){return'<span title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</span>"},JIRA.Templates.QuickForm.errorMessage=function(e,i){return""+aui.message.error({closeable:"true",content:e.message})};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'jira-quick-edit-plugin/soy/issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.editIssueError=function(e,t){return"<h2>"+soy.$$escapeHtml("Edit issue")+'</h2><div class="form-body">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.editIssueForm=function(e,t){return'<form action="#" name="jiraform" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+soy.$$filterNoAutoescape(e.title)+'</h2><div class="form-body"><input type="hidden" name="id" value="'+soy.$$escapeHtml(e.issueId)+'"/><input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"/><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"/><input type="hidden" name="pid" value="'+soy.$$escapeHtml(e.pid)+'"/><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+(e.commentField?soy.$$filterNoAutoescape(e.commentField.editHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons"><input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="edit-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Update")+'"/><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.fieldConfigurationToolbar=function(e,t){return""+aui.toolbar2.toolbar2({extraClasses:"qf-form-operations",content:""+aui.toolbar2.item({item:"secondary",content:""+aui.buttons.button({text:" "+soy.$$escapeHtml("Configure fields"),id:"qf-field-picker-trigger",extraClasses:"toolbar-trigger",iconText:"Configure fields",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-configure"})})})},JIRA.Templates.Issue.issueFields=function(e,t){var s="";if(e.hasTabs){s+='<div class="aui-tabs horizontal-tabs" id="horizontal"><ul class="tabs-menu">';for(var o=e.tabs,a=o.length,i=0;i<a;i++){var l=o[i];s+=l?'<li class="menu-item '+(l.isFirst?"first active-tab":"")+' "><a href="#tab-'+soy.$$escapeHtml(l.position)+'"><strong>'+soy.$$escapeHtml(l.label)+"</strong></a></li>":""}s+="</ul>";for(var n=e.tabs,r=n.length,c=0;c<r;c++){var u=n[c];if(u){s+='<div class="tabs-pane '+(u.isFirst?"active-pane":"")+'" id="tab-'+soy.$$escapeHtml(u.position)+'">';for(var m=u.fields,d=m.length,f=0;f<d;f++){var p=m[f];s+=p.editHtml?soy.$$filterNoAutoescape(p.editHtml):""}s+="</div>"}}s+="</div>"}else for(var $=e.fields,y=$.length,I=0;I<y;I++){var v=$[I];s+=v.editHtml?soy.$$filterNoAutoescape(v.editHtml):""}return s},JIRA.Templates.Issue.createIssueForm=function(e,t){var s='<form name="jiraform" action="#" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+'<button class="aui-button" id="import-issues">'+soy.$$escapeHtml("Import issues")+"</button>"+soy.$$escapeHtml(e.title)+'</h2><div class="form-body">';if(e.issueSetupFields){s+='<div class="issue-setup-fields">';for(var o=e.issueSetupFields,a=o.length,i=0;i<a;i++){var l=o[i];s+='<div class="qf-field qf-field-'+soy.$$escapeHtml(l.id)+' qf-required" data-field-id="'+soy.$$escapeHtml(l.id)+'">'+soy.$$filterNoAutoescape(l.editHtml)+"</div>"}s+="</div>"}return s+=(e.parentIssueId?'<input type="hidden" name="parentIssueId" value="'+soy.$$escapeHtml(e.parentIssueId)+'"/>':"")+'<input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"/><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"/><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons">'+(e.disallowCreateAnother?"":'<label for="qf-create-another" class="qf-create-another"><input id="qf-create-another" type="checkbox"'+(e.multipleMode?'checked="checked"':"")+" />"+soy.$$escapeHtml("Create another")+"</label>")+'<input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="create-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Create")+'"/><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.checkBoxField=function(e,t){return'<fieldset class="group"><legend><span></span></legend><div class="checkbox"><input class="checkbox" type="checkbox" name="'+soy.$$escapeHtml(e.name)+'" id="'+soy.$$escapeHtml(e.name)+'" value="true" '+(e.checked?"checked":"")+'><label for="'+soy.$$escapeHtml(e.name)+'">'+soy.$$escapeHtml(e.label)+"</label></div></fieldset>"},JIRA.Templates.Issue.createIssueError=function(e,t){return"<h2>"+soy.$$escapeHtml("Create issue")+'</h2><div class="form-footer">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.undealtErrors=function(e,t){for(var s="<div>"+soy.$$escapeHtml("There were some errors when trying to create this issue")+"</div><ul>",o=e.errors,a=o.length,i=0;i<a;i++){var l=o[i];s+="<li>"+soy.$$escapeHtml(l)+"</li>"}return s+="</ul>"};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/templates/form.js' */
define("quick-edit/templates/form",function(){return JIRA.Templates.QuickForm});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/templates/issue.js' */
define("quick-edit/templates/issue",function(){return JIRA.Templates.Issue});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/extension-mixin.js' */
define("quick-edit/util/extension-mixin",["jquery"],function(e){"use strict";var t=function(t,i,n){return e(this).trigger(t,i),n&&this.globalEventNamespaces&&e.each(this.globalEventNamespaces,function(n,r){e(document).trigger(r+"."+t,i)}),this};return{triggerEvent:t}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/class.js' */
define("quick-edit/util/class",["quick-edit/util/extension-mixin","jira/lib/class"],function(i,e){return e.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/control.js' */
define("quick-edit/util/control",["quick-edit/util/extension-mixin","jira/ajs/control"],function(i,n){return n.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/dialog.js' */
define("quick-edit/util/dialog",["jira/dialog/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,i,t){"use strict";var u=JIRA.Issues,s=function(i){var t=e.current,u=t.$activeTrigger;if(u)return u.attr(i)},r=function(){var e=s("data-issueKey");return!e&&i.getIssueKey()&&(e=i.getIssueKey()),!e&&t.getSelectedIssueKey()&&(e=t.getSelectedIssueKey()),!e&&u&&(e=u.Api.getSelectedIssueKey()),e},a=function(e){var i=r();return i?e+": "+i:e},g=function(){return u||t.isNavigator()||s("data-issueKey")};return{getActionIssueKey:r,getAttrFromActiveTrigger:s,getIssueActionTitle:a,shouldShowIssueKeyInTitle:g}}),AJS.namespace("JIRA.Dialog.getActionIssueKey",null,require("quick-edit/util/dialog").getActionIssueKey),AJS.namespace("JIRA.Dialog.getAttrFromActiveTrigger",null,require("quick-edit/util/dialog").getAttrFromActiveTrigger),AJS.namespace("JIRA.Dialog.getIssueActionTitle",null,require("quick-edit/util/dialog").getIssueActionTitle),AJS.namespace("JIRA.Dialog.shouldShowIssueKeyInTitle",null,require("quick-edit/util/dialog").shouldShowIssueKeyInTitle);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/jira.js' */
define("quick-edit/util/jira",["quick-edit/templates/issue","jira/util/data/meta","aui/message","jquery"],function(e,r,t,a){"use strict";var i=function(e){var r,t,a,i=e.closest(".tabs-pane");i.length&&(t=i.closest(".aui-tabs"),r=i.attr("id"),a=t.find("a[href='#"+r+"']"),a.click())},s=function(e,r){u("error",e,AJS.escapeHtml(r),!1)},n=function(e,r){u("error",e,r,!1)},o=function(r,t){var s,o=[];a.each(t,function(e,t){var i,n,u=r.find(":input[name='"+e+"']").last();1===u.length?(s||(s=u),n=a("<div class='error' />").attr("data-field",e).text(t),i=u.closest(".field-group, .group"),i.find(".error").remove(),i.append(n)):0===u.length&&o.push(t)}),o.length>0&&n(r,e.undealtErrors({errors:o})),i(r.find(".error:first")),s&&s.focus()},u=function(e,r,i,s){var n=r.find(".aui-message-context");n.length||(n=a("<div class='aui-message-context' />"),n.prependTo(r.find(".form-body"))),n.empty(),t[e](n,{shadowed:!1,closeable:s,body:i})},c=function(e,r){return u("success",e,r,!0)},l=function(e){var r=a(e);return{html:r.not("script"),scripts:r.filter("script")}},p=function(e){return a.isFunction(e)?e:function(){return e}},d=function(){return r.get("keyboard-accesskey-modifier")},m=function(e){var r=JSON.parse(a('meta[name="ajs-product-editions"]').attr("content"));switch(r[e]){case"f":return"jedi";case"s":return"standard";case"p":return"premium";default:return"unlicensed"}},f=function(e){switch(e){case"business":return"jira-core";case"software":return"jira-software";case"service_desk":return"jira-servicedesk";default:return"unknown"}};return{activateTabWithChild:i,applyErrorMessageToForm:s,applyErrorMessageWithHTMLToForm:n,applyErrorsToForm:o,applyMessageToForm:u,applySuccessMessageToForm:c,getModifierKey:d,extractScripts:l,makePropertyFunc:p,getEdition:m,getApplication:f}}),AJS.namespace("JIRA.activateTabWithChild",null,require("quick-edit/util/jira").activateTabWithChild),AJS.namespace("JIRA.applyErrorMessageWithHTMLToForm",null,require("quick-edit/util/jira").applyErrorMessageWithHTMLToForm),AJS.namespace("JIRA.applyErrorMessageToForm",null,require("quick-edit/util/jira").applyErrorMessageToForm),AJS.namespace("JIRA.applyErrorsToForm",null,require("quick-edit/util/jira").applyErrorsToForm),AJS.namespace("JIRA.applyMessageToForm",null,require("quick-edit/util/jira").applyMessageToForm),AJS.namespace("JIRA.applySuccessMessageToForm",null,require("quick-edit/util/jira").applySuccessMessageToForm),AJS.namespace("JIRA.extractScripts",null,require("quick-edit/util/jira").extractScripts),AJS.namespace("JIRA.makePropertyFunc",null,require("quick-edit/util/jira").makePropertyFunc);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/util/hierarchy.js' */
define("quick-edit/util/hierarchy",[],function(){"use strict";var e=function(e){return{id:Number(e.id),aboveLevelId:e.aboveLevelId?Number(e.aboveLevelId):null,belowLevelId:e.belowLevelId?Number(e.belowLevelId):null}},l=function(l){return l.reduce(function(l,u){return l[u.id]=e(u),l},{})},u=function(e){var u=e.baseLevelId||null,n=e.sameLevelId||null,r=l(e.levels);if(!n||!u||void 0===r[n]||void 0===r[u])return null;if(n===u)return 0;for(var v=0,i=r[n].aboveLevelId,d=r[n].belowLevelId;null!==i||null!==d;){if(v+=1,i===u)return-v;if(d===u)return v;if(i=null!==i&&r[i]?r[i].aboveLevelId:null,d=null!==d&&r[d]?r[d].belowLevelId:null,i===n||d===n)return null}return null};return{getIssueTypeLevel:u}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/field/configurable.js' */
define("quick-edit/form/field/configurable",["quick-edit/util/jira","quick-edit/util/control","quick-edit/templates/form","jira/util/events","jira/util/events/types","jquery"],function(e,t,i,r,n,s){"use strict";return t.extend({init:function(e){this.descriptor=e,this.$element=s("<div />").attr("id","qf-field-"+this.getId())},focus:function(){this.$element.find(":input:first").focus()},highlight:function(){var e=this;this.$element.css("backgroundColor","#fff").animate({backgroundColor:"lightyellow"},function(){e.$element.animate({backgroundColor:"#fff"},function(){e.$element.css("backgroundColor","")})})},getLabel:function(){return this.descriptor.label},getId:function(){return this.descriptor.id},activate:function(e){var t;this.active=!0,this.$element.addClass("qf-field-active").show(),this.$element.find("textarea").trigger("refreshInputHeight"),e||(t=this.render(),this.$element.append(t.scripts),this.focus(),r.trigger(n.NEW_CONTENT_ADDED,[this.$element]),this.$element.scrollIntoView(),this.triggerEvent("activated"))},hasVisibilityFeature:function(){return!!this.descriptor.hasVisibilityFeature},hasRetainFeature:function(){return!!this.descriptor.hasRetainFeature},isActive:function(){return this.active},disable:function(e){this.render(),this.active=!1,this.$element.removeClass("qf-field-active").hide(),e||this.triggerEvent("disabled")},render:function(){var t=i.field(this.descriptor),r=e.extractScripts(t);return this.$element.html(r.html).addClass("qf-field").data("model",this),{element:this.$element,scripts:r.scripts}}})}),AJS.namespace("JIRA.Forms.ConfigurableField",null,require("quick-edit/form/field/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/model/model.js' */
define("quick-edit/form/model",["quick-edit/util/class","jira/util/data/meta","jira/util/objects","jira/ajs/ajax/smart-ajax","jquery"],function(e,i,t,s,r){"use strict";return e.extend({init:function(e){this.userFieldsResource=e.userFieldsResource,this.fieldsResource=e.fieldsResource,this.retainedFields=[],this._hasRetainFeature=!1,this._hasVisibilityFeature=!0,this.headers={}},getFieldsResource:function(){return this.fieldsResource},getAtlToken:function(){return this.atlToken},getPid:function(){return this.pid},isSimplified:function(){return this.simplified},getFormToken:function(){return this.formToken},getActiveFieldIds:function(){return this.getUserFields()},addFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");this.removeFieldToRetainValue(e),this.retainedFields.push(e)},serializePreFilledFields:function(e){return r.param(r.extend(e,{preFillFields:!0}))},clearRetainedFields:function(){this.retainedFields=[]},removeFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");var i=r.inArray(e,this.retainedFields);i!=-1&&this.retainedFields.splice(i,1)},getFieldsWithRetainedValues:function(){if(this._hasRetainFeature)return this.retainedFields;throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},hasRetainedValue:function(e){if(this._hasRetainFeature)return r.inArray(e.id,this.retainedFields)!==-1;throw new Error("HasRetainedValue: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},refresh:function(e){var i,t=this,n=r.Deferred();return e&&(i=e+"&retainValues=true"),!i&&this.preFilledFields&&(i=this.serializePreFilledFields(this.preFilledFields)),s.makeRequest({url:this.getFieldsResource(),type:"POST",data:i,headers:this.headers,success:function(e){t._update(e)},complete:function(e,i,s){s.successful?n.resolveWith(t,arguments):(t.triggerEvent("serverError",[s]),n.rejectWith(t,[s]))}}),n.promise()},_update:function(e){this.atlToken=e.atl_token,this.formToken=e.formToken,this.pid=e.pid,this.simplified=e.simplified,this.fields=e.fields,this.sortedTabs=e.sortedTabs,this.userPreferences=e.userPreferences},setFields:function(e){this.fields=e},getConfigurableFields:function(){return this.getFields()},getFields:function(){var e=this,i=r.Deferred();return this.fields?i.resolve(e.fields):this.refresh().done(function(){i.resolve(e.fields)}),i.promise()},_mungeTabs:function(e){var i=0,s=[];return r.each(e,function(e,r){i++,r.tab&&(s[r.tab.position]||(s[r.tab.position]=t.copyObject(r.tab)),0===r.tab.position&&(s[r.tab.position].isFirst=!0),s[r.tab.position].fields||(s[r.tab.position].fields=[]),s[r.tab.position].fields.push(t.copyObject(r)))}),s},getTabs:function(){var e=this,i=r.Deferred();return this.getFields().done(function(t){var s=e._mungeTabs(t);i.resolve(s)}),i.promise()},getSortedTabs:function(){var e=r.Deferred();return this.sortedTabs?e.resolve(this.sortedTabs):this.refresh().done(function(){e.resolve(this.sortedTabs)}),e.promise()},getUserFields:function(){var e=this,i=r.Deferred();return this.userPreferences?i.resolve(e.userPreferences.fields):this.refresh().done(function(){i.resolve(e.userPreferences.fields)}),i.promise()},setUserFields:function(e){var i={};return i.fields=e,this.updateUserPrefs(i)},hasRetainFeature:function(){return!!this._hasRetainFeature},hasVisibilityFeature:function(){return!!this._hasVisibilityFeature},getUseConfigurableForm:function(){var e=this,i=r.Deferred();return this.userPreferences?i.resolve(e.userPreferences.useQuickForm):this.refresh().done(function(){i.resolve(e.userPreferences.useQuickForm)}).fail(function(){i.reject()}),i.promise()},setUseConfigurableForm:function(e){var i={};return i.useQuickForm=e,this.updateUserPrefs(i)},updateUserPrefs:function(e){var t=r.Deferred(),n=this;return""===i.get("remote-user")?(t.done(),t.promise()):this.userPreferences?(e.fields||(e.fields=this.userPreferences.fields),"undefined"==typeof e.showWelcomeScreen&&(e.showWelcomeScreen=this.userPreferences.showWelcomeScreen),"undefined"==typeof e.useQuickForm&&(e.useQuickForm=this.userPreferences.useQuickForm),s.makeRequest({url:this.userFieldsResource,type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json",headers:this.headers,complete:function(i,t,s){s.successful?n.userPreferences=e:n.triggerEvent("serverError",[s])}})):(t.reject(),t.promise())}})}),AJS.namespace("JIRA.Forms.Model",null,require("quick-edit/form/model"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/model/create-issue.js' */
define("quick-edit/form/model/create-issue",["quick-edit/form/model","wrm/context-path","jira/featureflags/feature-manager","underscore","jquery"],function(e,i,t,s,n){"use strict";return e.extend({DEFAULT_NON_RETAINED_FIELDS:["summary","description","timetracking","timetracking_originalestimate","timetracking_remainingestimate","worklog","worklog_startDate","worklog_timeLogged","worklog_newEstimate","worklog_adjustmentAmount","attachment"],CUSTOMFIELD_PATTERN:/^(customfield_(\d+))(?:|\:(?:\d+))$/,TIMETRACKING_PATTERN:/^timetracking_/,init:function(e){e=e||{},this.headers={"X-Atlassian-Capability":"LEGACY_ISSUE_CREATE"},this.userFieldsResource=i()+"/rest/quickedit/1.0/userpreferences/create",this._hasRetainFeature=!0,this._hasVisibilityFeature=!0,this.retainedFields=[],this.dirtyFields=[],this.initIssueType=e.issueType,this.initProjectId=e.projectId,this.parentIssueId=e.parentIssueId,this.itsmCategory=e.itsmCategory,this.preFilledFields=e.fields,this.nonRetainedFields=this.DEFAULT_NON_RETAINED_FIELDS,e.nonRetainedFields&&(this.nonRetainedFields=s.union(e.nonRetainedFields,this.DEFAULT_NON_RETAINED_FIELDS))},getParentIssueId:function(){return this.parentIssueId},isInMultipleMode:function(){return this.multipleMode},setIsMultipleMode:function(e){this.multipleMode=e},getActiveFieldIds:function(){var e=this,i=n.Deferred(),t=[];return this.getUserFields().done(function(s){n.each(s,function(e,i){t.push(i)}),e.getRequiredFields().done(function(e){n.each(e,function(e,i){n.inArray(i.id,t)===-1&&t.push(i.id)}),i.resolve(t)})}),i.promise()},hasVisibilityFeature:function(e){return!e.required},getFieldsResource:function(){var e=i()+"/secure/QuickCreateIssue!default.jspa?decorator=none";return this.parentIssueId?e+"&parentIssueId="+this.parentIssueId:(this.initIssueType&&(e=e+"&issuetype="+this.initIssueType,delete this.initIssueType),this.itsmCategory&&(e=e+"&itsmCategory="+this.itsmCategory,delete this.itsmCategory),this.initProjectId&&(e=e+"&pid="+this.initProjectId,delete this.initProjectId),e)},addFieldToRetainValue:function(e,i){var t=!s.contains(this.nonRetainedFields,e),n=null!==e.match(/^filetoconvert/);(t||n||i)&&this._super(e)},getRequiredFields:function(){var e=n.Deferred(),i=[];return this.getFields().done(function(t){n.each(t,function(e,t){t.required&&i.push(t)}),e.resolve(i)}),e.promise()},getConfigurableFields:function(){var e=n.Deferred(),i=[];return this.getFields().done(function(t){n.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id&&"com.atlassian.servicedesk:vp-origin"!==t.fieldType&&i.push(t)}),e.resolve(i)}),e.promise()},getIssueSetupFields:function(){var e=n.Deferred(),i=[];return this.getFields().done(function(t){n.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id&&"com.atlassian.servicedesk:vp-origin"!==t.fieldType||i.push(t)}),e.resolve(i)}),e.promise()},markFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e),this.fieldIsDirty(e)||this.dirtyFields.push(e)},unmarkFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e),this.dirtyFields=this.dirtyFields.filter(function(i){return i!==e})},fieldIsDirty:function(e){return s.contains(this.dirtyFields,e)},isCustomFieldId:function(e){return e&&!!e.match(this.CUSTOMFIELD_PATTERN)},doesFieldSupportDefaultValue:function(e){var i=["description","environment"];return!!(this.isSimplified()&&i.indexOf(e)>-1)||this.isCustomFieldId(e)},isTimetrackingFieldId:function(e){return e&&!!e.match(this.TIMETRACKING_PATTERN)},normalizeCustomFieldId:function(e){return this.isCustomFieldId(e)?e.match(this.CUSTOMFIELD_PATTERN)[1]:e},normalizeFieldParam:function(e,i){return"filetoconvert"==e?e+"-"+i:this.isCustomFieldId(e)?this.normalizeCustomFieldId(e):this.isTimetrackingFieldId(e)?"timetracking":e}})}),AJS.namespace("JIRA.Forms.CreateIssueModel",null,require("quick-edit/form/model/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/model/edit-issue.js' */
define("quick-edit/form/model/edit-issue",["quick-edit/form/model","underscore","jquery"],function(e,i,r){"use strict";return e.extend({getUnconfigurableTabs:function(){var e=this,i=r.Deferred();return e.getTabs().done(function(e){var n=e.slice(0);n[0].fields=n[0].fields.slice(0),r.each(n[0].fields,function(e,i){if("comment"===i.id)return n[0].fields.splice(e,1),!1}),i.resolve(n)}),i.promise()},getCommentField:function(){var e=r.Deferred();return this.getFields().done(function(i){r.each(i,function(i,r){"comment"===r.id&&e.resolve(r)}),e.reject()}),e.promise()}})}),AJS.namespace("JIRA.Forms.EditIssueModel",null,require("quick-edit/form/model/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/model/factory/edit-issue.js' */
define("quick-edit/form/model/factory/edit-issue",["quick-edit/form/model/edit-issue","wrm/context-path"],function(e,i){"use strict";return function(s){return new e({fieldsResource:i()+"/secure/QuickEditIssue!default.jspa?issueId="+s+"&decorator=none",userFieldsResource:i()+"/rest/quickedit/1.0/userpreferences/edit"})}}),AJS.namespace("JIRA.Forms.Model.createQuickEditIssueModel",null,require("quick-edit/form/model/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/helper/helper.js' */
define("quick-edit/form/helper/helper",["quick-edit/util/jira","quick-edit/form/model","quick-edit/util/class","jira/jquery/plugins/isdirty","jira/util/events","jira/dialog/dialog","underscore","jquery","jira/ajs/ajax/smart-ajax","wrm/context-path","jira/analytics/web-client"],function(e,t,i,r,n,s,o,a,u,c,l){"use strict";var d=AJS.escapeHTML;return i.extend({init:function(e){this.form=e},handleSubmitSuccess:function(t){function i(e,t,i){var r='<a href="'+i+'">'+e+" - "+d(t)+"</a>";return AJS.format("Issue {0} has been successfully created",r)}var r=this,n=this.form.$element.find("#summary").val();t.summary=n,this.form.triggerEvent("submitted",[t,this]),this.form.triggerEvent("issueCreated",[t,this],!0),r.form.model.isInMultipleMode()?(r.form.model.unmarkFieldAsDirty("description"),this.form.render().done(function(){var s=i(t.issueKey,n,c()+"/browse/"+t.issueKey);e.applySuccessMessageToForm(r.form.getForm(),s)})):this.form.triggerEvent("sessionComplete")},sendEvent:function(e,t,i,r,n){e>=500?l.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskFail",attributes:Object.assign({task:"createIssue",edition:i,application:t,analyticsSource:"QuickCreateForm",errorMessage:r?e.toString()+" - "+r:e.toString()},n)}):e>=400&&e<500&&l.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:Object.assign({task:"createIssue",isCreated:!1,edition:i,application:t,analyticsSource:"QuickCreateForm"},n)})},sendExperienceEventOnSubmitError:function(t){var i,r=this,n={};try{if(t&&t.responseText&&t.getResponseHeader){const s=t.getResponseHeader("Content-Type");if(n.traceId=t.getResponseHeader("atl-traceid"),n.requestId=t.getResponseHeader("x-arequestid"),s.includes("json")){var o=JSON.parse(t.responseText);o&&(i=o.errorMessages&&o.errorMessages[0])}else if(s.includes("html")){const l=t.responseText.match(/^.+Log reference: <strong>(.+)<\/strong><\/li>.+$/);null!=l&&2===l.length?(i="html response",n.log_reference=l[1]):i="error parsing html response (likely HTTP 429 or connection dropped)"}else i=s+" response"}}catch(e){i=e.message}u.makeRequest({type:"GET",contentType:"application/json",url:c()+"/rest/api/2/project/"+a('[data-field-id="project"] input.project-field[name="pid"]').val(),success:function(s){var o=e.getApplication(s.projectTypeKey),a=e.getEdition(o);r.sendEvent(t.status,o,a,i,n)},error:function(){r.sendEvent(t.status,"unknown","unknown",i,n)}})},getCreateAnotherCheckbox:function(){return this.form.$element.find("#qf-create-another")},isInMultipleMode:function(){return this.getCreateAnotherCheckbox().is(":checked")},getProjectField:function(){return this.form.$element.find(".issue-setup-fields #project")},getIssueTypeField:function(){return this.form.$element.find(".issue-setup-fields #issuetype")},getRequestOrIssueTypeField:function(){return this.form.$element.find("#request-or-issue-type-field")},getRequestTypeField:function(){return this.form.$element.find(".issue-setup-fields .request-type-field")},serializeForToggle:function(e){if(!this.form.model.hasRetainFeature())return this.form.getForm().serialize();var t=this.form.model.prevActiveFields||[],i=this.form.getForm().serializeArray(),r=function(e){return this.form.model.normalizeFieldParam(e.name,e.value)}.bind(this),n=this.form.getActiveFieldIds(),s=a.grep(i,function(e){return a.inArray(r(e),n)!==-1}),o=a.grep(t,function(e){return a.inArray(r(e),n)===-1}),u=a.map(o,function(e){return r(e)}),c=a.merge(s,o),l=a.merge(n,u);this.form.model.prevActiveFields=a.extend(!0,[],c),e&&(l=this.executeProjectChangedSecuritySettingAction(l)),l=l.filter(function(e){return!this.form.model.doesFieldSupportDefaultValue(e)||this.form.model.fieldIsDirty(e)}.bind(this));var d=a.merge([{name:"retainValues",value:!0}],c);return a.each(i,function(e,t){"pid"!==t.name&&"issuetype"!==t.name||d.push(t)}),d.push({name:"toggle",value:!0}),a.each(l,function(e,t){d.push({name:"fieldsToRetain",value:t})}),d.push({name:"formToken",value:this.form.model.getFormToken()}),a.param(d)},executeProjectChangedSecuritySettingAction:function(e){return o.reject(e,function(e){return"security"===e})},prepareFieldsToRetain:function(e,t){return a.each(e,function(e,i){t.push({name:"fieldsToRetain",value:i})}),t},setIssueType:function(){var e=this,t=this.serializeForToggle();this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(t).done(function(){e.form.enable()})},setProjectId:function(){var e=this,t=this.serializeForToggle(!0);this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(t).done(function(){e.form.enable()})},setRequestType:function(e,t){var i=this.getRequestTypeField(),r=this.getIssueTypeField();i.length&&(i.attr("value",e),this.form.model.markFieldAsDirty(i.attr("id"))),r.attr("value")!==t&&(r.attr("value",t),r.change())},saveFormDirtyStatus:function(){this.form.isDirty=this.form.getForm().isDirty()},restoreFormDirtyStatus:function(){this.form.isDirty&&this.form.getForm().addClass(r.ClassNames.BY_DEFAULT)},decorate:function(){var e=this;this.getProjectField().change(function(){e.saveFormDirtyStatus(),n.trigger("dialogBeforeContentChange",["projectId",this.value,s.current.options.id]),e.setProjectId(this.value)}),this.getIssueTypeField().change(function(){e.saveFormDirtyStatus(),n.trigger("dialogBeforeContentChange",["issueType",this.value,s.current.options.id]),e.setIssueType(this.value)}),this.getCreateAnotherCheckbox().change(function(){e.form.model.setIsMultipleMode(this.checked)});var t=this.getRequestOrIssueTypeField();t.length&&t.change(function(){var t=this,i=a(t),r=o.flatten(o.map(i.data("options"),function(e){return e.items||e})),n=o.find(r,function(e){return e.value===t.value});n&&e.setRequestType(n.payload.requestTypeKey,n.payload.issueTypeId)})},decorateFields:function(){var e=this;this.form.$element.find('*[id^="customfield_"]').off("change.customField").on("change.customField",function(){e.form.model.isCustomFieldId(this.name)&&e.form.model.markFieldAsDirty(this.name)}),this.form.$element.find("textarea#description").on("change",function(){e.form.model.markFieldAsDirty(this.name)}),this.form.$element.find("textarea#environment").on("change",function(){e.form.model.markFieldAsDirty(this.name)})},sendQuickEditAnalyticsEvent:function(e){var t,i,r=e.instance,n=e.name,s=e.actionSubjectId,o=e.action,a=e.source,u=e.actionSubject,c=e.fieldAction,d=r.model.fields.map(function(e){return{id:e.id,required:e.required}});e.field&&(i={id:e.field.descriptor.id,required:e.field.descriptor.required}),r.model.getActiveFieldIds().then(function(r){t=d.filter(function(e){return r.some(function(t){return t===e.id})});var f={allFieldsShown:e.allFieldsShown,field:JSON.stringify(i),allFields:JSON.stringify(d),displayedFields:e.allFieldsShown?JSON.stringify(d):JSON.stringify(t),fieldAction:c};AJS.trigger("analyticsEvent",{name:n,data:f}),l.sendUIEvent({source:a,actionSubjectId:s,actionSubject:u,action:o,attributes:f})})}})}),AJS.namespace("JIRA.Forms.CreateIssueHelper",null,require("quick-edit/form/helper/helper"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/forge/forge.js' */
define("quick-edit/form/forge",["jquery","jira/analytics/web-client"],function(e,t){"use strict";return{isForgeField:function(e){return 0===e.fieldType.indexOf("com.atlassian.forge:ari:cloud:ecosystem::extension/")},renderForgeCustomFields:function(i,r,n){function a(){var e=document.createElement("span");return e.classList.add("aui-icon-wait","forge-wait-icon"),e}function s(e,t){switch(t){case"string":case"number":case"datetime":return e;case"group":return e.name;case"user":return e.accountId;case"object":return JSON.stringify(e);default:return e}}function o(e,t,i,r){if("list"===i)return e instanceof Array?(e.forEach(function(e){var i=e;"user"===t&&(i=e.accountId),"group"===t&&(i=e.name);var n=document.createElement("option");n.setAttribute("value",i),n.setAttribute("title",i),n.setAttribute("selected","selected"),r.append(n)}),{error:null}):{error:"The entered value is not an array."};try{var n=s(e,t,i);return r.val(n),{error:null}}catch(e){return{error:"The entered value does not match required custom field type."}}}function d(r,n,s,o,d){var c=a(),u=e('label[for="'+s.id+'"]',i.$element),p={fieldType:s.fieldData.properties.type,module:s.fieldData.type,renderContext:"issue-create"};t.sendOperationalEvent({source:"issue-create-dialog",actionSubject:"jiraForgeUi.customField",action:"initialized",attributes:p});var f=r.components.customField.renderView({extension:s.fieldData,extensionData:{fieldValue:n||null,fieldId:s.id,fieldType:s.fieldData.id,renderContext:"issue-create",issue:{type:d.issueType,typeId:d.issueTypeId},project:{id:d.projectId}},fieldId:s.id,analyticsAttributes:p,onInitialRender:function(){t.sendScreenEvent("jiraForgeUi.customFieldScreen",null,p)}});f.classList.add("forge-field-container"),u.after(f),f.addEventListener("click",function(){t.sendUIEvent({source:"create-issue-dialog",action:"clicked",actionSubject:"jiraForgeUi.customFieldEditTrigger",attributes:p}),l(r,n,s,o,f,d,c)})}function l(r,n,a,s,l,c,u){if(!l.contains(u)){var p=e('label[for="'+a.id+'"]',i.$element);l&&l.appendChild(u);var f={fieldType:a.fieldData.properties.type,module:a.fieldData.type,renderContext:"issue-create"};r.components.customField.renderEditView({extension:a.fieldData,extensionData:{fieldValue:n||null,fieldId:a.id,fieldType:a.fieldData.id,renderContext:"issue-create",issue:{type:c.issueType,typeId:c.issueTypeId},project:{id:c.projectId}},analyticsAttributes:f,onInitialRender:function(){t.sendScreenEvent("jiraForgeUi.customFieldEditScreen",null,f)},onRender:function(){u&&u.remove()},onError:function(){u&&u.remove()},onConfirm:function(e){l.remove();var t=d(r,e,a,s,c);p.after(t)},onSave:function(e){var t=a.fieldData.properties.type,i=a.fieldData.properties.collection,r=o(e,t,i,s);return r.error?Promise.resolve({error:{name:"ValidationError",errors:[{error:r.error}]}}):Promise.resolve({data:e})}})}}var c=require("jira/container-api");c.APIs.getForgeAPI().then(function(n){var a=n.modules.customFields.concat(n.modules.customFieldTypes).filter(function(e){return e.properties.edit&&e.properties.function}),s=r.map(function(e){var t=e.fieldType.slice("com.atlassian.forge:".length),i=a.find(function(e){return t===e.id});return i?Object.assign({},{fieldData:i},{id:e.id}):null}).filter(Boolean);0!==s.length&&(e(".aui-blanket").css("z-index","499"),e("#create-issue-dialog").css("z-index","500"),s.forEach(function(r){var a,s=r.fieldData.properties.type,o=r.fieldData.properties.collection;switch(s){case"datetime":case"number":case"object":case"string":case"group":a=e("#"+r.id,i.$element);break;case"user":a="list"===o?e("#"+r.id,i.$element):e("#hidden-"+r.id,i.$element);break;default:t.sendOperationalEvent({source:"issue-create-dialog",actionSubject:"jiraForgeUi.customField",action:"failed",attributes:{error:{message:"Not supported custom field type in issue create"},fieldType:r.fieldData.properties.type,renderContext:"issue-create"}})}if(a){var l=e('label[for="'+r.id+'"]',i.$element),c=l.parent(),u=c.children();u.each(function(e,t){"label"!==t.tagName.toLowerCase()&&(t.style.display="none")});var p,f,m,y=e(".issue-setup-fields #issuetype-field"),v=e(".issue-setup-fields #issuetype"),g=e(".issue-setup-fields #request-or-issue-type-field-field"),b=e(".issue-setup-fields #project");y.length>0?p=y[0].value:g.length>0&&(p=g[0].value),v.length>0&&(f=v[0].value),b.length>0&&(m=b[0].value);var D={issueType:p,issueTypeId:f,projectId:m};if(r.fieldData.properties.description){var F=r.fieldData.environmentType,T=document.createElement("div"),h=document.createElement("p");T.classList.add("description"),"PRODUCTION"!==F?h.innerText="("+F+")"+r.fieldData.properties.description:h.innerText=r.fieldData.properties.description,T.appendChild(h),c.append(T)}d(n,a.val(),r,a,D)}}))})}}}),AJS.namespace("JIRA.Forms.Forge",null,require("quick-edit/form/forge"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/abstract/abstract.js' */
define("quick-edit/form/abstract",["quick-edit/util/jira","quick-edit/util/control","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/events/types","jira/util/events","jira/util/browser","jquery","underscore"],function(e,t,i,r,n,s,a,o,d,l){"use strict";var u=AJS.extractBodyFromResponse,c=AJS.log;return t.extend({submit:function(e){var t=this;return t.getForm().addClass("submitting"),this.triggerEvent("submitting",[],!0),i.makeRequest({url:this.getAction(),type:"POST",headers:e,beforeSend:function(){t.disable()},data:this.serialize(),complete:function(e,i,n){var s=n.data;if(t.getForm().find(".aui-message-context").remove(),t.enable(),t.getForm().find(".error").remove(),n.successful)if(t.performAnalytics(),s&&s.fields&&(t.invalidateFieldsCache(),t.model.setFields(s.fields)),"string"==typeof s){var a=d(u(s)),o=a.find("#atl_token").val();o&&(t.model.atlToken=o,t.getForm().find('input[name="atl_token"]').val(o));var l=new r({offsetTarget:"body",content:a});l._handleServerSuccess=function(){l.prev&&(l.prev._removeStackState(),l.prev._resetWindowTitle(),l._removeStackState()),l.hide(),t.triggerEvent("sessionComplete",[],!0),t.handleSubmitSuccess()},l._handleServerError=function(e){l.hide(),t.handleSubmitError(e)},l.show()}else t.handleSubmitSuccess(n.data);else t.handleSubmitError(e);t.getForm().removeClass("submitting")}})},disable:function(){this.getForm().find(":input").attr("disabled","disabled").trigger("disable"),this.getForm().find(":submit").attr("disabled","disabled")},enable:function(){this.getForm().find(":input").removeAttr("disabled").trigger("enable"),this.getForm().find(":submit").removeAttr("disabled")},getActiveFieldIds:function(){throw new Error("getActiveFieldIds: Abstract, must be implemented by sub class")},serialize:function(e){var t=this,i=this.getForm().serialize();return this.model.isInMultipleMode&&this.model.isInMultipleMode()&&(i+="&multipleMode=true"),this.model.hasRetainFeature()&&(this.model.clearRetainedFields(),d.each(this.getActiveFieldIds(),function(i,r){t.model.addFieldToRetainValue(r,e)}),d.each(this.model.getFieldsWithRetainedValues(),function(e,t){i=i+"&fieldsToRetain="+t})),i},invalidateFieldsCache:function(){delete this.fields},setInitialFocus:function(){this.getFormContent().find(":input:first").focus()},handleSubmitSuccess:function(){this.triggerEvent("submitted"),o.reloadViaWindowLocation()},performAnalytics:function(){var e=function(e,t){var i="***** Analytics log ["+e+"]";t&&(i+="["+JSON.stringify(t)+"]"),c(i),AJS.EventQueue&&AJS.EventQueue.push({name:e,properties:t||{}})},t=function(e){var t={},i=l.filter(e,function(e){return!l.contains(["isCreateIssue","isEditIssue","atl_token","hasWorkStarted"],e.name)}),r=l.filter(i,function(e){return""!=e.value});return l.each(r,function(e){var i=e.name;l.has(t,i)||(t[i]=[]),t[i].push(e.value)}),t};this.previousAnalytics=function(i,r){var s=t(i),a=l.keys(s),o=l.keys(r.data),d=l.difference(a,o),u=l.difference(o,a),c=l.intersection(o,a),m=l.filter(c,function(e){return l.isEqual(r.data[e],s[e])}),f=l.difference(c,m),h=r.count+1,g="edit-issue-dialog"===n.current.options.id,v={"atlassian.numCreates":h,"edit.form":g};return l.each(d,function(e){v[e]="added"}),l.each(u,function(e){v[e]="removed"}),l.each(m,function(e){v[e]="same"}),l.each(f,function(e){v[e]="changed"}),e("quick.create.fields",v),{data:s,count:h}}(this.getForm().serializeArray(),this.previousAnalytics||{data:{},count:0})},addErrorMessage:function(t){e.applyErrorMessageToForm(this.getForm(),[t])},handleSubmitError:function(t){var r,n=this;if(t.responseText){try{r=JSON.parse(t.responseText)}catch(e){}if(r){r.errorMessages&&r.errorMessages.length&&e.applyErrorMessageToForm(this.getForm(),r.errorMessages[0]),r&&r.errors&&400===t.status&&(this.getFieldById&&d.each(r.errors,function(e){/^timetracking/.test(e)?n.getFieldById("timetracking").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):/^worklog/.test(e)?n.getFieldById("worklog").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):n.getFieldById(e).done(function(e){e.activate(!0)})}),e.applyErrorsToForm(this.getForm(),r.errors),this.triggerEvent("validationError",[this,r.errors],!0));var o=n.$element.find(".error");o.length&&o[0].scrollIntoView(!1)}}else{var l=i.SmartAjaxResult(t,void 0,t.statusText,"",!1,void 0),u=i.buildSimpleErrorContent(l);n.addErrorMessage(u)}},getAction:function(){return this.action},getFormContent:function(){return this.$element.find("div.content")},getForm:function(){return this.$element.find("form")},createField:function(){throw new Error("AbstractForm: You must implement [createField] method in subclass.")},_getActiveAttachments:function(e){var t=[];if(!e)return t;for(var i=e.split("&"),r=0;r<i.length;r++){var n=i[r].split("=");"filetoconvert"==n[0]&&t.push(n[1])}return t},_setActiveAttachments:function(e){var t=this.$element.find("input[name=filetoconvert]");t.each(function(){var t=d(this),i=l.contains(e,t.attr("value"));t.prop("checked",i)})},render:function(e){var t=d.Deferred(),i=this,r=i._getActiveAttachments(e);return e?(this.invalidateFieldsCache(),this.model.refresh(e).done(function(){i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])})})):i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])}),t.always(function(){i._setActiveAttachments(r)}),t.promise()}})}),AJS.namespace("JIRA.Forms.AbstractForm",null,require("quick-edit/form/abstract"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/abstract/configurable.js' */
define("quick-edit/form/abstract/configurable",["quick-edit/form/abstract","quick-edit/form/field/configurable","quick-edit/form/helper/helper","jquery"],function(e,i,t,n){"use strict";return e.extend({getFields:function(){var e=n.Deferred(),i=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getConfigurableFields().done(function(t){n.each(t,function(e,t){var n=i.createField(t);i.fields.push(n)}),e.resolveWith(i,[i.fields])})),e.promise()},getActiveFieldIds:function(){var e=[],i=this.$element.find(".qf-field.qf-field-active:not(.qf-required), .qf-field.qf-required:not(.qf-field-active)");return n.each(i,function(i,t){var d=n(t),r=d.data("model"),c=d.data("field-id")||r&&r.getId();null!=c&&e.push(c),"attachment"===c&&d.find("input[name=filetoconvert]").each(function(){e.push(this.id)})}),e},createField:function(e){e.hasVisibilityFeature=this.model.hasVisibilityFeature(e),this.model.hasRetainFeature(e)&&(e.hasRetainFeature=!0,e.retainValue=this.model.hasRetainedValue(e));var n=this,d=new i(e),r=new t(n),c=n&&n.globalEventNamespaces&&n.globalEventNamespaces.length>0?n.globalEventNamespaces[0]:null;return e.hasVisibilityFeature&&d.bind("activated",function(){n.model.setUserFields(n.getActiveFieldIds()),d.highlight(),n.triggerEvent("QuickForm.fieldAdded",[d]);try{r.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.added",action:"changed",actionSubject:"checkbox",actionSubjectId:"toggleField",fieldAction:"added",source:c,field:d,instance:n})}catch(e){}}).bind("disabled",function(){n.model.setUserFields(n.getActiveFieldIds()),n.triggerEvent("QuickForm.fieldRemoved",[d]);try{r.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.removed",action:"changed",actionSubject:"checkbox",actionSubjectId:"toggleField",fieldAction:"removed",source:c,field:d,instance:n})}catch(e){}}),d},getFieldById:function(e){var i=this,t=n.Deferred();return this.getFields().done(function(d){n.each(d,function(n,d){d.getId()===e&&t.resolveWith(i,[d])}),t.rejectWith(i,[])}),t.promise()},hasNoVisibleFields:function(){var e=n.Deferred();return e.resolve(0===this.getActiveFieldIds().length),e.promise()},renderFormContents:function(){var e=n.Deferred(),i=n(),t=this;return t.getFields().done(function(d){var r=t.reorderFieldsToRender(d);t.model.getActiveFieldIds().done(function(d){n.each(r,function(){var e=this.render();i=i.add(e.scripts),t.getFormContent().append(e.element)}),n.each(d,function(e,i){n.each(r,function(){this.getId()===i&&this.activate(!0)})}),n.each(r,function(){this.isActive()||this.disable(!0)}),t.hasNoVisibleFields().done(function(n){if(n===!0)for(var d=0;d<3;d++)r[d]&&r[d].activate(!0);e.resolveWith(this,[t.$element,i])})})}),e.promise()},reorderFieldsToRender:function(e){return e}})}),AJS.namespace("JIRA.Forms.AbstractConfigurableForm",null,require("quick-edit/form/abstract/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/abstract/unconfigurable.js' */
define("quick-edit/form/abstract/unconfigurable",["quick-edit/form/abstract","quick-edit/templates/issue","jquery"],function(e,t,i){"use strict";return e.extend({getFieldsHtml:function(){var e=this,s=i.Deferred(),n={};return this.model.getTabs().done(function(i){1===i.length?n.fields=i[0].fields:(n.tabs=i,n.hasTabs=!0),s.resolveWith(e,[t.issueFields(n)])}),s.promise()},getActiveFieldIds:function(){var e=[];if(this.model.getFields().done(function(t){i.each(t,function(t,i){e.push(i.id)})}),e.indexOf("attachment")){var t=this.$element.find("input[name=filetoconvert]").map(function(e,t){return t.id}).toArray();e.push.apply(e,t)}return e},getFields:function(){var e=i.Deferred(),t=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getFields().done(function(s){i.each(s,function(e,i){var s=t.createField(i);t.fields.push(s)}),e.resolveWith(t,[t.fields])})),e.promise()}})}),AJS.namespace("JIRA.Forms.AbstractUnconfigurableForm",null,require("quick-edit/form/abstract/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/configurable/create-issue.js' */
define("quick-edit/form/configurable/create-issue",["quick-edit/form/abstract/configurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery","quick-edit/form/forge"],function(e,i,t,r,o,n,s,l){"use strict";return e.extend({init:function(e){this.model=e.model,this.helper=new i(this),this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this._serialization={},this.action=n()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=s("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){return this.helper.handleSubmitSuccess(e)},handleSubmitError:function(i){e.prototype.handleSubmitError.call(this,i),this.helper.sendExperienceEventOnSubmitError(i)},_render:function(){var e=s.Deferred(),i=this;return i.model.getIssueSetupFields().done(function(n){var s=t.createIssueForm({issueSetupFields:n,atlToken:i.model.getAtlToken(),formToken:i.model.getFormToken(),isConfigurable:!0,title:i.title,parentIssueId:i.model.getParentIssueId(),multipleMode:i.model.isInMultipleMode(),showFieldConfigurationToolBar:!o.isAnonymous(),modifierKey:r.getModifierKey()});i.$element.html(s),i.helper.decorate(),i.renderFormContents().done(function(t,r){i.helper.decorateFields(),e.resolveWith(i,[i.$element,r])}),i.model.getFields().done(function(e){i.model.getActiveFieldIds().done(function(t){var r=e.filter(function(e){return l.isForgeField(e)&&t.indexOf(e.id)>-1});r.length>0&&l.renderForgeCustomFields(i,r)})}),i.bind("QuickForm.fieldAdded",function(e,t){i.helper.decorateFields(),i.model.getFields().done(function(e){var r=t.descriptor;l.isForgeField(r)&&l.renderForgeCustomFields(i,[r])})})}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableCreateIssueForm",null,require("quick-edit/form/configurable/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/configurable/edit-issue.js' */
define("quick-edit/form/configurable/edit-issue",["quick-edit/form/abstract/configurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,s,n,o){"use strict";return e.extend({init:function(e){this.model=e.model,this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this.action=n()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=o("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},hasNoVisibleFields:function(){var e=o.Deferred(),t=this.getActiveFieldIds();return this.model.getUserFields().done(function(i){1===i.length&&"comment"===i[0]?e.resolve(!1):0===t.length||1===t.length&&"comment"===t[0]?e.resolve(!0):e.resolve(!1)}),e.promise()},_render:function(){var e=o.Deferred(),n=this,r=i.editIssueForm({issueId:this.issueId,title:this.title,atlToken:n.model.getAtlToken(),formToken:n.model.getFormToken(),pid:n.model.getPid(),isConfigurable:!0,modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()});return this.$element.html(r),n.renderFormContents().done(function(t,i){n.getFieldById("comment").done(function(e){n.getFormContent().append(e.$element)}),e.resolveWith(n,[n.$element,i])}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableEditIssueForm",null,require("quick-edit/form/configurable/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/field-picker/button/configurable.js' */
define("quick-edit/form/field-picker/button/configurable",["quick-edit/util/control","quick-edit/templates/form"],function(e,i){"use strict";return e.extend({init:function(e){var i=this;this.field=e.field,this.field.bind("disabled",function(){i.$element.removeClass("qf-active")}).bind("activated",function(){i.$element.addClass("qf-active")})},toggle:function(){this.field.isActive()?this.field.disable():this.field.activate()},getId:function(){return this.field.getId()},render:function(){return this.$element=jQuery(i.configurablePickerButton({required:this.field.descriptor.required,label:this.field.getLabel(),fieldId:this.field.getId(),isActive:this.field.isActive()})),this._assignEvents("button",this.$element),this.$element},_events:{button:{click:function(e){this.toggle(),e.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker.ConfigurableButton",null,require("quick-edit/form/field-picker/button/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/field-picker/button/unconfigurable.js' */
define("quick-edit/form/field-picker/button/unconfigurable",["quick-edit/util/control","quick-edit/templates/form","jquery"],function(e,i,t){"use strict";return e.extend({init:function(e){this.descriptor=e},render:function(){return this.$element=t(i.unconfigurablePickerButton({required:this.descriptor.required,label:this.descriptor.label,fieldId:this.descriptor.id,isActive:!0})),this.$element}})}),AJS.namespace("JIRA.Forms.FieldPicker.UnconfigurableButton",null,require("quick-edit/form/field-picker/button/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/field-picker/field-picker.js' */
define("quick-edit/form/field-picker",["quick-edit/form/field-picker/button/configurable","quick-edit/form/field-picker/button/unconfigurable","quick-edit/templates/form","quick-edit/util/control","aui/inline-dialog","jquery"],function(i,e,n,t,o,l){"use strict";return t.extend({INLINE_DIALOG_ID:"field_picker_popup",init:function(){this.buttons=[]},switchToAll:function(i){this.isConfigurable=!1,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToAll"))},setForm:function(i){this.form=i},switchToCustom:function(i){this.isConfigurable=!0,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToCustom"))},hideCallback:function(){},bindInlineDialog:function(){function i(i,t,o){e.render().done(function(e){0===i.find(".qf-picker").length&&(i.html(e),i.click(function(i){i.stopPropagation()}));var t=n.offset().top-l(window).scrollTop(),s=l(window).height(),r=s-t-110;i.find(".qf-picker-content").css("maxHeight",r),this.form.model.isSimplified()?i.find("#qf-picker-custom-link").hide():i.find("#qf-picker-custom-link").show(),o()})}var e=this,n=this.getInlineDialogTrigger();return this.inlineDialog&&this.inlineDialog.remove(),this.inlineDialog=o(n,this.INLINE_DIALOG_ID,i,{width:450,upfrontCallback:function(){n.parent().addClass("active")},hideCallback:function(){n.parent().removeClass("active")},nobind:!0}),n.click(function(i){l("#inline-dialog-"+e.INLINE_DIALOG_ID).is(":visible")?e.inlineDialog.hide():e.inlineDialog.show()}),this.inlineDialog},getInlineDialogTrigger:function(){return this.form.$element.find("#qf-field-picker-trigger")},renderButtons:function(n){var t=this,o=l('<ul class="qf-picker-buttons" />').appendTo(this.$content);l.each(n,function(n,s){var r,c;t.isConfigurable?t.form.getFieldById(s.id).done(function(e){if(e&&e.hasVisibilityFeature()){var n=l("<li />").appendTo(o),s=new i({field:e});s.render().appendTo(n),t.buttons.push(s)}}):(c=new e(s),r=l("<li />").appendTo(o),c.render().appendTo(r))}),0===o.children().length&&o.addClass("qf-no-fields").append("<li><em>"+"No fields can be configured for this tab"+"</em></li>")},renderContents:function(){var i=this,e=l.Deferred();return this.form.model.getSortedTabs().done(function(n){1===n.length?i.renderButtons(n[0].fields):l.each(n,function(e,n){n.fields.length>0&&(l("<h4><span></span></h4>").appendTo(i.$content).find("span").text(n.label),i.renderButtons(n.fields))}),e.resolveWith(i,[i.$element])}),e.promise()},show:function(){this.inlineDialog.show()},render:function(){return this.$element=l(n.fieldPicker({isConfigurable:this.isConfigurable})),this.$content=this.$element.find(".qf-picker-content"),this._assignEvents("switchToCustom",this.$element.find(".qf-configurable")),this._assignEvents("switchToAll",this.$element.find(".qf-unconfigurable")),this.renderContents()},_events:{switchToCustom:{click:function(i){this.switchToCustom(),i.preventDefault()}},switchToAll:{click:function(i){this.switchToAll(),i.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker",null,require("quick-edit/form/field-picker"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/container/container.js' */
define("quick-edit/form/container",["quick-edit/form/field-picker","quick-edit/form/import-issues","quick-edit/util/jira","quick-edit/util/control","quick-edit/form/helper/helper","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/navigator","jira/issue","jira/issuenavigator/issue-navigator","jquery","wrm/require","jira/analytics/web-client"],function(e,i,t,n,r,o,s,c,a,l,u,d,m){"use strict";return n.extend({init:function(i){this.$element=u("<div />").addClass("qf-container"),this.options=t.makePropertyFunc(i),this.fieldPicker=new e,this.successData=[],this.helper=new r(this);var n=this;d(["wr!com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api"]).then(function(){n.metrics=require("internal/browser-metrics")})},decorateRenderers:function(){var e=this,t=e.globalEventNamespaces&&e.globalEventNamespaces.length>0?e.globalEventNamespaces[0]:null;this.fieldPicker.decorated||(this.fieldPicker.bind("switchedToAll",function(){e.unconfigurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"switchAllButton",action:"clicked",source:t,name:"quickeditform.switched.all",allFieldsShown:!0,instance:e})}),this.fieldPicker.bind("switchedToCustom",function(){e.configurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"switchCustomButton",action:"clicked",source:t,name:"quickeditform.switched.custom",allFieldsShown:!1,instance:e})}),this.fieldPicker.decorated=!0),this.configurableForm.decorated||(this.configurableForm.bind("rendered",function(t,n){e.currentView=e.configurableForm,e.fieldPicker.switchToCustom(!0),e.fieldPicker.setForm(e.configurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.configurableForm),i.bindImportIssueUrl(),e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!0),e.triggerEvent("configurableFormRendered")}),this.configurableForm.bind("submitted",function(i,n){e.successData.push(n),e.triggerEvent("configurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"submit",action:"clicked",source:t,name:"quickeditform.submit.success",allFieldsShown:!1,instance:e})}),this.configurableForm.bind("issueCreated",function(i,n){e.triggerEvent("issueCreated",n),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"}),m.sendTrackEvent({source:t,attributes:{triggerPointKey:e.triggerPointKey},action:"created",actionSubject:"legacyCreateModalIssue"})}),this.configurableForm.decorated=!0),this.unconfigurableForm.decorated||(this.unconfigurableForm.bind("rendered",function(t,n){e.fieldPicker.switchToAll(!0),e.fieldPicker.setForm(e.unconfigurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.unconfigurableForm),i.bindImportIssueUrl(),e.currentView=e.unconfigurableForm,e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!1),e.triggerEvent("unconfigurableFormRendered")}),this.unconfigurableForm.bind("submitted",function(i,n){e.successData.push(n),e.triggerEvent("unconfigurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"submit",action:"clicked",source:t,name:"quickeditform.submit.success",allFieldsShown:!0,instance:e})}),this.unconfigurableForm.bind("issueCreated",function(i,n){e.triggerEvent("issueCreated",n),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"}),m.sendTrackEvent({source:t,attributes:{triggerPointKey:e.triggerPointKey},action:"created",actionSubject:"legacyCreateModalIssue"})}),this.unconfigurableForm.decorated=!0)},applyGlobalDecorator:function(e){function i(){t.currentView.setInitialFocus&&t.currentView.setInitialFocus()}var t=this;e.detach(),this.$element.html(e),this.triggerEvent("contentRefreshed",[this.$element]),c.isIE()?window.setTimeout(i,0):i()},asDialog:function(e){e=u.extend(!0,{},e);var i,t=this,n=!!e.modeless;return t.triggerPointKey=e.triggerPointKey||"genericFunctionCreateIssue",this.dialog=i=new o({id:e.id,trigger:e.trigger,windowTitle:void 0!==e.windowTitle?e.windowTitle:!n,width:n?s.WIDTH_PRESETS.medium:s.WIDTH_PRESETS.large,defineResources:function(){this.requireContext("jira.create.issue")},content:function(e){t.render().done(function(){t.triggerEvent("dialogRendered"),e(t.$element)}),t.triggerEvent("dialogShown")},submitHandler:function(i,n){i.preventDefault(),t.metrics&&t.metrics.start({isInitial:!1,key:"jira.create.issue.dialog.submit"}),t.currentView.submit(e.headers).then(n,n)},stacked:!0,modeless:n,shouldLoadHeritageFormDialogContext:!!e.shouldLoadHeritageFormDialogContext}),"edit-issue-dialog"===e.id&&u(this.dialog).on("beforeShow",function(e){a.getIssueKey()||l.isRowSelected()||e.preventDefault()}),this.dialog._focusFirstField=function(){o.prototype._focusFirstField.apply(this,["div.content :input:visible:first"])},this.bind("initialized",function(){this.unconfigurableForm.bind("sessionComplete",function(){i.hide()}),this.configurableForm.bind("sessionComplete",function(){i.hide()})}).bind("contentRefreshed",function(){i.notifyOfNewContent()}),i.bind("Dialog.hide",function(){t.successData.length&&(t.triggerEvent("sessionComplete",[t.successData],!0),t.successData=[])}),t.$element.ajaxStart(function(){i.showFooterLoadingIndicator()}).ajaxStop(function(){i.hideFooterLoadingIndicator()}),i.getQuickForm=function(){return t},i.dirtyFormWarning(),i},lazyInit:function(){var e=this,i=this.options.call(this);this.model=i.model,this.errorHandler=i.errorHandler,this.globalEventNamespaces=i.globalEventNamespaces,this.configurableForm=i.configurableForm,this.unconfigurableForm=i.unconfigurableForm,this.sessionComplete=i.sessionComplete,this.model.clearRetainedFields(),this.configurableForm.invalidateFieldsCache(),this.model.bind("serverError",function(i,t){e.$element.html(e.errorHandler.render(t)),e.triggerEvent("contentRefreshed",[this.$element])}),this.triggerEvent("initialized"),this.decorateRenderers()},render:function(){var e=this,i=u.Deferred();return this.lazyInit(),e.model.getUseConfigurableForm().done(function(t){t===!0?e.configurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element]),e.$element.append(n)}):e.unconfigurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element,n]),e.$element.append(n)})}).fail(function(){i.resolveWith(e,[e.$element])}),i.promise()}})}),AJS.namespace("JIRA.Forms.Container",null,require("quick-edit/form/container"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/error/error.js' */
define("quick-edit/form/error",["quick-edit/util/control","quick-edit/templates/form","jira/ajs/ajax/smart-ajax"],function(r,e,t){"use strict";return r.extend({getErrorMessageFromSmartAjax:function(r){var a,s;if(r.hasData&&401!==r.status)try{s=JSON.parse(r.data),a=s.errorMessages&&s.errorMessages.length>0?e.errorMessage({message:s.errorMessages[0]}):t.buildDialogErrorContent(r,!0).html()}catch(e){a=t.buildDialogErrorContent(r,!0).html()}else a=t.buildDialogErrorContent(r,!0).html();return a},render:function(r){var e=this.getErrorMessageFromSmartAjax(r);return this._render(e)}})}),AJS.namespace("JIRA.Forms.Error",null,require("quick-edit/form/error"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/error/create-issue.js' */
define("quick-edit/form/error/create-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,t){"use strict";return e.extend({_render:function(e){return t(r.createIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.CreateIssueError",null,require("quick-edit/form/error/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/error/edit-issue.js' */
define("quick-edit/form/error/edit-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,i){"use strict";return e.extend({_render:function(e){return i(r.editIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.EditIssueError",null,require("quick-edit/form/error/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/unconfigurable/create-issue.js' */
define("quick-edit/form/unconfigurable-create-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery","quick-edit/form/forge"],function(e,t,i,r,s,o,n,l){"use strict";return e.extend({init:function(e){this._serialization={},this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.helper=new t(this),this.title=e.title,this.action=o()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=n("<div class='qf-unconfigurable-form' />")},handleSubmitSuccess:function(e){this.helper.handleSubmitSuccess(e)},handleSubmitError:function(t){e.prototype.handleSubmitError.call(this,t),this.helper.sendExperienceEventOnSubmitError(t)},_render:function(){var e=n.Deferred(),t=this;return this.getFieldsHtml().done(function(o){t.model.getIssueSetupFields().done(function(n){var l=i.createIssueForm({issueSetupFields:n,fieldsHtml:o,parentIssueId:t.model.getParentIssueId(),atlToken:t.model.getAtlToken(),formToken:t.model.getFormToken(),title:t.title,multipleMode:t.model.isInMultipleMode(),showFieldConfigurationToolBar:!s.isAnonymous(),modifierKey:r.getModifierKey()}),u=r.extractScripts(l);t.$element.empty().append(u.html),t.helper.restoreFormDirtyStatus(),t.helper.decorate(),t.helper.decorateFields(),e.resolveWith(t,[t.$element,u.scripts])}),t.model.getFields().done(function(e){var i=e.filter(function(e){return l.isForgeField(e)});i.length>0&&l.renderForgeCustomFields(t,i)})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableCreateIssueForm",null,require("quick-edit/form/unconfigurable-create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/unconfigurable/edit-issue.js' */
define("quick-edit/form/unconfigurable-edit-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,s,n,r){"use strict";return e.extend({init:function(e){this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.issueId=e.issueId,this.title=e.title,this.action=n()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=r("<div class='qf-unconfigurable-form' />")},getFieldsHtml:function(){var e=this,t=r.Deferred(),s={};return this.model.getUnconfigurableTabs().done(function(n){1===n.length?s.fields=n[0].fields:(s.tabs=n,s.hasTabs=!0),t.resolveWith(e,[i.issueFields(s)])}),t.promise()},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},_render:function(){var e=r.Deferred(),n=this;return this.getFieldsHtml().done(function(r){var o={fieldsHtml:r,title:n.title,issueId:n.issueId,atlToken:n.model.getAtlToken(),formToken:n.model.getFormToken(),pid:n.model.getPid(),modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()};this.model.getCommentField().then(function(s){var r,l;o.commentField=s,r=i.editIssueForm(o),l=t.extractScripts(r),n.$element.html(l.html),e.resolveWith(n,[n.$element,l.scripts])},function(){var s=i.editIssueForm(o),r=t.extractScripts(s);n.$element.html(r.html),e.resolveWith(n,[n.$element,r.scripts])})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableEditIssueForm",null,require("quick-edit/form/unconfigurable-edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/factory/create-issue.js' */
define("quick-edit/form/factory/create-issue",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue"],function(e,r,a,t,s){"use strict";function i(e,r){if(e&&r)for(var a=0;a<e.length;a++)r.markFieldAsDirty(e[a])}return function(o){return o=o||{},new e(function(){o.globalEventNamespaces=o.globalEventNamespaces||["QuickCreateIssue"];var e="Create issue",n=new s({projectId:o.pid,issueType:o.issueType,itsmCategory:o.itsmCategory,fields:o.fields});i(o.customFieldsToPreserveOnFormRecreation,n);var c=new r({model:n,title:e,globalEventNamespaces:o.globalEventNamespaces}),u=new a({model:n,title:e,globalEventNamespaces:o.globalEventNamespaces});return{globalEventNamespaces:o.globalEventNamespaces,model:n,errorHandler:new t,configurableForm:c,unconfigurableForm:u}})}}),AJS.namespace("JIRA.Forms.createCreateIssueForm",null,require("quick-edit/form/factory/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/factory/create-subtask.js' */
define("quick-edit/form/factory/create-subtask",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/util/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,t,s,a,r,i,u,n){"use strict";function c(e){return e.parentIssueId||u.getIssueId()||n.getSelectedIssueId()}return function(u){return u=u||{},new e(function(){u.globalEventNamespaces=u.globalEventNamespaces||["QuickCreateSubtask"];var e=c(u),n=i.getIssueActionTitle("Create Subtask"),o=new a({parentIssueId:e,projectId:u.pid,issueType:u.issueType,fields:u.fields}),l=new t({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces}),d=new r({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces});return{globalEventNamespaces:u.globalEventNamespaces,model:o,errorHandler:new s,configurableForm:l,unconfigurableForm:d}})}}),AJS.namespace("JIRA.Forms.createSubtaskForm",null,require("quick-edit/form/factory/create-subtask"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'jira-quick-edit-plugin/js/form/factory/edit-issue.js' */
define("quick-edit/form/factory/edit-issue",["quick-edit/form/container","quick-edit/form/configurable/edit-issue","quick-edit/form/error/edit-issue","quick-edit/util/dialog","quick-edit/form/model/factory/edit-issue","quick-edit/form/unconfigurable-edit-issue","jira/issue","jira/issuenavigator/issue-navigator","jquery"],function(e,i,t,s,u,r,n,o,d){"use strict";function a(e){var i=s.getAttrFromActiveTrigger("data-issueId");return d.isFunction(e.issueId)?e.issueId(e):e.issueId?e.issueId:i?i:n.getIssueId()||o.getSelectedIssueId()}function c(){var e="Edit issue";return s.shouldShowIssueKeyInTitle()?s.getIssueActionTitle(e):e}return function(s){return s=s||{},new e(function(){var e=a(s),n=c(),o=u(e),d=new i({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]}),l=new r({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]});return{globalEventNamespaces:["QuickEdit"],model:o,errorHandler:new t,configurableForm:d,unconfigurableForm:l}})}}),AJS.namespace("JIRA.Forms.createEditIssueForm",null,require("quick-edit/form/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:loading-indicator', location = 'jira-quick-edit-plugin/js/util/loading-indicator.js' */
define("quick-edit/util/loading-indicator",["jira/loading/loading","jira/flag"],function(i,n){var o=AJS.dim,a=AJS.undim;return{showLoadingIndicator:function(){o(),i.showLoadingIndicator()},hideLoadingIndicator:function(o){a(),i.hideLoadingIndicator(),o&&n.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")}}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'jira-quick-edit-plugin/js/init/create-dialogs.js' */
define("quick-edit/init/create-dialogs",["wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","quick-edit/init/calendar","jira/featureflags/feature-manager"],function(i,e,a,t,n){var r=function(){a.disable(),e.showLoadingIndicator()},u=function(i){var t=i;"undefined"==typeof i&&(t=!0),e.hideLoadingIndicator(t),a.enable()},o=!1,c=function(e){if(!o){o=!0,r();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue",c=i([n]);c.then(function(){var i=require("quick-edit/init/create");i.initIssueDialog(e),a.enable(),o=!1},function(){u(),o=!1}),t()}},s=!1,d=function(o){if(!s)if(s=!0,r(),n.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&n.isFeatureEnabled("issue-navigator-new-gic-subtask-create-trigger_mzfmg")&&window.IssueCreate&&window.IssueCreate.Visibility&&window.IssueCreate.Visibility.isEnabled){var c=require("quick-edit/init/create");c.initNewGicSubtaskDialog(o),e.hideLoadingIndicator(),s=!1}else{var d="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue",l=i([d]);l.then(function(){var i=require("quick-edit/init/create");i.initSubtaskDialog(o),a.enable(),s=!1},function(){u(),s=!1}),t()}};return{showCreateDialog:c,showCreateSubtaskDialog:d,hideLoadingIndicator:u}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'jira-quick-edit-plugin/js/init/create-bootstrap-wrm.js' */
require(["jquery","quick-edit/init/create-dialogs"],function(e,t){JIRA.API.getSidebar().then(function(e){e.on(e.events.JIRA_SUMMON_CREATE_ISSUE_DIALOG,function(e){t.showCreateDialog(e)},!0)}),e(function(){var e=document.getElementById("stqc_show");e&&(e.onclick=null)}),e(document).on("simpleClick",".create-issue, .create-issue-type",function(i){i.preventDefault();var a=require("jira/featureflags/feature-manager");if(a&&a.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&a.isFeatureEnabled("jwm-create-first-issue-trigger-point-enable-new-gic_6lrml")&&window.IssueCreate&&window.IssueCreate.Visibility&&window.IssueCreate.Visibility.isEnabled){var r=require("quick-edit/util/loading-indicator");r.showLoadingIndicator();var s=e(i.target),n=s.is("a")?s:s.find("a"),o=parseUri(n.attr("href")).queryKey,u={pid:o.pid,issueType:o.issuetype,itsmCategory:o.itsmCategory};u=e.extend(u,{pid:s.attr("data-pid"),issueType:s.attr("data-issue-type"),itsmCategory:s.attr("data-itsm-category")});var d=new CustomEvent("openIssueCreateDialog",{detail:{payload:{prefilledFields:u},title:"Create Subtask",id:"create-issue-story-dialog",triggerPointKey:"jwm-summary-create-first-issue-trigger"}});document.dispatchEvent(d),r.hideLoadingIndicator()}else t.showCreateDialog(i)}),e(document).on("simpleClick",".issueaction-create-subtask",function(e){e.preventDefault(),t.showCreateSubtaskDialog(e)})});;
;
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-scripts-common', location = '/teams/scripts-plugin/field-common.min.js' */
(function(){define("com/atlassian/rm/common/customfields/common",[],function(){var a,b,c,d,e,f,g,h,i,j;return c=window.JIRA,a=AJS.$,d=AJS.SingleSelect,b=AJS.ItemDescriptor,j=AJS.escapeHTML,f=function(a){return c.bind(c.Events.NEW_CONTENT_ADDED,function(b,d,e){if(e!==c.CONTENT_ADDED_REASON.panelRefreshed)return a({context:d})})},g=function(a){var b,c,d;return d=a.url,b=a.createQueryData,c=a.formatResponse,{url:d,type:"POST",query:!0,data:function(a){return b({query:a})},dataType:"json",contentType:"application/json",formatResponse:c,keyInputPeriod:200}},i=function(a){var c,d;return d=a.text,c=a.additionalStyles,new b({label:d,html:j(d),highlighted:!0,styleClass:"jpo-dropdown-item-unselectable "+c,unselectableItem:!0})},e=function(a){var b;if(b=a.items,0===b.length)return b.push(i({text:"No Matches",additionalStyles:"jpo-dropdown-item-italic"}))},h=function(b){var c,e;return c=b.ajaxOptions,e=b.getNoMatchingValueMessage,d.extend({init:function(b){return a.extend(b,{submitInputVal:!0,showDropdownButton:!0,ajaxOptions:c}),this._super(b)},setSelection:function(a){if(!a.properties.unselectableItem)return this._super.apply(this,arguments)},handleFreeInput:function(b){var c,d;if(this._super.apply(this,arguments),null==b&&(b=a.trim(this.$field.val())),d=this.model.getDescriptor(b),null==d&&this.$container.hasClass("aui-ss-editing"))return c=null!=b&&b.length>0,c?(this.options.errorMessage=e(b),this.showErrorMessage(b),this.clear(),this.model.removeFreeInputVal()):this.hideErrorMessage()}})},{bindInitializationCallback:f,createDropdownAjaxOptions:g,createInfoMessageListItem:i,addNoMatchesItemIfEmpty:e,createDropdownClass:h}})}).call(this);;
;
/* module-key = 'com.atlassian.jpo:jpo-wr-custom-field-scripts-parent', location = '/jpo2/scripts-plugin/field-parent.min.js' */
(function(){require(["com/atlassian/rm/common/customfields/common"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;if(j=window.JIRA,b=AJS.$,i=AJS.ItemDescriptor,d=AJS.GroupDescriptor,p=AJS.contextPath,w=AJS.escapeHTML,k=100,l=".jpo-parent-selection-dropdown",f=".jpo-initial-issue-type-name",e=".jpo-initial-epic-link",g=".jpo-initial-issue-project",c=".jpo-client-error-message-container",h="#issuetype-field",m=p()+"/rest/jpo/1.0/parent/suggest",B="",E=void 0,v=void 0,F=void 0,z=function(a){var b,c,d,e;for(b={},d=0,e=a.length;d<e;d++)c=a[d],b[c.id]=c;return b},I=function(){return B=b(f).val()},D=function(){return b(h).change(function(a){var b;if(b=a.target.value,null!=b&&b.length>0)return B=b})},A=function(){return null!=v&&v.length>0},H=function(){return v=b(e).val()},J=function(){return F=b(g).val()},C=function(a){return a.$field.change(function(a){return v=a.target.value,o()})},o=function(){return A()?L("Cannot use parent link when epic link is set."):y()},K=function(a){if(null!=E)return E.$container.toggle(a)},L=function(a){return K(!1),b(c).html("<span class='error'>"+w(a)+"</span>")},y=function(){return K(!0),b(c).empty()},x=function(a){var b,c,e,f,g;return e=a.issues,c=a.issueTypes,g=a.projects,b=new d({weight:0,showLabel:!1,items:[q()]}),f=new d({weight:1,items:u({issues:e,issueTypes:c,projects:g})}),[b,f]},t=function(a){var b,c,d,e,f,g,h;return d=a.issue,g=a.issueType,h=a.project,e=d.issueKey,f=d.issueSummary,b=h.key+"-"+e,c=b+" "+f,new i({value:b,fieldText:c,label:c,icon:g.iconUrl})},u=function(b){var c,d,e,f,g,h,i;return f=b.issues,d=b.issueTypes,h=b.projects,e=z(d),i=z(h),g=function(){var a,b,d;for(d=[],a=0,b=f.length;a<b;a++)c=f[a],d.push(t({issue:c,issueType:e[c.issueTypeId],project:i[c.projectId]}));return d}(),a.addNoMatchesItemIfEmpty({items:g}),g},q=function(){return a.createInfoMessageListItem({text:"To set an epic as the parent, use the epic link instead",additionalStyles:"jpo-dropdown-item-italic"})},r=function(a){var b;return b=a.query,JSON.stringify({query:b,issueTypeName:B,maxResults:k,projectId:F})},n=a.createDropdownClass({ajaxOptions:a.createDropdownAjaxOptions({url:m,createQueryData:r,formatResponse:x}),getNoMatchingValueMessage:function(a){return AJS.format("No valid parent matching \'\'{0}\'\' was found.",a)}}),s=function(a){return b(l,a).each(function(){return E=new n({element:b(this)}),o()})},a.bindInitializationCallback(function(a){var b;return b=a.context,H(),I(),J(),D(),s(b)}),null!=(null!=(G=j.EpicPicker)?G.READY_EVENT:void 0))return j.bind(j.EpicPicker.READY_EVENT,function(a,b){return C(b)})})}).call(this);;
;
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-team', location = '/teams/scripts-plugin/field-team.min.js' */
(function(){require(["com/atlassian/rm/common/customfields/common"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return b=AJS.$,e=AJS.ItemDescriptor,d=AJS.GroupDescriptor,j=AJS.contextPath,f=100,g=".jpo-team-selection-dropdown",h=j()+"/rest/teams/1.0/teams/find",c=j()+"/download/resources/com.atlassian.teams:jpo-wr-images-and-fonts/images/teams/default-avatar.svg",p=function(a){var b,c,e;return e=a.teams,b=new d({weight:0,items:[k()]}),c=new d({weight:1,label:"Shared teams",items:o({teams:e})}),[b,c]},n=function(a){var b,d,f;return d=a.id,f=a.title,b=a.avatarUrl,new e({value:""+d,fieldText:f,label:f,icon:b||c})},o=function(b){var c,d,e;return e=b.teams,c=function(){var a,b,c;for(c=[],a=0,b=e.length;a<b;a++)d=e[a],c.push(n(d));return c}(),a.addNoMatchesItemIfEmpty({items:c}),c},k=function(){return a.createInfoMessageListItem({text:"Plan-specific teams can only be selected through a plan",additionalStyles:"jpo-dropdown-item-italic"})},l=function(a){var b;return b=a.query,JSON.stringify({query:b,excludedIds:[],maxResults:f})},i=a.createDropdownClass({ajaxOptions:a.createDropdownAjaxOptions({url:h,createQueryData:l,formatResponse:p}),getNoMatchingValueMessage:function(a){return AJS.format("No team matching query \'\'{0}\'\' was found.",a)}}),m=function(a){return b(g,a).each(function(){return new i({element:b(this)})})},a.bindInitializationCallback(function(a){var b;return b=a.context,m(b)})})}).call(this);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/dialog.js' */
define("jira/admin-helper/dialog",["jquery","jira/dialog/dialog","jira/focus/set-focus"],function(e,t,i){return t.extend({_getDefaultOptions:function(){return e.extend(this._super(),{cached:!1,widthClass:"large",stacked:!0})},defineResources:function(){this._super(),this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources")},decorateContent:function(){var e=this;this.get$popupContent().find(".cancel").click(function(t){e.hide(),t.preventDefault()})},_onShowContent:function(){if(this._super(),t.current===this){var e=new i.FocusConfiguration;e.context=this.get$popup()[0],e.parentElementSelectors=[".form-body"],i.pushConfiguration(e),i.triggerFocus()}},hide:function(e){return this._super(e)!==!1&&void i.popConfiguration()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/notification-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(e,i,n){n.get("is-admin")&&e(document).delegate(".notificationhelper-trigger","click",function(e){e.preventDefault(),new i({id:"notification-helper-dialog",content:function(e){var i=this;require(["jira/admin-helper/notification-helper/content-loader"],function(n){n.loadContent(i,e)})}}).show()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/permission-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(e,i,n){n.get("is-admin")&&e(document).delegate(".permissionhelper-trigger","click",function(e){e.preventDefault(),new i({id:"permission-helper-dialog",widthClass:"medium",content:function(e){var i=this;require(["jira/admin-helper/permission-helper/content-loader"],function(n){n.loadContent(i,e)})}}).show()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/whereismycf-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/dialog/dialog"],function(i,e,n,t){function r(){AJS.InlineDialog.current=null}if(n.get("is-admin")){var a="Where is my field?";i(document).delegate(".whereismycf-trigger","click",function(i){i.preventDefault(),new e({id:"whereismycf-dialog",widthClass:"small",content:function(i){var e=this;require(["jira/admin-helper/whereismycf/content-loader"],function(n){n.loadContentForView(e,i)})}}).show()}),i(document).bind("showLayer",function(n,o,l){if("inlineDialog"==o&&"inline-dialog-field_picker_popup"==l.popup.attr("id")&&0==l.popup.find("#whereismycf-qfpicker-link-id").length){var d=i("<a href='#' id='whereismycf-qfpicker-link-id'>"+a+"</a>").appendTo(l.popup.find("#qf-picker-custom-link"));d.click(function(i){i.preventDefault(),l.hide(),r();var n=t.current;new e({id:"whereismycf-dialog",widthClass:"small",content:function(i){var e=this;require(["jira/admin-helper/whereismycf/content-loader"],function(t){t.loadContentForEditAndCreate(e,n,i)})}}).show()})}})}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue', location = 'jira-quick-edit-plugin/js/init/create.js' */
define("quick-edit/init/create",["quick-edit/form/factory/create-issue","quick-edit/form/factory/create-subtask","quick-edit/util/dialog","jira/analytics/web-client","jira/analytics/transformers/issue-type","jira/featureflags/feature-manager","jquery","quick-edit/util/jira","quick-edit/util/hierarchy","jira/util/events"],function(e,t,i,a,s,r,n,o,u,d){"use strict";var c=function(t){var i=n(t.target),r=i.is("a")?i:i.find("a"),c=parseUri(r.attr("href")).queryKey,p={pid:c.pid,issueType:c.issuetype,itsmCategory:c.itsmCategory};p=n.extend(p,{pid:i.attr("data-pid"),issueType:i.attr("data-issue-type"),itsmCategory:i.attr("data-itsm-category")});var g=e(p);n(g).on("dialogRendered",function(){JIRA.trace("create.issue.dialog.rendered"),a.sendPageEvent("createIssueModal"),d.trigger("createIssueDialogRendered")}),n(g).on("issueCreated",function(e,t){JIRA.trace("create.issue.dialog.issue.created");var i=t.createdIssueDetails.fields,r=String(i.project.id),n=i.project.projectTypeKey,c=String(t.createdIssueDetails.id),p=s.map(i.issuetype.name),g=String(i.issuetype.id),y={issueType:p,issueTypeId:g,projectType:n};i&&i.issuerestriction&&i.issuerestriction.issuerestrictions&&i.issuerestriction.issuerestrictions.projectrole&&i.issuerestriction.issuerestrictions.projectrole.length>0&&(y={issueType:p,issueTypeId:g,projectType:n,restrictIssue:!0});var f=i.project.simplified,I=t.hierarchy;y.nextGenProject=f,f&&I&&(y.issueTypeLevel=u.getIssueTypeLevel(I));var k="other";"software"===n&&(window.location.pathname.indexOf("roadmap")>-1?k="roadmap":window.location.pathname.indexOf("RapidBoard.jspa")>-1&&window.location.search.indexOf("view=planning")>-1||window.location.pathname.indexOf("backlog")>-1?k="backlog":(window.location.pathname.indexOf("RapidBoard.jspa")>-1||window.location.pathname.indexOf("board")>-1)&&(k="board")),y.location=k,"service_desk"===n&&(y.hasRequestType=l(i));var m={containerType:"project",containerId:r,source:"createIssueModal",objectType:"issue",objectId:c,actionSubject:"issue",action:"created",attributes:y};a.sendTrackEvent(m),d.trigger("legacyIssueCreated",m);var v=o.getApplication(n),b=o.getEdition(v);a.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:{task:"createIssue",isCreated:!0,application:v,edition:b,analyticsSource:"QuickCreateForm"}})}),g.asDialog({trigger:document.createElement("a"),id:"create-issue-dialog",windowTitle:"Create issue",headers:{"X-Atlassian-Capability":"LEGACY_ISSUE_CREATE"}}).show()},l=function(e){var t=!1;return n.each(e,function(e,i){i&&i.hasOwnProperty("requestType")&&(t=!0)}),t},p=function(e){var t=n(e.target),i=t.is("a")?t:t.find("a"),a=i.attr("data-issueid"),s=require("jira/issue"),r=require("jira/issuenavigator/issue-navigator");a=a||n("#fallback-subtask-dialog-issueid").data("issueid")||s.getIssueId()||r.getSelectedIssueId();var o=new CustomEvent("openIssueCreateDialog",{detail:{isSubTaskCreationOpen:!0,shouldNotTransform:!0,payload:{parentId:{parentId:a.toString()}},title:"Create Subtask",id:"create-subtask-story-dialog",triggerPointKey:"create-subtask-issue-navigator-trigger"}});document.dispatchEvent(o)},g=function(e){var s=n(e.target),r=s.is("a")?s:s.find("a"),o=r.attr("data-issueid");o=o||n("#fallback-subtask-dialog-issueid").data("issueid");var u={parentIssueId:o},d=t(u);n(d).on("dialogRendered",function(){a.sendPageEvent("createSubTaskModal")}),d.asDialog({windowTitle:function(){return i.getIssueActionTitle("Create Subtask")},trigger:document.createElement("a"),id:"create-subtask-dialog"}).show()};return{initIssueDialog:c,initSubtaskDialog:g,initNewGicSubtaskDialog:p}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:soy-templates', location = 'jira-view-issue-module/viewissue/attachmentsblock.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ViewIssue&&(JIRA.Templates.ViewIssue={}),JIRA.Templates.ViewIssue.renderAttachments=function(e,t){return""+("list"==e.viewMode?JIRA.Templates.ViewIssue.fileAttachments(e):JIRA.Templates.ViewIssue.galleryAttachments(e))},JIRA.Templates.ViewIssue.fileAttachments=function(e,t){for(var a='<ol id="file_attachments" class="item-attachments" data-sort-key="'+soy.$$escapeHtml(e.sortKey)+'" data-sort-order="'+soy.$$escapeHtml(e.sortOrder)+'">',s=e.attachments,i=s.length,n=0;n<i;n++){var c=s[n];a+=JIRA.Templates.ViewIssue.fileAttachment(soy.$$augmentMap(e,{fileAttachment:c}))}return a+="</ol>"},JIRA.Templates.ViewIssue.galleryAttachments=function(e,t){for(var a='<ol id="attachment_thumbnails" class="item-attachments" data-sort-key="'+soy.$$escapeHtml(e.sortKey)+'" data-sort-order="'+soy.$$escapeHtml(e.sortOrder)+'">',s=e.attachments,i=s.length,n=0;n<i;n++){var c=s[n];a+=JIRA.Templates.ViewIssue.imageAttachment(soy.$$augmentMap(e,{imageAttachment:c}))}return a+="</ol>"},JIRA.Templates.ViewIssue.fileAttachment=function(e,t){return'<li class="attachment-content js-file-attachment'+(e.fileAttachment.latest?"":" earlier-version")+'" data-attachment-id="'+soy.$$escapeHtml(e.fileAttachment.id)+'"'+JIRA.Templates.ViewIssue.renderAttachmentData({issue:e.issue,attachment:e.fileAttachment})+">"+(e.fileAttachment.expandable?JIRA.Templates.ViewIssue.zipFileAttachment(e):'<div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+"</dl>")+"</li>"},JIRA.Templates.ViewIssue.zipFileAttachment=function(e,t){return'<div class="twixi-block collapsed expander"><div class="twixi-wrap verbose"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>'+soy.$$escapeHtml("Hide")+'</span></span></a><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+'<dd class="zip-contents"><ol><li><div class="attachment-thumb"><img src="'+soy.$$escapeHtml(e.baseurl)+'/images/icons/wait.gif" /></div>'+soy.$$escapeHtml("Extracting archive...")+'</li></ol></dd></dl></div><div class="twixi-wrap concise"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>'+soy.$$escapeHtml("Show")+'</span></span></a><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+"</dl></div></div>"},JIRA.Templates.ViewIssue.imageAttachment=function(e,t){return'<li class="attachment-content js-file-attachment" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.imageAttachment.mimeType)+":"+soy.$$escapeHtml(e.imageAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.renderAttachmentData({issue:e.issue,attachment:e.imageAttachment})+'><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'" title="'+soy.$$escapeHtml(e.imageAttachment.fileName)+" -"+(e.imageAttachment.latest?" "+soy.$$escapeHtml("Latest"):"")+" "+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+(e.imageAttachment.authorDisplayName?" - "+soy.$$escapeHtml(e.imageAttachment.authorDisplayName):"")+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.imageAttachment})+">"+(null!=e.imageAttachment.thumbnailUrl?'<jira-attachment-thumbnail url="'+soy.$$escapeHtml(""+e.imageAttachment.thumbnailUrl)+'" jira-url="'+soy.$$escapeHtml(""+e.imageAttachment.jiraThumbnailUrl)+'" filename="'+soy.$$escapeHtml(e.imageAttachment.fileName)+'"></jira-attachment-thumbnail>':JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:e.imageAttachment.mimeType}))+"</a></div><dl "+(e.imageAttachment.latest?"":'class="earlier-version"')+"><dt>"+(e.imageAttachment.deletable?'<span class="blender blender-delete"></span><div class="attachment-delete"><a title="'+soy.$$escapeHtml("Delete this attachment")+'" id="del_'+soy.$$escapeHtml(e.imageAttachment.id)+'" href="'+soy.$$escapeHtml(e.baseurl)+"/secure/DeleteAttachment!default.jspa?id="+soy.$$escapeHtml(e.issue.id)+"&deleteAttachmentId="+soy.$$escapeHtml(e.imageAttachment.id)+'&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml("Delete this attachment")+"</span></a></div>":'<span class="blender"></span>')+'<a  href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'" class="attachment-title" title="'+soy.$$escapeHtml(e.imageAttachment.fileName)+" -"+(e.imageAttachment.latest?" "+soy.$$escapeHtml("Latest"):"")+" "+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+(e.imageAttachment.authorDisplayName?" - "+soy.$$escapeHtml(e.imageAttachment.authorDisplayName):"")+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.imageAttachment})+">"+soy.$$escapeHtml(e.imageAttachment.fileName)+'</a></dt><dd class="attachment-size">'+soy.$$escapeHtml(e.imageAttachment.fileSize)+'</dd><dd class="attachment-date"><time class="livestamp" datetime="'+soy.$$escapeHtml(""+e.imageAttachment.createdIso8601)+'">'+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+"</time></dd></dl></li>"},JIRA.Templates.ViewIssue.renderAttachmentInfo=function(e,t){return'<dt class="attachment-title"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.attachment.attachmentUrl)+'" title="'+(e.attachment.latest?soy.$$escapeHtml("Latest")+" ":"")+" "+soy.$$escapeHtml(e.attachment.createdDateTime)+(e.attachment.authorDisplayName?" - "+soy.$$escapeHtml(e.attachment.authorDisplayName):"")+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.attachment.mimeType)+":"+soy.$$escapeHtml(e.attachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.attachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment(e)+">"+soy.$$escapeHtml(e.attachment.fileName)+'</a></dt><dd class="attachment-delete">'+(e.attachment.deletable?'<a title="'+soy.$$escapeHtml("Delete this attachment")+'" id="del_'+soy.$$escapeHtml(e.attachment.id)+'" href="'+soy.$$escapeHtml(e.baseurl)+"/secure/DeleteAttachment!default.jspa?id="+soy.$$escapeHtml(e.issue.id)+"&deleteAttachmentId="+soy.$$escapeHtml(e.attachment.id)+'&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml("Delete this attachment")+"</span></a>":'<span class="icon"></span>')+'</dd><dd class="attachment-date"><time class="livestamp" datetime="'+soy.$$escapeHtml(""+e.attachment.createdIso8601)+'">'+soy.$$escapeHtml(e.attachment.createdDateTime)+'</time></dd><dd class="attachment-size">'+soy.$$escapeHtml(e.attachment.fileSize)+'</dd><dd class="attachment-author">'+soy.$$escapeHtml(e.attachment.authorDisplayName?e.attachment.authorDisplayName:"")+"</dd>"},JIRA.Templates.ViewIssue.renderAttachmentData=function(e,t){return'data-issue-id="'+soy.$$escapeHtml(e.issue.id)+'"'+(e.attachment.expandable?'data-attachment-type="expandable"':null!=e.attachment.thumbnailUrl?'data-attachment-type="image"':'data-attachment-type="file"')},JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileIconUrl(e),i=""+JIRA.Templates.ViewIssue.matchFileIconAlt(e);return a+='<img src="'+soy.$$escapeHtml(s)+'" height="16" width="16" border="0" alt="'+soy.$$escapeHtml(i)+'">'},JIRA.Templates.ViewIssue.matchFileIconUrl=function(e,t){return soy.$$escapeHtml(e.baseurl)+"/images/icons/attach/"+JIRA.Templates.ViewIssue.matchFileIcon(e)},JIRA.Templates.ViewIssue.matchFileIcon=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+="pdf.gif";break;case"image/gif":a+="image.gif";break;case"image/png":a+="image.gif";break;case"image/jpeg":a+="image.gif";break;case"text/xml":a+="xml.gif";break;case"text/html":a+="html.gif";break;case"text/plain":a+="text.gif";break;case"application/zip":a+="zip.gif";break;case"application/x-gzip-compressed":a+="zip.gif";break;case"application/msword":a+="word.gif";break;case"application/msword-template":a+="word.gif";break;case"application/vnd.ms-word.document.macroEnabled.12":a+="word.gif";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+="word.gif";break;case"application/vnd.ms-word.template.macroEnabled.12":a+="word.gif";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+="word.gif";break;case"application/vnd.ms-excel":a+="excel.gif";break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+="excel.gif";break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+="excel.gif";break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+="excel.gif";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+="excel.gif";break;case"application/vnd.ms-excel.template.macroEnabled.12":a+="excel.gif";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+="excel.gif";break;case"application/vnd.ms-powerpoint":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+="powerpoint.gif";break;case"text/x-java":a+="java.gif";break;case"text/x-java-source":a+="java.gif";break;case"application/x-java-archive":a+="java.gif";break;default:a+="file.gif"}return a},JIRA.Templates.ViewIssue.matchFileIconAlt=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+=soy.$$escapeHtml("PDF File");break;case"image/gif":a+=soy.$$escapeHtml("GIF File");break;case"image/png":a+=soy.$$escapeHtml("PNG File");break;case"image/jpeg":a+=soy.$$escapeHtml("JPEG File");break;case"text/xml":a+=soy.$$escapeHtml("XML File");break;case"text/html":a+=soy.$$escapeHtml("HTML File");break;case"text/plain":a+=soy.$$escapeHtml("Text File");break;case"application/zip":a+=soy.$$escapeHtml("Zip Archive");break;case"application/x-gzip-compressed":a+=soy.$$escapeHtml("GZip Archive");break;case"application/msword":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/msword-template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-word.document.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-word.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-powerpoint":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"text/x-java":a+=soy.$$escapeHtml("Java Source File");break;case"text/x-java-source":a+=soy.$$escapeHtml("Java Source File");break;case"application/x-java-archive":a+=soy.$$escapeHtml("Java Archive File");break;default:a+=soy.$$escapeHtml("File")}return a},JIRA.Templates.ViewIssue.renderAttachmentIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileClass(e),i=""+JIRA.Templates.ViewIssue.matchFileIconAlt(e);return a+='<span class="aui-icon aui-icon-small attachment-icon '+soy.$$escapeHtml(s)+'" title="'+soy.$$escapeHtml(i)+'"></span>'},JIRA.Templates.ViewIssue.renderThumbnailIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileClass(e);return a+='<span class="aui-icon aui-icon-large attachment-thumbnail-icon '+soy.$$escapeHtml(s)+'"></span>'},JIRA.Templates.ViewIssue.matchFileClass=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+="aui-iconfont-file-pdf";break;case"image/gif":a+="aui-iconfont-image";break;case"image/png":a+="aui-iconfont-image";break;case"image/jpeg":a+="aui-iconfont-image";break;case"video/mp4":a+="aui-iconfont-file-video";break;case"text/xml":a+="aui-iconfont-file-code";break;case"text/html":a+="aui-iconfont-file-code";break;case"text/plain":a+="aui-iconfont-file-txt";break;case"application/zip":a+="aui-iconfont-file-zip";break;case"application/x-gzip-compressed":a+="aui-iconfont-file-zip";break;case"application/msword":a+="aui-iconfont-file-doc";break;case"application/msword-template":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-word.document.macroEnabled.12":a+="aui-iconfont-file-doc";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-word.template.macroEnabled.12":a+="aui-iconfont-file-doc";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-excel":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.template.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-powerpoint":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+="aui-iconfont-file-ppt";break;case"text/x-java":a+="aui-iconfont-file-code";break;case"text/x-java-source":a+="aui-iconfont-file-code";break;case"application/x-java-archive":a+="aui-iconfont-file-zip";break;default:a+="aui-iconfont-devtools-file"}return a},JIRA.Templates.ViewIssue.tagAttachment=function(e,t){return""+JIRA.Templates.ViewIssue.tagFilePreview({id:e.attachment.id,title:e.attachment.fileName,mimeType:e.attachment.mimeType,thumbnailUrl:e.attachment.thumbnailUrl})},JIRA.Templates.ViewIssue.tagFilePreview=function(e,t){var a="",s=""+(null==e.mimeType&&null!=e.thumbnailUrl?"image":null!=e.mimeType&&(""+e.mimeType).indexOf("image/")!=-1?"image":null!=e.mimeType&&(""+e.mimeType).indexOf("video/mp4")!=-1?"video":"application/pdf"==e.mimeType?"document":"unknown");return a+="unknown"!=s?' file-preview-id="'+soy.$$escapeHtml(e.id)+'" file-preview-title="'+soy.$$escapeHtml(e.title)+'" file-preview-type="'+soy.$$escapeHtml(s)+'" file-preview-mime-type="'+soy.$$escapeHtml(e.mimeType)+'"'+(null!=e.thumbnailUrl?'file-preview-url="'+soy.$$escapeHtml(""+e.thumbnailUrl)+'"':""):""};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'jira-dnd-attachment-module/js/jira-amd.js' */
define("dndattachment/JIRA",function(){return JIRA});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'jira-dnd-attachment-module/js/aui-amd.js' */
define("dndattachment/aui",function(){return AJS});;
;
/* module-key = 'com.atlassian.plugin.jslibs:moment-2.29.3', location = 'atlassian-jslibs/libs/moment/2.29.3/moment-2.29.3.js' */
define("atlassian/libs/moment-2.29.3",function(){var e={};return function(){this.moment=function(){"use strict";var e,t;function n(){return e.apply(null,arguments)}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){if(Object.getOwnPropertyNames){return 0===Object.getOwnPropertyNames(e).length;}var t;for(t in e){if(r(e,t)){return!1;}}return!0}function o(e){return void 0===e}function u(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,s=[],i=e.length;for(n=0;n<i;++n){s.push(t(e[n],n));}return s}function d(e,t){for(var n in t){r(t,n)&&(e[n]=t[n]);}return r(t,"toString")&&(e.toString=t.toString),r(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,s){return Tt(e,t,n,s,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){if(null==e._isValid){var n=f(e),s=t.call(n.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&s);if(e._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(e)){return i;}e._isValid=i}return e._isValid}function _(e){var t=c(NaN);return null!=e?d(f(t),e):f(t).userInvalidated=!0,t}t=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),s=n.length>>>0;for(t=0;t<s;t++){if(t in n&&e.call(this,n[t],t,n)){return!0;}}return!1};var y=n.momentProperties=[],g=!1;function w(e,t){var n,s,i,r=y.length;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),r>0){for(n=0;n<r;n++){s=y[n],o(i=t[s])||(e[s]=i);}}return e}function p(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,n.updateOffset(this),g=!1)}function v(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function k(e){!1===n.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function M(e,t){var s=!0;return d(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),s){var i,a,o,u=[],l=arguments.length;for(a=0;a<l;a++){if(i="","object"===typeof arguments[a]){for(o in i+="\n["+a+"] ",arguments[0]){r(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");}i=i.slice(0,-2)}else {i=arguments[a];}u.push(i)}k(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),s=!1}return t.apply(this,arguments)},t)}var D,S={};function Y(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),S[e]||(k(t),S[e]=!0)}function O(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,t){var n,s=d({},e);for(n in t){r(t,n)&&(i(e[n])&&i(t[n])?(s[n]={},d(s[n],e[n]),d(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);}for(n in e){r(e,n)&&!r(t,n)&&i(e[n])&&(s[n]=d({},s[n]));}return s}function x(e){null!=e&&this.set(e)}function T(e,t,n){var s=""+Math.abs(e),i=t-s.length,r=e>=0;return(r?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,D=Object.keys?Object.keys:function(e){var t,n=[];for(t in e){r(e,t)&&n.push(t);}return n};var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},W={};function C(e,t,n,s){var i=s;"string"===typeof s&&(i=function(){return this[s]()}),e&&(W[e]=i),t&&(W[t[0]]=function(){return T(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e,t){return e.isValid()?(t=H(t,e.localeData()),R[t]=R[t]||function(e){var t,n,s,i=e.match(N);for(t=0,n=i.length;t<n;t++){W[i[t]]?i[t]=W[i[t]]:i[t]=(s=i[t]).match(/\[[\s\S]/)?s.replace(/^\[|\]$/g,""):s.replace(/\\/g,"");}return function(t){var s,r="";for(s=0;s<n;s++){r+=O(i[s])?i[s].call(t,e):i[s];}return r}}(t),R[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;n>=0&&P.test(e);){e=e.replace(P,s),P.lastIndex=0,n-=1;}return e}var F={};function L(e,t){var n=e.toLowerCase();F[n]=F[n+"s"]=F[t]=e}function V(e){return"string"===typeof e?F[e]||F[e.toLowerCase()]:void 0}function G(e){var t,n,s={};for(n in e){r(e,n)&&(t=V(n))&&(s[t]=e[n]);}return s}var E={};function A(e,t){E[e]=t}function I(e){return e%4==0&&e%100!=0||e%400==0}function j(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Z(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=j(t)),n}function z(e,t){return function(s){return null!=s?(q(this,e,s),n.updateOffset(this,t),this):$(this,e)}}function $(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&I(e.year())&&1===e.month()&&29===e.date()?(n=Z(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Te(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var B,J=/\d/,Q=/\d\d/,X=/\d{3}/,K=/\d{4}/,ee=/[+-]?\d{6}/,te=/\d\d?/,ne=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,ie=/\d{1,3}/,re=/\d{1,4}/,ae=/[+-]?\d{1,6}/,oe=/\d+/,ue=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function ce(e,t,n){B[e]=O(t)?t:function(e,s){return e&&n?n:t}}function fe(e,t){return r(B,e)?B[e](t._strict,t._locale):new RegExp(me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}B={};var _e={};function ye(e,t){var n,s,i=t;for("string"===typeof e&&(e=[e]),u(t)&&(i=function(e,n){n[t]=Z(e)}),s=e.length,n=0;n<s;n++){_e[e[n]]=i}}function ge(e,t){ye(e,function(e,n,s,i){s._w=s._w||{},t(e,s._w,s,i)})}function we(e,t,n){null!=t&&r(_e,e)&&_e[e](t,n._a,n,e)}var pe,ve=0,ke=1,Me=2,De=3,Se=4,Ye=5,Oe=6,be=7,xe=8;function Te(e,t){if(isNaN(e)||isNaN(t)){return NaN;}var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1===s?I(e)?29:28:31-s%7%2}pe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t;}}return-1},C("M",["MM",2],"Mo",function(){return this.month()+1}),C("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),C("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),A("month",8),ce("M",te),ce("MM",te,Q),ce("MMM",function(e,t){return t.monthsShortRegex(e)}),ce("MMMM",function(e,t){return t.monthsRegex(e)}),ye(["M","MM"],function(e,t){t[ke]=Z(e)-1}),ye(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[ke]=i:f(n).invalidMonth=e});var Ne="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Pe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Re=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,We=de,Ce=de;function Ue(e,t){var n;if(!e.isValid()){return e;}if("string"===typeof t){if(/^\d+$/.test(t)){t=Z(t);}else if(!u(t=e.localeData().monthsParse(t))){return e;}}return n=Math.min(e.date(),Te(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function He(e){return null!=e?(Ue(this,e),n.updateOffset(this,!0),this):$(this,"Month")}function Fe(){function e(e,t){return t.length-e.length}var t,n,s=[],i=[],r=[];for(t=0;t<12;t++){n=c([2e3,t]),s.push(this.monthsShort(n,"")),i.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));}for(s.sort(e),i.sort(e),r.sort(e),t=0;t<12;t++){s[t]=me(s[t]),i[t]=me(i[t]);}for(t=0;t<24;t++){r[t]=me(r[t]);}this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Le(e){return I(e)?366:365}C("Y",0,0,function(){var e=this.year();return e<=9999?T(e,4):"+"+e}),C(0,["YY",2],0,function(){return this.year()%100}),C(0,["YYYY",4],0,"year"),C(0,["YYYYY",5],0,"year"),C(0,["YYYYYY",6,!0],0,"year"),L("year","y"),A("year",1),ce("Y",ue),ce("YY",te,Q),ce("YYYY",re,K),ce("YYYYY",ae,ee),ce("YYYYYY",ae,ee),ye(["YYYYY","YYYYYY"],ve),ye("YYYY",function(e,t){t[ve]=2===e.length?n.parseTwoDigitYear(e):Z(e)}),ye("YY",function(e,t){t[ve]=n.parseTwoDigitYear(e)}),ye("Y",function(e,t){t[ve]=parseInt(e,10)}),n.parseTwoDigitYear=function(e){return Z(e)+(Z(e)>68?1900:2e3)};var Ve=z("FullYear",!0);function Ge(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ee(e,t,n){var s=7+t-n,i=(7+Ge(e,0,s).getUTCDay()-t)%7;return-i+s-1}function Ae(e,t,n,s,i){var r,a,o=(7+n-s)%7,u=Ee(e,s,i),l=1+7*(t-1)+o+u;return l<=0?a=Le(r=e-1)+l:l>Le(e)?(r=e+1,a=l-Le(e)):(r=e,a=l),{year:r,dayOfYear:a}}function Ie(e,t,n){var s,i,r=Ee(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?(i=e.year()-1,s=a+je(i,t,n)):a>je(e.year(),t,n)?(s=a-je(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function je(e,t,n){var s=Ee(e,t,n),i=Ee(e+1,t,n);return(Le(e)-s+i)/7}function Ze(e,t){return e.slice(t,7).concat(e.slice(0,t))}C("w",["ww",2],"wo","week"),C("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),A("week",5),A("isoWeek",5),ce("w",te),ce("ww",te,Q),ce("W",te),ce("WW",te,Q),ge(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=Z(e)}),C("d",0,"do","day"),C("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),C("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),C("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),C("e",0,0,"weekday"),C("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),ce("d",te),ce("e",te),ce("E",te),ce("dd",function(e,t){return t.weekdaysMinRegex(e)}),ce("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ce("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),ge(["d","e","E"],function(e,t,n,s){t[s]=Z(e)});var ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$e="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Be=de,Je=de,Qe=de;function Xe(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],u=[],l=[];for(t=0;t<7;t++){n=c([2e3,1]).day(t),s=me(this.weekdaysMin(n,"")),i=me(this.weekdaysShort(n,"")),r=me(this.weekdays(n,"")),a.push(s),o.push(i),u.push(r),l.push(s),l.push(i),l.push(r);}a.sort(e),o.sort(e),u.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ke(){return this.hours()%12||12}function et(e,t){C(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function tt(e,t){return t._meridiemParse}C("H",["HH",2],0,"hour"),C("h",["hh",2],0,Ke),C("k",["kk",2],0,function(){return this.hours()||24}),C("hmm",0,0,function(){return""+Ke.apply(this)+T(this.minutes(),2)}),C("hmmss",0,0,function(){return""+Ke.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),C("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),C("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),et("a",!0),et("A",!1),L("hour","h"),A("hour",13),ce("a",tt),ce("A",tt),ce("H",te),ce("h",te),ce("k",te),ce("HH",te,Q),ce("hh",te,Q),ce("kk",te,Q),ce("hmm",ne),ce("hmmss",se),ce("Hmm",ne),ce("Hmmss",se),ye(["H","HH"],De),ye(["k","kk"],function(e,t,n){var s=Z(e);t[De]=24===s?0:s}),ye(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ye(["h","hh"],function(e,t,n){t[De]=Z(e),f(n).bigHour=!0}),ye("hmm",function(e,t,n){var s=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s)),f(n).bigHour=!0}),ye("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s,2)),t[Ye]=Z(e.substr(i)),f(n).bigHour=!0}),ye("Hmm",function(e,t,n){var s=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s))}),ye("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s,2)),t[Ye]=Z(e.substr(i))});var nt,st=z("Hours",!0),it={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ne,monthsShort:Pe,week:{dow:0,doy:6},weekdays:ze,weekdaysMin:qe,weekdaysShort:$e,meridiemParse:/[ap]\.?m?\.?/i},rt={},at={};function ot(e,t){var n,s=Math.min(e.length,t.length);for(n=0;n<s;n+=1){if(e[n]!==t[n]){return n;}}return s}function ut(e){return e?e.toLowerCase().replace("_","-"):e}function lt(e){var t=null;if(void 0===rt[e]&&"undefined"!==typeof module&&module&&module.exports&&function(e){return null!=e.match("^[^/\\\\]*$")}(e)){try{t=nt._abbr,require("./locale/"+e),ht(t)}catch(t){rt[e]=null}}return rt[e]}function ht(e,t){var n;return e&&((n=o(t)?ct(e):dt(e,t))?nt=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),nt._abbr}function dt(e,t){if(null!==t){var n,s=it;if(t.abbr=e,null!=rt[e]){Y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=rt[e]._config;}else if(null!=t.parentLocale){if(null!=rt[t.parentLocale]){s=rt[t.parentLocale]._config;}else{if(null==(n=lt(t.parentLocale))){return at[t.parentLocale]||(at[t.parentLocale]=[]),at[t.parentLocale].push({name:e,config:t}),null;}s=n._config}}return rt[e]=new x(b(s,t)),at[e]&&at[e].forEach(function(e){dt(e.name,e.config)}),ht(e),rt[e]}return delete rt[e],null}function ct(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e){return nt;}if(!s(e)){if(t=lt(e)){return t;}e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(i=ut(e[r]).split("-"),t=i.length,n=(n=ut(e[r+1]))?n.split("-"):null;t>0;){if(s=lt(i.slice(0,t).join("-"))){return s;}if(n&&n.length>=t&&ot(i,n)>=t-1){break;}t--}r++}return nt}(e)}function ft(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[ke]<0||n[ke]>11?ke:n[Me]<1||n[Me]>Te(n[ve],n[ke])?Me:n[De]<0||n[De]>24||24===n[De]&&(0!==n[Se]||0!==n[Ye]||0!==n[Oe])?De:n[Se]<0||n[Se]>59?Se:n[Ye]<0||n[Ye]>59?Ye:n[Oe]<0||n[Oe]>999?Oe:-1,f(e)._overflowDayOfYear&&(t<ve||t>Me)&&(t=Me),f(e)._overflowWeeks&&-1===t&&(t=be),f(e)._overflowWeekday&&-1===t&&(t=xe),f(e).overflow=t),e}var mt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],wt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pt=/^\/?Date\((-?\d+)/i,vt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,kt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Mt(e){var t,n,s,i,r,a,o=e._i,u=mt.exec(o)||_t.exec(o),l=gt.length,h=wt.length;if(u){for(f(e).iso=!0,t=0,n=l;t<n;t++){if(gt[t][1].exec(u[1])){i=gt[t][0],s=!1!==gt[t][2];break}}if(null==i){return void(e._isValid=!1);}if(u[3]){for(t=0,n=h;t<n;t++){if(wt[t][1].exec(u[3])){r=(u[2]||" ")+wt[t][0];break}}if(null==r){return void(e._isValid=!1)}}if(!s&&null!=r){return void(e._isValid=!1);}if(u[4]){if(!yt.exec(u[4])){return void(e._isValid=!1);}a="Z"}e._f=i+(r||"")+(a||""),bt(e)}else {e._isValid=!1}}function Dt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}(e),Pe.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}function St(e){var t,n=vt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(n){if(t=Dt(n[4],n[3],n[2],n[5],n[6],n[7]),!function(e,t,n){if(e){var s=$e.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(s!==i){return f(n).weekdayMismatch=!0,n._isValid=!1,!1}}return!0}(n[1],t,e)){return;}e._a=t,e._tzm=function(e,t,n){if(e){return kt[e];}if(t){return 0;}var s=parseInt(n,10),i=s%100,r=(s-i)/100;return 60*r+i}(n[8],n[9],n[10]),e._d=Ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else {e._isValid=!1}}function Yt(e,t,n){return null!=e?e:null!=t?t:n}function Ot(e){var t,s,i,r,a,o=[];if(!e._d){for(i=function(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[Me]&&null==e._a[ke]&&function(e){var t,n,s,i,r,a,o,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,a=4,n=Yt(t.GG,e._a[ve],Ie(Nt(),1,4).year),s=Yt(t.W,1),((i=Yt(t.E,1))<1||i>7)&&(u=!0)):(r=e._locale._week.dow,a=e._locale._week.doy,l=Ie(Nt(),r,a),n=Yt(t.gg,e._a[ve],l.year),s=Yt(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||t.e>6)&&(u=!0)):i=r),s<1||s>je(n,r,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(o=Ae(n,s,i,r,a),e._a[ve]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=Yt(e._a[ve],i[ve]),(e._dayOfYear>Le(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),s=Ge(a,0,e._dayOfYear),e._a[ke]=s.getUTCMonth(),e._a[Me]=s.getUTCDate()),t=0;t<3&&null==e._a[t];++t){e._a[t]=o[t]=i[t];}for(;t<7;t++){e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];}24===e._a[De]&&0===e._a[Se]&&0===e._a[Ye]&&0===e._a[Oe]&&(e._nextDay=!0,e._a[De]=0),e._d=(e._useUTC?Ge:function(e,t,n,s,i,r,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}).apply(null,o),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[De]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(f(e).weekdayMismatch=!0)}}function bt(e){if(e._f!==n.ISO_8601){if(e._f!==n.RFC_2822){e._a=[],f(e).empty=!0;var t,s,i,r,a,o,u,l=""+e._i,h=l.length,d=0;for(i=H(e._f,e._locale).match(N)||[],u=i.length,t=0;t<u;t++){r=i[t],(s=(l.match(fe(r,e))||[])[0])&&((a=l.substr(0,l.indexOf(s))).length>0&&f(e).unusedInput.push(a),l=l.slice(l.indexOf(s)+s.length),d+=s.length),W[r]?(s?f(e).empty=!1:f(e).unusedTokens.push(r),we(r,s,e)):e._strict&&!s&&f(e).unusedTokens.push(r);}f(e).charsLeftOver=h-d,l.length>0&&f(e).unusedInput.push(l),e._a[De]<=12&&!0===f(e).bigHour&&e._a[De]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[De]=(c=e._locale,m=e._a[De],null==(_=e._meridiem)?m:null!=c.meridiemHour?c.meridiemHour(m,_):null!=c.isPM?((y=c.isPM(_))&&m<12&&(m+=12),y||12!==m||(m=0),m):m),null!==(o=f(e).era)&&(e._a[ve]=e._locale.erasConvertYear(o,e._a[ve])),Ot(e),ft(e)}else {St(e);}}else {Mt(e);}var c,m,_,y}function xt(e){var t=e._i,r=e._f;return e._locale=e._locale||ct(e._l),null===t||void 0===r&&""===t?_({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),v(t)?new p(ft(t)):(l(t)?e._d=t:s(r)?function(e){var t,n,s,i,r,a,o=!1,u=e._f.length;if(0===u){return f(e).invalidFormat=!0,void(e._d=new Date(NaN));}for(i=0;i<u;i++){r=0,a=!1,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],bt(t),m(t)&&(a=!0),r+=f(t).charsLeftOver,r+=10*f(t).unusedTokens.length,f(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));}d(e,n||t)}(e):r?bt(e):function(e){var t=e._i;o(t)?e._d=new Date(n.now()):l(t)?e._d=new Date(t.valueOf()):"string"===typeof t?function(e){var t=pt.exec(e._i);null===t?(Mt(e),!1===e._isValid&&(delete e._isValid,St(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:n.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):s(t)?(e._a=h(t.slice(0),function(e){return parseInt(e,10)}),Ot(e)):i(t)?function(e){if(!e._d){var t=G(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Ot(e)}}(e):u(t)?e._d=new Date(t):n.createFromInputFallback(e)}(e),m(e)||(e._d=null),e))}function Tt(e,t,n,r,o){var u,l={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(i(e)&&a(e)||s(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=n,l._i=e,l._f=t,l._strict=r,(u=new p(ft(xt(l))))._nextDay&&(u.add(1,"d"),u._nextDay=void 0),u}function Nt(e,t,n,s){return Tt(e,t,n,s,!1)}n.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var Pt=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Nt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),Rt=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Nt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()});function Wt(e,t){var n,i;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length){return Nt();}for(n=t[0],i=1;i<t.length;++i){t[i].isValid()&&!t[i][e](n)||(n=t[i]);}return n}var Ct=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ut(e){var t=G(e),n=t.year||0,s=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,u=t.hour||0,l=t.minute||0,h=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,s=!1,i=Ct.length;for(t in e){if(r(e,t)&&(-1===pe.call(Ct,t)||null!=e[t]&&isNaN(e[t]))){return!1;}}for(n=0;n<i;++n){if(e[Ct[n]]){if(s){return!1;}parseFloat(e[Ct[n]])!==Z(e[Ct[n]])&&(s=!0)}}return!0}(t),this._milliseconds=+d+1e3*h+6e4*l+1e3*u*60*60,this._days=+o+7*a,this._months=+i+3*s+12*n,this._data={},this._locale=ct(),this._bubble()}function Ht(e){return e instanceof Ut}function Ft(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Lt(e,t){C(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+T(~~(e/60),2)+t+T(~~e%60,2)})}Lt("Z",":"),Lt("ZZ",""),ce("Z",he),ce("ZZ",he),ye(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Gt(he,e)});var Vt=/([\+\-]|\d\d)/gi;function Gt(e,t){var n,s,i,r=(t||"").match(e);return null===r?null:(n=r[r.length-1]||[],s=(n+"").match(Vt)||["-",0,0],0===(i=60*s[1]+Z(s[2]))?0:"+"===s[0]?i:-i)}function Et(e,t){var s,i;return t._isUTC?(s=t.clone(),i=(v(e)||l(e)?e.valueOf():Nt(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+i),n.updateOffset(s,!1),s):Nt(e).local()}function At(e){return-Math.round(e._d.getTimezoneOffset())}function It(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var jt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Zt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function zt(e,t){var n,s,i,a,o,l,h=e,d=null;return Ht(e)?h={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(h={},t?h[t]=+e:h.milliseconds=+e):(d=jt.exec(e))?(n="-"===d[1]?-1:1,h={y:0,d:Z(d[Me])*n,h:Z(d[De])*n,m:Z(d[Se])*n,s:Z(d[Ye])*n,ms:Z(Ft(1e3*d[Oe]))*n}):(d=Zt.exec(e))?(n="-"===d[1]?-1:1,h={y:$t(d[2],n),M:$t(d[3],n),w:$t(d[4],n),d:$t(d[5],n),h:$t(d[6],n),m:$t(d[7],n),s:$t(d[8],n)}):null==h?h={}:"object"===typeof h&&("from"in h||"to"in h)&&(a=Nt(h.from),o=Nt(h.to),i=a.isValid()&&o.isValid()?(o=Et(o,a),a.isBefore(o)?l=qt(a,o):((l=qt(o,a)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(h={}).ms=i.milliseconds,h.M=i.months),s=new Ut(h),Ht(e)&&r(e,"_locale")&&(s._locale=e._locale),Ht(e)&&r(e,"_isValid")&&(s._isValid=e._isValid),s}function $t(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function qt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Bt(e,t){return function(n,s){var i;return null===s||isNaN(+s)||(Y(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=s,s=i),Jt(this,zt(n,s),e),this}}function Jt(e,t,s,i){var r=t._milliseconds,a=Ft(t._days),o=Ft(t._months);e.isValid()&&(i=null==i||i,o&&Ue(e,$(e,"Month")+o*s),a&&q(e,"Date",$(e,"Date")+a*s),r&&e._d.setTime(e._d.valueOf()+r*s),i&&n.updateOffset(e,a||o))}zt.fn=Ut.prototype,zt.invalid=function(){return zt(NaN)};var Qt=Bt(1,"add"),Xt=Bt(-1,"subtract");function Kt(e){return"string"===typeof e||e instanceof String}function en(e,t){if(e.date()<t.date()){return-en(t,e);}var n,s,i=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(i,"months");return t-r<0?(n=e.clone().add(i-1,"months"),s=(t-r)/(r-n)):(n=e.clone().add(i+1,"months"),s=(t-r)/(n-r)),-(i+s)||0}function tn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ct(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var nn=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function sn(){return this._locale}var rn=1e3,an=60*rn,on=60*an,un=3506328*on;function ln(e,t){return(e%t+t)%t}function hn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-un:new Date(e,t,n).valueOf()}function dn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-un:Date.UTC(e,t,n)}function cn(e,t){return t.erasAbbrRegex(e)}function fn(){var e,t,n=[],s=[],i=[],r=[],a=this.eras();for(e=0,t=a.length;e<t;++e){s.push(me(a[e].name)),n.push(me(a[e].abbr)),i.push(me(a[e].narrow)),r.push(me(a[e].name)),r.push(me(a[e].abbr)),r.push(me(a[e].narrow));}this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function mn(e,t){C(0,[e,e.length],0,t)}function _n(e,t,n,s,i){var r;return null==e?Ie(this,s,i).year:(r=je(e,s,i),t>r&&(t=r),function(e,t,n,s,i){var r=Ae(e,t,n,s,i),a=Ge(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}C("N",0,0,"eraAbbr"),C("NN",0,0,"eraAbbr"),C("NNN",0,0,"eraAbbr"),C("NNNN",0,0,"eraName"),C("NNNNN",0,0,"eraNarrow"),C("y",["y",1],"yo","eraYear"),C("y",["yy",2],0,"eraYear"),C("y",["yyy",3],0,"eraYear"),C("y",["yyyy",4],0,"eraYear"),ce("N",cn),ce("NN",cn),ce("NNN",cn),ce("NNNN",function(e,t){return t.erasNameRegex(e)}),ce("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),ye(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?f(n).era=i:f(n).invalidEra=e}),ce("y",oe),ce("yy",oe),ce("yyy",oe),ce("yyyy",oe),ce("yo",function(e,t){return t._eraYearOrdinalRegex||oe}),ye(["y","yy","yyy","yyyy"],ve),ye(["yo"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[ve]=n._locale.eraYearOrdinalParse(e,i):t[ve]=parseInt(e,10)}),C(0,["gg",2],0,function(){return this.weekYear()%100}),C(0,["GG",2],0,function(){return this.isoWeekYear()%100}),mn("gggg","weekYear"),mn("ggggg","weekYear"),mn("GGGG","isoWeekYear"),mn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),ce("G",ue),ce("g",ue),ce("GG",te,Q),ce("gg",te,Q),ce("GGGG",re,K),ce("gggg",re,K),ce("GGGGG",ae,ee),ce("ggggg",ae,ee),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=Z(e)}),ge(["gg","GG"],function(e,t,s,i){t[i]=n.parseTwoDigitYear(e)}),C("Q",0,"Qo","quarter"),L("quarter","Q"),A("quarter",7),ce("Q",J),ye("Q",function(e,t){t[ke]=3*(Z(e)-1)}),C("D",["DD",2],"Do","date"),L("date","D"),A("date",9),ce("D",te),ce("DD",te,Q),ce("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ye(["D","DD"],Me),ye("Do",function(e,t){t[Me]=Z(e.match(te)[0])});var yn=z("Date",!0);C("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),A("dayOfYear",4),ce("DDD",ie),ce("DDDD",X),ye(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Z(e)}),C("m",["mm",2],0,"minute"),L("minute","m"),A("minute",14),ce("m",te),ce("mm",te,Q),ye(["m","mm"],Se);var gn=z("Minutes",!1);C("s",["ss",2],0,"second"),L("second","s"),A("second",15),ce("s",te),ce("ss",te,Q),ye(["s","ss"],Ye);var wn,pn,vn=z("Seconds",!1);for(C("S",0,0,function(){return~~(this.millisecond()/100)}),C(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),C(0,["SSS",3],0,"millisecond"),C(0,["SSSS",4],0,function(){return 10*this.millisecond()}),C(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),C(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),C(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),C(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),C(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),A("millisecond",16),ce("S",ie,J),ce("SS",ie,Q),ce("SSS",ie,X),wn="SSSS";wn.length<=9;wn+="S"){ce(wn,oe);}function kn(e,t){t[Oe]=Z(1e3*("0."+e))}for(wn="S";wn.length<=9;wn+="S"){ye(wn,kn);}pn=z("Milliseconds",!1),C("z",0,0,"zoneAbbr"),C("zz",0,0,"zoneName");var Mn=p.prototype;function Dn(e){return e}Mn.add=Qt,Mn.calendar=function(e,t){var o;1===arguments.length&&(arguments[0]?v(o=arguments[0])||l(o)||Kt(o)||u(o)||function(e){var t=s(e),n=!1;return t&&(n=0===e.filter(function(t){return!u(t)&&Kt(e)}).length),t&&n}(o)||function(e){var t,n=i(e)&&!a(e),s=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],u=o.length;for(t=0;t<u;t+=1){s=s||r(e,o[t]);}return n&&s}(o)||null==o?(e=arguments[0],t=void 0):function(e){var t,n=i(e)&&!a(e),s=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1){s=s||r(e,o[t]);}return n&&s}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var h=e||Nt(),d=Et(h,this).startOf("day"),c=n.calendarFormat(this,d)||"sameElse",f=t&&(O(t[c])?t[c].call(this,h):t[c]);return this.format(f||this.localeData().calendar(c,this,Nt(h)))},Mn.clone=function(){return new p(this)},Mn.diff=function(e,t,n){var s,i,r;if(!this.isValid()){return NaN;}if(!(s=Et(e,this)).isValid()){return NaN;}switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=V(t)){case"year":r=en(this,s)/12;break;case"month":r=en(this,s);break;case"quarter":r=en(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:j(r)},Mn.endOf=function(e){var t,s;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid()){return this;}switch(s=this._isUTC?dn:hn,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=on-ln(t+(this._isUTC?0:this.utcOffset()*an),on)-1;break;case"minute":t=this._d.valueOf(),t+=an-ln(t,an)-1;break;case"second":t=this._d.valueOf(),t+=rn-ln(t,rn)-1}return this._d.setTime(t),n.updateOffset(this,!0),this},Mn.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=U(this,e);return this.localeData().postformat(t)},Mn.from=function(e,t){return this.isValid()&&(v(e)&&e.isValid()||Nt(e).isValid())?zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Mn.fromNow=function(e){return this.from(Nt(),e)},Mn.to=function(e,t){return this.isValid()&&(v(e)&&e.isValid()||Nt(e).isValid())?zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Mn.toNow=function(e){return this.to(Nt(),e)},Mn.get=function(e){return O(this[e=V(e)])?this[e]():this},Mn.invalidAt=function(){return f(this).overflow},Mn.isAfter=function(e,t){var n=v(e)?e:Nt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Mn.isBefore=function(e,t){var n=v(e)?e:Nt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Mn.isBetween=function(e,t,n,s){var i=v(e)?e:Nt(e),r=v(t)?t:Nt(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(r,n):!this.isAfter(r,n))},Mn.isSame=function(e,t){var n,s=v(e)?e:Nt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Mn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Mn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Mn.isValid=function(){return m(this)},Mn.lang=nn,Mn.locale=tn,Mn.localeData=sn,Mn.max=Rt,Mn.min=Pt,Mn.parsingFlags=function(){return d({},f(this))},Mn.set=function(e,t){if("object"===typeof e){var n,s=function(e){var t,n=[];for(t in e){r(e,t)&&n.push({unit:t,priority:E[t]});}return n.sort(function(e,t){return e.priority-t.priority}),n}(e=G(e)),i=s.length;for(n=0;n<i;n++){this[s[n].unit](e[s[n].unit])}}else if(O(this[e=V(e)])){return this[e](t);}return this},Mn.startOf=function(e){var t,s;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid()){return this;}switch(s=this._isUTC?dn:hn,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ln(t+(this._isUTC?0:this.utcOffset()*an),on);break;case"minute":t=this._d.valueOf(),t-=ln(t,an);break;case"second":t=this._d.valueOf(),t-=ln(t,rn)}return this._d.setTime(t),n.updateOffset(this,!0),this},Mn.subtract=Xt,Mn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Mn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Mn.toDate=function(){return new Date(this.valueOf())},Mn.toISOString=function(e){if(!this.isValid()){return null;}var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?U(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(n,"Z")):U(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Mn.inspect=function(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)";}var e,t,n,s="moment",i="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!==typeof Symbol&&null!=Symbol.for&&(Mn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Mn.toJSON=function(){return this.isValid()?this.toISOString():null},Mn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Mn.unix=function(){return Math.floor(this.valueOf()/1e3)},Mn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Mn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Mn.eraName=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until){return s[e].name;}if(s[e].until<=n&&n<=s[e].since){return s[e].name}}return""},Mn.eraNarrow=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until){return s[e].narrow;}if(s[e].until<=n&&n<=s[e].since){return s[e].narrow}}return""},Mn.eraAbbr=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until){return s[e].abbr;}if(s[e].until<=n&&n<=s[e].since){return s[e].abbr}}return""},Mn.eraYear=function(){var e,t,s,i,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(s=r[e].since<=r[e].until?1:-1,i=this.clone().startOf("day").valueOf(),r[e].since<=i&&i<=r[e].until||r[e].until<=i&&i<=r[e].since){return(this.year()-n(r[e].since).year())*s+r[e].offset;}}return this.year()},Mn.year=Ve,Mn.isLeapYear=function(){return I(this.year())},Mn.weekYear=function(e){return _n.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Mn.isoWeekYear=function(e){return _n.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Mn.quarter=Mn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Mn.month=He,Mn.daysInMonth=function(){return Te(this.year(),this.month())},Mn.week=Mn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Mn.isoWeek=Mn.isoWeeks=function(e){var t=Ie(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Mn.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},Mn.weeksInWeekYear=function(){var e=this.localeData()._week;return je(this.weekYear(),e.dow,e.doy)},Mn.isoWeeksInYear=function(){return je(this.year(),1,4)},Mn.isoWeeksInISOWeekYear=function(){return je(this.isoWeekYear(),1,4)},Mn.date=yn,Mn.day=Mn.days=function(e){if(!this.isValid()){return null!=e?this:NaN;}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},Mn.weekday=function(e){if(!this.isValid()){return null!=e?this:NaN;}var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Mn.isoWeekday=function(e){if(!this.isValid()){return null!=e?this:NaN;}if(null!=e){var t=function(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Mn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Mn.hour=Mn.hours=st,Mn.minute=Mn.minutes=gn,Mn.second=Mn.seconds=vn,Mn.millisecond=Mn.milliseconds=pn,Mn.utcOffset=function(e,t,s){var i,r=this._offset||0;if(!this.isValid()){return null!=e?this:NaN;}if(null!=e){if("string"===typeof e){if(null===(e=Gt(he,e))){return this}}else {Math.abs(e)<16&&!s&&(e*=60);}return!this._isUTC&&t&&(i=At(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Jt(this,zt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:At(this)},Mn.utc=function(e){return this.utcOffset(0,e)},Mn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(At(this),"m")),this},Mn.parseZone=function(){if(null!=this._tzm){this.utcOffset(this._tzm,!1,!0);}else if("string"===typeof this._i){var e=Gt(le,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Mn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Nt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Mn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Mn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Mn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Mn.isUtc=It,Mn.isUTC=It,Mn.zoneAbbr=function(){return this._isUTC?"UTC":""},Mn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Mn.dates=M("dates accessor is deprecated. Use date instead.",yn),Mn.months=M("months accessor is deprecated. Use month instead",He),Mn.years=M("years accessor is deprecated. Use year instead",Ve),Mn.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),Mn.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted)){return this._isDSTShifted;}var e,t={};return w(t,this),(t=xt(t))._a?(e=t._isUTC?c(t._a):Nt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++){(n&&e[s]!==t[s]||!n&&Z(e[s])!==Z(t[s]))&&a++;}return a+r}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var Sn=x.prototype;function Yn(e,t,n,s){var i=ct(),r=c().set(s,t);return i[n](r,e)}function On(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t){return Yn(e,t,n,"month");}var s,i=[];for(s=0;s<12;s++){i[s]=Yn(e,s,n,"month");}return i}function bn(e,t,n,s){"boolean"===typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var i,r=ct(),a=e?r._week.dow:0,o=[];if(null!=n){return Yn(t,(n+a)%7,s,"day");}for(i=0;i<7;i++){o[i]=Yn(t,(i+a)%7,s,"day");}return o}Sn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return O(s)?s.call(t,n):s},Sn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(N).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},Sn.invalidDate=function(){return this._invalidDate},Sn.ordinal=function(e){return this._ordinal.replace("%d",e)},Sn.preparse=Dn,Sn.postformat=Dn,Sn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return O(i)?i(e,t,n,s):i.replace(/%d/i,e)},Sn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)},Sn.set=function(e){var t,n;for(n in e){r(e,n)&&(O(t=e[n])?this[n]=t:this["_"+n]=t);}this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Sn.eras=function(e,t){var s,i,r,a=this._eras||ct("en")._eras;for(s=0,i=a.length;s<i;++s){switch(typeof a[s].since){case"string":r=n(a[s].since).startOf("day"),a[s].since=r.valueOf()}switch(typeof a[s].until){case"undefined":a[s].until=1/0;break;case"string":r=n(a[s].until).startOf("day").valueOf(),a[s].until=r.valueOf()}}return a},Sn.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s){if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n){switch(t){case"N":case"NN":case"NNN":if(a===e){return u[s];}break;case"NNNN":if(r===e){return u[s];}break;case"NNNNN":if(o===e){return u[s]}}}else if([r,a,o].indexOf(e)>=0){return u[s]}}},Sn.erasConvertYear=function(e,t){var s=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*s},Sn.erasAbbrRegex=function(e){return r(this,"_erasAbbrRegex")||fn.call(this),e?this._erasAbbrRegex:this._erasRegex},Sn.erasNameRegex=function(e){return r(this,"_erasNameRegex")||fn.call(this),e?this._erasNameRegex:this._erasRegex},Sn.erasNarrowRegex=function(e){return r(this,"_erasNarrowRegex")||fn.call(this),e?this._erasNarrowRegex:this._erasRegex},Sn.months=function(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Re).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone},Sn.monthsShort=function(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Re.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Sn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact){return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse){for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s){r=c([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();}}return n?"MMM"===t?-1!==(i=pe.call(this._shortMonthsParse,a))?i:null:-1!==(i=pe.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=pe.call(this._shortMonthsParse,a))?i:-1!==(i=pe.call(this._longMonthsParse,a))?i:null:-1!==(i=pe.call(this._longMonthsParse,a))?i:-1!==(i=pe.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);}for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=c([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e)){return s;}if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e)){return s;}if(!n&&this._monthsParse[s].test(e)){return s}}},Sn.monthsRegex=function(e){return this._monthsParseExact?(r(this,"_monthsRegex")||Fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(r(this,"_monthsRegex")||(this._monthsRegex=Ce),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Sn.monthsShortRegex=function(e){return this._monthsParseExact?(r(this,"_monthsRegex")||Fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(r(this,"_monthsShortRegex")||(this._monthsShortRegex=We),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Sn.week=function(e){return Ie(e,this._week.dow,this._week.doy).week},Sn.firstDayOfYear=function(){return this._week.doy},Sn.firstDayOfWeek=function(){return this._week.dow},Sn.weekdays=function(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ze(n,this._week.dow):e?n[e.day()]:n},Sn.weekdaysMin=function(e){return!0===e?Ze(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Sn.weekdaysShort=function(e){return!0===e?Ze(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Sn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact){return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse){for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s){r=c([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();}}return n?"dddd"===t?-1!==(i=pe.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=pe.call(this._weekdaysParse,a))?i:-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:-1!==(i=pe.call(this._weekdaysParse,a))?i:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:null:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:-1!==(i=pe.call(this._weekdaysParse,a))?i:-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);}for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=c([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e)){return s;}if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e)){return s;}if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e)){return s;}if(!n&&this._weekdaysParse[s].test(e)){return s}}},Sn.weekdaysRegex=function(e){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(r(this,"_weekdaysRegex")||(this._weekdaysRegex=Be),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Sn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(r(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Sn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(r(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Sn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Sn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ht("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===Z(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),n.lang=M("moment.lang is deprecated. Use moment.locale instead.",ht),n.langData=M("moment.langData is deprecated. Use moment.localeData instead.",ct);var xn=Math.abs;function Tn(e,t,n,s){var i=zt(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function Nn(e){return e<0?Math.floor(e):Math.ceil(e)}function Pn(e){return 4800*e/146097}function Rn(e){return 146097*e/4800}function Wn(e){return function(){return this.as(e)}}var Cn=Wn("ms"),Un=Wn("s"),Hn=Wn("m"),Fn=Wn("h"),Ln=Wn("d"),Vn=Wn("w"),Gn=Wn("M"),En=Wn("Q"),An=Wn("y");function In(e){return function(){return this.isValid()?this._data[e]:NaN}}var jn=In("milliseconds"),Zn=In("seconds"),zn=In("minutes"),$n=In("hours"),qn=In("days"),Bn=In("months"),Jn=In("years"),Qn=Math.round,Xn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},Kn=Math.abs;function es(e){return(e>0)-(e<0)||+e}function ts(){if(!this.isValid()){return this.localeData().invalidDate();}var e,t,n,s,i,r,a,o,u=Kn(this._milliseconds)/1e3,l=Kn(this._days),h=Kn(this._months),d=this.asSeconds();return d?(e=j(u/60),t=j(e/60),u%=60,e%=60,n=j(h/12),h%=12,s=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",r=es(this._months)!==es(d)?"-":"",a=es(this._days)!==es(d)?"-":"",o=es(this._milliseconds)!==es(d)?"-":"",i+"P"+(n?r+n+"Y":"")+(h?r+h+"M":"")+(l?a+l+"D":"")+(t||e||u?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(u?o+s+"S":"")):"P0D"}var ns=Ut.prototype;return ns.isValid=function(){return this._isValid},ns.abs=function(){var e=this._data;return this._milliseconds=xn(this._milliseconds),this._days=xn(this._days),this._months=xn(this._months),e.milliseconds=xn(e.milliseconds),e.seconds=xn(e.seconds),e.minutes=xn(e.minutes),e.hours=xn(e.hours),e.months=xn(e.months),e.years=xn(e.years),this},ns.add=function(e,t){return Tn(this,e,t,1)},ns.subtract=function(e,t){return Tn(this,e,t,-1)},ns.as=function(e){if(!this.isValid()){return NaN;}var t,n,s=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e){switch(t=this._days+s/864e5,n=this._months+Pn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}}else {switch(t=this._days+Math.round(Rn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}}},ns.asMilliseconds=Cn,ns.asSeconds=Un,ns.asMinutes=Hn,ns.asHours=Fn,ns.asDays=Ln,ns.asWeeks=Vn,ns.asMonths=Gn,ns.asQuarters=En,ns.asYears=An,ns.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Z(this._months/12):NaN},ns._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return r>=0&&a>=0&&o>=0||r<=0&&a<=0&&o<=0||(r+=864e5*Nn(Rn(o)+a),a=0,o=0),u.milliseconds=r%1e3,e=j(r/1e3),u.seconds=e%60,t=j(e/60),u.minutes=t%60,n=j(t/60),u.hours=n%24,a+=j(n/24),i=j(Pn(a)),o+=i,a-=Nn(Rn(i)),s=j(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},ns.clone=function(){return zt(this)},ns.get=function(e){return e=V(e),this.isValid()?this[e+"s"]():NaN},ns.milliseconds=jn,ns.seconds=Zn,ns.minutes=zn,ns.hours=$n,ns.days=qn,ns.weeks=function(){return j(this.days()/7)},ns.months=Bn,ns.years=Jn,ns.humanize=function(e,t){if(!this.isValid()){return this.localeData().invalidDate();}var n,s,i=!1,r=Xn;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(r=Object.assign({},Xn,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),n=this.localeData(),s=function(e,t,n,s){var i=zt(e).abs(),r=Qn(i.as("s")),a=Qn(i.as("m")),o=Qn(i.as("h")),u=Qn(i.as("d")),l=Qn(i.as("M")),h=Qn(i.as("w")),d=Qn(i.as("y")),c=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(c=c||h<=1&&["w"]||h<n.w&&["ww",h]),(c=c||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=t,c[3]=+e>0,c[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,c)}(this,!i,r,n),i&&(s=n.pastFuture(+this,s)),n.postformat(s)},ns.toISOString=ts,ns.toString=ts,ns.toJSON=ts,ns.locale=tn,ns.localeData=sn,ns.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ts),ns.lang=nn,C("X",0,0,"unix"),C("x",0,0,"valueOf"),ce("x",ue),ce("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),ye("x",function(e,t,n){n._d=new Date(Z(e))}),
//! moment.js
n.version="2.29.3",e=Nt,n.fn=Mn,n.min=function(){return Wt("isBefore",[].slice.call(arguments,0))},n.max=function(){return Wt("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=c,n.unix=function(e){return Nt(1e3*e)},n.months=function(e,t){return On(e,t,"months")},n.isDate=l,n.locale=ht,n.invalid=_,n.duration=zt,n.isMoment=v,n.weekdays=function(e,t,n){return bn(e,t,n,"weekdays")},n.parseZone=function(){return Nt.apply(null,arguments).parseZone()},n.localeData=ct,n.isDuration=Ht,n.monthsShort=function(e,t){return On(e,t,"monthsShort")},n.weekdaysMin=function(e,t,n){return bn(e,t,n,"weekdaysMin")},n.defineLocale=dt,n.updateLocale=function(e,t){if(null!=t){var n,s,i=it;null!=rt[e]&&null!=rt[e].parentLocale?rt[e].set(b(rt[e]._config,t)):(null!=(s=lt(e))&&(i=s._config),t=b(i,t),null==s&&(t.abbr=e),(n=new x(t)).parentLocale=rt[e],rt[e]=n),ht(e)}else {null!=rt[e]&&(null!=rt[e].parentLocale?(rt[e]=rt[e].parentLocale,e===ht()&&ht(e)):null!=rt[e]&&delete rt[e]);}return rt[e]},n.locales=function(){return D(rt)},n.weekdaysShort=function(e,t,n){return bn(e,t,n,"weekdaysShort")},n.normalizeUnits=V,n.relativeTimeRounding=function(e){return void 0===e?Qn:"function"===typeof e&&(Qn=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==Xn[e]&&(void 0===t?Xn[e]:(Xn[e]=t,"s"===e&&(Xn.ss=t-1),!0))},n.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},n.prototype=Mn,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}()}.call(e),e.moment});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.lib.js' */
define("jira/moment/moment.lib",["atlassian/libs/moment-2.29.3"],function(n){return n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.formatter.js' */
define("jira/moment/moment.jira.formatter",["underscore","exports"],function(t,e){"use strict";function r(e){return u[e]||t.reduce(e,function(t,e){return t+(u[e]||e)},"")}function n(e){var n=!1,u=!1,a="",o=t.reduce(e,function(t,e,o,i){return u?u=!1:"'"===e?(a&&(t+=r(a),a=""),"'"===i[o+1]?(t+=e,u=!0):(t+=n?"]":"[",n=!n)):n?t+=e:/[a-zA-Z]/.test(e)?a&&a[a.length-1]!==e?(t+=r(a),a=e):a+=e:(a&&(t+=r(a),a=""),t+=e),t},"");return a&&(o+=r(a)),o}var u={d:"D",y:"Y",a:"A",E:"d",u:"d",Z:"ZZ",z:"[GMT]ZZ",XX:"ZZ",XXX:"Z"};e.translateSimpleDateFormat=n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.i18n.js' */
define("jira/moment/moment.jira.i18n",["jira/moment/moment.lib","jira/moment/moment.jira.formatter","jira/util/formatter","jira/util/data/meta","wrm/data"],function(e,t,a,m,o){"use strict";var r=o.claim("jira.webresources:dateFormatProvider.dateFormat");e.locale("jira",{months:r.months,monthsShort:r.monthsShort,weekdays:r.weekdays,weekdaysShort:r.weekdaysShort,weekdaysMin:r.weekdaysShort,longDateFormat:{LT:t.translateSimpleDateFormat(m.get("date-time")),L:t.translateSimpleDateFormat(m.get("date-day")),LL:t.translateSimpleDateFormat(m.get("date-dmy")),LLL:t.translateSimpleDateFormat(m.get("date-complete"))},meridiem:function(e){return r.meridiem[+(e>11)]},calendar:{sameDay:"LLL",nextDay:"LLL",nextWeek:"LLL",lastDay:"LLL",lastWeek:"LLL",sameElse:"LLL"},relativeTime:{future:a.format("in {0}","%s"),past:a.format("{0} ago","%s"),s:"a few seconds",m:"a minute",mm:a.format("{0} minutes","%d"),h:"an hour",hh:a.format("{0} hours","%d"),d:"a day",dd:a.format("{0} days","%d"),M:"a month",MM:a.format("{0} months","%d"),y:"a year",yy:a.format("{0} years","%d")}})});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.js' */
define("jira/moment",["jira/moment/moment.lib","jira/moment/moment.jira.i18n"],function(t,n){return t.splitDate=function(t,n){return Date.splitDate(t,n)},t});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.legacy.js' */
!function(){AJS.namespace("JIRA.translateSimpleDateFormat",null,require("jira/moment/moment.jira.formatter").translateSimpleDateFormat),AJS.namespace("window.moment",null,require("jira/moment"))}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'jira-dnd-attachment-module/js/ctrlv/time.js' */
define("dndattachment/ctrlv/time",[],function(){"use strict";return moment});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'jira-dnd-attachment-module/js/ctrlv/base64decode.js' */
define("dndattachment/ctrlv/base64decode",["exports"],function(e){"use strict";function n(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0}var r=function(e){for(var r,t,a=e.replace(/[^A-Za-z0-9\+\/]/g,""),c=a.length,i=3*c+1>>2,d=new Uint8Array(i),o=0,s=0,f=0;f<c;f++)if(t=3&f,o|=n(a.charCodeAt(f))<<18-6*t,3===t||c-f===1){for(r=0;r<3&&s<i;r++,s++)d[s]=o>>>(16>>>r&24)&255;o=0}return d};e.base64decode=r,e.decodeBase64DataUri=function(e){var n=";base64,",t=e.slice(0,e.indexOf(n))+n,a=e.substring(t.length);return r(a)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'jira-dnd-attachment-module/js/ctrlv/utility.js' */
define("dndattachment/ctrlv/utility",["jquery","underscore","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/time","jira/flag","jira/util/navigator","exports"],function(t,e,n,a,i,r,o){"use strict";o.isKeyPasteEvent=function(t,e){var n=86,a=(e||"").indexOf("Mac")!==-1||r.isMac();return t.which===n&&(a?t.metaKey:t.ctrlKey)},o.isImagePasteEvent=function(t){if(t&&t.clipboardData){var n=e.union(e.toArray(t.clipboardData.items),e.toArray(t.clipboardData.files)),a=n.some(function(t){return t.type.indexOf("image")!==-1}),i=n.some(function(t){return t.type.indexOf("rtf")!==-1});return a&&!i}};var s=function(t){if(t.clipboardData&&t.clipboardData.types&&e.contains(t.clipboardData.types,"text/html")){var n=t.clipboardData.getData("text/html"),a=new DOMParser,i=a.parseFromString(n,"text/html"),r=i.body.querySelectorAll("img");return 1===r.length?r[0].getAttribute("src"):null}};o.getHtmlImagePaste=s,o.isHtmlImagePasteEvent=function(t){return null!=s(t)},o.isTextPasteEvent=function(t){return t.clipboardData.types&&(e.contains(t.clipboardData.types,"text/plain")||e.contains(t.clipboardData.types,"text/html"))},o.isContentEditable=function(e){return"true"==e.contentEditable||""==e.contentEditable||"inherit"==e.contentEditable&&t(e).parents().is("[contenteditable=true]")},o.isValidFileName=function(t){return!e(["\\","/",'"',":","?","*","<","|",">","!"]).any(function(e){return t.indexOf(e)>-1})},o.getTextPasteContent=function(t){return t.clipboardData.types&&e.contains(t.clipboardData.types,"text/plain")&&t.clipboardData.getData("text/plain")||""},o.getTextContent=function(e){return e?r.isIE()&&"undefined"!=typeof e.innerText?e.innerText:t(e).text():""},o.normalizePasteEvent=function(t){return t&&t.originalEvent&&t.originalEvent.clipboardData&&(t.clipboardData=t.originalEvent.clipboardData),t&&!t.clipboardData&&window.clipboardData&&(t.clipboardData={files:window.clipboardData.files,types:{contains:function(t){if("text/plain"==t)return!!window.clipboardData.getData("Text")}},getData:function(t){if("text/plain"==t)return window.clipboardData.getData("Text")}}),t},o.browserIsSupported=function(e){var n=(e||"").indexOf("Mac")!==-1||r.isMac(),a=r.isSafari(),i=r.isIE();if(n&&a)return!1;if(i&&!r.isEdge()){var o=document.documentElement.className.split(/\s+/),s=t.inArray("msie-gt-10",o)>-1,l=t.inArray("msie-gt-11",o)>-1,u=i&&s&&!l;return u}return!0},o.browserIsNativePaste=function(){return r.isChrome()||r.isSafari()},o.isWikiTextfield=function(t){return t.is(":input")&&t.hasClass("wiki-textfield")};var l=function(t){return t.is("input#summary")},u=function(n,a,i,r){var s=t(a);if((o.isWikiTextfield(s)||l(s))&&n){s.is(":focus")||s.one("focus",function(){var t=s[0];t.selectionStart=t.selectionEnd=i+n.length});var u=s.val(),c=u.substring(0,i),d=u.substring(r,u.length),f=s.data("wikiEditor");f&&f.undoRedoEl&&e.isFunction(f.undoRedoEl.recordHistoryItem)&&f.undoRedoEl.recordHistoryItem(),s.val(c+n+d),s.trigger("input"),a.selectionStart=a.selectionEnd=i+n.length,f&&f.undoRedoEl&&e.isFunction(f.undoRedoEl.updateCurrent)&&f.undoRedoEl.updateCurrent()}};o.insertToInput=u,o.getMarkup=function(t){var n=["gif"],a=["bmp","jpeg","jpg","png"],i=t.split("."),r=i[i.length-1].toLowerCase();return e.contains(n,r)?"!"+t+"!":e.contains(a,r)?"!"+t+"|thumbnail!":"[^"+t+"]"},o.insertWikiMarkup=function(t,e,n,a){var i=o.getMarkup(t);i&&(i=" "+i+" ",u(i,e,n,a))},o.loadImage=function(e){var n=new t.Deferred,a=new Image;return a.setAttribute("crossOrigin","anonymous"),a.onload=function(){n.resolve(a)},a.onerror=n.reject.bind(n),a.src=e,a.width>0&&a.height>0&&n.resolve(a),n},o.convertImageToBlob=function(e){var a=t("<canvas>").attr("width",e.width).attr("height",e.height)[0];a.getContext("2d").drawImage(e,0,0);try{if(a.mozGetAsFile)return a.mozGetAsFile("image/png");if(a.toDataURL)return new Blob([n.decodeBase64DataUri(a.toDataURL("image/png"))],{type:"image/png"})}catch(t){return null}},o.convertBlobToImage=function(t,e){var n=new Blob([t.slice()],{type:t.type});return n.lastModifiedDate=new Date,n.name=e,n},o.dropFileToElement=function(e,n){var a=e.name;a||(a=this.generateFileName(),e.name=a+".png");var i=t.Event("drop",{dataTransfer:{files:[e]},isPasteEvent:!0}),r=!1;return t(document).on("dropHandled.dropFileToElement",function(){r=!0}),n.trigger(i),t(document).off(".dropFileToElement"),r},o.generateFileName=function(){return"image-"+a().format("YYYY-MM-DD-HH-mm-ss-SSS")},o.getCurrentIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()},o.showErrorMsg=function(t,e){i.showErrorMsg(t,e)},o.createBlobFromFile=function(t){var e=new Blob([t.slice()],{type:t.type});return e.name=t.name,e},o.dragEventContainsFiles=function(t){if(!t.dataTransfer||!t.dataTransfer.types)return!0;var n=t.dataTransfer.types;return r.isMozilla()?e.contains(n,"application/x-moz-file"):e.contains(n,"Files")}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/Configuration.js' */
define("dndattachment/util/Configuration",["underscore"],function(n){function t(t){return n.isFunction(WRM.data)?WRM.data(t):WRM.data.claim(t)}var a="com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.";return{getWRM:n.memoize(function(n){return t(a+n)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/DataTransfer.js' */
define("dndattachment/util/DataTransfer",["jquery"],function(e){return Class.extend({init:function(e){this._dataTransfer=e},getFiles:function(){var n=this._dataTransfer.files,r=this._dataTransfer.items;return r&&r.length>0&&_.any(r,function(e){return!!e.webkitGetAsEntry})?this.readEntries(r):n&&n.length>0?this.readFiles(this._dataTransfer.files):(new e.Deferred).reject()},readFiles:function(n){var r=new e.Deferred;return e.when.apply(window,_.map(n,function(r){var t=new e.Deferred,i=!r.name.match(/\.([a-z0-9]+)$/i);return i&&r.size<=8192||8192==r.size||4096==r.size||r.size<=1024?this.readFileAsText(r).fail(function(){n=_(n).without(r)}).always(t.resolve.bind(t)):t.resolve(),t}.bind(this))).always(function(){r.resolve(n)}),r},readFileAsText:function(n){var r=new e.Deferred,t=new FileReader;return t.onload=function(){r.resolve(this.result)},t.onerror=function(){r.reject(this.error)},t.readAsText(n),r},readEntries:function(n){var r=new e.Deferred;return n=_.filter(n,function(e){return"file"===e.kind}),e.when.apply(window,_.map(n,function(e){return this.readEntry(e.webkitGetAsEntry(),e)}.bind(this))).then(function(){r.resolve(_.union.apply(_,arguments))},r.reject.bind(r)),r},readEntry:function(n,r){var t=new e.Deferred;return n.isFile?r&&r.getAsFile?t.resolve([r.getAsFile()]):n.file(function(e){t.resolve([e])}):n.isDirectory&&n.createReader().readEntries(function(n){var r=[];e.when.apply(window,_.map(n,function(e){return this.readEntry(e).then(function(e){return r.push.apply(r,e)})}.bind(this))).always(function(){t.resolve(r)})}.bind(this)),t}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/FileSizeUtil.js' */
define("dndattachment/util/FileSizeUtil",function(){function n(n){return n>u?t(n):n>i?r(n):e(n)}function t(n){var t=n/u;return t.toFixed(2)+a}function r(n){var t=Math.round(n/i);return t+o}function e(n){var t=n/i;return t.toFixed(1)+o}var i=1024,u=i*i,o=" kB",a=" MB";return{format:n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/AttachmentEvents.js' */
define("dndattachment/util/events/types",{ATTACHMENT_FOR_PAGE_RECEIVED:"attachmentForPageReceived"});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'jira-dnd-attachment-module/js/upload/UploadHandler.js' */
define("dndattachment/upload/handler",["jira/util/events","dndattachment/util/events/types","underscore","jquery","dndattachment/ctrlv/utility","exports","dndattachment/upload/default/executor"],function(e,t,n,i,a,r,o){var u,l,s=[],c=function(e,t){return n.find(s,function(n){return n.isValid(e,t)})},f=function(e,t){var r=i.Deferred(),o=JIRA.Dialog.current;if(o){AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste",data:{}});var l=a.createBlobFromFile(t.files[0]);a.dropFileToElement(l,o.$form)&&r.resolve([t.files[0].name])}else{var s=c(e,t);s&&(r=s.processFiles(t.files,u),t.successCallback&&r.done(t.successCallback),t.failureCallback&&r.fail(t.failureCallback),t.alwaysCallback&&r.always(t.alwaysCallback))}r.done(function(e,r){if(!r&&t.isWikiTextfieldFocused){var u=t.wikiTextfield;n.each(e,function(e){a.insertWikiMarkup(e,u,u.selectionStart,u.selectionStart)}),o&&t.isPaste&&AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste.insertWikiMarkup",data:{}}),i(t.wikiTextfield).is(":focus")||setTimeout(function(){t.wikiTextfield.focus()},0)}})},d=function(e){if(e){var t="undefined"!=typeof e.isValid,n="undefined"!=typeof e.processFiles,i="undefined"!=typeof e.weight,a="undefined"!=typeof e.name;return t&&n&&i&&a}return!1};r.registerExecutor=function(e){var t=d(e);if(t){var i=n.reject(s,function(t){return t.name===e.name});i.push(e),s=n.sortBy(i,function(e){return-e.weight})}return t},r.unregisterExecutor=function(e){s=n.reject(s,function(t){return t.name===e.name})},r.initialize=function(){e.bind(t.ATTACHMENT_FOR_PAGE_RECEIVED,f)},r.disable=function(){e.unbind(t.ATTACHMENT_FOR_PAGE_RECEIVED,f)},r.setAttachmentDropZone=function(e){u=e,this.setCurrentDropZone(e)},r.isDefaultExecutor=function(e){var t=c(null,e);return t&&t.name===o.name},r.setCurrentDropZone=function(e){l=e},r.doUpload=function(e){return!(!l||!l.browseFilesAndUpload)&&l.browseFilesAndUpload(i.Event("upload"),e)},r.disconnectCurrentDropZone=function(){l=u}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'jira-dnd-attachment-module/js/upload/DefaultUploadExecutor.js' */
define("dndattachment/upload/default/executor",["jquery","underscore","dndattachment/ctrlv/utility","exports"],function(t,e,n,u){u.name="Default attachment executor",u.weight=0,u.isValid=function(t,e){return!0},u.processFiles=function(t,e){return e.uploadFiles(t)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/i18n.js' */
define("dndattachment/i18n",function(){var t={"dnd.attachment.unsupported.browser":"Drag and Drop of attachments is currently only available for the following browsers:","dnd.attachment.file.is.too.large":"File exceeds maximum size limit set by the administrator ({0}).","dnd.attachment.upload.in.progress":"Upload in progress, please wait.","dnd.attachment.not.uploaded":function(t){return AJS.format("File \"{0}\" was not uploaded",t)},"dnd.attachment.unauthorized":"You are not authorised, session has expired or connection is lost.","dnd.attachment.internal.server.error":"An internal error has occurred. Please contact your administrator.","dnd.attachment.upload.aborted":"Upload was aborted.","dnd.attachment.upload.remove":"Remove attachment"};return function(n){if(t[n])return t[n];throw"Unknown key: "+n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/TemporaryAttachments.js' */
define("dndattachment/TemporaryAttachments",[],function(){var t={};return{createAttachment:function(t,e,n,a){return{id:t,name:e,type:n,file:a}},getAttachment:function(e,n){return t[e]||this.createAttachment(e,n)},putAttachment:function(e,n){return t[e]=this.createAttachment(e,n.name,n.type,n)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/Parser.js' */
define("dndattachment/Parser",["dndattachment/aui","jquery"],function(e,n){function r(e){var r=n(e).find(a).add(e.filter(a)),d=r.addClass(t).map(function(e,r){var t=new n.Deferred;return require([n(r).attr("duiType")],function(e){"function"==typeof e?t.resolve(new e(r)):t.reject()}),t});return n.when.apply(window,n.makeArray(d))}var t="-dui-type-parsed",a="*[duiType]:not(."+t+")";return JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,n,t){r(n)}),n.isReady?r(n("body")):n(function(){r(n("body"))}),{parse:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/dropzones/IssueDropZone.js' */
define("dndattachment/dropzones/IssueDropZone",["jquery","jira/flag","dndattachment/Parser","dndattachment/aui","dndattachment/JIRA","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility"],function(e,t,n,i,s,r,a,o,d){var u=5e3,l=["An internal error has occurred. Please contact your administrator."],h=Class.extend({eventGroup:"issuedropzone",progressBarType:"dndattachment/progressbars/UploadProgressBar",init:function(t){return this.$node=e(t),this.isSupportedBrowser()?(this.$node.parents(".mod-content")&&this.$node.parents(".mod-content").addClass("issue-drop-zone"),this.uploadLimit=this.$node.data("upload-limit"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.attachFileUrl=contextPath+"/secure/AttachFile.jspa",this.pendingQueue=[],this.render(),void this.queueEvent("init")):this.renderUnsupported()},queueTask:function(t){this.pendingQueue.push(t),t.always(function(){this.pendingQueue.splice(this.pendingQueue.indexOf(t),1)}.bind(this)),this.markDirty(!0),e.when.apply(window,this.pendingQueue).always(_.debounce(this.checkMarkDirty,!1,!0).bind(this))},render:function(){this.$node.html(s.Templates.DnDAttachmentPlugin.IssueDropZone({})),this.fileInput=this.$node.find(".issue-drop-zone__file"),this.fileButton=this.$node.find("button.issue-drop-zone__button"),this.connectListeners(),s.trace("jira.issue.dnd.issuedropzone.render")},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseLinkHandler.bind(this))},browseLinkHandler:function(e){e.preventDefault(),this.fileInput.click()},connectListeners:function(){this.fileInput.change(function(e){this.handleFilesReceived(this.fileInput[0].files),this.queueEvent("fileInput",{count:this.fileInput[0].files.length}),this.fileInput.attr("value",null)}.bind(this)),this.addHandlerToBrowseLink();var t=this.$node.parents(".issue-drop-zone").length>0?this.$node.parents(".issue-drop-zone"):this.$node;this.$dropTarget=t.find(">*").andSelf(),this.$dropTarget.on("dragover dragenter drop",function(n){if(n.preventDefault(),n.stopPropagation(),t.addClass("dragover"),"drop"==n.type){t.removeClass("dragover"),e(document).trigger("dropHandled");var i=new o(n.dataTransfer);i.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}}.bind(this)),this.$dropTarget.on("dragleave",function(){t.removeClass("dragover")}.bind(this))},configureUploadProgressBar:function(e,t){e.data("upload-size",this.uploadSize).data("file",t).data("form-token",this.formToken)},createUploadProgressBar:function(t){var i=e('<div duiType="'+this.progressBarType+'" class="upload-progress-bar"></div>');return this.configureUploadProgressBar(i,t),n.parse(i).then(function(e){this.placeUploadProgressBar(i,e),this.handleNewProgressBar(e)}.bind(this))},placeUploadProgressBar:function(e){return e.insertAfter(this.$node)},handleNewProgressBar:function(e){},handleFilesReceived:function(e){this.uploadFiles(e)},uploadFiles:function(n){var r=new e.Deferred,a=[],o=s.Issues.Api.getSelectedIssueKey(),d=s.Issues.Api.getSelectedIssueId(),l=i.Meta.get("viewissue-permlink"),h=e("#summary-val input").attr("value")||e("#summary-val").text(),c=s.Templates.DnDAttachmentPlugin.SuccessMessageLink({issueLink:l,issueKey:o,issueSummary:h}),p=_.map(n,function(t){var n=new e.Deferred;return this.createUploadProgressBar(t).then(function(e){this.trigger("progressBarInserted",e),a.push(e),e.uploadFile(t,this.uploadLimit).then(n.resolve.bind(n),n.resolve.bind(n)).done(function(){this.trigger("uploadFinished",e)}.bind(this)).fail(function(){s.trace("jira.issue.dnd.upload.fail"),r.reject(arguments)})}.bind(this)),n}.bind(this)),f=e.when.apply(window,p);return f.done(function(){var e=_.filter(1==p.length?[arguments]:arguments,function(e){return e&&e[0]&&e[0].id}).map(function(e){return e[0].id});0!=e.length&&this.commitUpload(e,d).done(function(){_.delay(function(){a.some(function(e){e.getAutoDestroy()&&(e.destroy(),this.queueEvent("autoDestroy"))}.bind(this))}.bind(this),u);var e=_.filter(a,function(e){return e.result.isResolved()});if(1==e.length){var n=e[0].getFileName();t.showSuccessMsg("",i.format("{0} was attached successfully to {1}.",n,c))}else e.length>1&&t.showSuccessMsg("",i.format("{0} files were attached successfully to {1}.",e.length,c));r.resolve(_.map(e,function(e){return e.file.name}))}.bind(this)).fail(function(e,t){r.reject(e,t),e&&e.forEach(function(e){a.forEach(function(t){t.reportError(e)})}),t&&a.forEach(function(e){var n=t["#"+e.getFileID()]||t[e.getFileName()];n&&e.reportError(n)}),s.trace("jira.issue.dnd.commit.fail")})}.bind(this)),this.queueTask(f),r},loadAttachments:function(e){e.forEach(function(e){this.createUploadProgressBar(e.file).then(function(t){t.setFileID(e.id),t.setFileName(e.name),t.setFileSize(e.size),t.setProgress(1),t.setFinished(),this.trigger("uploadFinished",t)}.bind(this))},this)},commitUpload:function(t,n){return new e.Deferred},attachFile:function(t,n){var i=new e.Deferred;return s.SmartAjax.makeRequest({type:"POST",url:this.attachFileUrl,data:{inline:!0,id:n||s.Issue.getIssueId(),filetoconvert:t,atl_token:atl_token(),formToken:this.formToken},dataType:"json"}).done(i.resolve.bind(i)).fail(function(e){try{var t=JSON.parse(e.responseText);i.reject(t.errorMessages||l,t.errors)}catch(e){i.reject(l)}}),i},isSupportedBrowser:function(){if(e("html.webkit")[0]||e("html.safari")[0]){if(!(parseFloat(e.browser.version)>=537))return!1}else if(e("html.mozilla")[0]){if(!(parseFloat(e.browser.version)>=1.9))return!1}else{if(!e("html.msie")[0])return!1;if(!(parseFloat(e.browser.version)>=10))return!1}return!0},renderUnsupported:function(){this.$node.addClass("issue-drop-zone__not-supported").text(r("dnd.attachment.unsupported.browser")).append("<ul><li>FireFox 3.6+</li><li>Chrome 5+</li><li>Safari 5</li></ul>")},markDirty:function(e){this.$node.addClass(s.DirtyForm.ClassNames.SANCTIONED),this.$node.toggleClass(s.DirtyForm.ClassNames.EXEMPT,!e),this.$node.attr("value",!1),this.$node.attr("defaultValue",!0)},checkMarkDirty:function(){0==this.pendingQueue.length&&this.markDirty(!1)},queueEvent:function(e,t){i.trigger("analytics",{name:"issue.dnd.attachment."+this.eventGroup+"."+e,data:t||{}})}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-integration', location = 'jira-dnd-attachment-module/js/integration/register.js' */
define("dndattachment/integration-register",function(){function r(r){return e[r]}function t(r,t){return"function"==typeof t&&(e[r]=t,!0)}var e={attachmentMenuLink:null,attachmentsZoneCreator:null,browseLink:null,temporaryAttachmentCreatorFactory:null,attachmentCreatorFactoryForBrowseLink:null,attachmentCreatorFactoryForAttachLink:null,temporaryBinaryUploadHandler:null,connectedTemporaryBinaryUploadHandler:null};return{getAttachmentMenuHandler:function(){var t=r("attachmentCreatorFactoryForAttachLink");return t&&t("attachment-menu")},registerAttachmentMenuHandlerFactory:function(r){return t("attachmentCreatorFactoryForAttachLink",r)},getBrowseLinkHandler:function(){var t=r("attachmentCreatorFactoryForBrowseLink");return t&&t("browse-link")},registerBrowseLinkHandlerFactory:function(r){return t("attachmentCreatorFactoryForBrowseLink",r)},getAttachmentsZoneCreator:function(){return r("attachmentsZoneCreator")},registerAttachmentsZoneCreator:function(r){return t("attachmentsZoneCreator",r)},registerTemporaryAttachmentCreatorFactory:function(r){return t("temporaryAttachmentCreatorFactory",r)},getTemporaryAttachmentCreator:function(t,e,n){var a=r("temporaryAttachmentCreatorFactory");return a&&a(t,e,n)},getTemporaryAttachmentZoneCreator:function(){return r("temporaryAttachmentsZoneCreator")},registerTemporaryAttachmentZoneCreator:function(r){return t("temporaryAttachmentsZoneCreator",r)},getTemporaryBinaryUploadHandler:function(){return r("temporaryBinaryUploadHandler")},registerTemporaryBinaryUploadHandler:function(r){return t("temporaryBinaryUploadHandler",r)},getConnectedTemporaryBinaryUploadHandler:function(){return r("connectedTemporaryBinaryUploadHandler")},registerConnectedTemporaryBinaryUploadHandler:function(r){return t("connectedTemporaryBinaryUploadHandler",r)},unregisterAllHandlers:function(){for(var r in e)e[r]=null}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/AttachmentsDropZone.js' */
define("dndattachment/dropzones/AttachmentsDropZone",["dndattachment/dropzones/IssueDropZone","jira/util/events","dndattachment/util/events/types","jquery","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/dialog/dialog","dndattachment/integration-register","dndattachment/upload/handler","jira/featureflags/feature-manager"],function(e,t,n,o,r,i,a,s,d,h){var c=function(){var e=parseUri(window.location);return e.protocol+"://"+e.authority}(),l=e.extend({eventGroup:"attachmentsdropzone",progressBarType:"dndattachment/progressbars/AttachmentsUploadProgressBar",init:function(){this._super.apply(this,arguments),this.attachFileUrl=contextPath+"/rest/jddap/1.0/attachment",t.bind(JIRA.Events.PANEL_REFRESHED,this.panelRefreshed.bind(this)),this.connectContainer()},connectContainer:function(){this.$containerNode=this.getContainerNode(),this.$dragoverDropzone=o(JIRA.Templates.DnDAttachmentPlugin.dropzone()),this.$dragoverBorder=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-border"),this.$dragoverInfo=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-info"),this.$dragoverDropzone.appendTo(this.$containerNode),this._connectDropzone(),this.$windowMask=o(JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask()),this.$body=o(document.body);var e=this.$body;window.__SPA__&&(e=o("#attachment-dropzone-mask-container"),e.length||(e=this.$body)),e.append(this.$windowMask),this.$body.on("dragenter",_.throttle(this.onBodyDragEnter.bind(this),200,{trailing:!1})),this.$body.on("dragleave",this.onBodyDragLeave.bind(this)),this.$windowMask.on("dragover dragenter",this.onWindowMaskDragEnter.bind(this)),this.$windowMask.on("dragleave",this.onWindowMaskDragLeave.bind(this)),this.$windowMask.on("drop",this.onWindowMaskDrop.bind(this)),this.$auiSidebar=o(".aui-sidebar-body"),this._disconnectListenersFromParentDropzone(),this.onContentAddedHandler=this.onContentAdded.bind(this),t.bind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),this.externalHandler=s.getBrowseLinkHandler()},_connectDropzone:function(){var e=s.getAttachmentsZoneCreator();this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.$containerNode.on("dragover dragenter drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),"function"==typeof e&&(this.externalZone=e(this.$containerNode[0]))},_disconnectListenersFromParentDropzone:function(){this.$dropTarget.off("dragover drop dragleave dragenter"),o(document).off("dragover dragenter")},disconnectContainer:function(){this.$dragoverDropzone.remove(),this.$windowMask.remove(),this.$body.removeClass("attachments-drop-zone__dragover"),this.$body.off("dragenter",this.onBodyDragEnter.bind(this)),this.$containerNode.off("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.externalZone&&this.externalZone.deactivate(),t.unbind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),d.disconnectCurrentDropZone(this)},isAttached:function(){return o.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},getContainerNode:function(){var e=o(o(".issue-container")[0]);return"static"===e.css("position")&&e.css("position","relative"),e},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},canDoFullPageDrop:function(){return a.current?(JIRA.trace("jira.issue.dnd.dropnotallowed"),!1):(JIRA.trace("jira.issue.dnd.dropallowed"),!0)},onDragOverDrop:function(e){if(!this.isAttached())return void this.disconnectContainer();if(i.dragEventContainsFiles(e)&&this.canDoFullPageDrop()&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),JIRA.trace("jira.issue.dnd.dragover"),this.$body.addClass("attachments-drop-zone__dragover"),this.$body.addClass("attachments-drop-zone__window-dragover"),this.$containerNode.addClass("attachments-drop-zone__dragover-fade"),this._readjustDropzone(),this._repositionStickyInfoBox(),"dragenter"===e.type&&this.externalZone&&(d.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"==e.type))if(this.removeAllDragoverClasses(this.$containerNode),o(document).trigger("dropHandled"),this.externalZone&&d.isDefaultExecutor({}))this.externalZone.drop();else{var t=new r(e.dataTransfer);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}},onDragLeave:function(){this.removeAllDragoverClasses(this.$containerNode)},browseFilesAndUpload:function(e,t){return"function"==typeof this.externalHandler&&d.isDefaultExecutor({})?this.externalHandler.call(null,e,t||{}):this.browseLinkHandler.call(this,e),!0},_readjustDropzone:function(){if(0!==this.$auiSidebar.length){var e=this.$auiSidebar.offset().left+this.$auiSidebar.width();if(this.$dragoverBorder.parent().offset()){var t=this.$dragoverBorder.parent().offset().left;e>t?this.$dragoverBorder.css({left:e-t}):this.$dragoverBorder.css({left:0})}else this.$dragoverBorder.css({left:0})}},_repositionStickyInfoBox:function(){if(window.__SPA__){var e=this.$containerNode.scrollParent().scrollTop()+10;return void this.$dragoverInfo.css({top:e})}var t,e=this.$containerNode.scrollParent().scrollTop()+10,n=this.$containerNode.offset().top;t=this.$containerNode.scrollParent().offset()?this.$containerNode.scrollParent().offset().top:0;var o;o=0===t?e>=n?e-n:10:e,this.$dragoverInfo.css({top:o})},onBodyDragEnter:function(e){i.dragEventContainsFiles(e)&&(this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"))},onBodyDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDragEnter:function(e){i.dragEventContainsFiles(e)&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none"),this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"),this.canDoFullPageDrop()&&(this.$body.addClass("attachments-drop-zone__dragover"),this._repositionStickyInfoBox()))},onWindowMaskDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDrop:function(e){e.preventDefault(),this.removeAllDragoverClasses()},removeAllDragoverClasses:function(e){e&&e.removeClass("attachments-drop-zone__dragover-fade"),this.$body.removeClass("attachments-drop-zone__window-dragover"),this.$body.removeClass("attachments-drop-zone__dragover")},handleFilesReceived:function(e){var r=o("textarea.wiki-textfield:visible:focus"),i=r.length>0;t.trigger(n.ATTACHMENT_FOR_PAGE_RECEIVED,{files:e,isWikiTextfieldFocused:i,wikiTextfield:r[0]})},render:function(){return this.$node.parents("#attachmentmodule").addClass("attachments-drop-zone-parent"),this.$listNode=this.$node.siblings("#file_attachments, #attachment_thumbnails"),this._super.apply(this,arguments)},panelRefreshed:function(e,t,n,r){if(r.find(this.$node).is("*")){this.getViewMode();n=n.find(">.mod-content"),n.addClass("issue-drop-zone"),this.$node.prependTo(n),this.render();var i=r.find(".attachments-upload-progress-bar");i.data("viewMode",this.getViewMode()).each(function(e,t){var n=o(t).prop("_instance");void 0!=n&&n.render()}),i.each(function(e,t){this.insertProgressBar(o(t))}.bind(this)),this._disconnectListenersFromParentDropzone()}},getViewMode:function(){return"file_attachments"==this.$listNode.attr("id")?"list":"gallery"},getSortBy:function(){return this.$listNode.data("sort-key")},getSortOrder:function(){return this.$listNode.data("sort-order")},getSortComparator:function(){var e="asc"==this.getSortOrder()?1:-1,t="fileName"==this.getSortBy()?function(e){return e.find(".attachment-title").text()}:function(e){return new Date(e.find("*[datetime]").attr("datetime")).getTime()},n="fileName"==this.getSortBy()&&String.prototype.localeCompare?function(e,t){return e.localeCompare(t)}:function(e,t){return e<t?-1:e>t?1:0};return function(o,r){var i=t(o),a=t(r);return e*n(i,a)}},commitUpload:function(e,t){var n=new o.Deferred;return this.attachFile(e,t).then(n.resolve.bind(n),n.reject.bind(n)),n.then(function(n){var r=o(JIRA.Templates.ViewIssue.renderAttachments({baseurl:contextPath,fullBaseUrl:c+contextPath,issue:{id:t},attachments:n,viewMode:this.getViewMode()})).find(".attachment-content");n.forEach(function(t,n){var o=r[n],i=this.$listNode.find('>*[data-file-id="'+e[n]+'"]');i.replaceWith(o)},this),JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[this.$listNode,JIRA.CONTENT_ADDED_REASON.panelRefreshed]),JIRA.trace("jira.issue.dnd.attached")}.bind(this)),this.queueTask(n),this.queueEvent("commitUpload",{count:e.length}),n},configureUploadProgressBar:function(e){this._super.apply(this,arguments),e.data("viewMode",this.getViewMode())},placeUploadProgressBar:function(e,t){return t.$node.find("time.livestamp").attr("datetime",(new Date).toISOString()).livestamp(),this.insertProgressBar(e),t.bind("onDestroy",function(){var t=e.parents(".item-attachments");0==t.find(".attachments-upload-progress-bar, .attachment-content").length&&t.remove()}),e},insertProgressBar:function(e){var t=this.getSortComparator(),n=this.$listNode.children().toArray(),r=function(n){if(t(e,o(n))<1)return e.insertBefore(n),!0};n.some(r)||e.appendTo(this.$listNode)}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/UploadProgressBar.js' */
define("dndattachment/progressbars/UploadProgressBar",["jquery","dndattachment/Parser","dndattachment/JIRA","dndattachment/aui","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,i,s,n,o,r,a){function d(t,e){s.trigger("analytics",{name:"issue.dnd.attachment.uploadprogress."+t,data:e||{}})}var h=["aui-iconfont-error","aui-iconfont-success","aui-iconfont-close-dialog"],u=r.getWRM("thumbnail-mime-types").split(","),l=Class.extend({autoDestroy:!0,init:function(e){this.result=new t.Deferred,this.$node=t(e),this.file=this.$node.data("file"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.$node.prop("_instance",this),this.render()},render:function(){this.$node.html(i.Templates.DnDAttachmentPlugin.UploadProgressBar({isImageType:this.isImageType()})),this.afterRender()},afterRender:function(){this.file&&(this.setFileName(this.file.name),this.setFileSize(this.file.size),this.loadThumbnail(this.file)),this.progress&&this.updateProgress(),this.connectListeners()},connectListeners:function(){this.getControlNode().on("click",function(){this.destroy(),d("buttonClick")}.bind(this))},destroy:function(){this.destroyed||(this.upload&&this.upload.abort(),this.setAutoDestroy(!1),this.trigger("onBeforeDestroy"),this.destroyed=!0,this.$node.animate({opacity:0},{duration:250,complete:function(){this.$node.slideUp(250,function(){this.objectURL&&window.URL.revokeObjectURL(this.objectURL),this.$node.remove(),i.trace("jira.issue.dnd.progressbar.removed"),this.trigger("onDestroy")}.bind(this))}.bind(this)}))},isDestroyed:function(){return!!this.destroyed},setAutoDestroy:function(t){this.autoDestroy=t},getAutoDestroy:function(){return this.autoDestroy},getUploadParams:function(t){var e={filename:t.name,size:t.size,atl_token:atl_token(),formToken:this.formToken};return _.extend(e,this.getEntityParams()),e},getEntityParams:function(){var t={},e=i.Issue.getIssueId(),s=this.$node.parents("form").find('*[name="pid"]').attr("value");return s?t.projectId=s:e&&(t.issueId=e),t},setFile:function(t){this.file=t},setFileID:function(t){this.fileID=t,this.$node.attr("data-file-id",t)},getFileID:function(){return this.fileID},setFileName:function(t){this.$node.find(".upload-progress-bar__file-name").text(t)},getFileName:function(){return this.$node.find(".upload-progress-bar__file-name").text()},setFileSize:function(t){t>=0&&this.$node.find(".upload-progress-bar__file-size").html(a.format(t))},uploadFile:function(t,e){this.setFile(t);var r=this.result;if(this.monitorUpload(r),r.fail(this.reportError.bind(this)),t.size>e)return r.reject(n("dnd.attachment.file.is.too.large").replace("{0}",this.uploadSize),!0),r;for(var a=["\\","/",'"',":","?","*","<","|",">"],d=0;d<a.length;d++){var h=a[d];if(_.contains(t.name,h))return r.reject(s.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",t.name,h),!0),r}return this.upload=new s.InlineAttach.AjaxUpload({file:t,params:this.getUploadParams(t),url:s.InlineAttach.AjaxPresenter.DEFAULT_URL,progress:function(e){r.notify(e/t.size)},success:function(e,i){void 0!==e.id&&void 0!==e.name?(r.notify(1),r.resolve(e,i,t)):r.reject(e,i,t)},error:function(t,e){r.reject(n("dnd.attachment.internal.server.error"),e)},abort:function(){r.reject(n("dnd.attachment.upload.aborted"),"abort")}}),this.checkSession().then(function(){this.upload.upload()}.bind(this)).fail(function(){r.reject(n("dnd.attachment.unauthorized"),401)}),this.$node.find(".upload-progress-bar__control>*").on("click",function(){this.upload.abort(),r.reject()}.bind(this)),r.done(function(e){o.putAttachment(e.id,t),this.setFileID(e.id),i.trace("jira.issue.dnd.uploaded")}.bind(this)),r},monitorUpload:function(t){t.progress(this.setProgress.bind(this)),t.done(this.setFinished.bind(this)),t.fail(this.setFailed.bind(this))},setProgress:function(t){this.progress=t,this.updateProgress()},updateProgress:function(){var t=this.$node.find(".upload-progress-bar__progress-bar");t.toggleClass("UploadProgressBar_progressUnknown",this.progress===!1),this.progress>=0&&t.find(".upload-progress-bar__bar").css("width",100*this.progress+"%")},setFinished:function(){this.$node.addClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__control button .aui-icon").addClass("aui-iconfont-success").removeClass("aui-iconfont-close-dialog"),this.finished=!0,this.trigger("onFinished")},setFailed:function(){this.$node.addClass("UploadProgressBar_uploadFailed"),this.finished=!0,this.failed=!0,this.trigger("onFailed")},isFinished:function(){return!!this.finished},isFailed:function(){return!!this.failed},isSuccessful:function(){return this.isFinished()&&!this.isFailed()},isImageType:function(){return this.file&&this.file.type&&_.contains(u,this.file.type)},getThumbnailSrc:function(t){return this.isImageType()&&(this.objectURL=window.URL.createObjectURL(t)),this.objectURL||i.Templates.ViewIssue.matchFileIconUrl({baseurl:s.contextPath(),mimetype:t.type})},getThumbnailNode:function(){return this.$node.find(".upload-progress-bar__thumbnail")},getControlNode:function(){return this.$node.find(".upload-progress-bar__control button")},loadThumbnail:function(e){var i=this.getThumbnailSrc(e),s=this.getThumbnailNode();s.addClass(this.objectURL?"upload-progress-bar__thumbnail_image":"upload-progress-bar__thumbnail_icon");var n=t("<img/>").attr("src",i);return n.appendTo(s)},reportError:function(t,e){"object"==typeof t&&t.errorMessage&&(t=t.errorMessage),this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__bar").css("width","100%"),this.showErrorMessage(t,e),this.setAutoDestroy(!1),d("error",{message:t})},showErrorMessage:function(t){this.$node.find(".upload-progress-bar__error-message").text(t)},setIcon:function(t){var e=this.$node.find(".upload-progress-bar__control button .aui-icon");if(!h.some(function(i){return e.toggleClass(i,i==t),i==t}))throw"Unknown icon"},checkSession:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/auth/1/session",contentType:"application/json"}).done(function(){e.resolve()}).fail(function(){this.checkPermissions().done(function(t){e.resolve()}).fail(function(){e.reject()})}.bind(this)),e},checkPermissions:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/api/2/mypermissions",contentType:"application/json",data:t.extend({},this.getEntityParams(),{permissions:"CREATE_ATTACHMENTS"})}).done(function(t){t.permissions.CREATE_ATTACHMENTS.havePermission?e.resolve():e.reject()}).fail(function(){e.reject()}),e}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/AttachmentsUploadProgressBar.js' */
define("dndattachment/progressbars/AttachmentsUploadProgressBar",["dndattachment/progressbars/UploadProgressBar","jira/flag","jquery","dndattachment/i18n"],function(e,t,a,n){return e.extend({render:function(){this.$node.html(JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar({isImageType:this.isImageType()})).removeClass("upload-progress-bar").addClass("attachments-upload-progress-bar"),this.$node.toggleClass("attachment-content",!this.isImageType()),this.afterRender()},loadThumbnail:function(t){return"gallery"==this.$node.data("viewMode")?e.prototype.isImageType.call(this)?this._super.apply(this,arguments):a(JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:t.type})).appendTo(this.getThumbnailNode()):a(JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype:t.type})).appendTo(this.getThumbnailNode())},showErrorMessage:function(e,s){if("abort"!=s){var o=t.showErrorMsg(n("dnd.attachment.not.uploaded")(this.getFileName()),AJS.escapeHTML(e));a(o).on("aui-flag-close",function(){this.destroy()}.bind(this)),this.bind("onDestroy",function(){o.close()})}},isImageType:function(){return"gallery"==this.$node.data("viewMode")},getControlNode:function(){return this.$node.find(".upload-progress-bar__upload-control span")},getAutoDestroy:function(){return!1}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/IssueDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.IssueDropZone=function(e,t){return'<div class="issue-drop-zone__target"></div><span class="issue-drop-zone__text"><span class="issue-drop-zone__drop-icon"> </span> '+soy.$$escapeHtml("Drop files to attach, or")+' <button type="button" class="issue-drop-zone__button"> '+soy.$$escapeHtml("browse")+'.</button><input class="issue-drop-zone__file ignore-inline-attach" type="file" multiple /></span>'},JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/AttachmentsDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/AttachmentsDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.dropzoneMask=function(n,e){return'<span><div class="attachments-drop-zone__dragover-mask"></div></span>'},JIRA.Templates.DnDAttachmentPlugin.dropzone=function(n,e){return'<span><div class="attachments-drop-zone__dragover-border"><div class="attachments-drop-zone__dragover-info"><p>'+soy.$$escapeHtml("Drop files to attach them to the issue")+"</p></div></div></span>"},JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask=function(n,e){return'<span><div class="attachments-drop-zone__window-dragover-mask"></div></span>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/UploadProgressBar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar=function(a,s){return'<div class="upload-progress-bar__thumbnail"> </div><span class="upload-progress-bar__file-name"> </span><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Cancel upload")+'</span></button></div><div class="upload-progress-bar__error-message"></div>'},JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar=function(a,s){return""+(a.isImageType?'<div class="upload-progress-bar__thumbnail"><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><dl><dt><span class="upload-progress-bar__file-name"> </span></dt><dd class="upload-progress-bar__file-size"> </dd><dd class="upload-progress-bar__upload-control"><span>'+soy.$$escapeHtml("Cancel")+'</span></dd><dd class="upload-progress-bar__error-message"></dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>':'<div class="attachment-thumb upload-progress-bar__thumbnail"></div><dl><dt class="attachment-title upload-progress-bar__file-name"></dt><dd class="upload-progress-bar__upload-control"><span>'+soy.$$escapeHtml("Cancel")+'</span></dd><dd class="attachment-size"><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></dd><dd class="attachment-author"> </dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>')},JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar=function(a,s){return'<div class="temp-upload-progress-bar__parent-container temp-upload-progress-bar__uploading"><div class="temp-upload-progress-bar__container"><div class="upload-progress-bar__thumbnail"></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__error"><div class="upload-progress-bar__error-indicator"><span class="aui-icon aui-icon-large aui-iconfont-error">'+soy.$$escapeHtml("Upload error")+'</span></div><div class="upload-progress-bar__error-text">'+soy.$$escapeHtml("Upload failed")+'</div></div><div class="upload-progress-bar__upload-mask"></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog"><div class="button-text" aria-label="'+soy.$$escapeHtml("Cancel upload")+' "></div><div class="file-name"></div><div class="error-message"></div></span></button></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><div class="upload-progress-bar_file-name-container"><span class="upload-progress-bar__file-name"></span></div></div>'},JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink=function(a,s){return'<a href="'+soy.$$escapeHtml(a.issueLink)+'">'+soy.$$escapeHtml(a.issueKey)+" - "+soy.$$escapeHtml(a.issueSummary)+"</a>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(t){"use strict";var n=function(t){return t.split(/\//).pop()};t.basename=n,t.dirname=function(t){var e=n(t);return t.substring(0,t.length-e.length)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/templates/soy/attach-screenshot-form.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Html5Screenshot&&(JIRA.Templates.Html5Screenshot={}),JIRA.Templates.Html5Screenshot.attachScreenshotForm=function(e,t){return'<h2 class="dialog-title">'+soy.$$escapeHtml("Attach Screenshot")+'</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form"><input type="hidden" name="id" value="'+soy.$$escapeHtml(e.id)+'"/><input type="hidden" name="projectId" value="'+soy.$$escapeHtml(e.projectId)+'"/><input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>'+soy.$$escapeHtml("Take a screenshot:")+"</dt>"+("pc"==e.userPlatform?"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003ePrtScn\u003c/kbd\u003e")+"</dd>":"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003e&#8963; Ctrl\u003c/kbd\u003e + \u003ckbd\u003e&#8984; Cmd\u003c/kbd\u003e + \u003ckbd\u003e&#8679; Shift\u003c/kbd\u003e + \u003ckbd\u003e3\u003c/kbd\u003e")+"</dd>")+"</dl></li><li><dl><dt>"+soy.$$escapeHtml("Paste the image:")+"</dt>"+("pc"==e.userPlatform?"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003eCtrl\u003c/kbd\u003e + \u003ckbd\u003ev\u003c/kbd\u003e")+"</dd>":"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003e&#8984; Cmd\u003c/kbd\u003e + \u003ckbd\u003ev\u003c/kbd\u003e")+"</dd>")+'</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">'+soy.$$escapeHtml("Your image will be pasted here")+"</dt></dl></li></ul></div></div></div></div><div id='attach-max-size' class=\"hidden\">"+soy.$$escapeHtml(e.maxSize)+"</div></div></div></div><fieldset><div><legend><span>"+soy.$$escapeHtml("Attach Screenshot")+'</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">'+soy.$$escapeHtml("File name")+' <span class="aui-icon icon-required">'+soy.$$escapeHtml("Required")+'</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="'+soy.$$escapeHtml(e.nextScreenshotName)+'"><div class="description">'+soy.$$escapeHtml("A file name to be used as attached image name")+'</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">'+soy.$$escapeHtml("Upload")+'</button><a href="#" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["jquery","underscore","dndattachment/integration-register","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/utility","jira/dialog/dialog","jira/dialog/dialog-register","jira/ajs/ajax/smart-ajax","jira/attachment/inline-attach","dndattachment/ctrlv/tracking","exports"],function(e,t,n,i,r,a,o,s,l,c,d){"use strict";d.getFileFromEvent=function(n){var i=new e.Deferred;return r.isImagePasteEvent(n)?i.resolve(t(n.clipboardData.items).filter(function(e){return e.type.indexOf("image")!==-1}).map(function(e){return e.getAsFile()})[0]||t(n.clipboardData.files).filter(function(e){return e.type.indexOf("image")!==-1})[0]):i.reject(),i.promise()},d.REQUEST_TIMEOUT_MILLIS=3e5,d.screenshotFileUpload={},d.screenshotFileUploadUri=null,d.$document=void 0,d.$window=void 0,d.$container=void 0,d.$fakeInput=void 0,d.uploadError=!1,d.uploadErrorMsg="",d.progressView={hidden:!1,progress:0,old:0,progressBarContainer:void 0,progressEl:void 0,container:void 0,options:void 0,staticProgress:void 0,initProgress:function(){this.container=this.buildContainer(),this.progressEl=this.buildProgress(),this.container.append(this.progressEl),this.options={showPercentage:!1,height:"5px"},this.progressBarContainer=e("#attach-screenshot-progress-container"),this.progressBarContainer.empty(),this.progressBarContainer.append(this.container),this.staticProgress=this.container,this.hidden=!0},finish:function(){this.value(100)},progressHandler:function(e){var t=Math.round(100*e.loaded/e.total);this.value(t)},value:function(e){e>100?e=100:e<0&&(e=0),this.hidden&&(this.progressEl.show(),this.hidden=!1),this.old!==e&&(this.progressEl.progressBar(e,this.options),e>=100&&this.progressEl.fadeOut(),this.old=e)},buildContainer:function(){return e("<div>").addClass("file-progress")},buildProgress:function(){return e("<div>").attr("id","attach-screenshot-upload-progress")}},d.dialogView={pasteCatcher:{},presenter:void 0,getMaxSize:function(){return e("#attach-max-size").text()},getFileSize:function(){return e.isPlainObject(this.presenter.screenshotFileUpload)&&t.isEmpty(this.presenter.screenshotFileUpload)?0:this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){e("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){e("#error-attach-screenshot-filename").remove()},displayErrors:function(e){"compatibility"in e&&r.showErrorMsg("",e.compatibility),"fileName"in e&&r.showErrorMsg("",e.fileName),"fileUpload"in e&&r.showErrorMsg("",e.fileUpload)},appendBlobImage:function(e){var t=window.URL||window.webkitURL,n=t.createObjectURL(e);this.presenter.screenshotFileUpload=e,this.createImage(n)},createImage:function(n){var i=new Image;i.onload=function(){},i.src=n,this.presenter.screenshotToUpload=i;var r=e(i);r.addClass("attach-screenshot-pasted-image");var a=e("#attach-screenshot-image-container");a.empty(),a.append(r),this.presenter.$fakeInput.focus(),t.defer(function(){d.imageCreatedHandler()})},checkInput:function(){var e,t=d.dialogView.pasteCatcher.childNodes[0];return t&&("IMG"===t.tagName&&0===t.src.indexOf("data:")&&(e=t.src),d.dialogView.pasteCatcher.innerHTML=""),e||d.$fakeInput.focus(),e},onPaste:function(e){d.dialogView.cleanFileErrors(),d.dialogView.cleanGeneralErrors(),r.isImagePasteEvent(e)?d.getFileFromEvent(e).then(function(e){this.appendBlobImage(e)}.bind(this)):setTimeout(function(){var e=this.checkInput();e&&(d.screenshotFileUpload=i.decodeBase64DataUri(e),d.dialogView.createImage(e))}.bind(this),0)},getFakeInput:function(){return e("#attach-screenshot-fake-input")},getContainer:function(){return e("#attach-screenshot-image-container")},getIssueKey:function(){return e("input[name='id']").val()},getProjectId:function(){return e("input[name='projectId']").val()},getDocument:function(){return e(document)},getWindow:function(){return e(window)},getFileNameInput:function(){return e("#attachscreenshotname")},hasPngExtension:function(e){var t=/\.png$/i;return t.test(e)},setFileToConvert:function(t){e("input[name='filetoconvert']").val(t)},buildPasteCatcher:function(){if(document.getElementById("attach-screenshot-form")){var e=document.createElement("div");return e.setAttribute("contenteditable","true"),e.style.width=0,e.style.height=0,e.style.position="absolute",e.style.top="-5000px",document.getElementById("attach-screenshot-form").appendChild(e),e}},_getFormSubmits:function(){return e("#attach-screenshot-form").find("button.aui-button")},disable:function(){return this._getFormSubmits().attr("disabled","disabled"),this},enable:function(){return this._getFormSubmits().removeAttr("disabled"),this},isEnabled:function(){return this.isVisible()&&!this._getFormSubmits().attr("disabled")},isVisible:function(){return e("#attach-screenshot-form").length>0},initDialog:function(e){this.pasteCatcher={},this.presenter=e,this.pasteCatcher=this.buildPasteCatcher()}},d.initScreenshotPasteHandler=function(){var e=d.dialogView;d.screenshotFileUpload={},d.resetUploadErrors(),d.dialogView.initDialog(d),d.$document=e.getDocument(),d.$window=e.getWindow(),d.$container=e.getContainer(),d.$fakeInput=e.getFakeInput(),d.bindOnce(d.$container,"click",d.setFocusOnClickHandler),d.bindOnce(d.$fakeInput,"focus",d.showFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"blur",d.hideFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"keydown",d.keyDownHandler),r.browserIsSupported()?d.bindOnce(d.$window,"paste",d.pasteHandler):e.displayErrors({compatibility:AJS.format("Your browser is not supported. Consider using an alternative supported browser such as {0}Google Chrome{1} or {2}Firefox{3}.",'<a href="//www.google.com/chrome/browser/">',"</a>",'<a href="//www.mozilla.org/firefox/">',"</a>")})},d.resetUploadErrors=function(){d.uploadError=!1,d.uploadErrorMsg=void 0},d.setUploadError=function(e){d.uploadError=!0,d.uploadErrorMsg=e},d.bindOnce=function(e,t,n){e.unbind(t,n),e.bind(t,n)},d.showFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.hideFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.setFocusOnClickHandler=function(){d.$fakeInput.focus()},d.pasteHandler=function(e){d.dialogView.isEnabled()&&(e=r.normalizePasteEvent(e),d.dialogView.onPaste(e))},d.polyPasteHandler=function(e,t,n){d.dialogView.isEnabled()&&(d.screenshotFileUpload={length:-1},d.screenshotFileUploadUri=t,d.dialogView.createImage(n))},d.keyDownHandler=function(e){r.isKeyPasteEvent(e)&&d.dialogView.pasteCatcher.focus&&d.dialogView.pasteCatcher.focus()},d.imageCreatedHandler=function(){d.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())},d.getMimeType=function(){return"image/png"},d.createData=function(){return d.screenshotFileUpload},d.clipboardDataIsEmpty=function(e){return null==window.clipboardData&&!(e&&e.clipboardData&&e.clipboardData.types&&e.clipboardData.types.length>0)},d.validateFileSize=function(e,t,n){var t=t||d.dialogView.getFileSize(),n=n||d.dialogView.getMaxSize();if(t>n){var i=l.Text.fileSize(n,t);e.fileUpload=AJS.format("Screenshot is too large to attach. Attachment is {0} but the largest allowed attachment is {1}.",i[1],i[0])}},d.validateFormData=function(n,i){var a={};return e.isPlainObject(n)&&t.isEmpty(n)&&(a.fileUpload="Please paste the image you wish to upload"),d.validateFileSize(a),d.uploadError&&(a.fileUpload="The error occurred during image upload - you will need to try the pasting image again. Sorry for the inconvenience."),""==i&&(a.fileName="You must specify a filename of the image."),r.isValidFileName(i)||(a.fileName="Filename must not contain the characters \'\\\', \'/\', \'\"\', \':\', \'?\', \'*\', \'\u003c\', \'|\', \'\u003e\', \'!\'"),a},d.doAjaxUpload=function(i,r){d.dialogView.disable();var a={};if(d.validateFileSize(a),!t.isEmpty(a))return d.dialogView.displayErrors(a),void d.dialogView.enable();var o=d.createData(),l=d.getMimeType(),c=e("#attach-screenshot-form").find("input[name='formToken']").attr("value"),u=encodeURIComponent(this.dialogView.getProjectId()),p=AJS.contextPath()+"/rest/internal/2/AttachTemporaryFile?size="+d.dialogView.getFileSize()+"&filename="+encodeURIComponent(r)+"&atl_token="+encodeURIComponent(atl_token())+"&issueId="+encodeURIComponent(this.dialogView.getIssueKey())+(c?"&formToken="+encodeURIComponent(c):"");d.resetUploadErrors();var h=n.getTemporaryBinaryUploadHandler(),g=h?h(u,o,r,encodeURIComponent(c)):d.executeAjaxUpload(o,p,l);g.progress(function(e){"init"==e&&d.progressView.initProgress()}).done(function(e){"string"==typeof e&&(e=JSON.parse(e)),d.dialogView.setFileToConvert(e.id)}).fail(function(e,t,n,i){var r;if("abort"===i.statusText)r="The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation.";else if(i.hasData){var a=JSON.parse(i.data);r=a.errorMessage?a.errorMessage:s.buildSimpleErrorContent(i,{alert:!1})}d.setUploadError(r),d.dialogView.displayErrors({fileUpload:r})}).always(function(){var t=e.Deferred();t.resolve(),t.then(function(){d.dialogView.enable(),d.progressView.finish()})}).progress(function(e){"init"!=e&&d.progressView.progressHandler(e)})},d.executeAjaxUpload=function(t,n,i){c.trigger("attach.screenshot.html5.jira.upload");var r=e.Deferred(),a=s.makeRequest({type:"POST",url:n,contentType:i,processData:!1,data:t,timeout:d.REQUEST_TIMEOUT_MILLIS,success:r.resolve.bind(r),error:r.reject.bind(r),xhr:function(){var t=e.ajaxSettings.xhr();return r.notify("init"),t.upload.addEventListener("progress",r.notify.bind(r)),t}});return r.always(function(){e.ajaxSettings.xhr().removeEventListener("progress",d.progressView.progressHandler),e(o.attachScreenshotDialog).off("Dialog.hide",a.abort)}),e(o.attachScreenshotDialog).one("Dialog.hide",a.abort),r.promise()},d.show=function(){var n=new e.Deferred,i=e(".issueaction-attach-screenshot-html5");return null!=a.current?n.reject().promise():0==i.length?n.reject().promise():(t.defer(function(){i.trigger("click")}),e(document).on("dialogContentReady",function(e,t){t===o.attachScreenshotDialog&&d.dialogView.isEnabled()?n.resolve(t):n.reject()}),e(document).on("ajaxComplete.jira.screenshot.dialog",function(e,t,r){r.url.indexOf(i.attr("href"))>-1&&setTimeout(function(){n.isResolved()||n.reject()},1e3)}),n.always(function(){e(document).off("ajaxComplete.jira.screenshot.dialog")}),n.promise())}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["jquery","dndattachment/ctrlv/trace","dndattachment/ctrlv/tracking","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/base64decode","jira/dialog/dialog","jira/util/events","dndattachment/util/events/types","exports"],function(t,e,n,a,i,r,o,u,c,s){"use strict";function l(t,e){e.stateName=t;var n=function(){var n=e.apply(null,arguments);return n.stateName=t,n};return n.stateName=t,n}function d(t,e,n){return l(t,function(){var a=setTimeout(function(){f(_)},n),i=e.apply(null,arguments),r=function(t,e){var n=i(t,e);if(n)return clearTimeout(a),n};return r.stateName=t,r})}function f(t,e){if(f.eventQueue)return void f.eventQueue.push({type:t,object:e});for(f.eventQueue=[{type:t,object:e}];f.eventQueue.length>0;){var n=f.eventQueue.splice(0,1)[0],a=A(n.type,n.object);a&&(A=a)}delete f.eventQueue}var g=0,E=1,v=2,m=3,p=4,h=5,I=6,T=7,w=8,_=9,N=l("idle",function(){function i(e){if(!t(e.target).is(":input:not(.wiki-textfield, #summary)")&&!a.isContentEditable(e.target))return!0}return function(r,o){if(r==g&&a.isKeyPasteEvent(o)){if(a.browserIsNativePaste()||!i(o)||!a.browserIsSupported())return;return n.trigger("attach.screenshot.html5.catchClipboard"),new D(o)}if(r==E){if(a.isImagePasteEvent(o))return n.trigger("attach.screenshot.html5.handlePaste"),i(o)?(t(o.target).is(":input.wiki-textfield")&&o.preventDefault(),new L(o)):void e("jira/attach-images-plugin/pasteIgnored");e("jira/attach-images-plugin/pasteIgnoredNotImage")}}}),D=d("catchClipboard",function(e){function n(){o.remove()}var i=document.activeElement;e.selectionStart=e.target.selectionStart,e.selectionEnd=e.target.selectionEnd;var o=t('<div contenteditable="true" class="attach-screenshot-paste-catcher"></div>').appendTo("body");return o.focus(),t(i).is(":focusable:input,:aui-focusable:input")&&setTimeout(function(){i.focus()}),function(t,u){if(t==E){if(a.isImagePasteEvent(u))return n(),u.target=i,new L(u);if(a.isHtmlImagePasteEvent(u))return n(),u.target=i,new b(u);if(a.isTextPasteEvent(u)){n();var c=a.getTextPasteContent(u);return a.insertToInput(c,e.target,e.selectionStart,e.selectionEnd),u.preventDefault(),new N}}if(t==_){n();var s=o.find(">img");if(s.is(":only-child")){var l=s.attr("src");if(0===l.toLowerCase().indexOf("http"))return N();var d=r.decodeBase64DataUri(l),f=new Blob([d],{type:"image/png"});return new O(f,e)}var g=a.getTextContent(o[0]);return a.insertToInput(g,e.target,e.selectionStart,e.selectionEnd),N()}}}),b=l("imageLoading",function(t){var e=a.getHtmlImagePaste(t);return e?a.loadImage(e).then(function(t){f(p,t)},f.bind(null,h)):f(h),function(e,n){if(e==p){var i=a.convertImageToBlob(n);return i?new O(i,t):new N}if(e==_||e==h)return new N}}),L=d("fileLoading",function(t){return i.getFileFromEvent(t).done(function(t){f(v,t)}).fail(function(){f(m)}),function(e,n){return e==v?new O(n,t):e==m||e==_?new N:void 0}},1e3),O=l("attachImage",function(e,n){var i=n.target,r=a.generateFileName()+".png",o=a.convertBlobToImage(e,r);return u.trigger(c.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[o],isWikiTextfieldFocused:a.isWikiTextfield(t(i)),wikiTextfield:i,isPaste:!0,successCallback:function(){f(I)}}),function(t,e){return new N}}),A=new N;s._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:g,EVENT_WINDOW_PASTE:E,EVENT_FILE_LOADED:v,EVENT_FILE_LOAD_ERROR:m,EVENT_IMAGE_LOADED:p,EVENT_IMAGE_LOAD_ERROR:h,EVENT_DIALOG_LOADED:I,EVENT_DIALOG_CLOSED:T,EVENT_DIALOG_CANCELED:w,EVENT_TIMEOUT:_},states:{StateIdle:N,StateCatchClipboard:D,StateImageLoading:b,StateFileLoading:L,StateAttachImage:O}}},s.initIssuePaste=function(){t(window).on("keydown",function(t){f(g,t)}),t(window).on("paste",function(t){f(E,a.normalizePasteEvent(t))}),u.bind("Dialog.hide",function(t,e,n){n?f(w,e):f(T,e)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",[],function(){"use strict";return function(){return JIRA.trace.apply(void 0,arguments)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["exports"],function(t){"use strict";t.trigger=function(t,n){AJS.trigger("analytics",{name:t,data:n||{}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["jquery","jira/util/events","dndattachment/ctrlv/html5","dndattachment/upload/handler","exports"],function(e,t,n,r,a){a.register=function(){var a={name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(e,t){return!!t.isPaste},processFiles:function(r,a){var c=e.Deferred();return n.show().done(function(n){var a=e("#attach-screenshot-placeholder-message"),i=e.Event("paste");i.clipboardData={files:r},a.focus(),setTimeout(function(){a.trigger(i)}),t.bind("Dialog.hide",function(e,t,n){n?c.reject():c.resolve([t.find("#attachscreenshotname").val()+".png"])})}),c}};r.registerExecutor(a)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["jquery","underscore","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/issue-paste","dndattachment/ctrlv/tracking","dndattachment/ctrlv/executor","jira/dialog/dialog-register","jira/dialog/form-dialog","exports"],function(t,e,n,i,a,r,o,c,s,d){"use strict";d.init=function(){var n=s.extend({options:{}});JIRA.ScreenshotDialog=n,a.initIssuePaste(),t(document).ready(function(){var a=t.Deferred();a.resolve(),c.attachScreenshotDialog=new n({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",isIssueDialog:!0,onContentRefresh:function(){this.$form.bind("before-submit",function(n){var a=i.validateFormData(i.screenshotFileUpload,t.trim(i.dialogView.getFileNameInput().val()));return 0==i.dialogView.getFileSize()?(n.preventDefault(),!1):!!e.isEmpty(a)||(i.dialogView.displayErrors(a),n.preventDefault(),!1)})},delayShowUntil:function(){return a}}),t(document).bind("dialogContentReady",function(t,e){e===c.attachScreenshotDialog&&null!==document.getElementById("attach-screenshot-form")&&(r.trigger("attach.screenshot.html5.contentReady"),i.initScreenshotPasteHandler())}),t(document).ready(function(){t(document).on("click","#attach-screenshot-html5",function(){r.trigger("attach.screenshot.html5.display")})})}),o.register()}}),require(["dndattachment/ctrlv/initialize","jquery"],function(t,e){"use strict";e(function(){t.init()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-form-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/FormDropZone.js' */
define("dndattachment/dropzones/FormDropZone",["dndattachment/Parser","dndattachment/integration-register","dndattachment/upload/handler","dndattachment/dropzones/IssueDropZone","jquery","dndattachment/aui","dndattachment/i18n","dndattachment/JIRA","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/util/events","underscore"],function(e,t,n,o,i,r,a,d,s,h,l,c){var p=o.extend({eventGroup:"formdropzone",init:function(){this._super.apply(this,arguments),this.progressBars=[],this.bind("uploadFinished",this.onUploadFinished.bind(this)),this.$containerNode=this.getContainerNode(),this.$formNode=this.$node.parents("form"),this.formToken=this.$formNode.find('input[name="formToken"]').attr("value"),this.projectId=this.$formNode.find("*[name=pid]").val(),this.$inputNode=i('<input name="dnd-dropzone" type="hidden" />').insertAfter(this.$node),this.$fieldNode=this.$node.parents(".field-group"),this.$fieldNode.addClass("long-field"),this.connectContainer()},onUploadFinished:function(e,t){var n=i('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",t.fileID).attr("id","filetoconvert-"+t.fileID).prop("checked",!0).insertBefore(t.$node);t.bind("onBeforeDestroy",function(){n.prop("checked",!1).prop("value",null)}),setTimeout(function(){t.$node.addClass("upload-progress-bar__upload-ready"),t.setIcon("aui-iconfont-close-dialog")},1e3),d.trace("jira.issue.dnd.uploadfinished")},commitUpload:function(e){return this.queueEvent("commitUpload",{count:e.length}),new i.Deferred},getContainerNode:function(){return this.$node.parents(".jira-dialog-content")},connectContainer:function(){if(this.$dragoverMask=i('<div class="attach-files-drop-zone__dragover-mask" />'),this.$dragoverMask.appendTo(this.$containerNode),this.$body=i(document.body),this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.onBodyDragOverDropHandler=this.onBodyDragOverDrop.bind(this),this.$containerNode.on("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),this.$body.on("dragover drop",this.onBodyDragOverDropHandler),this.onBeforeSubmitHandler=this.onBeforeSubmit.bind(this),this.$formNode.on("before-submit",this.onBeforeSubmitHandler),this.onContentAddedHandler=this.onContentAdded.bind(this),d.bind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.bind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.on("hide",this.onDialogHide.bind(this)),this.projectId){this.externalTemporaryAttachmentCreator=t.getTemporaryAttachmentCreator(this.projectId,this.formToken,this.$node[0]);var e=t.getConnectedTemporaryBinaryUploadHandler();"function"==typeof e&&(this.externalPasteUploadHandler=e(this.projectId,this.formToken,this.$node[0]));var n=t.getTemporaryAttachmentZoneCreator();if("function"==typeof n){var o={};this.externalZone=n(this.projectId,this.formToken,this.$node[0],this.$containerNode[0],{onFileUploadStarted:function(e){var t=new i.Deferred;o[e.id]=t,this.queueTask(t.promise())}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve()}})}}},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},browseFilesAndUpload:function(e,t){if("function"==typeof this.externalTemporaryAttachmentCreator&&n.isDefaultExecutor({})){var o={},r=c.extend({},t,{onFileUploadStarted:function(e){var n=new i.Deferred;o[e.id]=n,this.queueTask(n.promise()),t&&t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e)}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve(),t&&t.onFileUploadFinished&&t.onFileUploadFinished.call(null)}});return this.externalTemporaryAttachmentCreator.call(null,e,r),!0}this.browseLinkHandler.call(this,e)},disconnectContainer:function(){this.externalZone&&this.externalZone.deactivate(),n.disconnectCurrentDropZone(this),this.$dragoverMask.remove(),this.$containerNode.removeClass("attach-files-drop-zone__dragover"),this.$containerNode.off("dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.$formNode.off("before-submit",this.onBeforeSubmitHandler),d.unbind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.unbind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.off("hide",this.onDialogHide.bind(this))},isAttached:function(){return i.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},onDialogHide:function(){this.$body.off("dragover drop",this.onBodyDragOverDropHandler)},onBodyDragOverDrop:function(e){e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none")},onDragOverDrop:function(e){return this.isAttached()?void(h.dragEventContainsFiles(e)&&(e.preventDefault(),e.stopPropagation(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),this.$containerNode.addClass("attach-files-drop-zone__dragover"),"dragenter"===e.type&&this.externalZone&&(n.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"===e.type&&(this.$containerNode.removeClass("attach-files-drop-zone__dragover"),i(document).trigger("dropHandled"),e.isPasteEvent?this.externalPasteUploadHandler?this.externalPasteUploadHandler(e.dataTransfer.files[0]):this.doAjaxUpload(e.dataTransfer):this.externalZone&&n.isDefaultExecutor({})?this.externalZone.drop():this.doAjaxUpload(e.dataTransfer)))):void this.disconnectContainer()},doAjaxUpload:function(e){var t=new s(e);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))},onDragLeave:function(){this.$containerNode.removeClass("attach-files-drop-zone__dragover")},onBeforeSubmit:function(e){if(this.isDirty){e.preventDefault();var t={};t[this.$inputNode.attr("name")]=a("dnd.attachment.upload.in.progress"),d.applyErrorsToForm(this.$formNode,t),this.$formNode.find(".error").toArray().some(function(e){e.scrollIntoView()})}},markDirty:function(e){o.prototype.markDirty.apply(this,arguments),this.isDirty=e,d.trace(e?"jira.issue.dnd.isdirty":"jira.issue.dnd.isclear")},handleNewProgressBar:function(e){this.progressBars.push(e),e.bind("onBeforeDestroy",c.bind(function(){this.trigger("progressBarOnBeforeDestroy",e),this.progressBars=c.filter(this.progressBars,function(t){return t!==e}),0===this.progressBars.length&&this.trigger("allUploadsCancelled")},this)),e.bind("onDestroy",c.bind(function(){this.trigger("progressBarDestroyed")},this)),e.bind("onFinished",c.bind(function(){this.trigger("progressBarFinished")},this)),e.bind("onFailed",c.bind(function(){this.trigger("progressBarFailed")},this)),this.trigger("progressBarStarted")},filesStillUploading:function(){return c.filter(this.progressBars,function(e){return!e.isFinished()}).length>0},anyFilesFailed:function(){return c.filter(this.progressBars,function(e){return e.isFailed()}).length>0}});return p});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/AttachFilesDropZone.js' */
define("dndattachment/dropzones/AttachFilesDropZone",["dndattachment/dropzones/FormDropZone","jquery"],function(e,n){var t=e.extend({eventGroup:"attachfiledropzone",init:function(){this._super.apply(this,arguments),this.bind("progressBarInserted",function(e,t){var r=new n.Deferred;this.queueTask(r),t.result.done(r.resolve.bind(r)),t.bind("onBeforeDestroy",function(){r.resolve()})}.bind(this))},checkMarkDirty:function(){this.pendingQueue.length<=1&&this.markDirty(!1)}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/CreateIssueDropZone.js' */
define("dndattachment/dropzones/CreateIssueDropZone",["jquery","dndattachment/dropzones/FormDropZone"],function(e,n){var r=n.extend({eventGroup:"createissuedropzone",progressBarType:"dndattachment/progressbars/ProjectUploadProgressBar",getContainerNode:function(){return e(this.$node.parents(".jira-dialog-content")[0]||this.$node.parents("form#issue-create").parents(".aui-page-panel-content")[0])},handleNewProgressBar:function(e){this._super.apply(this,arguments),e.bind("onDestroy onFinished",_.bind(function(){if(!this.filesStillUploading()){var e={};e[this.$inputNode.attr("name")]="",JIRA.applyErrorsToForm(this.$formNode,e)}},this))}});return r});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/ProjectUploadProgressBar.js' */
define("dndattachment/progressbars/ProjectUploadProgressBar",["jquery","dndattachment/progressbars/UploadProgressBar"],function(e,a){return a.extend({getProjectId:function(){return this.$node.parents("form").find("*[name=pid]").val()},getUploadParams:function(e){var t=a.prototype.getUploadParams.apply(this,arguments);return this.getProjectId()&&(t.projectId=this.getProjectId()),t},loadThumbnail:function(a){if(this.isImageType())return this._super.apply(this,arguments);var t=this.getThumbnailNode();t.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui");var r="aui-iconfont-devtools-file",s="File";"object"==typeof a&&(r=JIRA.Templates.ViewIssue.matchFileClass({mimetype:a.type}),s=JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:a.type}));var o=e('<span class="aui-icon aui-icon-large"/>').addClass(r).attr("title",s);return o.appendTo(t)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/AttachFilesDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/AttachFilesDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/CreateIssueDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/CreateIssueDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'+(e.description?'<div class="description">'+soy.$$escapeHtml(e.description)+"</div>":"")};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:drag-and-drop-attachment-javascript-init', location = 'jira-dnd-attachment-module/js/initIssueDropZone.js' */
require(["dndattachment/Parser","jquery","dndattachment/dropzones/IssueDropZone","dndattachment/upload/handler","dndattachment/upload/default/executor","dndattachment/aui","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,n,a,i,o,r,d,s){function u(n,i){var o=n.find(".field-group.file-input-list");if(0!=o.size()&&!(o.find('*[duiType*="'+i+'"]').length>0)){var d=o.find("input[name=filetoconvert]:checked").map(function(t,n){return r.getAttachment(n.value,e(n).siblings("label").text())}).toArray(),u=o.find(".description:last-child").html();o.empty();var p=e(JIRA.Templates.DnDAttachmentPlugin[i]({uploadLimit:s.format(m),jiraAttachmentSize:m,description:u}));t.parse(p.appendTo(o)).then(function(t){null!=t&&(t.loadAttachments(d),a.setCurrentDropZone(t))})}}function p(t,n){var i=function(){u(t.$popupContent,n)};t.$popup&&t.$popup.is(":visible")?i():t.onContentReady(i),e(t).bind("Dialog.hide",function(){a.disconnectCurrentDropZone()})}function c(n){var i=n&&"attachmentmodule"==n.attr("id")&&e(".mod-content:not(.issue-drop-zone)",n);if(i&&i.size()>0){if(0==n.find("#add-attachments-link").length)return;i.addClass("issue-drop-zone");var o=e(JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone({uploadLimit:s.format(m),jiraAttachmentSize:m}));t.parse(o.prependTo(i)).then(function(t){l&&l.disconnectContainer(),l=t,a.setAttachmentDropZone(t)})}}if(n.prototype.isSupportedBrowser()){var l,m=d.getWRM("upload-limit"),h=function(){JIRA.Dialogs.attachFile&&p(JIRA.Dialogs.attachFile,"AttachFilesDropZone");var t=["create-issue-dialog","create-subtask-dialog","edit-issue-dialog"],n=function(e,n,a){t.includes(n.attr("id"))&&p(a,"CreateIssueDropZone")};e(o).on("Dialog.show",n),JIRA.Dialog.current&&n(null,JIRA.Dialog.current.$popup,JIRA.Dialog.current),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(t,e,n){u(e,"CreateIssueDropZone"),c(e)});var r=e("form#issue-create, form#issue-edit");r.size()>0&&u(r,"CreateIssueDropZone"),a.initialize(),a.registerExecutor(i),c(e("#attachmentmodule"))};e.isReady?h():o.$(h),e.event.props?e.event.props.push("dataTransfer"):e.event.addProp("dataTransfer")}});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-constants', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/internal/constants.js' */
("undefined"===typeof window?global:window).__fa2d609d3773596cc2b702b68678a39c=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={INPUT_SUFFIX:"-input"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-toggle', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/toggle.js' */
("undefined"===typeof window?global:window).__1840a42d6d7e6ab244ecf3cf5bcc56cd=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function c(a){return a._input||(a._input=a.querySelector("input"))}function f(a,b){c(b).removeAttribute(a)}function h(a,b,d){c(b).setAttribute(a,d.newValue)}function i(a){return{removed:f.bind(this,a),fallback:h.bind(this,a)}}"use strict";__e573296a636ce4ee054d5d3b9c8823fb;__8a6820c3d0bc5d638a8490d849a5b750;var g=__29fa312a51517f20df339a1900640e1d,d=e(__307d3e18fd611f85395c67cddeb1fe24),
k=e(__8339408c10b0a9052af9f3aad7b3a4e8),l=e(__f52b7059926ab2bdcd0aee12b4bc782b),m=e(__c1ce1f1e3e613f564fc234ff043570f1),n=__fa2d609d3773596cc2b702b68678a39c,j={removed:function(a){f.call(this,"form",a);a._formId=null},fallback:function(a,b){h.call(this,"form",a,b);a._formId=b.newValue}},o={removed:f.bind(void 0,"id"),fallback:function(a,b){c(a).setAttribute("id",""+b.newValue+n.INPUT_SUFFIX)}};(0,m.default)("aui-toggle",{template:(0,l.default)('<input type="checkbox" class="aui-toggle-input">','<span class="aui-toggle-view">',
'<span class="aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success"></span>','<span class="aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog"></span>',"</span>"),created:function(a){a._input=c(a);a._tick=a.querySelector(".aui-toggle-tick");a._cross=a.querySelector(".aui-toggle-cross");(0,d.default)(a._input).tooltip({title:function(){return this.checked?this.getAttribute("tooltip-on"):this.getAttribute("tooltip-off")},gravity:"s",hoverable:!1});a._input.addEventListener("keydown",
function(b){a.busy&&b.keyCode===AJS.keyCode.SPACE&&b.preventDefault()});-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&a._input.addEventListener("click",function(b){a.busy&&b.preventDefault()})},attached:function(a){(0,k.default)(a).attributeExists("label")},events:{click:function(a,b){!a.disabled&&(!a.busy&&b.target!==a._input)&&a._input.click();(0,g.setBooleanAttribute)(a,"checked",c(a).checked)}},attributes:{id:o,checked:{removed:function(a){f.call(this,"checked",a);c(a).checked=!1},
fallback:function(a,b){h.call(this,"checked",a,b);c(a).checked=!0}},disabled:i("disabled"),form:j,name:i("name"),value:i("value"),"tooltip-on":{value:"On",fallback:function(a,b){c(a).setAttribute("tooltip-on",b.newValue||"On")}},"tooltip-off":{value:"Off",fallback:function(a,b){c(a).setAttribute("tooltip-off",b.newValue||"Off")}},label:{removed:function(a){c(a).removeAttribute("aria-label")},
fallback:function(a,b){c(a).setAttribute("aria-label",b.newValue)}}},prototype:{focus:function(){this._input.focus();return this},get checked(){return this._input.checked},set checked(a){this._input.checked=a;return(0,g.setBooleanAttribute)(this,"checked",a)},get disabled(){return this._input.disabled},set disabled(a){return(0,g.setBooleanAttribute)(this,"disabled",a)},get form(){return document.getElementById(this._formId)},set form(a){j.fallback.call(this,this,{newValue:a||null});return this.form},
get name(){return this._input.name},set name(a){this.setAttribute("name",a);return a},get value(){return this._input.value},set value(a){this.setAttribute("value",null===a?"":a);return a},get busy(){return"true"===this._input.getAttribute("aria-busy")},set busy(a){(0,g.setBooleanAttribute)(this,"busy",a);a?(this._input.setAttribute("aria-busy","true"),this._input.indeterminate=!0,this.checked?((0,d.default)(this._input).addClass("indeterminate-checked"),(0,d.default)(this._tick).spin({zIndex:null})):
(0,d.default)(this._cross).spin({zIndex:null,color:"black"})):((0,d.default)(this._input).removeClass("indeterminate-checked"),this._input.indeterminate=!1,this._input.removeAttribute("aria-busy"),(0,d.default)(this._cross).spinStop(),(0,d.default)(this._tick).spinStop());var b=!!a;this.id&&Array.prototype.forEach.call(document.querySelectorAll('aui-label[for="'+this.id+'"]'),function(a){a.disabled=b});return a}}});return{}}.call(this);;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone-1.0.0-factory', location = 'atlassian-jslibs/factories/backbone/1.0.0/backbone-1.0.0-factory.js' */
(function(k){define("atlassian/libs/factories/backbone-1.0.0",function(){return function(t,i){var p={_:t,$:i};k.call(p);return"undefined"!==typeof exports?exports.noConflict():p.Backbone.noConflict()}})})(function(){var k=this,t=k.Backbone,i=[],p=i.push,u=i.slice,C=i.splice,g;g="undefined"!==typeof exports?exports:k.Backbone={};g.VERSION="1.0.0";var e=k._;!e&&"undefined"!==typeof require&&(e=require("underscore"));g.$=k.jQuery||k.Zepto||k.ender||k.$;g.noConflict=function(){k.Backbone=t;return this};
g.emulateHTTP=!1;g.emulateJSON=!1;var h=g.Events={on:function(a,b,c){if(!q(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!q(this,"once",a,[b,c])||!b)return this;var d=this,f=e.once(function(){d.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,c)},off:function(a,b,c){var d,f,v,g,j,w,l,h;if(!this._events||!q(this,"off",a,[b,c]))return this;if(!a&&
!b&&!c)return this._events={},this;g=a?[a]:e.keys(this._events);j=0;for(w=g.length;j<w;j++)if(a=g[j],v=this._events[a]){this._events[a]=d=[];if(b||c){l=0;for(h=v.length;l<h;l++)f=v[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f)}d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=u.call(arguments,1);if(!q(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&x(c,b);d&&x(d,arguments);return this},stopListening:function(a,
b,c){var d=this._listeners;if(!d)return this;var f=!b&&!c;"object"===typeof b&&(c=this);a&&((d={})[a._listenerId]=a);for(var e in d)d[e].off(b,c,this),f&&delete this._listeners[e];return this}},y=/\s+/,q=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(y.test(c)){c=c.split(y);f=0;for(var e=c.length;f<e;f++)a[b].apply(a,[c[f]].concat(d));return!1}return!0},x=function(a,b){var c,d=-1,f=a.length,e=b[0],g=b[1],j=b[2];switch(b.length){case 0:for(;++d<
f;)(c=a[d]).callback.call(c.ctx);break;case 1:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e);break;case 2:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g);break;case 3:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g,j);break;default:for(;++d<f;)(c=a[d]).callback.apply(c.ctx,b)}};e.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,d,f){var g=this._listeners||(this._listeners={}),o=b._listenerId||(b._listenerId=e.uniqueId("l"));g[o]=b;"object"===typeof d&&(f=this);b[a](d,f,this);return this}});
h.bind=h.on;h.unbind=h.off;e.extend(g,h);var n=g.Model=function(a,b){var c,d=a||{};b||(b={});this.cid=e.uniqueId("c");this.attributes={};e.extend(this,e.pick(b,D));b.parse&&(d=this.parse(d,b)||{});if(c=e.result(this,"defaults"))d=e.defaults({},d,c);this.set(d,b);this.changed={};this.initialize.apply(this,arguments)},D=["url","urlRoot","collection"];e.extend(n.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},
sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return e.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,f,g,o,j,h,l;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;g=c.unset;o=c.silent;a=[];j=this._changing;this._changing=!0;j||(this._previousAttributes=e.clone(this.attributes),this.changed={});l=this.attributes;h=this._previousAttributes;
this.idAttribute in f&&(this.id=f[this.idAttribute]);for(d in f)b=f[d],e.isEqual(l[d],b)||a.push(d),e.isEqual(h[d],b)?delete this.changed[d]:this.changed[d]=b,g?delete l[d]:l[d]=b;if(!o){a.length&&(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,l[a[b]],c)}if(j)return this;if(!o)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,e.extend({},b,{unset:!0}))},clear:function(a){var b=
{},c;for(c in this.attributes)b[c]=void 0;return this.set(b,e.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!e.isEmpty(this.changed):e.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?e.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes,f;for(f in a)if(!e.isEqual(d[f],b=a[f]))(c||(c={}))[f]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return e.clone(this._previousAttributes)},
fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return false;c&&c(b,d,a);b.trigger("sync",b,d,a)};r(this,a);return this.sync("read",this,a)},save:function(a,b,c){var d,f=this.attributes;null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;if(d&&(!c||!c.wait)&&!this.set(d,c))return!1;c=e.extend({validate:!0},c);if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=e.extend({},f,d));void 0===c.parse&&(c.parse=
!0);var g=this,h=c.success;c.success=function(a){g.attributes=f;var b=g.parse(a,c);c.wait&&(b=e.extend(d||{},b));if(e.isObject(b)&&!g.set(b,c))return false;h&&h(g,a,c);g.trigger("sync",g,a,c)};r(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=f);return a},destroy:function(a){var a=a?e.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&d();c&&
c(b,e,a);b.isNew()||b.trigger("sync",b,e,a)};if(this.isNew())return a.success(),!1;r(this,a);var f=this.sync("delete",this,a);a.wait||d();return f},url:function(){var a=e.result(this,"urlRoot")||e.result(this.collection,"url")||z();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},e.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;var a=e.extend({},this.attributes,a),c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,e.extend(b||{},{validationError:c}));return!1}});e.each("keys values pairs invert pick omit".split(" "),function(a){n.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.attributes);return e[a].apply(e,b)}});var s=g.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&
(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,e.extend({silent:!0},b))},E={add:!0,remove:!0,merge:!0},F={add:!0,merge:!1,remove:!1};e.extend(s.prototype,h,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){return this.set(a,e.defaults(b||{},F))},remove:function(a,b){a=e.isArray(a)?
a.slice():[a];b||(b={});var c,d,f,g;c=0;for(d=a.length;c<d;c++)if(g=this.get(a[c]))delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g);return this},set:function(a,b){b=e.defaults(b||{},E);b.parse&&(a=this.parse(a,b));e.isArray(a)||(a=a?[a]:[]);var c,d,f,g,h,j=b.at,k=this.comparator&&null==j&&!1!==b.sort,l=e.isString(this.comparator)?this.comparator:null,i=[],m=[],n={};c=
0;for(d=a.length;c<d;c++)if(f=this._prepareModel(a[c],b))(g=this.get(f))?(b.remove&&(n[g.cid]=!0),b.merge&&(g.set(f.attributes,b),k&&(!h&&g.hasChanged(l))&&(h=!0))):b.add&&(i.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f));if(b.remove){c=0;for(d=this.length;c<d;++c)n[(f=this.models[c]).cid]||m.push(f);m.length&&this.remove(m,b)}i.length&&(k&&(h=!0),this.length+=i.length,null!=j?C.apply(this.models,[j,0].concat(i)):p.apply(this.models,i));h&&this.sort({silent:!0});
if(b.silent)return this;c=0;for(d=i.length;c<d;c++)(f=i[c]).trigger("add",f,this,b);h&&this.trigger("sort",this,b);return this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,e.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-
1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return e.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==b.get(d))return!1;return!0})},findWhere:function(a){return this.where(a,
!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=e.isFunction(b)?b:function(a){return a.get(b)};return e.sortedIndex(this.models,a,d,c)},pluck:function(a){return e.invoke(this.models,"get",
a)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};r(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?e.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(e){b.wait&&c.add(a,b);d&&d(a,e,b)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?(this.trigger("invalid",this,a,b),!1):c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&
(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});e.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){s.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.models);return e[a].apply(e,b)}});
e.each(["groupBy","countBy","sortBy"],function(a){s.prototype[a]=function(b,c){var d=e.isFunction(b)?b:function(a){return a.get(b)};return e[a](this.models,d,c)}});var i=g.View=function(a){this.cid=e.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},G=/^(\S+)\s*(.*)$/,H="model collection el id attributes className tagName events".split(" ");e.extend(i.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof g.$?a:g.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=e.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];e.isFunction(c)||(c=this[a[b]]);if(c){var d=b.match(G),f=d[1],d=d[2],c=e.bind(c,this),f=f+(".delegateEvents"+this.cid);
if(""===d)this.$el.on(f,c);else this.$el.on(f,d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=e.extend({},e.result(this,"options"),a));e.extend(this,e.pick(a,H));this.options=a},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var a=e.extend({},e.result(this,"attributes"));this.id&&(a.id=e.result(this,"id"));this.className&&(a["class"]=e.result(this,"className"));a=g.$("<"+
e.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});g.sync=function(a,b,c){var d=I[a];e.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var f={type:d,dataType:"json"};c.url||(f.url=e.result(b,"url")||z());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(c.emulateHTTP&&("PUT"===
d||"DELETE"===d||"PATCH"===d)){f.type="POST";c.emulateJSON&&(f.data._method=d);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(h)return h.apply(this,arguments)}}"GET"!==f.type&&!c.emulateJSON&&(f.processData=!1);if("PATCH"===f.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};a=c.xhr=g.ajax(e.extend(f,c));b.trigger("request",b,a,c);return a};var I=
{create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var A=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},J=/\((.*?)\)/g,K=/(\(\?)?:\w+/g,L=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(A.prototype,h,{initialize:function(){},route:function(a,b,c){e.isRegExp(a)||(a=this._routeToRegExp(a));e.isFunction(b)&&(c=b,b="");c||(c=this[b]);var d=this;g.history.route(a,
function(e){e=d._extractParameters(a,e);c&&c.apply(d,e);d.trigger.apply(d,["route:"+b].concat(e));d.trigger("route",b,e);g.history.trigger("route",d,b,e)});return this},navigate:function(a,b){g.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var a,b=e.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(M,"\\$&").replace(J,"(?:$1)?").replace(K,function(a,c){return c?a:"([^/]+)"}).replace(L,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return e.map(c,function(a){return a?decodeURIComponent(a):null})}});var m=g.History=function(){this.handlers=[];e.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,O=/msie [\w.]+/,P=/\/$/;m.started=!1;e.extend(m.prototype,h,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,c=this.root.replace(P,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(B,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=e.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=O.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(N,"/");b&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)g.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&
!b)g.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(B,
""),this.history.replaceState({},document.title,this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return e.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,
a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});g.history=new m;n.extend=s.extend=A.extend=i.extend=m.extend=function(a,b){var c=this,d;d=a&&e.has(a,"constructor")?a.constructor:function(){return c.apply(this,
arguments)};e.extend(d,c,b);var f=function(){this.constructor=d};f.prototype=c.prototype;d.prototype=new f;a&&e.extend(d.prototype,a);d.__super__=c.prototype;return d};var z=function(){throw Error('A "url" property or function must be specified');},r=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-1.1.0-factory', location = 'atlassian-jslibs/factories/brace/1.1.0/brace-1.1.0-factory.js' */
(function(j){define("atlassian/libs/factories/brace-1.1.0",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="1.1.0";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==""+
a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?b:p(a)?
new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});this.prototype.ignoreUnknownAttributes&&f.Mixins.applyMixin(h,{ignoreUnknownAttributes:this.prototype.ignoreUnknownAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,
a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&
(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=
g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=
c.uniq(e.namedEvents.concat(b[d]))}else if("ignoreUnknownAttributes"===d)e.hasOwnProperty(d)||(e.ignoreUnknownAttributes=b[d]||!1);else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});
if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,
[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g)&&!this.ignoreUnknownAttributes)throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,
a)&&!this.ignoreUnknownAttributes)throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.servicedesk.frontend-webpack-plugin:context-common-jsd-entry-chunk', location = 'common-jsd-entry-chunk.bundle.js' */
!function(e){function a(d){if(r[d])return r[d].exports;var t=r[d]={i:d,l:!1,exports:{}};return e[d].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var d=window.sdJsonp;window.sdJsonp=function(r,c,s){for(var i,n,o,f=0,b=[];f<r.length;f++){if(n=r[f],t[n])b.push(t[n][0]);t[n]=0}for(i in c)if(Object.prototype.hasOwnProperty.call(c,i))e[i]=c[i];if(d)d(r,c,s);for(;b.length;)b.shift()();if(s)for(f=0;f<s.length;f++)o=a(a.s=s[f]);return o};var r={},t={52:0};a.e=function(e){function d(){s.onerror=s.onload=null,clearTimeout(i);var a=t[e];if(0!==a){if(a)a[1](new Error("Loading chunk "+e+" failed."));t[e]=void 0}}if(0===t[e])return Promise.resolve();if(t[e])return t[e][2];var r=new Promise(function(a,d){t[e]=[a,d]});t[e][2]=r;var c=document.getElementsByTagName("head")[0],s=document.createElement("script");if(s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,a.nc)s.setAttribute("nonce",a.nc);s.src=a.p+"context-"+({0:"sd.project.queues",1:"sd.queues.addon",2:"sd.agent.reports.custom",3:"sd.agent.reports.kb.requests.resolved",4:"sd.agent.reports.kb.requests.deflected",5:"sd.agent.organisation",6:"sd.agent.customers",7:"sd.admin.languagesupport",8:"sd.agent.reports.csat",9:"sd.admin.outgoing.email",10:"sd.agent.reports.workload",11:"sd.agent.reports.sla",12:"sd.project.reports",13:"sd.admin.widget.addon.installer",14:"sd.admin.widget",15:"sd.admin.addon",16:"rlabs.configure",17:"rlabs.objectschema.manage",18:"insight.pages.context",19:"jira.view.issue",20:"sd.project.admin",21:"sd.project.admin.registry",22:"sd.project.settings.automation.modules",23:"sd.project.sidebar.content",24:"sd.project.view",25:"atl.dashboard",26:"atl.general",27:"jira.heritage.form.dialog",28:"sd.project.view.registry",29:"sd.project.legacy.issue.view",30:"sd.project.settings.request.forms.workflow.bridge",31:"jira.workflow.view",32:"jira.admin.conf",33:"jira.create.issue",34:"sd.project.queues.legacy.issue.view.bridge",35:"sd.project.report.legacy.issue.view.bridge",36:"jira.view.issue.asset.unlicensed",37:"jira.heritage.form.dialog.asset.unlicensed",38:"sd.project.config.checker.bridge",39:"sd.admin.email.requests",40:"jira.create.issue.asset.unlicensed",41:"atl.general.asset.unlicensed",42:"jira.admin",43:"sd.project.queues.bridge",44:"cmdb.field.list.view",45:"jql.field.renderer.bridge",46:"jira.heritage.sd.sidebar.integration",47:"jql.editor.bridge",48:"sd.agent.unlicensed",49:"cmdb.field.jsw.board.view",50:"asset.tracking.field.config",51:"sd.queues.edit"}[e]||e)+"-"+{0:"20192f2dad3d819043a5",1:"a26e946e8d038798f929",2:"b57404255f3a6232b3d0",3:"3ee1d2efd6eb177a68db",4:"19e89df7f79bd7132367",5:"aa628634bc874939cf30",6:"cc54b56cd8262aa2e71c",7:"31b18efc9a80d7e6ff26",8:"49e1ff3276eb3084fdee",9:"aa516311b5d455479f4e",10:"61a49bbc88057bb8fae8",11:"ab6d945531d548244194",12:"2972565dd02c6fe81550",13:"f894a7a08717b5e16db2",14:"42f203503f6ef3350481",15:"fca6198e2f541854dc9b",16:"ddba0fa82cc378fd46e4",17:"e375bd5b41259b6ec734",18:"cb2a018b1d7b0a22c89a",19:"5651c6bd1667dc08bf9a",20:"0c63975d7ea162788f31",21:"881e93a1db5a2a101851",22:"6fbd495e925ccfbcaa61",23:"2e89bdec6c1d179adcbe",24:"09bb8aa4b59ac664ee44",25:"ddc5f3d5b76f134d97e9",26:"a3fe98b6f16c37293f2f",27:"767598b76ec2bce4597e",28:"cbcfff48c2632f1c0fec",29:"8cef9924927d2f86823e",30:"901b8cd4aa2c95cea5db",31:"bd8cdcd75f3743356e95",32:"345a09df7c592de9fceb",33:"6f2cd7775926621365f6",34:"1a7255eab900bb52850d",35:"58dc60ef24bb8b1984bb",36:"6326bcf1b1176e5d5958",37:"51e48a99f97b364a4102",38:"b458566be4a79533ed9b",39:"57b93aa25fb43a8f7e6e",40:"89c0343b840603986a7e",41:"f6fc90383aa1f536ce29",42:"ae0d725d67ff0b62ab86",43:"7b0b6e2151b8c6e4df88",44:"79220b930d5ae316ecd8",45:"4a21179476ea1e6f11a9",46:"a3b8962f95c73dbdcfb0",47:"97532830cd98471de9cc",48:"9cc978dd84651e891bec",49:"a4d6a525e200264db281",50:"d8d376b1209586402c57",51:"de7caca155abe91f71d5"}[e]+".js?locale=" + __webpack_public_path_locale__;var i=setTimeout(d,12e4);return s.onerror=s.onload=d,c.appendChild(s),r},a.m=e,a.c=r,a.i=function(e){return e},a.d=function(e,d,r){if(!a.o(e,d))Object.defineProperty(e,d,{configurable:!1,enumerable:!0,get:r})},a.n=function(e){var d=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(d,"a",d),d},a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},a.p="",a.oe=function(e){throw console.error(e),e}}([]);;
;
/* module-key = 'com.atlassian.servicedesk.frontend-webpack-plugin:context-jira.create.issue.asset.unlicensed', location = 'jira.create.issue.asset.unlicensed.bundle.js' */
sdJsonp([40],{0:function(n,t,e){var r,i;r=[e(18)],void 0!==(i=function(n){return n}.apply(t,r))&&(n.exports=i)},1:function(n,t,e){var r;void 0!==(r=function(){return jQuery}.call(t,e,t,n))&&(n.exports=r)},10:function(n,t,e){var r,i;r=[e(30)],void 0!==(i=function(n){return n}.apply(t,r))&&(n.exports=i)},11:function(n,t){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(n){if("object"==typeof window)e=window}n.exports=e},1241:function(n,t,e){e(8),n.exports=e(545)},13:function(n,t,e){var r,i;if(void 0===o)var o={};if(o.table=function(n,t){return"<table"+(n.id?' id="'+soy.$$escapeHtml(n.id)+'"':"")+' class="aui'+o.renderExtraClasses(n)+'"'+o.renderExtraAttributes(n)+">"+(n.columnsContent?soy.$$filterNoAutoescape(n.columnsContent):"")+(n.captionContent?"<caption>"+soy.$$filterNoAutoescape(n.captionContent)+"</caption>":"")+(n.theadContent?"<thead>"+soy.$$filterNoAutoescape(n.theadContent)+"</thead>":"")+(n.tfootContent?"<tfoot>"+soy.$$filterNoAutoescape(n.tfootContent)+"</tfoot>":"")+(!n.contentIncludesTbody?"<tbody>":"")+soy.$$filterNoAutoescape(n.content)+(!n.contentIncludesTbody?"</tbody>":"")+"</table>"},goog.DEBUG)o.table.soyTemplateName="aui.table";r=[],void 0!==(i=function(){return o}.apply(t,r))&&(n.exports=i)},15:function(n,t,e){(function(t,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.0
 */
!function(t,e){!0?n.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function n(n){return"function"==typeof n||"object"==typeof n&&null!==n}function i(n){return"function"==typeof n}function o(n){Y=n}function u(n){V=n}function s(){return function(){return t.nextTick(p)}}function a(){if(void 0!==Q)return function(){Q(p)};else return l()}function c(){var n=0,t=new Z(p),e=document.createTextNode("");return t.observe(e,{characterData:!0}),function(){e.data=n=++n%2}}function f(){var n=new MessageChannel;return n.port1.onmessage=p,function(){return n.port2.postMessage(0)}}function l(){var n=setTimeout;return function(){return n(p,1)}}function p(){for(var n=0;n<J;n+=2){(0,en[n])(en[n+1]),en[n]=void 0,en[n+1]=void 0}J=0}function h(){try{var n=e(17);return Q=n.runOnLoop||n.runOnContext,a()}catch(n){return l()}}function v(n,t){var e=arguments,r=this,i=new this.constructor(y);if(void 0===i[on])z(i);var o=r._state;if(o)!function(){var n=e[o-1];V(function(){return O(o,i,n,r._result)})}();else $(r,i,n,t);return i}function d(n){var t=this;if(n&&"object"==typeof n&&n.constructor===t)return n;var e=new t(y);return j(e,n),e}function y(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function b(n){try{return n.then}catch(n){return cn.error=n,cn}}function w(n,t,e,r){try{n.call(t,e,r)}catch(n){return n}}function _(n,t,e){V(function(n){var r=!1,i=w(e,t,function(e){if(!r)if(r=!0,t!==e)j(n,e);else k(n,e)},function(t){if(!r)r=!0,S(n,t)},"Settle: "+(n._label||" unknown promise"));if(!r&&i)r=!0,S(n,i)},n)}function x(n,t){if(t._state===sn)k(n,t._result);else if(t._state===an)S(n,t._result);else $(t,void 0,function(t){return j(n,t)},function(t){return S(n,t)})}function A(n,t,e){if(t.constructor===n.constructor&&e===v&&t.constructor.resolve===d)x(n,t);else if(e===cn)S(n,cn.error),cn.error=null;else if(void 0===e)k(n,t);else if(i(e))_(n,t,e);else k(n,t)}function j(t,e){if(t===e)S(t,m());else if(n(e))A(t,e,b(e));else k(t,e)}function T(n){if(n._onerror)n._onerror(n._result);E(n)}function k(n,t){if(n._state===un)if(n._result=t,n._state=sn,0!==n._subscribers.length)V(E,n)}function S(n,t){if(n._state===un)n._state=an,n._result=t,V(T,n)}function $(n,t,e,r){var i=n._subscribers,o=i.length;if(n._onerror=null,i[o]=t,i[o+sn]=e,i[o+an]=r,0===o&&n._state)V(E,n)}function E(n){var t=n._subscribers,e=n._state;if(0!==t.length){for(var r=void 0,i=void 0,o=n._result,u=0;u<t.length;u+=3)if(r=t[u],i=t[u+e],r)O(e,r,i,o);else i(o);n._subscribers.length=0}}function C(){this.error=null}function F(n,t){try{return n(t)}catch(n){return fn.error=n,fn}}function O(n,t,e,r){var o=i(e),u=void 0,s=void 0,a=void 0,c=void 0;if(o){if((u=F(e,r))===fn)c=!0,s=u.error,u.error=null;else a=!0;if(t===u)return void S(t,g())}else u=r,a=!0;if(t._state!==un);else if(o&&a)j(t,u);else if(c)S(t,s);else if(n===sn)k(t,u);else if(n===an)S(t,u)}function I(n,t){try{t(function(t){j(n,t)},function(t){S(n,t)})}catch(t){S(n,t)}}function D(){return ln++}function z(n){n[on]=ln++,n._state=void 0,n._result=void 0,n._subscribers=[]}function N(n,t){if(this._instanceConstructor=n,this.promise=new n(y),!this.promise[on])z(this.promise);if(G(t)){if(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length)k(this.promise,this._result);else if(this.length=this.length||0,this._enumerate(),0===this._remaining)k(this.promise,this._result)}else S(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function B(n){return new N(this,n).promise}function L(n){var t=this;if(!G(n))return new t(function(n,t){return t(new TypeError("You must pass an array to race."))});else return new t(function(e,r){for(var i=n.length,o=0;o<i;o++)t.resolve(n[o]).then(e,r)})}function q(n){var t=this,e=new t(y);return S(e,n),e}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(n){if(this[on]=D(),this._result=this._state=void 0,this._subscribers=[],y!==n)"function"!=typeof n&&H(),this instanceof R?I(this,n):P()}function U(){var n=void 0;if(void 0!==r)n=r;else if("undefined"!=typeof self)n=self;else try{n=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=n.Promise;if(t){var e=null;try{e=Object.prototype.toString.call(t.resolve())}catch(n){}if("[object Promise]"===e&&!t.cast)return}n.Promise=R}var K=void 0;if(!Array.isArray)K=function(n){return"[object Array]"===Object.prototype.toString.call(n)};else K=Array.isArray;var G=K,J=0,Q=void 0,Y=void 0,V=function(n,t){if(en[J]=n,en[J+1]=t,2===(J+=2))if(Y)Y(p);else rn()},W="undefined"!=typeof window?window:void 0,X=W||{},Z=X.MutationObserver||X.WebKitMutationObserver,nn="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),tn="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,en=new Array(1e3),rn=void 0;if(nn)rn=s();else if(Z)rn=c();else if(tn)rn=f();else if(void 0===W)rn=h();else rn=l();var on=Math.random().toString(36).substring(16),un=void 0,sn=1,an=2,cn=new C,fn=new C,ln=0;return N.prototype._enumerate=function(){for(var n=this.length,t=this._input,e=0;this._state===un&&e<n;e++)this._eachEntry(t[e],e)},N.prototype._eachEntry=function(n,t){var e=this._instanceConstructor,r=e.resolve;if(r===d){var i=b(n);if(i===v&&n._state!==un)this._settledAt(n._state,t,n._result);else if("function"!=typeof i)this._remaining--,this._result[t]=n;else if(e===R){var o=new e(y);A(o,n,i),this._willSettleAt(o,t)}else this._willSettleAt(new e(function(t){return t(n)}),t)}else this._willSettleAt(r(n),t)},N.prototype._settledAt=function(n,t,e){var r=this.promise;if(r._state===un)if(this._remaining--,n===an)S(r,e);else this._result[t]=e;if(0===this._remaining)k(r,this._result)},N.prototype._willSettleAt=function(n,t){var e=this;$(n,void 0,function(n){return e._settledAt(sn,t,n)},function(n){return e._settledAt(an,t,n)})},R.all=B,R.race=L,R.resolve=d,R.reject=q,R._setScheduler=o,R._setAsap=u,R._asap=V,R.prototype={constructor:R,then:v,catch:function(n){return this.then(null,n)}},R.polyfill=U,R.Promise=R,R})}).call(t,e(16),e(11))},16:function(n,t){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(n){if(f===setTimeout)return setTimeout(n,0);if((f===e||!f)&&setTimeout)return f=setTimeout,setTimeout(n,0);try{return f(n,0)}catch(t){try{return f.call(null,n,0)}catch(t){return f.call(this,n,0)}}}function o(n){if(l===clearTimeout)return clearTimeout(n);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(n);try{return l(n)}catch(t){try{return l.call(null,n)}catch(t){return l.call(this,n)}}}function u(){if(d&&h){if(d=!1,h.length)v=h.concat(v);else y=-1;if(v.length)s()}}function s(){if(!d){var n=i(u);d=!0;for(var t=v.length;t;){for(h=v,v=[];++y<t;)if(h)h[y].run();y=-1,t=v.length}h=null,d=!1,o(n)}}function a(n,t){this.fun=n,this.array=t}function c(){}var f,l,p=n.exports={};!function(){try{if("function"==typeof setTimeout)f=setTimeout;else f=e}catch(n){f=e}try{if("function"==typeof clearTimeout)l=clearTimeout;else l=r}catch(n){l=r}}();var h,v=[],d=!1,y=-1;p.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(v.push(new a(n,t)),1===v.length&&!d)i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(n){return[]},p.binding=function(n){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(n){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},167:function(n,t,e){var r,i;if("undefined"==typeof ServiceDesk)window.ServiceDesk={};if(void 0===ServiceDesk.Templates)ServiceDesk.Templates={};if(void 0===ServiceDesk.Templates.Components)ServiceDesk.Templates.Components={};if(void 0===ServiceDesk.Templates.Components.Assets)ServiceDesk.Templates.Components.Assets={};if(void 0===ServiceDesk.Templates.Components.Assets.Field)ServiceDesk.Templates.Components.Assets.Field={};if(ServiceDesk.Templates.Components.Assets.Field.assetLozenge=function(n,t){return'<li class="sd-asset-lozenge" title="'+soy.$$escapeHtml(n.asset.label.value)+'"><span class="sd-asset" title="'+soy.$$escapeHtml(n.asset.label.value)+'">'+("Unknown Asset"==n.asset.label.value?'<span class="sd-asset-value">&nbsp;'+soy.$$escapeHtml("Unknown Asset")+"&nbsp;</span>"+aui.icons.icon({useIconFont:!0,icon:"warning",extraClasses:"aui-iconfont-warning"}):'<span class="sd-asset-value">&nbsp;'+soy.$$escapeHtml(n.asset.label.value)+"</span>")+'</span><button type="button" class="js-remove aui-icon aui-icon-small aui-iconfont-delete" tabindex="-1"></button></li>'},goog.DEBUG)ServiceDesk.Templates.Components.Assets.Field.assetLozenge.soyTemplateName="ServiceDesk.Templates.Components.Assets.Field.assetLozenge";r=[e(42)],void 0!==(i=function(){return ServiceDesk.Templates.Components.Assets.Field}.apply(t,r))&&(n.exports=i)},17:function(n,t){},177:function(n,t,e){var r,i;r=[e(1),e(167),e(90)],void 0!==(i=function(n){var t=ServiceDesk.Templates.Components.Assets.Field.assetLozenge;return function(e){return n(t({asset:e}))}}.apply(t,r))&&(n.exports=i)},178:function(n,t,e){var r,i;r=[e(0),e(1),e(10),e(2),e(34),e(61),e(33),e(31),e(21),e(177),e(87),e(88),e(90)],void 0!==(i=function(n,t,e,r,i,o,u,s,a,c,f,l){var p=o.extend({keys:{Up:function(){return this.keys.Left.apply(this,arguments)},Down:function(){return this.keys.Right.apply(this,arguments)}}}),h=i.extend({init:function(n,t){var e=this;l(n.properties.value,function(n){e.$lozenge=c(n),e._assignEvents("instance",e)._assignEvents("removeButton",e.$lozenge.find(".js-remove")),t(e.$lozenge)})},_events:{instance:{focus:function(){this.$lozenge.addClass("focused")},blur:function(){this.$lozenge.removeClass("focused")},remove:function(){this.$lozenge.remove()}},removeButton:{click:function(){this.trigger("remove")}}}}),v=u.extend({init:function(){this._super.apply(this,arguments),this.$container.addClass("sd-asset-field")},_getTypeOriginAsSerializedType:function(n){return encodeURIComponent((n.appKey+"/"+n.originId).toLowerCase())},_getAssetFieldConfigQueryParamsAsString:function(n,t){var e=this,r="";if(""!==t)r+="prioritizedAssignee="+t+"&";return n.types.forEach(function(n){r+="type="+e._getTypeOriginAsSerializedType(n)+"&"}),r.slice(0,-1)},_getDefaultOptions:function(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=t(e[0].element).data().assetFieldConfig,o=t(e[0].element).data().assetFieldReporterAccountId,u="";if(i)u=this._getAssetFieldConfigQueryParamsAsString(i,o);return t.extend(!0,this._super(),{showDropdownButton:!1,itemGroup:new p,itemAttrDisplayed:"label",errorMessage:!1,matchingStrategy:".*",itemBuilder:function(n){var t=this;return new h(n,function(n){n.appendTo(t.$selectedItemsContainer),t.updateItemsIndent()})},ajaxOptions:{url:AJS.contextPath()+"/rest/assetapi/asset/search?"+u,query:!0,formatResponse:this._formatResponse,headers:{"X-B3-Sampled":"1"}}})},_formatResponse:function(t){return n.map(t.values,function(n){return new s(f(n))})},updateItemsIndent:function(){var n=5,e=this.$selectedItemsContainer.outerHeight()+n+n;if(this.$field.css({paddingLeft:n,paddingTop:e,height:e+20+n}),t.browser.msie&&parseInt(t.browser.version,10)<11)this.$field.val(this.$field.val()+" "),this.$field.val(this.$field.val().replace(/\s$/,""))},keys:{Up:function(){var t=this;if(!this.suggestionsVisible&&this.lozengeGroup.items.length>0&&this.lozengeGroup.index<0)n.defer(n.bind(function(){t.lozengeGroup.shiftFocus(-1)},this))}}});return a("js-request-asset-field",{created:function(n){n.field=new v({element:n})}})}.apply(t,r))&&(n.exports=i)},18:function(n,t,e){var r,i;(function(){function e(n){function t(t,e,r,i,o,u){for(;o>=0&&o<u;o+=n){var s=i?i[o]:o;r=e(r,t[s],s,t)}return r}return function(e,r,i,o){r=A(r,o,4);var u=!C(e)&&x.keys(e),s=(u||e).length,a=n>0?0:s-1;if(arguments.length<3)i=e[u?u[a]:a],a+=n;return t(e,r,i,u,a,s)}}function o(n){return function(t,e,r){e=j(e,r);for(var i=E(t),o=n>0?0:i-1;o>=0&&o<i;o+=n)if(e(t[o],o,t))return o;return-1}}function u(n,t,e){return function(r,i,o){var u=0,s=E(r);if("number"==typeof o)if(n>0)u=o>=0?o:Math.max(o+s,u);else s=o>=0?Math.min(o+1,s):o+s+1;else if(e&&o&&s)return o=e(r,i),r[o]===i?o:-1;if(i!==i)return o=t(v.call(r,u,s),x.isNaN),o>=0?o+u:-1;for(o=n>0?u:s-1;o>=0&&o<s;o+=n)if(r[o]===i)return o;return-1}}function s(n,t){var e=z.length,r=n.constructor,i=x.isFunction(r)&&r.prototype||l,o="constructor";if(x.has(n,o)&&!x.contains(t,o))t.push(o);for(;e--;)if((o=z[e])in n&&n[o]!==i[o]&&!x.contains(t,o))t.push(o)}var a=this,c=a._,f=Array.prototype,l=Object.prototype,p=Function.prototype,h=f.push,v=f.slice,d=l.toString,y=l.hasOwnProperty,m=Array.isArray,g=Object.keys,b=p.bind,w=Object.create,_=function(){},x=function(n){if(n instanceof x)return n;if(!(this instanceof x))return new x(n);else return void(this._wrapped=n)};if(!0){if(void 0!==n&&n.exports)t=n.exports=x;t._=x}else a._=x;x.VERSION="1.8.3";var A=function(n,t,e){if(void 0===t)return n;switch(null==e?3:e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,i){return n.call(t,e,r,i)};case 4:return function(e,r,i,o){return n.call(t,e,r,i,o)}}return function(){return n.apply(t,arguments)}},j=function(n,t,e){if(null==n)return x.identity;if(x.isFunction(n))return A(n,t,e);if(x.isObject(n))return x.matcher(n);else return x.property(n)};x.iteratee=function(n,t){return j(n,t,1/0)};var T=function(n,t){return function(e){var r=arguments.length;if(r<2||null==e)return e;for(var i=1;i<r;i++)for(var o=arguments[i],u=n(o),s=u.length,a=0;a<s;a++){var c=u[a];if(!t||void 0===e[c])e[c]=o[c]}return e}},k=function(n){if(!x.isObject(n))return{};if(w)return w(n);_.prototype=n;var t=new _;return _.prototype=null,t},S=function(n){return function(t){return null==t?void 0:t[n]}},$=Math.pow(2,53)-1,E=S("length"),C=function(n){var t=E(n);return"number"==typeof t&&t>=0&&t<=$};x.each=x.forEach=function(n,t,e){t=A(t,e);var r,i;if(C(n))for(r=0,i=n.length;r<i;r++)t(n[r],r,n);else{var o=x.keys(n);for(r=0,i=o.length;r<i;r++)t(n[o[r]],o[r],n)}return n},x.map=x.collect=function(n,t,e){t=j(t,e);for(var r=!C(n)&&x.keys(n),i=(r||n).length,o=Array(i),u=0;u<i;u++){var s=r?r[u]:u;o[u]=t(n[s],s,n)}return o},x.reduce=x.foldl=x.inject=e(1),x.reduceRight=x.foldr=e(-1),x.find=x.detect=function(n,t,e){var r;if(C(n))r=x.findIndex(n,t,e);else r=x.findKey(n,t,e);if(void 0!==r&&-1!==r)return n[r]},x.filter=x.select=function(n,t,e){var r=[];return t=j(t,e),x.each(n,function(n,e,i){if(t(n,e,i))r.push(n)}),r},x.reject=function(n,t,e){return x.filter(n,x.negate(j(t)),e)},x.every=x.all=function(n,t,e){t=j(t,e);for(var r=!C(n)&&x.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(!t(n[u],u,n))return!1}return!0},x.some=x.any=function(n,t,e){t=j(t,e);for(var r=!C(n)&&x.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(t(n[u],u,n))return!0}return!1},x.contains=x.includes=x.include=function(n,t,e,r){if(!C(n))n=x.values(n);if("number"!=typeof e||r)e=0;return x.indexOf(n,t,e)>=0},x.invoke=function(n,t){var e=v.call(arguments,2),r=x.isFunction(t);return x.map(n,function(n){var i=r?t:n[t];return null==i?i:i.apply(n,e)})},x.pluck=function(n,t){return x.map(n,x.property(t))},x.where=function(n,t){return x.filter(n,x.matcher(t))},x.findWhere=function(n,t){return x.find(n,x.matcher(t))},x.max=function(n,t,e){var r,i,o=-1/0,u=-1/0;if(null==t&&null!=n){n=C(n)?n:x.values(n);for(var s=0,a=n.length;s<a;s++)if((r=n[s])>o)o=r}else t=j(t,e),x.each(n,function(n,e,r){if((i=t(n,e,r))>u||i===-1/0&&o===-1/0)o=n,u=i});return o},x.min=function(n,t,e){var r,i,o=1/0,u=1/0;if(null==t&&null!=n){n=C(n)?n:x.values(n);for(var s=0,a=n.length;s<a;s++)if((r=n[s])<o)o=r}else t=j(t,e),x.each(n,function(n,e,r){if((i=t(n,e,r))<u||i===1/0&&o===1/0)o=n,u=i});return o},x.shuffle=function(n){for(var t,e=C(n)?n:x.values(n),r=e.length,i=Array(r),o=0;o<r;o++){if((t=x.random(0,o))!==o)i[o]=i[t];i[t]=e[o]}return i},x.sample=function(n,t,e){if(null==t||e){if(!C(n))n=x.values(n);return n[x.random(n.length-1)]}return x.shuffle(n).slice(0,Math.max(0,t))},x.sortBy=function(n,t,e){return t=j(t,e),x.pluck(x.map(n,function(n,e,r){return{value:n,index:e,criteria:t(n,e,r)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,e,r){var i={};return e=j(e,r),x.each(t,function(r,o){var u=e(r,o,t);n(i,r,u)}),i}};x.groupBy=F(function(n,t,e){if(x.has(n,e))n[e].push(t);else n[e]=[t]}),x.indexBy=F(function(n,t,e){n[e]=t}),x.countBy=F(function(n,t,e){if(x.has(n,e))n[e]++;else n[e]=1}),x.toArray=function(n){if(!n)return[];if(x.isArray(n))return v.call(n);if(C(n))return x.map(n,x.identity);else return x.values(n)},x.size=function(n){if(null==n)return 0;else return C(n)?n.length:x.keys(n).length},x.partition=function(n,t,e){t=j(t,e);var r=[],i=[];return x.each(n,function(n,e,o){(t(n,e,o)?r:i).push(n)}),[r,i]},x.first=x.head=x.take=function(n,t,e){if(null!=n)if(null==t||e)return n[0];else return x.initial(n,n.length-t)},x.initial=function(n,t,e){return v.call(n,0,Math.max(0,n.length-(null==t||e?1:t)))},x.last=function(n,t,e){if(null!=n)if(null==t||e)return n[n.length-1];else return x.rest(n,Math.max(0,n.length-t))},x.rest=x.tail=x.drop=function(n,t,e){return v.call(n,null==t||e?1:t)},x.compact=function(n){return x.filter(n,x.identity)};var O=function(n,t,e,r){for(var i=[],o=0,u=r||0,s=E(n);u<s;u++){var a=n[u];if(C(a)&&(x.isArray(a)||x.isArguments(a))){if(!t)a=O(a,t,e);var c=0,f=a.length;for(i.length+=f;c<f;)i[o++]=a[c++]}else if(!e)i[o++]=a}return i};x.flatten=function(n,t){return O(n,t,!1)},x.without=function(n){return x.difference(n,v.call(arguments,1))},x.uniq=x.unique=function(n,t,e,r){if(!x.isBoolean(t))r=e,e=t,t=!1;if(null!=e)e=j(e,r);for(var i=[],o=[],u=0,s=E(n);u<s;u++){var a=n[u],c=e?e(a,u,n):a;if(t){if(!u||o!==c)i.push(a);o=c}else if(e){if(!x.contains(o,c))o.push(c),i.push(a)}else if(!x.contains(i,a))i.push(a)}return i},x.union=function(){return x.uniq(O(arguments,!0,!0))},x.intersection=function(n){for(var t=[],e=arguments.length,r=0,i=E(n);r<i;r++){var o=n[r];if(!x.contains(t,o)){for(var u=1;u<e&&x.contains(arguments[u],o);u++);if(u===e)t.push(o)}}return t},x.difference=function(n){var t=O(arguments,!0,!0,1);return x.filter(n,function(n){return!x.contains(t,n)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(n){for(var t=n&&x.max(n,E).length||0,e=Array(t),r=0;r<t;r++)e[r]=x.pluck(n,r);return e},x.object=function(n,t){for(var e={},r=0,i=E(n);r<i;r++)if(t)e[n[r]]=t[r];else e[n[r][0]]=n[r][1];return e},x.findIndex=o(1),x.findLastIndex=o(-1),x.sortedIndex=function(n,t,e,r){e=j(e,r,1);for(var i=e(t),o=0,u=E(n);o<u;){var s=Math.floor((o+u)/2);if(e(n[s])<i)o=s+1;else u=s}return o},x.indexOf=u(1,x.findIndex,x.sortedIndex),x.lastIndexOf=u(-1,x.findLastIndex),x.range=function(n,t,e){if(null==t)t=n||0,n=0;e=e||1;for(var r=Math.max(Math.ceil((t-n)/e),0),i=Array(r),o=0;o<r;o++,n+=e)i[o]=n;return i};var I=function(n,t,e,r,i){if(!(r instanceof t))return n.apply(e,i);var o=k(n.prototype),u=n.apply(o,i);if(x.isObject(u))return u;else return o};x.bind=function(n,t){if(b&&n.bind===b)return b.apply(n,v.call(arguments,1));if(!x.isFunction(n))throw new TypeError("Bind must be called on a function");var e=v.call(arguments,2),r=function(){return I(n,r,t,this,e.concat(v.call(arguments)))};return r},x.partial=function(n){var t=v.call(arguments,1),e=function(){for(var r=0,i=t.length,o=Array(i),u=0;u<i;u++)o[u]=t[u]===x?arguments[r++]:t[u];for(;r<arguments.length;)o.push(arguments[r++]);return I(n,e,this,this,o)};return e},x.bindAll=function(n){var t,e,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e=arguments[t],n[e]=x.bind(n[e],n);return n},x.memoize=function(n,t){var e=function(r){var i=e.cache,o=""+(t?t.apply(this,arguments):r);if(!x.has(i,o))i[o]=n.apply(this,arguments);return i[o]};return e.cache={},e},x.delay=function(n,t){var e=v.call(arguments,2);return setTimeout(function(){return n.apply(null,e)},t)},x.defer=x.partial(x.delay,x,1),x.throttle=function(n,t,e){var r,i,o,u=null,s=0;if(!e)e={};var a=function(){if(s=!1===e.leading?0:x.now(),u=null,o=n.apply(r,i),!u)r=i=null};return function(){var c=x.now();if(!s&&!1===e.leading)s=c;var f=t-(c-s);if(r=this,i=arguments,f<=0||f>t){if(u)clearTimeout(u),u=null;if(s=c,o=n.apply(r,i),!u)r=i=null}else if(!u&&!1!==e.trailing)u=setTimeout(a,f);return o}},x.debounce=function(n,t,e){var r,i,o,u,s,a=function(){var c=x.now()-u;if(c<t&&c>=0)r=setTimeout(a,t-c);else if(r=null,!e)if(s=n.apply(o,i),!r)o=i=null};return function(){o=this,i=arguments,u=x.now();var c=e&&!r;if(!r)r=setTimeout(a,t);if(c)s=n.apply(o,i),o=i=null;return s}},x.wrap=function(n,t){return x.partial(t,n)},x.negate=function(n){return function(){return!n.apply(this,arguments)}},x.compose=function(){var n=arguments,t=n.length-1;return function(){for(var e=t,r=n[t].apply(this,arguments);e--;)r=n[e].call(this,r);return r}},x.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},x.before=function(n,t){var e;return function(){if(--n>0)e=t.apply(this,arguments);if(n<=1)t=null;return e}},x.once=x.partial(x.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(n){if(!x.isObject(n))return[];if(g)return g(n);var t=[];for(var e in n)if(x.has(n,e))t.push(e);if(D)s(n,t);return t},x.allKeys=function(n){if(!x.isObject(n))return[];var t=[];for(var e in n)t.push(e);if(D)s(n,t);return t},x.values=function(n){for(var t=x.keys(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=n[t[i]];return r},x.mapObject=function(n,t,e){t=j(t,e);for(var r,i=x.keys(n),o=i.length,u={},s=0;s<o;s++)r=i[s],u[r]=t(n[r],r,n);return u},x.pairs=function(n){for(var t=x.keys(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=[t[i],n[t[i]]];return r},x.invert=function(n){for(var t={},e=x.keys(n),r=0,i=e.length;r<i;r++)t[n[e[r]]]=e[r];return t},x.functions=x.methods=function(n){var t=[];for(var e in n)if(x.isFunction(n[e]))t.push(e);return t.sort()},x.extend=T(x.allKeys),x.extendOwn=x.assign=T(x.keys),x.findKey=function(n,t,e){t=j(t,e);for(var r,i=x.keys(n),o=0,u=i.length;o<u;o++)if(r=i[o],t(n[r],r,n))return r},x.pick=function(n,t,e){var r,i,o={},u=n;if(null==u)return o;if(x.isFunction(t))i=x.allKeys(u),r=A(t,e);else i=O(arguments,!1,!1,1),r=function(n,t,e){return t in e},u=Object(u);for(var s=0,a=i.length;s<a;s++){var c=i[s],f=u[c];if(r(f,c,u))o[c]=f}return o},x.omit=function(n,t,e){if(x.isFunction(t))t=x.negate(t);else{var r=x.map(O(arguments,!1,!1,1),String);t=function(n,t){return!x.contains(r,t)}}return x.pick(n,t,e)},x.defaults=T(x.allKeys,!0),x.create=function(n,t){var e=k(n);if(t)x.extendOwn(e,t);return e},x.clone=function(n){if(!x.isObject(n))return n;else return x.isArray(n)?n.slice():x.extend({},n)},x.tap=function(n,t){return t(n),n},x.isMatch=function(n,t){var e=x.keys(t),r=e.length;if(null==n)return!r;for(var i=Object(n),o=0;o<r;o++){var u=e[o];if(t[u]!==i[u]||!(u in i))return!1}return!0};var N=function(n,t,e,r){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;if(n instanceof x)n=n._wrapped;if(t instanceof x)t=t._wrapped;var i=d.call(n);if(i!==d.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":if(+n!=+n)return+t!=+t;else return 0==+n?1/+n==1/t:+n==+t;case"[object Date]":case"[object Boolean]":return+n==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof t)return!1;var u=n.constructor,s=t.constructor;if(u!==s&&!(x.isFunction(u)&&u instanceof u&&x.isFunction(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1}e=e||[],r=r||[];for(var a=e.length;a--;)if(e[a]===n)return r[a]===t;if(e.push(n),r.push(t),o){if((a=n.length)!==t.length)return!1;for(;a--;)if(!N(n[a],t[a],e,r))return!1}else{var c,f=x.keys(n);if(a=f.length,x.keys(t).length!==a)return!1;for(;a--;)if(c=f[a],!x.has(t,c)||!N(n[c],t[c],e,r))return!1}return e.pop(),r.pop(),!0};if(x.isEqual=function(n,t){return N(n,t)},x.isEmpty=function(n){if(null==n)return!0;if(C(n)&&(x.isArray(n)||x.isString(n)||x.isArguments(n)))return 0===n.length;else return 0===x.keys(n).length},x.isElement=function(n){return!(!n||1!==n.nodeType)},x.isArray=m||function(n){return"[object Array]"===d.call(n)},x.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){x["is"+n]=function(t){return d.call(t)==="[object "+n+"]"}}),!x.isArguments(arguments))x.isArguments=function(n){return x.has(n,"callee")};if("function"!=typeof/./&&"object"!=typeof Int8Array)x.isFunction=function(n){return"function"==typeof n||!1};x.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},x.isNaN=function(n){return x.isNumber(n)&&n!==+n},x.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===d.call(n)},x.isNull=function(n){return null===n},x.isUndefined=function(n){return void 0===n},x.has=function(n,t){return null!=n&&y.call(n,t)},x.noConflict=function(){return a._=c,this},x.identity=function(n){return n},x.constant=function(n){return function(){return n}},x.noop=function(){},x.property=S,x.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},x.matcher=x.matches=function(n){return n=x.extendOwn({},n),function(t){return x.isMatch(t,n)}},x.times=function(n,t,e){var r=Array(Math.max(0,n));t=A(t,e,1);for(var i=0;i<n;i++)r[i]=t(i);return r},x.random=function(n,t){if(null==t)t=n,n=0;return n+Math.floor(Math.random()*(t-n+1))},x.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=x.invert(M),L=function(n){var t=function(t){return n[t]},e="(?:"+x.keys(n).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(i,t):n}};x.escape=L(M),x.unescape=L(B),x.result=function(n,t,e){var r=null==n?void 0:n[t];if(void 0===r)r=e;return x.isFunction(r)?r.call(n):r};var q=0;x.uniqueId=function(n){var t=++q+"";return n?n+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\u2028|\u2029/g,U=function(n){return"\\"+P[n]},K=/^\s*(\w|\$)+\s*$/;x.template=function(n,t,e){if(!t&&e)t=e;t=x.defaults({},t,x.templateSettings);var r=RegExp([(t.escape||H).source,(t.interpolate||H).source,(t.evaluate||H).source].join("|")+"|$","g"),i=0,o="__p+='";n.replace(r,function(t,e,r,u,s){if(o+=n.slice(i,s).replace(R,U),i=s+t.length,e)o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'";else if(r)o+="'+\n((__t=("+r+"))==null?'':__t)+\n'";else if(u)o+="';\n"+u+"\n__p+='";return t}),o+="';\n";var u=t.variable;if(u){if(!K.test(u))throw new Error(u)}else o="with(obj||{}){\n"+o+"}\n",u="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var s;try{s=new Function(u,"_",o)}catch(n){throw n.source=o,n}var a=function(n){return s.call(this,n,x)};return a.source="function("+u+"){\n"+o+"}",a},x.chain=function(n){var t=x(n);return t._chain=!0,t};var G=function(n,t){return n._chain?x(t).chain():t};if(x.mixin=function(n){x.each(x.functions(n),function(t){var e=x[t]=n[t];x.prototype[t]=function(){var n=[this._wrapped];return h.apply(n,arguments),G(this,e.apply(x,n))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=f[n];x.prototype[n]=function(){var e=this._wrapped;if(t.apply(e,arguments),("shift"===n||"splice"===n)&&0===e.length)delete e[0];return G(this,e)}}),x.each(["concat","join","slice"],function(n){var t=f[n];x.prototype[n]=function(){return G(this,t.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},!0)r=[],void 0!==(i=function(){return x}.apply(t,r))&&(n.exports=i)}).call(this)},2:function(n,t,e){var r,i;r=[e(0),e(9),e(24)],void 0!==(i=function(n,t,e){var r=e(n,t);return r.Model.prototype.ignoreUnknownAttributes=!0,r}.apply(t,r))&&(n.exports=i)},21:function(n,t,e){var r,i;r=[e(0),e(10)],void 0!==(i=function(n,t){var e=void 0;return function(){var r=this,i=n.toArray(arguments);return{install:n.once(function(){try{e=t.apply(r,i)}catch(n){console.log("Failed to install skate component, maybe it has already been installed")}return e})}}}.apply(t,r))&&(n.exports=i)},23:function(n,t){n.exports=window.require("atlassian/libs/factories/backbone-1.0.0")},24:function(n,t){n.exports=window.require("atlassian/libs/factories/brace-1.1.0")},30:function(n,t){n.exports=window.require("atlassian/libs/skate-0.12.6")},31:function(n,t){n.exports=window.require("jira/ajs/list/item-descriptor")},33:function(n,t){n.exports=window.require("jira/ajs/select/multi-select")},34:function(n,t){n.exports=window.require("jira/ajs/control")},42:function(n,t,e){var r,i;if(void 0===o)var o={};if(void 0===o.icons)o.icons={};if(o.icons.icon=function(n,t){return"<"+soy.$$escapeHtml(n.tagName?n.tagName:"span")+(n.id?' id="'+soy.$$escapeHtml(n.id)+'"':"")+' class="aui-icon'+(n.useIconFont?" aui-icon-"+soy.$$escapeHtml(n.size?n.size:"small"):"")+" aui"+soy.$$escapeHtml(n.useIconFont?"-iconfont":"-icon")+soy.$$escapeHtml(n.iconFontSet?"-"+n.iconFontSet:"")+"-"+soy.$$escapeHtml(n.icon)+o.renderExtraClasses(n)+'"'+o.renderExtraAttributes(n)+">"+(n.accessibilityText?soy.$$escapeHtml(n.accessibilityText):"")+"</"+soy.$$escapeHtml(n.tagName?n.tagName:"span")+">"},goog.DEBUG)o.icons.icon.soyTemplateName="aui.icons.icon";r=[e(13)],void 0!==(i=function(){return o.icons}.apply(t,r))&&(n.exports=i)},545:function(n,t,e){!function(n,t){n(function(){t.install()})}(e(1),e(178))},61:function(n,t){n.exports=window.require("jira/ajs/select/multi-select/lozenge-group")},8:function(n,t,e){"use strict";n.exports=e(15).polyfill()},87:function(n,t,e){var r,i;r=[],void 0!==(i=function(){return function(n){return{value:n.origin.appKey+"/"+n.origin.originId,label:n.label.value}}}.apply(t,r))&&(n.exports=i)},88:function(n,t,e){var r,i;r=[e(1)],void 0!==(i=function(n){return function(t,e){n.ajax({url:AJS.contextPath()+"/rest/assetapi/asset/"+t,cache:!0,headers:{"X-B3-Sampled":"1"}}).fail(function(){var n=t.split("/");e({origin:{appKey:n[0],originId:n[1]},label:{value:"Unknown Asset"}})}).then(function(n){e&&e(n)})}}.apply(t,r))&&(n.exports=i)},9:function(n,t,e){var r,i;r=[e(0),e(1),e(23)],void 0!==(i=function(n,t,e){return e(n,t)}.apply(t,r))&&(n.exports=i)},90:function(n,t){}},[1241]);;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.fancybox-1.3.4', location = 'atlassian-jslibs/jquery-plugins/jquery.fancybox/1.3.4/jquery.fancybox-1.3.4.js' */
(function(r){define("atlassian/jquery-plugins/jquery.fancybox-1.3.4",function(){return function(t){r(window,document,t);return t}})})(function(r,t,R){var a=R,n,u,v,e,B,l,C,i,y,z,q=0,d={},o=[],p=0,b={},j=[],E=null,m=new Image,H=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,T=/[^\.]\.(swf)\s*$/i,I,J=1,x=0,w="",s,g,k=!1,A=a.extend(a("<div/>")[0],{prop:0}),K=a.browser.msie&&7>a.browser.version&&!r.XMLHttpRequest,L=function(){u.hide();m.onerror=m.onload=null;E&&E.abort();n.empty()},M=function(){!1===d.onError(o,q,
d)?(u.hide(),k=!1):(d.titleShow=!1,d.width="auto",d.height="auto",n.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),D())},G=function(){var c=o[q],b,f,e,g,j,i;L();d=a.extend({},a.fn.fancybox.defaults,"undefined"==typeof a(c).data("fancybox")?d:a(c).data("fancybox"));i=d.onStart(o,q,d);if(!1===i)k=!1;else{"object"==typeof i&&(d=a.extend(d,i));e=d.title||(c.nodeName?a(c).attr("title"):c.title)||"";c.nodeName&&!d.orig&&(d.orig=a(c).children("img:first").length?
a(c).children("img:first"):a(c));""===e&&(d.orig&&d.titleFromAlt)&&(e=d.orig.attr("alt"));b=d.href||(c.nodeName?a(c).attr("href"):c.href)||null;if(/^(?:javascript)/i.test(b)||"#"==b)b=null;d.type?(f=d.type,b||(b=d.content)):d.content?f="html":b&&(f=b.match(H)?"image":b.match(T)?"swf":a(c).hasClass("iframe")?"iframe":0===b.indexOf("#")?"inline":"ajax");if(f)switch("inline"==f&&(c=b.substr(b.indexOf("#")),f=0<a(c).length?"inline":"ajax"),d.type=f,d.href=b,d.title=e,d.autoDimensions&&("html"==d.type||
"inline"==d.type||"ajax"==d.type?(d.width="auto",d.height="auto"):d.autoDimensions=!1),d.modal&&(d.overlayShow=!0,d.hideOnOverlayClick=!1,d.hideOnContentClick=!1,d.enableEscapeButton=!1,d.showCloseButton=!1),d.padding=parseInt(d.padding,10),d.margin=parseInt(d.margin,10),n.css("padding",d.padding+d.margin),a(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){a(this).replaceWith(l.children())}),f){case "html":n.html(d.content);D();break;case "inline":if(!0===a(c).parent().is("#fancybox-content")){k=
!1;break}a('<div class="fancybox-inline-tmp" />').hide().insertBefore(a(c)).bind("fancybox-cleanup",function(){a(this).replaceWith(l.children())}).bind("fancybox-cancel",function(){a(this).replaceWith(n.children())});a(c).appendTo(n);D();break;case "image":k=!1;a.fancybox.showActivity();m=new Image;m.onerror=function(){M()};m.onload=function(){k=true;m.onerror=m.onload=null;d.width=m.width;d.height=m.height;a("<img />").attr({id:"fancybox-img",src:m.src,alt:d.title}).appendTo(n);N()};m.src=b;break;
case "swf":d.scrolling="no";g='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+d.width+'" height="'+d.height+'"><param name="movie" value="'+b+'"></param>';j="";a.each(d.swf,function(a,c){g=g+('<param name="'+a+'" value="'+c+'"></param>');j=j+(" "+a+'="'+c+'"')});g+='<embed src="'+b+'" type="application/x-shockwave-flash" width="'+d.width+'" height="'+d.height+'"'+j+"></embed></object>";n.html(g);D();break;case "ajax":k=!1;a.fancybox.showActivity();d.ajax.win=d.ajax.success;
E=a.ajax(a.extend({},d.ajax,{url:b,data:d.ajax.data||{},error:function(a){a.status>0&&M()},success:function(a,c,f){if((typeof f=="object"?f:E).status==200){if(typeof d.ajax.win=="function"){i=d.ajax.win(b,a,c,f);if(i===false){u.hide();return}if(typeof i=="string"||typeof i=="object")a=i}n.html(a);D()}}}));break;case "iframe":N()}else M()}},D=function(){var c=d.width,b=d.height,c=-1<c.toString().indexOf("%")?parseInt((a(r).width()-2*d.margin)*parseFloat(c)/100,10)+"px":"auto"==c?"auto":c+"px",b=-1<
b.toString().indexOf("%")?parseInt((a(r).height()-2*d.margin)*parseFloat(b)/100,10)+"px":"auto"==b?"auto":b+"px";n.wrapInner('<div style="width:'+c+";height:"+b+";overflow: "+("auto"==d.scrolling?"auto":"yes"==d.scrolling?"scroll":"hidden")+';position:relative;"></div>');d.width=n.width();d.height=n.height();N()},N=function(){var c,h;u.hide();if(e.is(":visible")&&!1===b.onCleanup(j,p,b))a.event.trigger("fancybox-cancel"),k=!1;else{k=!0;a(l.add(v)).unbind();a(r).unbind("resize.fb scroll.fb");a(t).unbind("keydown.fb");
e.is(":visible")&&"outside"!==b.titlePosition&&e.css("height",e.height());j=o;p=q;b=d;if(b.overlayShow){if(v.css({"background-color":b.overlayColor,opacity:b.overlayOpacity,cursor:b.hideOnOverlayClick?"pointer":"auto",height:a(t).height()}),!v.is(":visible")){if(K)a("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});v.show()}}else v.hide();c=O();var f={},F=b.autoScale,
m=2*b.padding;f.width=-1<b.width.toString().indexOf("%")?parseInt(c[0]*parseFloat(b.width)/100,10):b.width+m;f.height=-1<b.height.toString().indexOf("%")?parseInt(c[1]*parseFloat(b.height)/100,10):b.height+m;if(F&&(f.width>c[0]||f.height>c[1]))if("image"==d.type||"swf"==d.type){if(F=b.width/b.height,f.width>c[0]&&(f.width=c[0],f.height=parseInt((f.width-m)/F+m,10)),f.height>c[1])f.height=c[1],f.width=parseInt((f.height-m)*F+m,10)}else f.width=Math.min(f.width,c[0]),f.height=Math.min(f.height,c[1]);
f.top=parseInt(Math.max(c[3]-20,c[3]+0.5*(c[1]-f.height-40)),10);f.left=parseInt(Math.max(c[2]-20,c[2]+0.5*(c[0]-f.width-40)),10);g=f;w=b.title||"";x=0;i.empty().removeAttr("style").removeClass();if(!1!==b.titleShow&&(w=a.isFunction(b.titleFormat)?b.titleFormat(w,j,p,b):w&&w.length?"float"==b.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+w+'</td><td id="fancybox-title-float-right"></td></tr></table>':
'<div id="fancybox-title-'+b.titlePosition+'">'+w+"</div>":!1)&&""!==w)switch(i.addClass("fancybox-title-"+b.titlePosition).html(w).appendTo("body").show(),b.titlePosition){case "inside":i.css({width:g.width-2*b.padding,marginLeft:b.padding,marginRight:b.padding});x=i.outerHeight(!0);i.appendTo(B);g.height+=x;break;case "over":i.css({marginLeft:b.padding,width:g.width-2*b.padding,bottom:b.padding}).appendTo(B);break;case "float":i.css("left",-1*parseInt((i.width()-g.width-40)/2,10)).appendTo(e);break;
default:i.css({width:g.width-2*b.padding,paddingLeft:b.padding,paddingRight:b.padding}).appendTo(e)}i.hide();e.is(":visible")?(a(C.add(y).add(z)).hide(),c=e.position(),s={top:c.top,left:c.left,width:e.width(),height:e.height()},h=s.width==g.width&&s.height==g.height,l.fadeTo(b.changeFade,0.3,function(){var c=function(){l.html(n.contents()).fadeTo(b.changeFade,1,P)};a.event.trigger("fancybox-change");l.empty().removeAttr("filter").css({"border-width":b.padding,width:g.width-2*b.padding,height:d.autoDimensions?
"auto":g.height-x-2*b.padding});h?c():(A.prop=0,a(A).animate({prop:1},{duration:b.changeSpeed,easing:b.easingChange,step:Q,complete:c}))})):(e.removeAttr("style"),l.css("border-width",b.padding),"elastic"==b.transitionIn?(s=S(),l.html(n.contents()),e.show(),b.opacity&&(g.opacity=0),A.prop=0,a(A).animate({prop:1},{duration:b.speedIn,easing:b.easingIn,step:Q,complete:P})):("inside"==b.titlePosition&&0<x&&i.show(),l.css({width:g.width-2*b.padding,height:d.autoDimensions?"auto":g.height-x-2*b.padding}).html(n.contents()),
e.css(g).fadeIn("none"==b.transitionIn?0:b.speedIn,P)))}},P=function(){a.support.opacity||(l.get(0).style.removeAttribute("filter"),e.get(0).style.removeAttribute("filter"));d.autoDimensions&&l.css("height","auto");e.css("height","auto");w&&w.length&&i.show();b.showCloseButton&&C.show();(b.enableEscapeButton||b.enableKeyboardNav)&&a(t).bind("keydown.fb",function(c){if(c.keyCode==27&&b.enableEscapeButton){c.preventDefault();a.fancybox.close()}else if((c.keyCode==37||c.keyCode==39)&&b.enableKeyboardNav&&
c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.target.tagName!=="SELECT"){c.preventDefault();a.fancybox[c.keyCode==37?"prev":"next"]()}});b.showNavArrows?((b.cyclic&&1<j.length||0!==p)&&y.show(),(b.cyclic&&1<j.length||p!=j.length-1)&&z.show()):(y.hide(),z.hide());b.hideOnContentClick&&l.bind("click",a.fancybox.close);b.hideOnOverlayClick&&v.bind("click",a.fancybox.close);a(r).bind("resize.fb",a.fancybox.resize);b.centerOnScroll&&a(r).bind("scroll.fb",a.fancybox.center);"iframe"==b.type&&
a('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(a.browser.msie?'allowtransparency="true""':"")+' scrolling="'+d.scrolling+'" src="'+b.href+'"></iframe>').appendTo(l);e.show();k=!1;a.fancybox.center();b.onComplete(j,p,b);var c,h;j.length-1>p&&(c=j[p+1].href,"undefined"!==typeof c&&c.match(H)&&(h=new Image,h.src=c));0<p&&(c=j[p-1].href,"undefined"!==typeof c&&c.match(H)&&(h=new Image,h.src=c))},Q=function(a){var d={width:parseInt(s.width+(g.width-
s.width)*a,10),height:parseInt(s.height+(g.height-s.height)*a,10),top:parseInt(s.top+(g.top-s.top)*a,10),left:parseInt(s.left+(g.left-s.left)*a,10)};"undefined"!==typeof g.opacity&&(d.opacity=0.5>a?0.5:a);e.css(d);l.css({width:d.width-2*b.padding,height:d.height-x*a-2*b.padding})},O=function(){return[a(r).width()-2*b.margin,a(r).height()-2*b.margin,a(t).scrollLeft()+b.margin,a(t).scrollTop()+b.margin]},S=function(){var c=d.orig?a(d.orig):!1,h={};c&&c.length?(h=c.offset(),h.top+=parseInt(c.css("paddingTop"),
10)||0,h.left+=parseInt(c.css("paddingLeft"),10)||0,h.top+=parseInt(c.css("border-top-width"),10)||0,h.left+=parseInt(c.css("border-left-width"),10)||0,h.width=c.width(),h.height=c.height(),h={width:h.width+2*b.padding,height:h.height+2*b.padding,top:h.top-b.padding-20,left:h.left-b.padding-20}):(c=O(),h={width:2*b.padding,height:2*b.padding,top:parseInt(c[3]+0.5*c[1],10),left:parseInt(c[2]+0.5*c[0],10)});return h},U=function(){u.is(":visible")?(a("div",u).css("top",-40*J+"px"),J=(J+1)%12):clearInterval(I)};
a.fn.fancybox=function(c){if(!a(this).length)return this;a(this).data("fancybox",a.extend({},c,a.metadata?a(this).metadata():{})).unbind("click.fb").bind("click.fb",function(c){c.preventDefault();k||(k=!0,a(this).blur(),o=[],q=0,c=a(this).attr("rel")||"",!c||""==c||"nofollow"===c?o.push(this):(o=a("a[rel="+c+"], area[rel="+c+"]"),q=o.index(this)),G())});return this};a.fancybox=function(c,b){var d;if(!k){k=!0;d="undefined"!==typeof b?b:{};o=[];q=parseInt(d.index,10)||0;if(a.isArray(c)){for(var e=0,
g=c.length;e<g;e++)"object"==typeof c[e]?a(c[e]).data("fancybox",a.extend({},d,c[e])):c[e]=a({}).data("fancybox",a.extend({content:c[e]},d));o=R.merge(o,c)}else"object"==typeof c?a(c).data("fancybox",a.extend({},d,c)):c=a({}).data("fancybox",a.extend({content:c},d)),o.push(c);if(q>o.length||0>q)q=0;G()}};a.fancybox.showActivity=function(){clearInterval(I);u.show();I=setInterval(U,66)};a.fancybox.hideActivity=function(){u.hide()};a.fancybox.next=function(){return a.fancybox.pos(p+1)};a.fancybox.prev=
function(){return a.fancybox.pos(p-1)};a.fancybox.pos=function(a){k||(a=parseInt(a),o=j,-1<a&&a<j.length?(q=a,G()):b.cyclic&&1<j.length&&(q=a>=j.length?0:j.length-1,G()))};a.fancybox.cancel=function(){k||(k=!0,a.event.trigger("fancybox-cancel"),L(),d.onCancel(o,q,d),k=!1)};a.fancybox.close=function(){function c(){v.fadeOut("fast");i.empty().hide();e.hide();a.event.trigger("fancybox-cleanup");l.empty();b.onClosed(j,p,b);j=d=[];p=q=0;b=d={};k=!1}if(!k&&!e.is(":hidden"))if(k=!0,b&&!1===b.onCleanup(j,
p,b))k=!1;else if(L(),a(C.add(y).add(z)).hide(),a(l.add(v)).unbind(),a(r).unbind("resize.fb scroll.fb"),a(t).unbind("keydown.fb"),l.find("iframe").attr("src",K&&/^https/i.test(r.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==b.titlePosition&&i.empty(),e.stop(),"elastic"==b.transitionOut){s=S();var h=e.position();g={top:h.top,left:h.left,width:e.width(),height:e.height()};b.opacity&&(g.opacity=1);i.empty().hide();A.prop=1;a(A).animate({prop:0},{duration:b.speedOut,easing:b.easingOut,
step:Q,complete:c})}else e.fadeOut("none"==b.transitionOut?0:b.speedOut,c)};a.fancybox.resize=function(){v.is(":visible")&&v.css("height",a(t).height());a.fancybox.center(!0)};a.fancybox.center=function(a){var d,f;if(!k&&(f=!0===a?1:0,d=O(),f||!(e.width()>d[0]||e.height()>d[1])))e.stop().animate({top:parseInt(Math.max(d[3]-20,d[3]+0.5*(d[1]-l.height()-40)-b.padding)),left:parseInt(Math.max(d[2]-20,d[2]+0.5*(d[0]-l.width()-40)-b.padding))},"number"==typeof a?a:200)};a.fancybox.init=function(){a("#fancybox-wrap").length||
(a("body").append(n=a('<div id="fancybox-tmp"></div>'),u=a('<div id="fancybox-loading"><div></div></div>'),v=a('<div id="fancybox-overlay"></div>'),e=a('<div id="fancybox-wrap"></div>')),B=a('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(e),
B.append(l=a('<div id="fancybox-content"></div>'),C=a('<a id="fancybox-close"></a>'),i=a('<div id="fancybox-title"></div>'),y=a('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),z=a('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),C.click(a.fancybox.close),u.click(a.fancybox.cancel),y.click(function(c){c.preventDefault();a.fancybox.prev()}),z.click(function(c){c.preventDefault();a.fancybox.next()}),
a.fn.mousewheel&&e.bind("mousewheel.fb",function(c,b){if(k)c.preventDefault();else if(0==a(c.target).get(0).clientHeight||a(c.target).get(0).scrollHeight===a(c.target).get(0).clientHeight)c.preventDefault(),a.fancybox[0<b?"prev":"next"]()}),a.support.opacity||e.addClass("fancybox-ie"),K&&(u.addClass("fancybox-ie6"),e.addClass("fancybox-ie6"),a('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(r.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(B)))};
a.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:0.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,
showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};a(t).ready(function(){a.fancybox.init()})});;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox.jira.js' */
require(["jquery","atlassian/jquery-plugins/jquery.fancybox-1.3.4"],function(t,i){i(t),t.fn.fancybox.defaults.titleFormat=function(t){if(t&&t.length)return t=AJS.escapeHtml(t),"float"===this.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+t+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+this.titlePosition+'">'+t+"</div>"}});;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/time.js' */
define("jira/jquery/plugins/livestamp/time",["jira/util/formatter","jira/moment","jira/util/data/meta"],function(e,t,n){"use strict";function o(e,t){this.key=e,this.isAge=t}function r(t,n,o){return t in y?e.format(y[t],o):null}function a(e){switch(e.key){case"short":case"shortAge":return"ll";case"long":case"longAge":return"LL";case"full":case"fullAge":return"LLL";case"timestamp":return"LLL";default:return null}}function i(e){return e.clone().hours(0).minutes(0).seconds(0).milliseconds(0)}function u(e,t){var n=i(e),o=n.clone().subtract(1,"d");return o<=t&&t<n}function l(e,t){var n=i(e).add(1,"d"),o=n.clone().add(1,"d");return n<=t&&t<o}function m(e,t){return Math.floor(t.diff(e,"minutes",!0))}function s(e,t){var n=t.diff(e,"hours",!0);return Math.round(n)}function c(e,t){return Math.floor(t.diff(e,"days",!0))}function d(e,t){var n=a(t);return e.format(n)}function g(e,n,o){if(o=o||t(),e<=o){if(e>o.clone().subtract(1,"m"))return r("aMomentAgo",n);if(e>o.clone().subtract(2,"m"))return r("oneMinuteAgo",n);if(e>o.clone().subtract(50,"m"))return r("xMinutesAgo",n,m(e,o));if(e>o.clone().subtract(90,"m"))return r("oneHourAgo",n);if(u(o,e)&&e<o.clone().subtract(5,"h"))return r("oneDayAgo",n);if(e>o.clone().subtract(1,"d"))return r("xHoursAgo",n,s(e,o));if(e>o.clone().subtract(7,"d"))return r("xDaysAgo",n,Math.max(c(e,o),2));if(e>o.clone().subtract(8,"d"))return r("oneWeekAgo",n)}else{if(e<o.clone().add(1,"m"))return r("inAMoment",n);if(e<o.clone().add(2,"m"))return r("inOneMinute",n);if(e<o.clone().add(50,"m"))return r("inXMinutes",n,m(o,e));if(e<o.clone().add(90,"m"))return r("inOneHour",n);if(l(o,e)&&e>o.clone().add(5,"h"))return r("inOneDay",n);if(e<o.clone().add(1,"d"))return r("inXHours",n,s(o,e));if(e<o.clone().add(7,"d"))return r("inXDays",n,Math.max(c(o,e),2));if(e<o.clone().add(8,"d"))return r("inOneWeek",n)}return d(e,n)}var f={},v=n.getBoolean("date-relativize");o.types={};for(var x,A=["shortAge","longAge","fullAge","short","long","full","timestamp"],h=0,T=A.length;h<T;h++)x=A[h],o.types[x]=new o(x,x.toLowerCase().indexOf("age")!==-1);var y={};return f.FormatType=o,f.formatDate=function(e,t,n){return e&&t?(v||n)&&t.isAge?g(e,t):d(e,t):null},f.setRelativeTranslations=function(e){for(var t in e)y[t]=e[t]},f.restoreDefaultRelativeTranslations=function(){this.setRelativeTranslations({inAMoment:"Now",inOneMinute:"In 1 minute",inXMinutes:"In {0} minutes",inOneHour:"In 1 hour",inXHours:"In {0} hours",inOneDay:"Tomorrow",inXDays:"In {0} days",inOneWeek:"In 1 week",aMomentAgo:"Just now",oneMinuteAgo:"1 minute ago",xMinutesAgo:"{0} minutes ago",oneHourAgo:"1 hour ago",xHoursAgo:"{0} hours ago",oneDayAgo:"Yesterday",xDaysAgo:"{0} days ago",oneWeekAgo:"1 week ago"})},f.restoreDefaultRelativeTranslations(),f.formatDateWithRelativeAge=g,f.formatDateWithFormatString=d,f}),AJS.namespace("JIRA.Time",null,require("jira/jquery/plugins/livestamp/time"));;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/livestamp.js' */
define("jira/jquery/plugins/livestamp/livestamp",["jquery","jira/skate","jira/moment","jira/util/data/meta","jira/jquery/plugins/livestamp/time"],function(t,e,i,a,r){"use strict";var n=6e3,u=a.getBoolean("date-relativize");e("livestamp",{type:e.type.CLASSNAME,prototype:{update:function(){var e=t(this),a=e.data("relativize"),n=e.attr("datetime");if(n&&(n=isNaN(n)?i(n).utcOffset(n):i(parseInt(n,10)),i.isMoment(n)&&n.isValid())){var m=e.data("datetime-format");m=m?m:"fullAge",u||a||(m=m.replace("Age",""));var s=r.formatDate(n,r.FormatType.types[m],a);return e.text()!==s&&e.text(s),!0}return!1},onTimeout:function(){this.timerId&&(clearTimeout(this.timerId),this.timerId=!1);var t=this.update();t&&(this.timerId=setTimeout(this.onTimeout.bind(this),n))}},attributes:function(t){t.onTimeout()},attached:function(t){t.onTimeout()},detached:function(t){clearTimeout(t.timerId),t.timerId=!1}}),t.fn.livestamp=function(){return this}}),function(){require("jira/jquery/plugins/livestamp/livestamp")}();;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = 'includes/jira/viewissue/issuecomponents.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.watchersWithBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label class="js-add-watchers-label">'+soy.$$escapeHtml("Add Watchers")+'</label><div class="autocomplete-user-target"><select id="watchers" name="watchers" data-description="'+soy.$$escapeHtml("Start Typing for Users")+'" class="watchers-user-picker hidden" multiple="multiple">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+="<option style=\"background-image:url('"+soy.$$escapeHtml(o.avatarUrls["16x16"])+'\')" selected="selected" value="'+soy.$$escapeHtml(o.accountId)+'">'+soy.$$escapeHtml(o.displayName)+"</option>"}return a+="</select></div></fieldset></form>"},JIRA.Templates.Issue.watchersNoBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label for="watchers-multi-select">'+soy.$$escapeHtml("Add Watchers")+'</label><div><input type="text" class="text" id="watchers-nosearch" /><div class="description">'+soy.$$escapeHtml("Type username and press enter.")+'</div></div><div class="recipients"><ol class="watchers">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,escape:!0})}return a+="</ol></div></fieldset></form>"},JIRA.Templates.Issue.error=function(e,s){for(var a="<p>"+soy.$$escapeHtml(e.msg)+"</p><ul>",t=e.errors,l=t.length,c=0;c<l;c++){var o=t[c];a+="<li>"+soy.$$escapeHtml(o)+"</li>"}return a+="</ul>"},JIRA.Templates.Issue.usersListReadOnly=function(e,s){for(var a='<form class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><div class="recipients"><ol class="voters">',t=e.users,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,readOnly:!0,escape:!0})}return a+="</ol></div></fieldset></form>"};;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/user-collection.js' */
define("jira/viewissue/watchers-voters/entities/user-collection",["require"],function(e){var r=e("jira/message"),s=e("backbone"),t=e("underscore"),o=e("jquery"),n=e("wrm/context-path"),i=e("jira/util/formatter"),a=JIRA.Templates.Issue,u=s.Model.extend({idAttribute:"key"});return s.Collection.extend({model:u,initialize:function(e){if(void 0===e)throw new Error("Must supply options");if(!e.issueKey)throw new Error("Must supply issue key");if(this.issueKey=e.issueKey,!e.endpoint)throw new Error("Must supply an endpoint");if(this.endpoint=e.endpoint,!e.modelKey)throw new Error("Must supply an model key");this.modelKey=e.modelKey},url:function(){return[n(),"rest/api/2/issue",this.issueKey,this.endpoint].join("/")},parse:function(e){return e&&e[this.modelKey]?e[this.modelKey]:[]},ajax:function(e){return e=t.extend({url:this.url(),headers:{"Content-Type":"application/json"},success:t.bind(function(){this.fetch()},this),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)},e),o.ajax(e)},getUser:function(e){return o.ajax({url:n()+"/rest/api/2/user?username="+encodeURIComponent(e),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)})},handleErrorResponse:function(e,s){var t=this._parseResponse(e.responseText);if(t.errorMessages){var o=a.error({msg:s,errors:t.errorMessages});r.showErrorMsg(o,{closeable:!0})}this.trigger("errorOccurred")},_parseResponse:function(e){try{return JSON.parse(e)}catch(e){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";r.showErrorMsg(e,{closeable:!0})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/voters-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/voters-user-collection",["jira/viewissue/watchers-voters/entities/user-collection"],function(e){return e.extend({initialize:function(t){var i={issueKey:t,endpoint:"votes",modelKey:"voters"};e.prototype.initialize.apply(this,[i])},vote:function(){return this.ajax({type:"POST"})},unvote:function(){return this.ajax({type:"DELETE"})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/watchers-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/watchers-user-collection",["jira/viewissue/watchers-voters/entities/user-collection","jira/util/data/meta"],function(e,t){return e.extend({initialize:function(i){this.canBrowseUsers=t.get("can-search-users"),this.isReadOnly=!t.get("can-edit-watchers");var a={issueKey:i,endpoint:"watchers",modelKey:"watchers"};e.prototype.initialize.apply(this,[a])},addWatcher:function(e){return this.ajax({type:"POST",data:'"'+e+'"'})},removeWatcher:function(e){return this.ajax({type:"DELETE",url:this.url()+"?accountId="+e})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/voters-view.js' */
define("jira/viewissue/watchers-voters/views/voters-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),r=(e("underscore"),e("jquery"),e("jira/jquery/deferred"),e("jira/util/formatter")),s=JIRA.Templates.Issue;return i.View.extend({$empty:void 0,initialize:function(e){this.collection=e.collection,this.collection.bind("replace reset add remove",this.render,this)},renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no voters for this issue"}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){return this.$el.html(s.usersListReadOnly({users:this.collection.toJSON()})),this.renderNoWatchers(),this.$el}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/abstract-watchers-view.js' */
define("jira/viewissue/watchers-voters/views/abstract-watchers-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),n=e("underscore"),r=e("jquery"),s=e("jira/jquery/deferred"),a=e("jira/util/formatter");return i.View.extend({$empty:void 0,renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no watchers."}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(n.bind(function(){this._render(),this.renderNoWatchers(),e.resolve(this.$el),setTimeout(n.bind(function(){this.focus()},this),0)},this)),e.promise()},watch:function(){r("#watching-toggle").text("Stop watching this issue")},unwatch:function(){r("#watching-toggle").text("Start watching this issue")},focus:r.noop,_incrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t+1),this.renderNoWatchers()},_decrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t-1),this.renderNoWatchers()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),i=e("underscore"),a=e("jira/util/logger"),s=e("jira/field/multi-user-list-picker"),c=JIRA.Templates.Issue;return t.extend({events:{selected:"addWatcherToModel",unselect:"removeWatcherFromModel"},_render:function(){this.$el.html(c.watchersWithBrowse({watchers:this.collection.toJSON()}));var e=new s({element:this.$el.find(".watchers-user-picker"),width:220});this.$el.find(".js-add-watchers-label").attr("for",e.$field.attr("id"))},focus:function(){this.$el.find("#watchers-textarea").focus()},addWatcherToModel:function(e,t){e.preventDefault(),this.collection.addWatcher(t.value()).done(i.bind(function(){this._incrementWatcherCount(),t.value()===r.get("remote-user")&&this.watch()},this))},removeWatcherFromModel:function(e,t){this.collection.removeWatcher(t.value()).done(i.bind(function(){this._decrementWatcherCount(),t.value()===r.get("remote-user")&&(this.unwatch(),a.trace("jira.issue.watcher.deleted"))},this))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-no-browse-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-no-browse-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),a=e("underscore"),i=e("jquery"),s=e("jira/util/logger"),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return t.extend({events:{"click .remove-recipient":"removeWatcher",submit:"addWatcher"},addWatcher:function(e){e.preventDefault(),this.removeInlineError();var t=i("#watchers-nosearch"),s=i.trim(t.val());t.attr("disabled","disabled"),this.hasUsername(s)?(t.removeAttr("disabled"),this.showInlineError(n.format("User {0} is already watching this issue",s)),t.val("")):this.collection.getUser(s).done(a.bind(function(e){var a=JIRA.Templates.Fields.recipientUsername({icon:e.avatarUrls["16x16"],username:e.name,displayName:e.displayName});s===r.get("remote-user")&&this.watch(),t.val(""),this.$(".watchers").append(a),this.collection.addWatcher(e.name),this._incrementWatcherCount()},this)).fail(a.bind(function(e){404===e.status&&this.showInlineError("User does not exist")},this)).always(function(){t.removeAttr("disabled").focus()})},hasUsername:function(e){var t=!1;return this.$(".watchers li").each(function(){if(i(this).attr("data-username")===e)return t=!0,!1}),t},removeInlineError:function(){this.$(".error").remove()},showInlineError:function(e){i("<div />").addClass("error").text(e).insertAfter(this.$(".description"))},focus:function(){i("#watchers-nosearch").focus()},removeWatcher:function(e){e.preventDefault();var t=i(e.target).closest("li"),a=t.attr("data-username");a&&(t.remove(),this.collection.removeWatcher(a),this._decrementWatcherCount(),a===r.get("remote-user")&&this.unwatch()),s.trace("jira.issue.watcher.deleted")},_render:function(){this.$el.html(o.watchersNoBrowse({watchers:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-read-only-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-read-only-view",["require"],function(e){var s=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=JIRA.Templates.Issue;return s.extend({_render:function(){this.$el.html(r.usersListReadOnly({users:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-inline-dialog-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view",["require"],function(e){var i=e("backbone"),t=e("jira/skate"),n=i.View.prototype.setElement;return i.View.extend({id:"inline-dialog-watchers",events:{"click .cancel":function(e){e.preventDefault(),this.hide()}},setElement:function(e){var s=e instanceof i.$?e.get(0):e;if(s)return this.el&&this.el.parentNode&&this.el!==s&&this.el.parentNode.removeChild(this.el),n.call(this,s),t.init(this.el),this},contents:function(e){var i=this.$el.find(".aui-inline-dialog-contents");0===i.length&&(i=AJS.$("<div/>",{class:"aui-inline-dialog-contents"}),this.$el.append(i)),i.html(e)},show:function(){this.el.setAttribute("open","")},hide:function(){this.el.removeAttribute("open")},isVisible:function(){return!!this.el.hasAttribute("open")}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/watchers.js' */
define("jira/viewissue/watchers-voters/watchers",["require"],function(e){"use strict";function i(){return h||(h=new a({el:d("#inline-dialog-watchers").get(0)})),h}function s(e){return e.isReadOnly?n:e.canBrowseUsers?r:t}var n=e("jira/viewissue/watchers-voters/views/watchers-read-only-view"),t=e("jira/viewissue/watchers-voters/views/watchers-no-browse-view"),r=e("jira/viewissue/watchers-voters/views/watchers-view"),o=e("jira/viewissue/watchers-voters/entities/watchers-user-collection"),a=e("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view"),c=e("jira/util/events"),l=e("jira/util/events/types"),w=e("jira/util/events/reasons"),u=e("jira/issue"),v=e("aui/inline-dialog"),d=e("jquery"),h=null;d(document).on("click","#view-watcher-list",function(e){e.preventDefault();var n=i(),t=d("#watching-toggle").next(".icon"),r=new o(u.getIssueKey());t.addClass("loading");var a=s(r);new a({collection:r}).render().done(function(e){t.removeClass("loading"),n.contents(e),n.show()}),r.on("errorOccurred",function(){n.hide()})}),d(document).on("keydown",function(e){h&&27===e.keyCode&&v.current!==h.el&&h.isVisible()&&(v.current&&v.current.hide(),h.hide())}),d(document).on("click",function(e){if(h){var i=d(e.target).closest("#inline-dialog-watchers, #watchers-suggestions").length;0===i&&h.isVisible()&&h.hide()}}),c.bind(l.NEW_CONTENT_ADDED,function(e,s,n){n===w.panelRefreshed&&s.is("#peoplemodule")&&i().setElement(s.find("#inline-dialog-watchers").get(0))})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/voters.js' */
define("jira/viewissue/watchers-voters/voters",["require"],function(e){"use strict";var i=e("jira/viewissue/watchers-voters/entities/voters-user-collection"),r=e("jira/viewissue/watchers-voters/views/voters-view"),t=e("jira/issue"),n=e("jira/ajs/layer/inline-layer"),s=e("aui/inline-dialog"),o=e("jquery"),c=s("#view-voter-list","voters",function(e,n,s){var a=o("#vote-toggle").next(".icon");a.addClass("loading");var u=new i(t.getIssueKey()),v=new r({collection:u}),l=u.fetch();l.done(function(){var i=v.render();e.html(i),e.find(".cancel").click(function(e){c.hide(),e.preventDefault()}),a.removeClass("loading"),s()}),u.on("errorOccurred",function(){c.hide()})},{width:240,useLiveEvents:!0,items:"#view-voters-list",preHideCallback:function(){return!n.current}});o(document).bind("keydown",function(e){27===e.keyCode&&s.current!==c&&c.is(":visible")&&(s.current&&s.current.hide(),c.hide())}),o(document).click(function(e){var i=s.current;i&&"voters"===i.id&&(o(e.target).closest("#inline-dialog-voters").length||i.hide())})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/toggler.js' */
define("jira/viewissue/watchers-voters/toggler",["require"],function(t){var e=t("jira/components/analytics-tracker/tracker"),a=t("jira/ajs/ajax/smart-ajax"),o=t("jira/flag"),n=t("jquery"),s=t("wrm/context-path"),i=t("jira/util/formatter"),r=function(t,o,i,r,c){var u,f=o+"-on",g=o+"-off",d="/voters",x=t.next(".icon"),p="POST",v=t.hasClass(f)?"on":"off";t.hasClass(f)&&(p="DELETE"),o.indexOf("watch")!==-1&&(d="/watchers"),t.removeClass(f).removeClass(g),"POST"===p&&(u={dummy:!0}),e.trackEvent("viewissue."+o+"."+v,"click"),n(a.makeRequest({url:s()+"/rest/api/1.0/issues/"+t.attr("rel")+d,type:p,dataType:"json",data:u,contentType:"application/json",complete:function(e,a,o){var n="POST"===p;o.successful?(n?(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)):(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)),i.text(o.data.count),i[n?"addClass":"removeClass"](f),i[n?"removeClass":"addClass"](g)):(o.aborted||l(o),n?(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)):(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)))}})).throbber({target:x})},l=function(t){var e=a.buildSimpleErrorContent(t,{alert:!0});if(t.hasData){var n=JSON.parse(t.data);n.errorMessages&&(e=n.errorMessages[0])}o.showErrorMsg(e,{closeable:!0})};n(document).delegate("#toggle-vote-issue","click",function(t){t.preventDefault(),n("#vote-toggle").click()}),n(document).delegate("#toggle-watch-issue","click",function(t){t.preventDefault(),n("#watching-toggle").click()});var c=function(t){n("input[type=hidden][id|=error]").each(function(e,a){var o=a.id.replace("error-","");t[o]=a.value})};n(document).delegate("#vote-toggle","click",function(t){t.preventDefault();var e={titleOn:"Remove vote for this issue",titleOff:"Vote for this issue",textOn:"Remove vote",textOff:"Add vote",actionTextOff:"Vote",actionTextOn:"Voted"},a=n(this),o=n(document.querySelectorAll("#vote-data")),s=n(document.querySelectorAll("#toggle-vote-issue"));c(e),r(a,"vote-state",o,s,e)}),n(document).delegate("#watching-toggle","click",function(t){t.preventDefault();var e={titleOn:"Stop watching this issue",titleOff:"Start watching this issue",textOn:"Stop watching",textOff:"Watch issue",actionTextOff:"Watch",actionTextOn:"Watching"},a=n(this),o=n(document.querySelectorAll("#watcher-data")),s=n(document.querySelectorAll("#toggle-watch-issue"));c(e),r(a,"watch-state",o,s,e)})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/initWatchersAndVoters.js' */
AJS.namespace("JIRA.VotersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/voters-user-collection")),AJS.namespace("JIRA.WatchersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/watchers-user-collection")),AJS.namespace("JIRA.VotersView",null,require("jira/viewissue/watchers-voters/views/voters-view")),AJS.namespace("JIRA.WatchersView",null,require("jira/viewissue/watchers-voters/views/watchers-view")),AJS.namespace("JIRA.WatchersNoBrowseView",null,require("jira/viewissue/watchers-voters/views/watchers-no-browse-view")),AJS.namespace("JIRA.WatchersReadOnly",null,require("jira/viewissue/watchers-voters/views/watchers-read-only-view"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/AnalyticsUtils.js' */
define("jira/viewissue/analytics-utils",["jira/util/data/meta","jira/issuenavigator/issue-navigator","jira/util/strings","wrm/context-path","jquery","exports"],function(n,t,e,i,r,s){function a(){return r(document.body).hasClass("navigator-issue-only")}function u(){return!!n.get("is-servicedesk-rendered")}function o(){return t.isNavigator()}function c(){return a()&&e.contains(location.search,"jql=")}function l(){return e.startsWith(location.pathname,i()+"/projects/")}s.context=function(){return c()?"fullscreen-issuenav":a()?"fullscreen":u()?"sd-queue":o()?"issuenav":l()?"project":"unknown"}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/slideshow/slideshow-configuration.js' */
define("jira/viewissue/slideshow/slideshow-configuration",["jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery"],function(e,t){var i={type:"image",centerOnScroll:!0,onStart:e.disable,onClosed:e.enable},n="elastic";return t.extend({},i,{transitionIn:n,transitionOut:n})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/image-wrap.js' */
define("jira/viewissue/element/image-wrap",["jira/fileviewer","jira/skate","jira/featureflags/feature-manager","underscore"],function(e,a,i,t){a("file-preview-type",{type:a.type.ATTRIBUTE,attached:t.debounce(function(){e.attachToElements()},0),detached:function(){e.closeViewer()}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/shortener.js' */
define("jira/ajs/shorten/shortener",["jira/util/formatter","jira/ajs/control","jira/data/local-storage","jquery"],function(t,e,i,n){return e.extend({_getDefaultOptions:function(){return{items:"a, span",numRows:1,shortenText:"hide",shortenOnInit:!0,persist:!0,expandButtonTooltip:"Click to view {0} more",collapseButtonTooltip:"Hide"}},init:function(t){"string"==typeof t&&(t={element:t}),t=t||{},this.options=n.extend(this._getDefaultOptions(),t),this._timerId=0,this.expanded=!1,this.$container=n(this.options.element),this._cleanupOldButtons(),this.$container.css("height","auto"),this._assignEvents("body",document.body),this._ready()},_isValid:function(){return!this.initialized&&this.$container.is(":visible")&&this.$container.children().length>0},_cleanupOldButtons:function(){this.$container.find("a.ellipsis.shortener-expand").remove(),this.$container.find("a.shortener-collapse").remove(),this.$container.find("br.shortener-expand-line-break").remove()},_ready:function(){this._isValid()&&(this.$items=this.$container.children(this.options.items),this.$expandButton=this._render("expandButton"),this.$collapseButton=this._render("collapseButton"),this._assignEvents("expand-button",".shortener-expand"),this._assignEvents("collapse-button",".shortener-collapse"),(!n.browser.msie||n.browser.version>="9")&&this._assignEvents("resize-region",window),this._isCollapsedOnInit()?this.collapse():this.expand(),this.initialized=!0)},_renders:{expandButton:function(){return n("<a href='#' class='ellipsis shortener-expand'></a>").attr("title",this.options.expandButtonTooltip).add("<br class='shortener-expand-line-break'>")},collapseButton:function(){return n("<a href='#' title='Hide' class='icon icon-hide shortener-collapse'></a>").append(n("<span>").text(this.options.collapseButtonTooltip))}},_events:{"expand-button":{click:function(t){t.currentTarget===this.$expandButton[0]&&(t.preventDefault(),this.expand(),this._saveState("expanded"))}},"collapse-button":{click:function(t){t.currentTarget===this.$collapseButton[0]&&(t.preventDefault(),this.collapse(),this._saveState("collapsed"),this.$container.scrollIntoView())}},"resize-region":{resize:function(){if(clearTimeout(this._timerId),!this.expanded){var t=this;this._timerId=setTimeout(function(){t.collapse()},400)}}},body:{tabSelect:function(){this._ready()}}},_saveState:function(t){try{i.setItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"),t)}catch(t){}},_loadState:function(){return i.getItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"))},_isCollapsedOnInit:function(){var t=this._loadState();return null!==t?"expanded"!==t:this.options.shortenOnInit},_removeButtons:function(){this.$expandButton.remove(),this.$collapseButton.remove()},_getOverflowIndex:function(){if(this.$items.length>1)for(var t=1,e=-1,i=0;i<this.$items.length;i++){var n=this.$items.eq(i).offset().left;if(n<=e&&(t++,t>this.options.numRows))return i;e=n}return-1},expand:function(){this._removeButtons(),this._getOverflowIndex()>0&&(this.$collapseButton=this._render("collapseButton"),this.$container.append(this.$collapseButton),this.$container.css("height","auto"),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")),this.expanded=!0},collapse:function(){this._removeButtons();var e=this._getOverflowIndex();if(e>0){this.$container.css({position:"absolute",visibility:"hidden",width:this.$container[0].clientWidth+"px"});var i=this.$expandButton.first();do{var s=this.$items.length-e;i.text("("+s+")"),this.$expandButton.insertBefore(this.$items[e]),e--;var o=this.$items.eq(e).offset(),r=this.$expandButton.offset();if(o.left<r.left&&r.top<o.top+10)break}while(e>0);var a=e<this.$items.length-1?this.$items.eq(e+1).offset().top-this.$container.offset().top+"px":"auto";this.$container.css({height:a,position:"static",visibility:"visible",width:"auto"}),i.attr("title",t.format(this.options.expandButtonTooltip,s)),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")}else this.$container.css("height","auto");this.expanded=!1}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/namespace.js' */
AJS.namespace("AJS.Shortener",null,require("jira/ajs/shorten/shortener"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/shortener.js' */
define("jira/jquery/plugins/shorten/shorten",["jira/ajs/shorten/shortener","jquery"],function(n,e){e.fn.shorten=function(e){var r=[];return e=e||{},this.each(function(){e.element=this,r.push(new n(e))}),r}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/install.js' */
!function(){require("jira/jquery/plugins/shorten/shorten")}();;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/shorten.js' */
define("jira/viewissue/element/shorten",["jira/ajs/shorten/shortener","jira/skate"],function(e,t){return t("shorten",{type:t.type.CLASSNAME,attached:function(t){var n={};n.element=t,new e(n)}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initToggleBlock.js' */
define("jira/viewissue/init-toggle-block",["jira/util/events","jira/util/events/types","jira/toggleblock/toggle-block"],function(e,t,i){new i({blockSelector:".toggle-wrap",triggerSelector:".issue-container .mod-header .toggle-title",storageCollectionName:"block-states"}),t.ISSUE_REFRESHED&&e.bind(t.ISSUE_REFRESHED,function(){t.REFRESH_TOGGLE_BLOCKS&&e.trigger(t.REFRESH_TOGGLE_BLOCKS)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/comment-form.js' */
define("jira/viewissue/comment/comment-form",["jira/util/formatter","jira/util/events","jira/util/events/types","jira/ajs/ajax/smart-ajax","jira/issue","jira/dialog/form-dialog","wrm/context-path","jira/jquery/deferred","jquery"],function(e,t,i,n,r,o,s,a,m){var l=s(),d={setCaretAtEndOfCommentField:function(){var e,t=this.getField(),i=t[0];t.length&&(e=t.val().length,t.scrollTop(t.attr("scrollHeight")),i.setSelectionRange&&e>0&&i.setSelectionRange(e,e))},disable:function(){this.getForm().find("textarea").attr("readonly","readonly"),this.getForm().find("input[type=submit]").attr("disabled","disabled")},isDirty:function(){var e=this.getField();return!!e.length&&e[0].value!==e[0].defaultValue},handleBrowseAway:function(){if(d.isDirty()){var t=d.getForm(),i=t.length&&t.is(":visible");return i?"You have entered a comment on this issue. If you navigate away from this page without first saving, the comment will be lost.":void 0}},isVisibilityAvailble:function(){return"none"!=this.getForm().find("#commentLevel :selected").val()},setSubmitState:function(){m.trim(this.getField().val()).length>0&&this.isVisibilityAvailble()?this.getForm().find("#issue-comment-add-submit").removeAttr("disabled"):this.getForm().find("#issue-comment-add-submit").attr("disabled","disabled")},enable:function(){this.getForm().find("textarea").removeAttr("readonly"),this.getForm().find("input[type=submit]").removeAttr("disabled")},getCommentVisibility:function(){var e=this.getForm().find("#commentLevel :selected").val();if(e){var t=e.split(":");return{type:t[0],value:this.getForm().find("#commentLevel :selected").text()}}return null},ajaxSubmit:function(){var s=m('<span class="icon throbber loading"></span>'),u=r.getIssueId(),c=r.getIssueKey(),g=l+"/rest/api/2/issue/"+c+"/comment",f={body:this.getField()[0].value.replace(/\r?\n/g,"\r\n")},h=this.getCommentVisibility();h&&(f.visibility=h);var v=a(),b=m.ajax({url:g,type:"POST",contentType:"application/json",data:JSON.stringify(f),success:function(e){t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"]),t.trigger(i.REFRESH_ISSUE_PAGE,[u,{complete:function(){var t="comment-"+e.id;m("#"+t).scrollIntoView({marginBottom:200,marginTop:200});var i=m("#issue_actions_container > .issue-data-block.focused");i.removeClass("focused");var n=m("#"+t);n.addClass("focused"),s.remove(),d.enable(),v.resolve()}}])},error:function(t){function i(t){var i="<h2>"+"Error"+'</h2><div class="ajaxerror"><div class="aui-message error"><span class="aui-icon icon-warning"/>'+t+"</div></div>";return m(i)}var r,a=m.parseJSON(t.responseText);r=a&&a.errors&&a.errors.comment?i(a.errors.comment):n.buildDialogErrorContent(t),new o({content:r}).show(),s.remove(),d.enable(),v.reject()}});return s.appendTo(this.getForm().find("input[type=submit]").parent()),m.when(b,v)},getForm:function(){var e=m("form#issue-comment-add");return 1===e.length&&(this.$form=e),this.$form||m()},getField:function(){return this.getForm().find("#comment")},getSubmitButton:function(){return this.getForm().find("#issue-comment-add-submit")},hide:function(e){e&&this.cancel(),this.getForm().detach(),i.UNLOCK_PANEL_REFRESHING&&t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"])},show:function(){this.focus(),i.LOCK_PANEL_REFRESHING&&t.trigger(i.LOCK_PANEL_REFRESHING,["addcommentmodule"])},focus:function(){this.focusField(),this.setCaretAtEndOfCommentField()},focusField:function(){this.getField().focus().trigger("keyup"),this.getSubmitButton().scrollIntoView({marginBottom:200})},showNoCommentMsg:function(e){if(""===this.getField().val())return m("#emptyCommentErrMsg").show(),!0},cancel:function(){var e=this;setTimeout(function(){e.getField().val("")},100),m("#comment-preview_link.selected").click()}};return d});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/footer-comment.js' */
define("jira/viewissue/comment/footer-comment",["jira/viewissue/comment/comment-form","jquery"],function(e,t){var i=!1,n=!1,o={getModule:function(){return t("#addcomment")},isActive:function(){return this.getModule().hasClass("active")},hide:function(t){if(this.isActive()){var o=e.handleBrowseAway();(n||i||!o||confirm(o))&&(this.getModule().removeClass("active"),e.hide(t))}},ajaxSubmit:function(){i=!0,e.ajaxSubmit().then(function(){o.hide(!0)})},show:function(){this.isActive()?e.focusField():(i=!1,this.getModule().addClass("active"),this.appendForm(),e.show())},appendForm:function(){this.getModule().find(".mod-content").append(e.getForm())}};return o.setPreviewMode=function(e){n=Boolean(e)},o});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/init-comment-areas.js' */
define("jira/viewissue/init-comment-areas",["require"],function(e){var t=e("jira/viewissue/comment/comment-form"),n=e("jira/viewissue/comment/footer-comment"),i=e("jira/issue"),o=e("jquery"),a=e("jira/libs/parse-uri"),m=window.onbeforeunload,u={};u.openFooterComment=function(){n.show(),t.getForm().find("#commentLevel").bind("change",function(){t.setSubmitState()}),t.setSubmitState()},o(document).delegate("#addcomment #issue-comment-add","submit",function(e){n.ajaxSubmit(),e.preventDefault()}).delegate(".issue-header #comment-issue","click",function(e){n.show(),e.preventDefault()}).delegate("#footer-comment-button","click",function(e){u.openFooterComment(),e.preventDefault()}).delegate("#addcomment .cancel","click",function(e){e.preventDefault(),n.hide(!0)}).delegate("#issue-comment-add","submit",function(){window.setTimeout(function(){t.disable()},0)}).delegate("#issue-comment-add #comment","input",function(){t.setSubmitState()}).delegate("#issue-comment-add input[type='submit']","click",function(e){t.showNoCommentMsg()&&e.preventDefault()}).bind("showWikiInput",function(){n.setPreviewMode(!1);var e=t.getField();e.is(":visible:enabled")&&(i.getStalker().trigger("stalkerHeightUpdated"),e.length>0&&e.focus(),t.setCaretAtEndOfCommentField())}).bind("showWikiPreview",function(){n.setPreviewMode(!0),i.getStalker().trigger("stalkerHeightUpdated")}),window.onbeforeunload=function(){var e=void 0;return o.isFunction(m)&&(e=m.apply(this,arguments)),e||t.handleBrowseAway.apply(this,arguments)},o(function(){"add-comment"===a(window.location.href).anchor&&u.openFooterComment()})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/invoke-comment-trigger.js' */
define("jira/viewissue/invoke-comment-trigger",["jquery"],function(e){return function(){var i=e(".add-issue-comment");if(0!==i.length){var r=i.filter(".toolbar-trigger");r.length>0?r.click():i.click()}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/namespace.js' */
AJS.namespace("JIRA.Issue.CommentForm",null,require("jira/viewissue/comment/comment-form")),AJS.namespace("JIRA.Issue.getDirtyCommentWarning",null,require("jira/viewissue/comment/comment-form").handleBrowseAway),AJS.namespace("JIRA.Issue.invokeCommentTrigger",null,require("jira/viewissue/invoke-comment-trigger"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initCustomFieldTabs.js' */
define("jira/viewissue/init-custom-field-tabs",["jira/util/logger","jira/util/events","jira/util/events/types","aui/tabs","jquery"],function(t,i,e,n,a){var r="#customfieldmodule",l=function(i){var e;"string"!=typeof i&&i.length>0||("#"!==i[0]&&(i="#"+i),t.log("activating tab",i),e=a("a[href='"+i+"']",r),e.length&&n.change(e))},u=function(t){var i=a(t.target).closest(".tabs-pane");i.length>0&&l(i.attr("id"))};a(function(){e.NEW_CONTENT_ADDED&&i.bind(e.NEW_CONTENT_ADDED,function(t,i){var e=i.find(r);e.unbind("reveal"),e.bind("reveal",u),n.setup()}),e.PANEL_REFRESHED&&i.bind(e.PANEL_REFRESHED,function(t,i,e,n){if("details-module"===i){var a=n.find(r).find(".active-tab");1===a.length&&l(a.find("a").attr("href"))}}),a(r).bind("reveal",u)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initSubtaskTimeLogging.js' */
define("jira/viewissue/init-subtask-time-logging",["jquery"],function(i){i(document).delegate("#tt_include_subtasks input","click",function(t){i(this).is(":checked")?(i("#tt_info_single").hide(),i("#tt_info_aggregate").show()):(i("#tt_info_aggregate").hide(),i("#tt_info_single").show())})});;
;
/* module-key = 'jira.webresources:viewissue', location = 'includes/jira/viewissue/ViewIssueTabs.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),"undefined"==typeof JIRA.Templates.Issue.Tabs&&(JIRA.Templates.Issue.Tabs={}),JIRA.Templates.Issue.Tabs.label=function(e,s){return"<strong>"+soy.$$escapeHtml(e.text)+"</strong>"},JIRA.Templates.Issue.Tabs.tab=function(e,s){return'<a id="'+soy.$$escapeHtml(e.id)+'" href="'+soy.$$escapeHtml(e.href)+'" class="'+soy.$$escapeHtml(e.linkClass)+'">'+JIRA.Templates.Issue.Tabs.label(e)+"</a>"};;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabsAnalytics.js' */
define("jira/viewissue/tabs/analytics",["jquery","jira/analytics","jira/util/strings","jira/viewissue/analytics-utils","jira/components/analytics-tracker/tracker","underscore"],function(e,t,a,n,i,s){function r(e){return m.indexOf(e)>-1?e:a.hashCode(e)}function c(e){return{tab:r(e.attr("data-key")),tabPosition:e.index()}}function l(e,t){return{inNewWindow:e,keyboard:t,context:n.context()}}function o(e){var t=e.attr("id");return!!t&&/\d+_thumb/.test(t)}function u(e){return e.hasClass("issue-link")?"issue":e.hasClass("external-link")?"external":o(e)?"attachment":"unknown"}function d(e,t,a,n){var r=e.closest(".mod-content").find("#issue-tabs li.active"),o=l(a,n);s.extend(o,c(r)),s.extend(o,{linkType:t}),i.trackEvent("viewissue","tab.link.clicked",o)}var m=["com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel","com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab"];return{tabClicked:function(e,a,n){var r=e.parent(),o=s.extend({},l(a,n),c(r));t.send({name:"jira.viewissue.tab.clicked",data:o}),i.trackEvent("viewissue","tab.clicked",o)},buttonClicked:function(e,a,n){if(e.is("[data-tab-sort]")){var i=e.data("order"),r=e.parents(".tabwrap").find("li.active");t.send({name:"jira.viewissue.tabsort.clicked",data:s.extend({},l(a,n),c(r),{order:i})})}},permalinkClicked:function(e,t){i.trackEvent("viewissue","comment.permalink.click",{commentId:e,keyboard:t})},permalinkContextMenuOpened:function(e,t){i.trackEvent("viewissue","comment.permalink.contextmenu.opened",{commentId:e,keyboard:t})},tabItemDetailsLinkClicked:function(e,t,a){d(e,"profile",t,a)},tabItemBodyLinkClicked:function(e,t,a){d(e,u(e),t,a)}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabs.js' */
define("jira/viewissue/tabs",["jira/util/logger","jira/util/formatter","jquery","jira/jquery/deferred","jira/util/data/meta","jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","jira/userhover/userhover","jira/viewissue/tabs/analytics"],function(t,e,i,a,n,r,o,s,c){function u(t){t=t||document,i.each(F,function(e,i){i(t)})}function l(t){var e=i(t).find(".issuePanelWrapper"),a=i(t).find("#issue_actions_container");q=a.length?a:q,_=e.length?e:_}function f(t,e){var i=new r({id:"issue-tab-error-dialog",widthClass:"small",content:o.buildDialogErrorContent(t,!1)});d(e),q.show(),i.show()}function d(t){i("#issue-tabs li").each(function(){var e=i(this),a=e.data("key"),n=e.data("label");if(a==t)e.addClass("active"),e.html(D.label({text:n}));else{e.removeClass("active");var r=e.data("id"),o=e.data("href");e.html(D.tab({id:r,href:o,linkClass:J,text:n}))}}),k(i("#issue-tabs"))}function h(t){d(t)}function v(t,e){var i=t.pageX,a=t.pageY,n=e.offset(),r=e.outerWidth(),o=e.outerHeight();return 0==i&&0==a||!(i>=n.left&&i<=n.left+r&&a>=n.top&&a<=n.top+o)}function m(){var t=i("#issue_actions_container");p(t,"action-details","viewIssueTabDetailsLink",c.tabItemDetailsLinkClicked),p(t,"action-body","viewIssueTabBodyLink",c.tabItemBodyLinkClicked)}function p(t,e,a,n){var r="."+e+" a";t.find(r).off("click."+a).on("click."+a,function(t){var e=i(this),a=t.metaKey,r=v(t,e);n(e,a,r)})}function b(){var t=i('[id^="permlink_comment"]');t.off("click").on("click",function(t){var e=g(t.target),a=i(this),n=v(t,a);c.permalinkClicked(e,n)}),t.off("contextmenu").on("contextmenu",function(t){var e=g(t.target),a=i(this),n=v(t,a);c.permalinkContextMenuOpened(e,n)})}function g(t){var e=i(t).closest('[id^="permlink_comment"]').attr("id"),a=e.split("_").pop();return a}function k(t){var e=i(t).find("li.active").data("key");i(t).find(E).off("click.viewIssueTabs").on("click.viewIssueTabs",function(t){var a=i(this),n=v(t,a),r=a.parent().data("key"),o=t.metaKey;r?c.tabClicked(a,o,n):c.buttonClicked(a,o,n),o||(t.preventDefault(),r&&h(r),y(e,a.attr("href")).done(function(t){n&&(r?t.find("#"+a.attr("id")+" > :first-child").focus():t.find(".sortwrap  > :first-child").focus())}).done(u))})}function y(e,n){var r=a();L&&L.abort();var s=o.makeRequest({jqueryAjaxFn:R?i.pjax:i.ajax,headers:{"X-PJAX":!0},container:S,url:n,timeout:null,complete:function(a,n,o){if("abort"!=n){if(L=null,!o.successful)return void((o.status<300||o.status>=400)&&f(o,e));var s=i(this.container),c=document.createElement("div");c.innerHTML=o.data;var u=document.createDocumentFragment().appendChild(c);R||j(s,u),t.trace("jira.issue.tab.loaded"),r.resolve(s)}}});return i(s).throbber({target:_}),L=s,r}function j(t,e){var a=e.querySelectorAll(".tabwrap"),n=t.find(".tabwrap"),r=i(e.querySelectorAll("#issue_actions_container")).contents(),o=q.contents();if(a.length&&n.length&&r.length&&o.length){n.replaceWith(a),q.stop(!0,!0);var s=q.height();q.append(r);var c=q.height()-s,u=s-c;u>0?(q.css("height",c+u),o.remove(),w(c,u)):q.empty().append(r),i(e.querySelectorAll("script")).each(function(){i.globalEval(this.text||this.textContent||this.innerHTML||"")})}else t.empty().append(e)}function w(t,e){var i=150,a=800,n=e/a*1e3;setTimeout(function(){q.animate({height:t+1},n,"easeOutQuart",function(){q.css("height","auto")})},i)}function x(t){i(t).find(E).each(function(){var t=i(this);t.attr("href",t.attr("href")+"#issue-tabs")})}function C(t){!R||i.support.pjax?k(t):x(t)}function T(t){i(t).bind("moveToFinished",function(t,e){i("a.twixi:visible",e).focus()})}function I(t){t.find("time.livestamp").livestamp()}function A(t){i.inArray(t,F)<0&&F.push(t)}var _,q,L,D=JIRA.Templates.Issue.Tabs,R=n.get("viewissue-use-history-api")!==!1,J="ajax-activity-content",S="#activitymodule div.mod-content",E=e.format("a.{0}",J),F=[];return A(l),A(C),A(T),A(s),A(I),A(m),A(b),{onTabReady:A,domReady:u}}),AJS.namespace("JIRA.ViewIssueTabs",null,require("jira/viewissue/tabs"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewIssueTabs.js' */
define("jira/viewissue/init-view-issue-tabs",["require"],function(i){var e=i("jquery"),n=i("jira/util/events"),s=i("jira/util/events/types"),t=i("jira/viewissue/tabs");e(function(){s.PANEL_REFRESHED&&n.bind(s.PANEL_REFRESHED,function(i,e,n,s){if("activitymodule"===e){var t=s.find("#issue_actions_container > .issue-data-block.focused");1===t.length&&n.find("#"+t.attr("id")).addClass("focused")}})}),n.bind(s.NEW_CONTENT_ADDED,function(i,e){t.domReady(e)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewissue.js' */
require(["jira/viewissue/element/shorten","jira/viewissue/element/image-wrap","jira/viewissue/watchers-voters/watchers","jira/viewissue/watchers-voters/voters","jira/viewissue/watchers-voters/toggler","jira/viewissue/init-comment-areas","jira/viewissue/init-subtask-time-logging","jira/viewissue/init-toggle-block","jira/viewissue/init-custom-field-tabs","jira/viewissue/init-view-issue-tabs"],function(){});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.4.1-factory', location = 'atlassian-jslibs/factories/marionette/1.4.1/marionette-1.4.1-factory.js' */
(function(e){define("atlassian/libs/factories/marionette-1.4.1",function(){return function(d,k){var g=k.Marionette;e.call({_:d,Backbone:k});var h=k.Marionette;h.VERSION="1.4.1";k.Marionette=g;return h}})})(function(){var e=this.Backbone,d=this._,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var f=a.cid;this._views[f]=a;a.model&&(this._indexByModel[a.model.cid]=f);b&&(this._indexByCustom[b]=
f);this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],!0},this);
delete this._views[b];this._updateLength()},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(f){d.isFunction(f[a])&&f[a].apply(f,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});var g={},h=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};h.extend=e.Model.extend;d.extend(h.prototype,e.Events,{setHandlers:function(a){d.each(a,function(a,f){var c=null;d.isObject(a)&&!d.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(f,a,c)},this)},setHandler:function(a,b,f){this._wreqrHandlers[a]={callback:b,context:f};this.trigger("handler:add",a,b,f)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});g.Handlers=h;h=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(h.prototype,e.Events,{getCommands:function(a){var b=this._commands[a];
b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});g.CommandStorage=h;h=g.Handlers.extend({storageType:g.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);g.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=
arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,f){var c=this.storage.getCommands(a);d.each(c.instances,function(a){b.apply(f,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=d.isFunction(a)?new a:a}});g.Commands=h;g.RequestResponse=g.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,
1);return this.getHandler(a).apply(this,b)}});h=function(){};h.extend=e.Model.extend;d.extend(h.prototype,e.Events);g.EventAggregator=h;var l=function(a,b){var f=Error(a);f.name=b||"Error";throw f;},c={};e.Marionette=c;c.$=e.$;var i=Array.prototype.slice;c.extend=e.Model.extend;c.getOption=function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]};var p=function(a,b,f){return f.toUpperCase()},q=/(^|:)(\w)/gi;c.triggerMethod=function(a){var b=this["on"+a.replace(q,
p)];d.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(d.isFunction(b))return b.apply(this,d.tail(arguments))};var m=function(a){a._isShown&&a._isRendered&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};c.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;m(a)});a.listenTo(a,"render",function(){a._isRendered=!0;m(a)})};var r=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){var d=a[c];d||l("Method '"+c+"' was configured as an event handler, but does not exist.");
a.listenTo(b,f,d,a)})},s=function(a,b,c,d){a.listenTo(b,c,d,a)},t=function(a,b,c,j){j=j.split(/\s+/);d.each(j,function(d){a.stopListening(b,c,a[d],a)})},u=function(a,b,c,d){a.stopListening(b,c,d,a)},n=function(a,b,c,j,e){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,f){d.isFunction(c)?j(a,b,f,c):e(a,b,f,c)}))};c.bindEntityEvents=function(a,b,c){n(a,b,c,s,r)};c.unbindEntityEvents=function(a,b,c){n(a,b,c,u,t)};c.Callbacks=function(){this._deferred=c.$.Deferred();this._callbacks=[]};d.extend(c.Callbacks.prototype,
{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(c,d){b&&(c=b);a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=c.$.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,a.ctx)},this)}});c.Controller=function(a){this.triggerMethod=c.triggerMethod;this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};c.Controller.extend=c.extend;d.extend(c.Controller.prototype,
e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});c.Region=function(a){this.options=a||{};this.el=c.getOption(this,"el");if(!this.el){var b=Error("An 'el' must be specified for a region.");b.name="NoElError";throw b;}this.initialize&&(b=Array.prototype.slice.apply(arguments),this.initialize.apply(this,b))};d.extend(c.Region,{buildRegion:function(a,b){var c="string"===typeof a,j="string"===typeof a.selector,e="undefined"===typeof a.regionType,g="function"===
typeof a;if(!g&&!c&&!j)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;c&&(h=a);a.selector&&(h=a.selector);g&&(i=a);!g&&e&&(i=b);a.regionType&&(i=a.regionType);c=new i({el:h});a.parentEl&&(c.getEl=function(b){var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c}});d.extend(c.Region.prototype,e.Events,{show:function(a){this.ensureEl();var b=a.isClosed||d.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();
a.render();(f||b)&&this.open(a);this.currentView=a;c.triggerMethod.call(this,"show",a);c.triggerMethod.call(a,"show")},ensureEl:function(){if(!this.$el||0===this.$el.length)this.$el=this.getEl(this.el)},getEl:function(a){return c.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),c.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();
delete this.$el}});c.Region.extend=c.extend;var o=c.Controller.extend({constructor:function(a){this._regions={};c.Controller.prototype.constructor.call(this,a)},addRegions:function(a,b){var c={};d.each(a,function(a,e){"string"===typeof a&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var g=this.addRegion(e,a);c[e]=g},this);return c},addRegion:function(a,b){var f;f=d.isObject(b);var j=d.isString(b),e=!!b.selector;f=j||f&&e?c.Region.buildRegion(b,c.Region):d.isFunction(b)?c.Region.buildRegion(b,
c.Region):b;this._store(a,f);this.triggerMethod("region:add",a,f);return f},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){d.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){d.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var a=Array.prototype.slice.call(arguments);c.Controller.prototype.close.apply(this,a)},_store:function(a,b){this._regions[a]=
b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=d.size(this._regions)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){o.prototype[a]=function(){var b=[d.values(this._regions)].concat(d.toArray(arguments));return d[a].apply(d,b)}});c.RegionManager=
o;c.TemplateCache=function(a){this.templateId=a};d.extend(c.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new c.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=i.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=
this.compileTemplate(a)},loadTemplate:function(a){var b=c.$(a).html();(!b||0===b.length)&&l("Could not find template: '"+a+"'","NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});c.Renderer={render:function(a,b){if(!a){var d=Error("Cannot render the template since it's false, null or undefined.");d.name="TemplateNotFoundError";throw d;}return("function"===typeof a?a:c.TemplateCache.get(a))(b)}};c.View=e.View.extend({constructor:function(a){d.bindAll(this,"render");var b=
Array.prototype.slice.apply(arguments);this.options=d.extend({},this.options,a);this.events=this.normalizeUIKeys(d.result(this,"events"));e.View.prototype.constructor.apply(this,b);c.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:c.triggerMethod,getTemplate:function(){return c.getOption(this,"template")},mixinTemplateHelpers:function(a){var a=a||{},b=c.getOption(this,"templateHelpers");d.isFunction(b)&&(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){if("undefined"!==
typeof a)return d.each(d.keys(a),function(b){var c=b.split("@ui.");2===c.length&&(a[c[0]+this.ui[c[1]]]=a[b],delete a[b])},this),a},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,function(b,c){var e=d.isObject(b),g=e?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,j=e?b.stopPropagation:d;(e?b.preventDefault:c)&&c&&c.apply(a);j&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},
this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);c.bindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.bindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;d.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();d.extend(b,a,c);e.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,
a);c.unbindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.unbindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){!this.isClosed&&!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}});c.ItemView=c.View.extend({constructor:function(){c.View.prototype.constructor.apply(this,i.call(arguments))},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);
this.triggerMethod("item:before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate(),a=c.Renderer.render(b,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),c.View.prototype.close.apply(this,i.call(arguments)),this.triggerMethod("item:closed"))}});c.CollectionView=c.View.extend({itemViewEventPrefix:"itemview",
constructor:function(a){this._initChildViewStorage();c.View.prototype.constructor.apply(this,i.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer);this.initRenderBuffer();this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,
this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){c.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",
this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();this.collection&&0<this.collection.length?this.showCollection():this.showEmptyView();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=
this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return c.getOption(this,"emptyView")},getItemView:function(){var a=c.getOption(this,"itemView");a||l("An `itemView` must be specified","NoItemViewError");return a},addItemView:function(a,b,f){var e=c.getOption(this,"itemViewOptions");d.isFunction(e)&&(e=
e.call(this,a,f));a=this.buildItemView(a,b,e);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,f);this._isShown&&c.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(a){var b=c.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var d=i.call(arguments);d[0]=b+":"+d[0];d.splice(1,0,a);c.triggerMethod.apply(this,d)},this)},renderItemView:function(a,b){a.render();
this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},checkEmpty:function(){(!this.collection||0===this.collection.length)&&this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,
b){a.isBuffering?a.elBuffer.appendChild(b.el):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new k},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),c.View.prototype.close.apply(this,i.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}});c.CompositeView=c.CollectionView.extend({constructor:function(){c.CollectionView.prototype.constructor.apply(this,
i.call(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=c.getOption(this,"itemView")||this.constructor;a||l("An `itemView` must be specified","NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());
return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(c.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a=
{},a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate();return c.Renderer.render(b,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b){a.isBuffering?a.elBuffer.appendChild(b.el):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b;(b=c.getOption(a,"itemViewContainer"))?(b=d.isFunction(b)?b():b,b=a.$(b),0>=b.length&&l("The specified `itemViewContainer` was not found: "+
a.itemViewContainer,"ItemViewContainerMissingError")):b=a.$el;return a.$itemViewContainer=b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});c.Layout=c.ItemView.extend({regionType:c.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);c.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();
var a=Array.prototype.slice.apply(arguments);return c.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);c.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},
_buildRegions:function(a){var b=this,d={regionType:c.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,d)},_initializeRegions:function(a){this._initRegionManager();a=d.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new c.RegionManager;this.listenTo(this.regionManager,
"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});c.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,i.call(arguments));this.options=a||{};var b=c.getOption(this,"appRoutes"),d=this._getController();this.processAppRoutes(d,b)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,
b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return c.getOption(this,"controller")},_addAppRoute:function(a,b,c){var e=a[c];if(!e)throw Error("Method '"+c+"' was not found on the controller");this.route(b,c,d.bind(e,a))}});c.Application=function(a){this._initRegionManager();this._initCallbacks=new c.Callbacks;this.vent=new g.EventAggregator;this.commands=new g.Commands;this.reqres=new g.RequestResponse;this.submodules={};d.extend(this,
a);this.triggerMethod=c.triggerMethod};d.extend(c.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",
a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var d=i.call(arguments);d.unshift(this);return c.Module.create.apply(c.Module,d)},_initRegionManager:function(){this._regionManager=new c.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,
"region:remove",function(a){delete this[a]})}});c.Application.extend=c.extend;c.Module=function(a,b){this.moduleName=a;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;this.triggerMethod=c.triggerMethod};d.extend(c.Module.prototype,e.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),
this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,c.triggerMethod.call(this,"before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),c.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,
b){if(a){var f=d.flatten([this,this.app,e,c,c.$,d,b]);a.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new c.Callbacks;this._finalizerCallbacks=new c.Callbacks}});d.extend(c.Module,{create:function(a,b,c){var e=a,g=i.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=c;d.each(b,function(b,c){var d=e;e=this._getModule(d,b,a);this._addModuleDefinition(d,e,h[c],g)},this);return e},_getModule:function(a,b,d){var e=a[b];e||(e=new c.Module(b,d),a[b]=
e,a.submodules[b]=e);return e},_addModuleDefinition:function(a,b,c,e){var g;d.isFunction(c)?(g=c,c=!0):d.isObject(c)?(g=c.define,c=c.startWithParent):c=!0;g&&b.addDefinition(g,e);b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});c.Wreqr=g;c.ChildViewContainer=k});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone', location = 'jira-issue-navigator-components-module/libs/backbone.js' */
define("jira/components/libs/backbone",["require"],function(e){"use strict";var n=e("atlassian/libs/factories/backbone-1.0.0"),r=e("jira/components/libs/underscore"),i=e("jquery");return n(r,i)});
//# sourceMappingURL=backbone-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/marionette-1.4.1.js' */
define("jira/components/libs/marionette-1.4.1",["require"],function(e){"use strict";var i=e("atlassian/libs/factories/marionette-1.4.1"),n=e("jira/components/libs/backbone"),r=e("jira/components/libs/underscore");return i(r,n)});
//# sourceMappingURL=marionette-1.4.1-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Mixins.js' */
define("jira/components/libs/marionette-1.4.1/mixins",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore");return{listenAndRethrow:function(e,i){i=[].concat(i),t.each(i,function(i){this.listenTo(e,i,function(){this.trigger.apply(this,[i].concat(t.toArray(arguments)))},this)},this)},triggerPreventable:function(e,i){var n=t.defaults({},i||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0}});return this.trigger(e,n),n}}}),AJS.namespace("JIRA.Marionette.Mixins",null,require("jira/components/libs/marionette-1.4.1/mixins"));
//# sourceMappingURL=Mixins-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/LinkRegion.js' */
define("jira/components/libs/marionette-1.4.1/linkregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.append(e.$el.children()),e.setElement(this.$el)}})}),AJS.namespace("JIRA.Marionette.LinkRegion",null,require("jira/components/libs/marionette-1.4.1/linkregion"));
//# sourceMappingURL=LinkRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/ReplaceRegion.js' */
define("jira/components/libs/marionette-1.4.1/replaceregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.replaceWith(e.el)}})}),AJS.namespace("JIRA.Marionette.ReplaceRegion",null,require("jira/components/libs/marionette-1.4.1/replaceregion"));
//# sourceMappingURL=ReplaceRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Controller.js' */
define("jira/components/libs/marionette-1.4.1/controller",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),r=e("jira/components/libs/marionette-1.4.1"),o=e("jira/components/libs/marionette-1.4.1/mixins"),t=r.Controller.extend({});return n.extend(t.prototype,o),t}),AJS.namespace("JIRA.Marionette.Controller",null,require("jira/components/libs/marionette-1.4.1/controller"));
//# sourceMappingURL=Controller-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/ItemView.js' */
define("jira/components/libs/marionette-1.4.1/itemview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1");return t.ItemView.extend({renderTemplate:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e);var i=this.getTemplate(),n=t.Renderer.render(i,e);return t.$(n)},applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this.triggerMethod("applyToDom")},unwrapTemplate:function(){if(this.$el.parent().length){var e=this.$el.children();this.$el.replaceWith(e),this.setElement(e)}else this.setElement(this.$el.children())}})}),AJS.namespace("JIRA.Marionette.ItemView",null,require("jira/components/libs/marionette-1.4.1/itemview"));
//# sourceMappingURL=ItemView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/CollectionView.js' */
define("jira/components/libs/marionette-1.4.1/collectionview",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1"),t=e("jira/components/libs/marionette-1.4.1/itemview");return n.CollectionView.extend({_appendHtmlWithIndex:function(e,n,t){var i=e.children(),o=i.length;t<=0?e.prepend(n.$el):!o||t>=o?e.append(n.$el):n.$el.insertBefore(i.eq(t))},appendHtml:function(e,n,t){this._appendHtmlWithIndex(e.$el,n,t)},unwrapTemplate:function(){t.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CollectionView",null,require("jira/components/libs/marionette-1.4.1/collectionview"));
//# sourceMappingURL=CollectionView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/CompositeView.js' */
define("jira/components/libs/marionette-1.4.1/compositeview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/collectionview"),n=e("jira/components/libs/marionette-1.4.1/itemview");return t.CompositeView.extend({appendHtml:function(e,t,n){i.prototype._appendHtmlWithIndex(this.getItemViewContainer(e),t,n)},unwrapTemplate:function(){n.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CompositeView",null,require("jira/components/libs/marionette-1.4.1/compositeview"));
//# sourceMappingURL=CompositeView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Layout.js' */
define("jira/components/libs/marionette-1.4.1/layout",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jira/components/libs/marionette-1.4.1"),n=e("jira/components/libs/marionette-1.4.1/mixins"),o=i.Layout.extend({applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this._reInitializeRegions(),this.triggerMethod("applyToDom")}});return t.extend(o.prototype,n),o}),AJS.namespace("JIRA.Marionette.Layout",null,require("jira/components/libs/marionette-1.4.1/layout"));
//# sourceMappingURL=Layout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Application.js' */
define("jira/components/libs/marionette-1.4.1/application",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/marionette-1.4.1");return n.Application.extend({constructor:function(t){n.Application.call(this,t)},start:function(t){t&&t.forceStop===!1||this.stop(),n.Application.prototype.start.call(this,t)},stop:function(){i.invoke(this.submodules,"stop")}})}),AJS.namespace("JIRA.Marionette.Application",null,require("jira/components/libs/marionette-1.4.1/application"));
//# sourceMappingURL=Application-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/AppModule.js' */
define("jira/components/libs/marionette-1.4.1/appmodule",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/mixins"),r=function(){this.definition=this.definition.bind(this)};return r.extend=t.extend,n.extend(r.prototype,{create:function(){throw new Error("create() must be implemented by AppModules")},generateMasterRequest:!1,name:"",commands:{},requests:{},events:[],definition:function(e,t){var i=this.name,r=this;if(!i)throw new Error("'name' must be defined by AppModules");e.addInitializer(function(){function e(e){n.isFunction(e)&&(e=e(s));var t={};return n.each(e,function(e,n){e===!0&&(e=s[n].bind(s)),n=n&&i?i+":"+n:i,t[n]=e}),t}function o(e,t){n.isFunction(t)&&(t=t(s)),n.each(t,function(t){var r=i+":"+t;e.listenTo(s,t,function(){this.trigger.apply(this,[r].concat(n.toArray(arguments)))})})}var s=r.create.apply(r,n.toArray(arguments)),a=e(r.commands),u=e(r.requests);r.generateMasterRequest&&n.extend(u,e({"":function(){return s}})),t.commands.setHandlers(a),t.reqres.setHandlers(u),o(t,r.events)})}}),n.extend(r.prototype,i),r}),AJS.namespace("JIRA.Marionette.AppModule",null,require("jira/components/libs/marionette-1.4.1/appmodule"));
//# sourceMappingURL=AppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/DialogView.js' */
define("jira/components/libs/marionette-1.4.1/dialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),s=i("jira/components/libs/marionette-1.4.1/itemview"),o=i("aui/message"),r=i("jira/dialog/form-dialog"),a=i("jquery"),n=i("jira/ajs/ajax/smart-ajax"),d=i("jira/dialog/dialog"),l=i("jira/components/utils/ajshelper");return s.extend({dialog:null,template:a.noop,_generateDialog:function(){var i=this.serializeData(),s=this.getTemplate(),o={id:this.id,content:function(e){e(s(i))},submitHandler:this._generateSubmissionXHR.bind(this)},a=t.getOption(this,"dialogOptions");return e.isFunction(a)&&(a=a.apply(this)),new r(e.extend(o,a))},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.dialog.show(),this.$el=this.dialog.get$popup(),a(this.dialog).on("Dialog.hide",function(i,e,t){t!==d.HIDE_REASON.cancel&&t!==d.HIDE_REASON.escape||this.close()}.bind(this)),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(a(this.dialog).off("Dialog.hide"),this.dialog.hide(!0),this.dialog.destroy(),this.isClosed=!0,this.triggerMethod("close"),a("#search-header-view button.save-as-new-filter").focus(),this.remove())}},_generateSubmissionXHR:function(i,s){i.preventDefault();var o=this.dialog.$form,r=t.getOption(this,"formToRequestData");e.isFunction(r)&&(r=r.call(this,o));var a=n.makeRequest({type:o.attr("method"),url:o.attr("action"),contentType:"application/json",dataType:"json",processData:!1,data:JSON.stringify(r)}).done(s).done(this._onSubmitSuccess.bind(this)).fail(this._onSubmitError.bind(this));return a},_onSubmitSuccess:function(i){this.triggerMethod("submit:success",i),this.close()},_onSubmitError:function(i){this.dialog.getButtonsContainer().find("input").removeAttr("disabled"),this.dialog.hideFooterLoadingIndicator(),this.dialog.$form.removeClass("submitting"),this._showErrorFromXHR(i),this.triggerMethod("submit:error")},_displayFieldErrors:function(i){var t=this.dialog.$popup;e.each(i,function(i,e){t.find("#"+e).after("<div class='error'>"+l.escapeHtml(i)+"</div>")})},_displayGenericErrors:function(i){var t=this.dialog.$popup.find(".aui-messages");e.each(i,function(i){var e={closeable:!0,timeout:5};e.body=l.escapeHtml(i),e.shadowed=!1,o.error(t,e)})},_displayXHRErrors:function(i){var e=this.dialog.$popup.find(".aui-messages");e.append(n.buildDialogErrorContent(i,!0))},_showErrorFromXHR:function(i){this._removeErrorMessages();var e;try{e=JSON.parse(i.responseText)}catch(t){e=null}e?(this._displayFieldErrors(e.errors),this._displayGenericErrors(e.errorMessages)):this._displayXHRErrors(i)},_removeErrorMessages:function(){this.dialog.$popup.find(".error").remove(),this.dialog.$popup.find(".aui-messages").empty()}})}),AJS.namespace("JIRA.Marionette.DialogView",null,require("jira/components/libs/marionette-1.4.1/dialogview"));
//# sourceMappingURL=DialogView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/InlineDialogView.js' */
define("jira/components/libs/marionette-1.4.1/inlinedialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),n=i("jira/components/libs/marionette-1.4.1/itemview"),o=i("jquery"),s=i("aui/inline-dialog");return n.extend({dialog:null,template:o.noop,_getDialogOptions:function(){var i={noBind:!0},n=t.getOption(this,"dialogOptions")||{};return e.isFunction(n)&&(n=n.apply(this)),n=e.extend({},i,n),n.hideCallback=function(){this.close()}.bind(this),n},_getTrigger:function(){var i=t.getOption(this,"trigger");return e.isFunction(i)&&(i=i.apply(this)),i},_generateDialog:function(){var i=this.serializeData(),e=this.getTemplate(),t=this._getDialogOptions(),n=this._getTrigger();return new s(n,this.id,function(t,n,o){t.html(e(i)),o()},t)},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.$el=this.dialog,this.id=this.dialog.id,this.dialog.show(),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(this.dialog.hide(),this.isClosed=!0,this.triggerMethod("close"),this.remove())}}})}),AJS.namespace("JIRA.Marionette.InlineDialogView",null,require("jira/components/libs/marionette-1.4.1/inlinedialogview"));
//# sourceMappingURL=InlineDialogView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:lib', location = 'jira-issue-navigator-components-module/namespaces.js' */
JIRA.Components=JIRA.Components||{},JIRA.Issues=JIRA.Issues||{},JIRA.Events=JIRA.Events||{};
//# sourceMappingURL=namespaces-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-2014.09.03-factory', location = 'atlassian-jslibs/factories/brace/2014.09.03/brace-2104.09.03-factory.js' */
(function(j){define("atlassian/libs/factories/brace-2014.09.03",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="2014.09.03";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==
""+a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?
b:p(a)?new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));
h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=
w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=
e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=c.uniq(e.namedEvents.concat(b[d]))}else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+
d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=
function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;
if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g))throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,a))throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=
g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:brace', location = 'jira-issue-navigator-components-module/libs/brace.js' */
define("jira/components/libs/brace",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/brace-2014.09.03"),s=e("jira/components/libs/backbone"),n=e("jira/components/libs/underscore");return r(n,s)}),AJS.namespace("JIRA.Issues.Brace",null,require("jira/components/libs/brace"));
//# sourceMappingURL=brace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'jira-issue-navigator-components-module/lib/jquery.hoverIntent.min.js' */
// jshint ignore: start
/*eslint-disable*/
/**
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
(function ($) {
  $.fn.hoverIntent = function (f, g) {
    var cfg = { sensitivity: 7, interval: 100, timeout: 0 };cfg = $.extend(cfg, g ? { over: f, out: g } : f);var cX, cY, pX, pY;var track = function track(ev) {
      cX = ev.pageX;cY = ev.pageY;
    };var compare = function compare(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);if (Math.abs(pX - cX) + Math.abs(pY - cY) < cfg.sensitivity) {
        $(ob).unbind("mousemove", track);ob.hoverIntent_s = 1;return cfg.over.apply(ob, [ev]);
      } else {
        pX = cX;pY = cY;ob.hoverIntent_t = setTimeout(function () {
          compare(ev, ob);
        }, cfg.interval);
      }
    };var delay = function delay(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s = 0;return cfg.out.apply(ob, [ev]);
    };var handleHover = function handleHover(e) {
      var ev = jQuery.extend({}, e);var ob = this;if (ob.hoverIntent_t) {
        ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
      }if (e.type == "mouseenter") {
        pX = ev.pageX;pY = ev.pageY;$(ob).bind("mousemove", track);if (ob.hoverIntent_s != 1) {
          ob.hoverIntent_t = setTimeout(function () {
            compare(ev, ob);
          }, cfg.interval);
        }
      } else {
        $(ob).unbind("mousemove", track);if (ob.hoverIntent_s == 1) {
          ob.hoverIntent_t = setTimeout(function () {
            delay(ev, ob);
          }, cfg.timeout);
        }
      }
    };return this.bind('mouseenter', handleHover).bind('mouseleave', handleHover);
  };
})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'jira-issue-navigator-components-module/util/TipsyView.js' */
define("jira/issues/tipsy",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/brace"),s=t("jquery");s.fn.tooltip||(s.fn.tooltip=s.noop,s.fn.tipsy=s.noop);var o=n.View.extend({events:{click:"hide"},initialize:function(t){i.isFunction(t.showCondition)?this.shouldShow=t.showCondition:t.showCondition?this.shouldShow=function(){return this.$el.filter(t.showCondition).length>0}.bind(this):this.shouldShow=function(){return!0},this.tipsy=this.$el.tooltip(i.extend({trigger:"manual"},t.tipsy)),this.hoverIntent(t.intents)},hoverIntent:function(t){return this.tipsy&&this.tipsy.hoverIntent(i.extend({interval:200,over:this.show.bind(this),out:this.hide.bind(this)},t)),this},show:function(){this.shouldShow()&&this.tipsy&&this.$el.tipsy("show")},hide:function(){this.tipsy&&this.$el.tipsy("hide")},remove:function(){this.hide(),this.$el.removeData("tipsy")}});return o.revalidate=function(){return s.fn.tipsy.revalidate()},o.autoBounds=function(){return s.fn.tipsy.autoBounds.apply(s.fn.tipsy,arguments)},o});
//# sourceMappingURL=TipsyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'jira-issue-navigator-components-module/util/namespace.js' */
AJS.namespace("JIRA.Issues.Tipsy",null,require("jira/issues/tipsy"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/CatchExceptions.js' */
!function(n){"use strict";var t=function(n){return function(){try{n.apply(this,arguments)}catch(t){}return this}};n.fn.htmlCatchExceptions=t(n.fn.html),n.fn.appendCatchExceptions=t(n.fn.append),n.fn.prependCatchExceptions=t(n.fn.prepend),n.catchExceptions=function(t){return n("<div>").htmlCatchExceptions(t).children()}}(AJS.$);
//# sourceMappingURL=CatchExceptions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/RecurringPromise.js' */
!function(){"use strict";jQuery.RecurringPromise=function(i){return this instanceof jQuery.RecurringPromise?(this._parent=i,this._doneCallbacks=new jQuery.Callbacks,this._failCallbacks=new jQuery.Callbacks,void(this._alwaysCallbacks=new jQuery.Callbacks)):new jQuery.RecurringPromise},jQuery.RecurringPromise.prototype={add:function(i){var n=new jQuery.Deferred;n.original=i;var t=this._getPending();return this._abortIfPending(t),this._setPending(n),i.done(function(){n===this._getPending()&&(n.resolveWith(this,arguments),this._doneCallbacks.fireWith(this,arguments))}.bind(this)),i.fail(function(){n===this._getPending()&&(n.rejectWith(this,arguments),this._failCallbacks.fireWith(this,arguments))}.bind(this)),i.always(function(){n===this._getPending()&&this._alwaysCallbacks.fireWith(this,arguments)}.bind(this)),n.promise()},done:function(i){return this._doneCallbacks.add(i),this},fail:function(i){return this._failCallbacks.add(i),this},always:function(i){return this._alwaysCallbacks.add(i),this},reset:function(){this._abortIfPending(this._getPending()),this._setPending(null)},sub:function(){return new jQuery.RecurringPromise(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(i){this._parent?this._parent._setPending(i):this._pending=i},_abortIfPending:function(i){i&&"pending"===i.state()&&(i.reject("abort"),jQuery.isFunction(i.original.abort)&&i.original.abort())}}}();
//# sourceMappingURL=RecurringPromise-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/ConcurrentDeferred.js' */
jQuery.ConcurrentDeferred=function(n){"use strict";var e,r=new jQuery.Deferred,t=function(n){e=n,n.done(function(){e===n&&r.resolve.apply(r,arguments)}).fail(function(){e===n&&r.reject.apply(r,arguments)})};return t(n),jQuery.extend(r,{update:function(n){if(!this.isPending())throw"Cannot update non-pending ConcurrentDeferred";var r=e;return t(n),jQuery.isFunction(r.abort)&&r.abort(),this},isPending:function(){return"pending"===this.state()}}),r};
//# sourceMappingURL=ConcurrentDeferred-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/ScrollLock.js' */
!function(e){"use strict";var l=30;e.fn.scrollLock=function(i,n){"string"!=typeof i&&(n=i,i=null),n||(n=l),this.on("DOMMouseScroll mousewheel",i,function(l){l.preventDefault();var i;l.originalEvent.wheelDelta&&(i=l.originalEvent.wheelDelta/120),l.originalEvent.detail&&(i=-l.originalEvent.detail/3),e.isNumeric(i)&&(this.scrollTop-=i*n)})}}(AJS.$);
//# sourceMappingURL=ScrollLock-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:uri', location = 'jira-issue-navigator-components-module/libs/uri.js' */
define("jira/components/libs/uri",["require"],function(i){"use strict";return i("atlassian/libs/uri-1.14.1")});
//# sourceMappingURL=uri-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:scrollintoview', location = 'jira-issue-navigator-components-module/lib/scrollintoview-1.8.js' */
!function(t){var e={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},o={duration:0,direction:"y"},r=/^(?:html)$/i,l=function(e,o){o=o||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var r=!(!document.defaultView||!document.defaultView.getComputedStyle),l={top:parseFloat(r?o.borderTopWidth:t.css(e,"borderTopWidth"))||0,left:parseFloat(r?o.borderLeftWidth:t.css(e,"borderLeftWidth"))||0,bottom:parseFloat(r?o.borderBottomWidth:t.css(e,"borderBottomWidth"))||0,right:parseFloat(r?o.borderRightWidth:t.css(e,"borderRightWidth"))||0};return{top:l.top,left:l.left,bottom:l.bottom,right:l.right,vertical:l.top+l.bottom,horizontal:l.left+l.right}},i=function(e){var o=t(window),i=r.test(e[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:l(e[0]),scroll:{top:(i?o:e).scrollTop(),left:(i?o:e).scrollLeft()},scrollbar:{right:i?0:e.innerWidth()-e[0].clientWidth,bottom:i?0:e.innerHeight()-e[0].clientHeight},rect:function(){var t=e[0].getBoundingClientRect();return{top:i?0:t.top,left:i?0:t.left,bottom:i?e[0].clientHeight:t.bottom,right:i?e[0].clientWidth:t.right}}()}};t.fn.extend({scrollIntoViewForAuto:function(l){l=t.extend({},o,l),l.direction=e["string"==typeof l.direction&&l.direction.toLowerCase()]||e.both;var c="";l.direction.x===!0&&(c="horizontal"),l.direction.y===!0&&(c=c?"both":"vertical");var n=this.eq(0),s=n.closest(":scrollable("+c+")");if(s.length>0){s=s.eq(0);var d={e:i(n),s:i(s)},h={top:d.e.rect.top-(d.s.rect.top+d.s.border.top),bottom:d.s.rect.bottom-d.s.border.bottom-d.s.scrollbar.bottom-d.e.rect.bottom,left:d.e.rect.left-(d.s.rect.left+d.s.border.left),right:d.s.rect.right-d.s.border.right-d.s.scrollbar.right-d.e.rect.right},a={};l.direction.y===!0&&(h.top<0?a.scrollTop=d.s.scroll.top+h.top-30:h.top>0&&h.bottom<0&&(a.scrollTop=d.s.scroll.top+Math.min(h.top,-h.bottom)+30)),l.direction.x===!0&&(h.left<0?a.scrollLeft=d.s.scroll.left+h.left:h.left>0&&h.right<0&&(a.scrollLeft=d.s.scroll.left+Math.min(h.left,-h.right))),t.isEmptyObject(a)?t.isFunction(l.complete)&&l.complete.call(s[0]):(r.test(s[0].nodeName)&&(s=t("html,body")),s.animate(a,l.duration).eq(0).queue(function(e){t.isFunction(l.complete)&&l.complete.call(s[0]),e()}))}return this}});var c={auto:!0,scroll:!0,visible:!1,hidden:!1};t.extend(t.expr[":"],{scrollable:function(t,o,l,i){var n=e["string"==typeof l[3]&&l[3].toLowerCase()]||e.both,s=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle,d={x:c[s.overflowX.toLowerCase()]||!1,y:c[s.overflowY.toLowerCase()]||!1,isRoot:r.test(t.nodeName)};if(!d.x&&!d.y&&!d.isRoot)return!1;var h={height:{scroll:t.scrollHeight,client:t.clientHeight},width:{scroll:t.scrollWidth,client:t.clientWidth},scrollableX:function(){return(d.x||d.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(d.y||d.isRoot)&&this.height.scroll>this.height.client}};return n.y&&h.scrollableY()||n.x&&h.scrollableX()}})}(jQuery);
//# sourceMappingURL=scrollintoview-1.8-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:browser', location = 'jira-issue-navigator-components-module/util/Browser.js' */
define("jira/components/util/browser",function(){"use strict";return{locationReload:function(o){window.location.reload(o)}}});
//# sourceMappingURL=Browser-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/PanelModel.js' */
define("jira/components/issueviewer/entities/panel",["require"],function(t){"use strict";var e=t("jira/components/libs/brace"),i=t("jira/util/events"),n=t("jira/components/issueviewer/eventtypes");return e.Model.extend({namedAttributes:["entity","updateLocked"],initialize:function(){i.bind(n.LOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!0)}.bind(this)),i.bind(n.UNLOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!1)}.bind(this))},update:function(t,e,i){this.getUpdateLocked()||(this.set("entity",t),this.trigger("updated",e,i))}})});
//# sourceMappingURL=PanelModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/PanelsCollection.js' */
define("jira/components/issueviewer/entities/panels",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panel");return n.Collection.extend({model:t,update:function(e,n){this.each(function(n){var t=n.id,s=i.any(e,function(e){return e.id===t});s||this.remove(n)},this),i.each(e,function(e,i){var t=this.get(e.id);t?t.update(e,n.fieldsInProgress,n.fieldsSaved):this.add({id:e.id,entity:e},{at:i})},this)}})});
//# sourceMappingURL=PanelsCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/PanelsGroupModel.js' */
define("jira/components/issueviewer/entities/panelsgroup",["require"],function(e){"use strict";var n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panels");return n.Model.extend({namedAttributes:["leftPanels","rightPanels","infoPanels"],defaults:function(){return{leftPanels:new t([]),rightPanels:new t([]),infoPanels:new t([])}},update:function(e,n){this.get("leftPanels").update(e.leftPanels,n),this.get("rightPanels").update(e.rightPanels,n),this.get("infoPanels").update(e.infoPanels,n)}})});
//# sourceMappingURL=PanelsGroupModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/IssueModel.js' */
define("jira/components/issueviewer/entities/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),s=e("jira/components/issueviewer/entities/panelsgroup");return t.Model.extend({namedEvents:["updated"],namedAttributes:["entity","id","key","panels","projectKey","projectType","projectId"],defaults:function(){return{entity:{},panels:new s}},update:function(e,t){var s=!1;e.issue&&(this.updateFromEntity(e.issue),s=!0),e.panels&&(this.getPanels().update(e.panels,t),s=!0),s&&this.trigger("updated",t)},resetToDefault:function(){this.clear(),this.set(this.defaults())},updateFromEntity:function(e){this.set({id:e.id,key:e.key,entity:e,projectKey:e.project?e.project.key:null,projectType:e.project?e.project.projectType:null,projectId:e.project?e.project.id:null})},isCurrentIssue:function(e){return this.get("id")===e},hasIssue:function(){return this.has("id")},updateIssueQuery:function(e){this.hasIssue()&&(this.getEntity().viewIssueQuery=e)},getIssueInfo:function(){return{issueId:this.getId(),issueKey:this.getKey(),projectId:this.getProjectId(),projectKey:this.getProjectKey(),projectType:this.getProjectType()}}})});
//# sourceMappingURL=IssueModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssuePanelView.js' */
define("jira/components/issueviewer/views/issuepanel",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/components/issueviewer/legacy/issuefieldutil"),n=e("jquery"),r=e("jira/components/libs/marionette-1.4.1/itemview"),l=e("jira/components/issueviewer/templates");return r.extend({template:l.Body.issuePanel,modelEvents:{updated:"update"},update:function(e,r){function l(){return i.any(e,function(e){return 1===o.find(t.getFieldSelector(e)).length})}function s(){var e=o.find(document.activeElement).length>0,i=!!n.browser.msie&&n.browser.version<=8;if(i){var t=o[0].nextSibling,r=o[0].parentNode;o.remove(),t?n(t).before(d):n(r).append(d)}else o.replaceWith(d);e&&u.trigger("replacedFocusedPanel"),u.setElement(d)}function a(e){var t=u.model.id,n=u.$el;u.trigger("panelRendered",t,n,o),i.each(e,function(e){u.trigger("individualPanelRendered",e)})}var d=this.renderTemplate(),o=this.$el,u=this;if(0!==o.find("iframe").length||d.text()!==o.text()){if(l()){var c=[];i.each(r,function(e){var i=o.find(t.getFieldSelector(e));if(1===i.length){var n=d.find(t.getFieldSelector(e));1===n.length?(i.replaceWith(n),c.push(n)):i.closest("li, dl").remove()}}),a(c)}else s(),a([u.$el]);this.bindUIElements()}},onRender:function(){this.setElement(this.$el.children());var e=this.model.getEntity().styleClass;e&&this.$el.addClass(e),this.trigger("individualPanelRendered",this.$el)},applyToDom:function(){this.trigger("individualPanelRendered",this.$el)},serializeData:function(){return this.model.getEntity()}})});
//# sourceMappingURL=IssuePanelView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssuePanelsView.js' */
define("jira/components/issueviewer/views/issuepanels",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/collectionview"),t=e("jira/components/issueviewer/views/issuepanel"),n=e("jira/components/issueviewer/entities/panel");e("jira/featureflags/feature-manager");return i.extend({itemView:t,_updatingFromDom:!1,appendHtml:function(e,i,t){var n=e.$el.children(),o=n.length;t<=0?e.$el.prepend(i.$el):!o||t>=o?e.$el.append(i.$el):i.$el.insertBefore(n.eq(t))},applyToDom:function(){var e=this;this._updatingFromDom=!0,this.$el.children().filter(".legacy-jira-fe-module").each(function(){var i=this.id;"addcomment"===i&&(i="addcommentmodule"),e.collection.add(new n({id:i,entity:{id:i}}))}),this._updatingFromDom=!1},renderItemView:function(e){this._updatingFromDom?e.applyToDom():i.prototype.renderItemView.apply(this,arguments)},buildItemView:function(e){var t=i.prototype.buildItemView.apply(this,arguments);return this._updatingFromDom&&t.setElement(document.getElementById(e.id)),t}})});
//# sourceMappingURL=IssuePanelsView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueBodyView.js' */
define("jira/components/issueviewer/views/issuebody",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout"),i=e("jira/components/libs/marionette-1.4.1/linkregion"),n=e("jira/components/issueviewer/templates");return s.extend({tagName:"div",className:"issue-body-content",regions:{leftPanels:{selector:".issue-main-column",regionType:i},rightPanels:{selector:".issue-side-column",regionType:i},infoPanels:{selector:".issue-body",regionType:i}},template:n.Body.issueBody})});
//# sourceMappingURL=IssueBodyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueOpsbarView.js' */
define("jira/components/issueviewer/views/issueopsbar",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/itemview"),t=e("jira/components/issueviewer/templates"),n=e("jira/issues/tipsy"),s=e("jira/components/issueviewer/analytics/issueopsbar"),o=e("jira/components/issueviewer/services/optinnewissueviewservice"),r=function(){return AJS.$('meta[name="ajs-new-jira-issue-view-toggle-value"]').attr("content")};return i.extend({template:t.IssueOpsbar.simpleOpsbar,ui:{shareButton:".viewissue-share",exportButton:"#viewissue-export",loginButton:"#ops-login-lnk",commentButton:"#comment-issue",operationsMoreDropDown:"#opsbar-operations_more_drop"},serializeData:function(){return{issue:this.model.getEntity()}},onApplyToDom:function(){this.onRender()},onRender:function(){new s(this),this.ui.loginButton.hide(),this.ui.commentButton.addClass("inline-comment"),new n({el:this.ui.shareButton,showCondition:":not(.active)"}),new n({el:this.ui.exportButton,showCondition:":not(.active)",tipsy:{gravity:"ne"}});var e=r();"OFF"===e&&(this.ui.operationsMoreDropDown.append(t.IssueOpsbar.newIssueViewItem()),this.$el.find("#turn-on-new-issue-view").on("click",function(e){e.preventDefault(),o.optIn()}))}})});
//# sourceMappingURL=IssueOpsbarView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueHeaderView.js' */
define("jira/components/issueviewer/views/issueheader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/layout"),s=e("jira/components/issueviewer/templates"),t=e("jira/components/libs/underscore"),r=e("jira/components/issueviewer/views/issueopsbar"),n=e("jira/util/data/meta"),a=e("jquery");return i.extend({className:"issue-header js-stalker",id:"stalker",tagName:"header",template:s.Header.issueHeader,modelEvents:{updated:"update"},regions:{opsbar:".command-bar",pager:"#issue-header-pager"},serializeData:function(){return{issue:this.model.getEntity(),isNewIssueViewEnabled:JIRA.Issues.Api.isNewIssueViewEnabled()}},update:function(e){if(e.initialize)this._updateWindowTitle();else{var i=t.include(e.fieldsInProgress,"summary");i?this.renderOpsBar():this.render()}this.trigger("updated")},onApplyToDom:function(){var e=new r({model:this.model});e.setElement(this.opsbar.el),this.opsbar.attachView(e),this.opsbar.currentView.applyToDom(),this._updateWindowTitle()},onBeforeRender:function(){this.previousElement=this.$el},onRender:function(){this.renderOpsBar(),this._updateWindowTitle(),this.trigger("panelRendered","header",this.$el,this.previousElement||a(""))},renderOpsBar:function(){this.opsbar.show(new r({model:this.model})),this.trigger("individualPanelRendered",this.$el)},_updateWindowTitle:function(){var e=this.model.getEntity(),i=e.key,s=e.summary,t=n.get("app-title");t&&s&&i&&(document.title="["+i+"] "+s+" - "+t)},focus:function(){this.$el.find("a").eq(0).focus()},initialFocus:function(){this.$el.focus()}})});
//# sourceMappingURL=IssueHeaderView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueView.js' */
define("jira/components/issueviewer/views/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1/layout"),i=e("jira/components/issueviewer/templates"),s=e("jira/components/libs/marionette-1.4.1/replaceregion"),n=e("jira/components/issueviewer/actions"),o=e("jquery");return t.extend({template:i.layout,className:"issue-container",regions:{header:{selector:".issue-header-container",regionType:s},body:{selector:".issue-body-container",regionType:s}},modelEvents:{updated:"update"},showLoading:function(){this.$el.addClass("loading")},hideLoading:function(){this.$el.removeClass("loading")},focusComment:function(e){this.$("#activitymodule .focused").removeClass("focused"),this.$("#comment-"+e).addClass("focused"),this.$(".js-stalker").trigger("refresh")},serializeData:function(){return{isNewIssueViewEnabled:JIRA.Issues.Api.isNewIssueViewEnabled()}},update:function(e){this._closeDropdowns(),e.initialize&&!e.stopRendering&&this.render(),e.reason&&e.reason.action===n.EDIT_COMMENT&&this.focusComment(e.reason.meta.commentId),this._bringViewIssueElementIntoView()},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1"),this._bringViewIssueElementIntoView()},onApplyToDom:function(){this._bringViewIssueElementIntoView(),this.trigger("render")},_bringViewIssueElementIntoView:function(){var e=this.model.get("entity").viewIssueQuery;if(e){var t;e.focusedCommentId?t="#comment-"+e.focusedCommentId:(e.attachmentSortBy||e.attachmentOrder||e.attachmentViewMode)&&(t="#attachmentmodule"),t&&o(t).scrollIntoView({marginBottom:200,marginTop:200})}},_closeDropdowns:function(){this.$el.find(".aui-dropdown2-trigger.active").trigger("aui-button-invoke")}})});
//# sourceMappingURL=IssueView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/error/ErrorView.js' */
define("jira/components/issueviewer/views/error",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout");return s.extend({className:"issue-container",regions:{pager:"#issue-header-pager"},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1")}})});
//# sourceMappingURL=ErrorView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/error/ErrorGenericView.js' */
define("jira/components/issueviewer/views/errorgeneric",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/error"),i=e("jira/components/issueviewer/templates"),n=e("jira/components/util/browser");return r.extend({template:i.Error.Generic,events:{"click #issue-error-reload-button":function(){n.locationReload()}}})});
//# sourceMappingURL=ErrorGenericView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/error/ErrorNotFoundView.js' */
define("jira/components/issueviewer/views/errornotfound",["require"],function(r){"use strict";var e=r("jira/components/issueviewer/views/error"),i=r("jira/components/issueviewer/templates"),n=r("jira/components/libs/underscore");return e.extend({template:i.Error.DoesNotExist,initialize:function(r){r=r||{},this.showReturnToSearchOnError=r.showReturnToSearchOnError},triggers:{"click #return-to-search":"returnToSearch"},serializeData:function(){var r=this.showReturnToSearchOnError;return n.isFunction(r)&&(r=r()),{hideReturnToSearch:!r}}})});
//# sourceMappingURL=ErrorNotFoundView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/controllers/IssueController.js' */
define("jira/components/issueviewer/controllers/issue",["require"],function(e){"use strict";var i=e("jira/issue"),s=e("jira/components/issueviewer/views/issuebody"),t=e("jira/components/issueviewer/views/issueheader"),n=e("jira/components/issueviewer/views/issuepanels"),o=e("jira/components/issueviewer/views/issue"),r=e("jira/components/libs/marionette-1.4.1/controller"),d=e("jira/components/libs/underscore"),a=e("jquery"),h=e("jira/components/issueviewer/services/breadcrumbs-project-hider"),l=i.CommentForm;return r.extend({initialize:function(e){this.model=e.model,this.shouldRenderIssueHeader="undefined"==typeof e.shouldRenderIssueHeader||e.shouldRenderIssueHeader},_createViews:function(){this.view=this._createMainView(),this.bodyView=this._createBodyView(),this.headerView=this._createHeaderView(),this.leftPanelsView=this._createPanelsView(this.model.getPanels().getLeftPanels()),this.rightPanelsView=this._createPanelsView(this.model.getPanels().getRightPanels()),this.infoPanelsView=this._createPanelsView(this.model.getPanels().getInfoPanels())},_createMainView:function(){var e=new o({model:this.model,el:this.$el});return this.listenTo(e,{render:function(){this.trigger("renderMainView",e.$el)}}),e},_createBodyView:function(){return new s({model:this.model})},_createHeaderView:function(){var e=new t({model:this.model});return this.listenAndRethrow(e,"panelRendered"),this.listenTo(e,{updated:function(){this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},this.model.getIssueInfo()),this._replaceBreadcrumbsView()},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)}}),this._replaceBreadcrumbsView(),e},_replaceBreadcrumbsView:function(){var e=function(e,i){h.bindToSidebarEvents(e,a(".issue-header-content"),i)};JIRA.API.getSidebar().done(function(i){e(i,!1)}),JIRA.API.getNavigationApi().then(function(i){e(i,!0)})},_createPanelsView:function(e){var i=new n({collection:e});return this.listenTo(i,{"itemview:replacedFocusedPanel":function(){this.trigger("replacedFocusedPanel")},"itemview:panelRendered":function(e,i,s,t){this.trigger("panelRendered",i,s,t)},"itemview:individualPanelRendered":function(e,i){this.trigger("individualPanelRendered",i)}}),i},createView:function(){this._createViews(),this.listenTo(this.view,"render",function(){var e=JIRA.Issues.Api.isNewIssueViewEnabled();this.shouldRenderIssueHeader&&(this.view.header.show(this.headerView),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},d.extend(this.model.getIssueInfo(),{loadedFromDom:!1}))),e?AJS.$("body").trigger("new-issue-body-container-for-gin-rendered"):(this.view.body.show(this.bodyView),this.bodyView.leftPanels.show(this.leftPanelsView),this.bodyView.rightPanels.show(this.rightPanelsView),this.bodyView.infoPanels.show(this.infoPanelsView))})},createViewFromDom:function(){this._createViews(),this.listenTo(this.view,"applyToDom",function(){function e(e,i,s){i.setElement(s),i.applyToDom(),e.attachView(i)}e(this.view.body,this.bodyView,this.view.$el.find(".issue-body-content")),e(this.view.body,this.headerView,this.view.$el.find("#stalker")),e(this.bodyView.leftPanels,this.leftPanelsView,this.bodyView.$el.find(this.bodyView.leftPanels.el)),e(this.bodyView.rightPanels,this.rightPanelsView,this.bodyView.$el.find(this.bodyView.rightPanels.el)),e(this.bodyView.infoPanels,this.infoPanelsView,this.bodyView.$el.find(this.bodyView.infoPanels.el)),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},d.extend(this.model.getIssueInfo(),{loadedFromDom:!0}))})},setElement:function(e){this.$el=e,this.view&&this.view.setElement(e)},applyToDom:function(e){e.id=+e.id,this.model.updateFromEntity(e),this.createViewFromDom(),this.view.applyToDom()},show:function(){this.view?this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},d.extend(this.model.getIssueInfo(),{loadedFromDom:!1})):(this.createView(),this.view.render()),this.view.hideLoading()},close:function(){this.view&&this.view.close(),this.hideLoading(),delete this.view},hideLoading:function(){this.view&&this.view.hideLoading()},showLoading:function(){this.view&&this.view.showLoading()},canDismissComment:function(){var e,i=l;if(!i.getForm().data("dismissed")&&(e=i.handleBrowseAway())){if(!confirm(e))return i.focus(),!1;i.getForm().data("dismissed",!0)}return!0},applyResponsiveDesign:function(){if(this.$el){var e=this.$el.width();this.$el.toggleClass("skinny",e<900),this.$el.toggleClass("very-skinny",e<600)}},focus:function(){this.view&&this.headerView.focus()},initialFocus:function(){this.view&&this.headerView.initialFocus()}})});
//# sourceMappingURL=IssueController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/controllers/ErrorController.js' */
define("jira/components/issueviewer/controllers/error",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/errorgeneric"),i=e("jira/components/issueviewer/views/errornotfound"),t=e("jira/components/libs/marionette-1.4.1/controller"),o=e("jira/components/issueviewer/utils");return t.extend({initialize:function(e){this.contextPath=e.contextPath,this.showReturnToSearchOnError=e.showReturnToSearchOnError},render:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorView(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorView(new r)}},applyToDom:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorViewFromDom(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorViewFromDom(new r)}},close:function(){this.view&&(this.view.close(),delete this.view)},setElement:function(e){this._$el=e,this.view&&this.view.setElement(e)},_renderErrorAuth:function(e){var r=this.contextPath+"/login.jsp?os_destination="+encodeURIComponent("/browse/"+e);window.location.replace(r)},_renderErrorView:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.render(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!1,issueId:null})},_renderErrorViewFromDom:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.applyToDom(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!0,issueId:null})},isRendered:function(){return Boolean(this.view)}})});
//# sourceMappingURL=ErrorController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/IssueLoaderService.js' */
define("jira/components/issueviewer/services/issueloader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/controller"),t=e("jquery"),n=e("jira/components/issueviewer/legacy/issuefieldutil");return i.extend({initialize:function(){this._promiseManager=new t.RecurringPromise,this._updatingPromise=this._promiseManager.sub(),this._updatingPromise.done(this._onUpdatingDone.bind(this)).fail(this._onUpdatingError.bind(this)),this._loadingPromise=this._promiseManager.sub(),this._loadingPromise.done(this._onLoadingDone.bind(this)).fail(this._onLoadingError.bind(this))},cancel:function(){this._promiseManager.reset()},update:function(e){function i(e){return function(){return{taskKey:e,data:arguments,startIssueLoad:new Date}}}var n,r=e.issueEntity,s=e.mergeIntoCurrent,a=e.viewIssueData,o=!!e.detailView,d=new t.Deferred;return n=this._updatingPromise.add(a.get(r.key,!0,{issueEntity:r,loadingDeferred:d,mergeIntoCurrent:s,startIssueLoad:new Date,detailView:o}).pipe(i("issue"),i("issue"))),n.fail(function(){d.reject.apply(d,arguments)}),d.promise()},load:function(e){var i=e.issueEntity,n=e.viewIssueData,r=!!i.detailView;this._currentlyLoading=!0;var s=new t.Deferred;return this._loadingPromise.add(n.get(i.key,!1,{issueEntity:i,loadFields:!1,loadingDeferred:s,startIssueLoad:new Date,detailView:r})),s.promise()},isLoading:function(){return this._currentlyLoading},_onLoadingDone:function(e,i,t){var r=t.issueEntity;r.id=e.issue.id,r.key=e.issue.key,e.pager||(e.pager=r.pager),n.transformFieldHtml(e),this._currentlyLoading=!1,i.loadDuration=new Date-t.startIssueLoad,this.trigger("issueLoaded",e,i,t),t.loadingDeferred.resolve(e,i,t)},_onUpdatingDone:function(e){var i=e.data[1];i&&(i.isUpdate=!0),this._onLoadingDone.apply(this,e.data)},_onLoadingError:function(e,i,t){var n=t.issueEntity,r={issueId:n.id,issueKey:n.key,response:e};this._currentlyLoading=!1;var s;switch(e.status){case 401:s="auth";break;case 403:s="forbidden";break;case 404:s="notfound";break;default:s="generic"}this.trigger("error",s,r),t.loadingDeferred.reject()},_onUpdatingError:function(e){this._onLoadingError.apply(this,e.data)}})});
//# sourceMappingURL=IssueLoaderService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/MetadataService.js' */
define("jira/components/issueviewer/services/metadataservice",["require"],function(e){"use strict";var t=e("jira/util/data/meta"),a=e("jira/components/libs/underscore");return{removeIssueMetadata:function(e){var s=e.getEntity();s.metadata?a.each(s.metadata,function(e,a){t.set(a,null)}):t.get("issue-key")&&t.set("issue-key",null)},addIssueMetadata:function(e){var s=e.getEntity();a.each(s.metadata,function(e,a){t.set(a,e)})}}});
//# sourceMappingURL=MetadataService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/LinksCapturer.js' */
define("jira/components/issueviewer/linkscapturer",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/util/events"),n=e("jira/ajs/layer/inline-layer"),s=e("jquery"),o=e("jira/components/libs/marionette-1.4.1/controller"),a=e("jira/message"),r=e("jira/ajs/ajax/smart-ajax"),u=e("jira/components/libs/uri");return o.extend({initialize:function(){i.bindAll(this,"_onRefineViewEvents","_offRefineViewEvents","_handleReviewViewEvents")},capture:function(e){e!==this.el&&(this.el=e,this.linksToOtherIssues(),this.linksToReorderSubtasks(),this.viewOptionsForCurrentIssue())},linksToOtherIssues:function(){this._isRapidBoardPage()||s(this.el).on("simpleClick","a.issue-link[data-issue-key]",function(i){i.preventDefault();var t=s(i.target).closest("a").data("issue-key"),n=t.split("-")[0];JIRA.API.getSidebar().done(function(e){e.updateData({projectKey:n},!0)}),e("jira/navigation").then(function(e){e.setProjectRootView()}),this.trigger("linkToIssue",{issueKey:t})}.bind(this))},linksToReorderSubtasks:function(){s(this.el).on("simpleClick",".subtask-reorder a",function(e){e.target.href&&(e.preventDefault(),s.ajax({type:"GET",data:{disableRedirect:!0},url:e.target.href}).done(function(){this.trigger("reorderSubtasks")}.bind(this)).fail(function(e){a.showErrorMsg(r.buildSimpleErrorContent(e),{closeable:!0})}))}.bind(this))},_handleReviewViewEvents:function(e){var i=e.currentTarget;s(i).parents("ul").find("a.aui-checked").removeClass("aui-checked"),s(i).addClass("aui-checked");var t=new u(i.href).query(!0),n=this.triggerPreventable("refineViewer",{query:t});n.isPrevented&&e.preventDefault()},_onRefineViewEvents:function(e,i){s(i).on("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_offRefineViewEvents:function(e,i){s(i).off("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_location:function(){return window.location},_isRapidBoardPage:function(){return this._location().href.indexOf("RapidBoard.jspa")>=0},viewOptionsForCurrentIssue:function(){t.bind(n.EVENTS.show,this._onRefineViewEvents),t.bind(n.EVENTS.hide,this._offRefineViewEvents)},destroy:function(){t.unbind(n.EVENTS.show,this._onRefineViewEvents),t.unbind(n.EVENTS.hide,this._offRefineViewEvents)}})});
//# sourceMappingURL=LinksCapturer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/BreadcrumbsProjectHider.js' */
define("jira/components/issueviewer/services/breadcrumbs-project-hider",["require"],function(e){function n(e,n){var o=n?e.isCollapsed():e.isCollapsed(!0);o?i():r()}function r(){var e=d.find(t);e.length>0&&(a=e.detach())}function i(){var e=d.find(s);a&&0===e.find(t).length&&a.prependTo(e)}var o=(e("jquery"),{}),t=".breadcrumbs-project-name",s=".aui-nav-breadcrumbs",a=null,d=null;return o.bindToSidebarEvents=function(e,o,t){if(t){if(!e.isInProjectContext())return}else if(!e.isProjectSidebar(!0))return;d=o,n(e,t),t?(e.onCollapseEnd(i),e.onExpandEnd(r)):(e.off(e.events.SIDEBAR_COLLAPSE_END,i,!0),e.on(e.events.SIDEBAR_COLLAPSE_END,i,!0),e.off(e.events.SIDEBAR_EXPAND_END,r,!0),e.on(e.events.SIDEBAR_EXPAND_END,r,!0))},o});
//# sourceMappingURL=BreadcrumbsProjectHider-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/OptInNewIssueViewService.js' */
define("jira/components/issueviewer/services/optinnewissueviewservice",["require"],function(e){"use strict";var t=e("jira/ajs/ajax/smart-ajax"),a=e("jira/util/users/logged-in-user"),n=e("wrm/context-path"),s=n(),r={"Content-Type":"application/json",Accept:["application/json","text/javascript","*/*"]},i=function(){var e=function(){return t.makeRequest({type:"PUT",dataType:"json",data:JSON.stringify({isEnabled:!0}),processData:!1,credentials:"same-origin",headers:r,url:s+"/rest/greenhopper/1.0/profile/labs-panel/issue-details-popup"})},n=a.accountId(),i="jira.user.issue.should.show.welcome.message",o=s+"/rest/api/latest/user/properties/"+i+"?accountId="+encodeURIComponent(n),u=function(){return t.makeRequest({type:"PUT",dataType:"json",data:"true",processData:!1,credentials:"same-origin",headers:r,url:o})};return Promise.all([e(),u()]).then(function(){})["catch"](function(){})["finally"](function(){window.location.reload()})};return{optIn:i}});
//# sourceMappingURL=OptInNewIssueViewService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/IssueEventBus.js' */
define("jira/components/issueviewer/legacy/issueeventbus",["require"],function(e){"use strict";var s=e("jira/components/libs/brace");return s.Model.extend({namedAttributes:["issueId"],namedEvents:["save","saveSuccess","savingStarted","saveError","panelRendered","replacedFocusedPanel","fieldSubmitted","dismiss","refreshIssue","issueRefreshed","updateFromDom","updateStatusColor","quickEditKeyPressed","openFocusShifter"]})});
//# sourceMappingURL=IssueEventBus-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/AsyncData.js' */
define("jira/components/issueviewer/legacy/asyncdata",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),n=e("jira/components/libs/underscore"),i=e("jquery");return t.Evented.extend({namedEvents:["change"],initialize:function(e){this.data={},this.pendings={},this.accessIndex=0,e&&(this.disableCache=e.disableCache,this.maxCacheSize=e.maxCacheSize)},get:function(e,t,a){var r=new i.Deferred,s=this.disableCache?{}:this.data,h=function(t,i){var h=this._set(s,e,n.defaults(t,{accessIndex:this.accessIndex++}),!0,a),d=n.defaults({changed:h},i,s[e]);a&&a.mergeIntoCurrent&&(d.mergeIntoCurrent=!0),s[e]&&!s[e].error?r.resolve(s[e].value,d,a):r.reject(s[e]&&s[e].value,d,a)}.bind(this),d=function(t){var n=this.fetch(e,a);this.setPending(e,n,function(e){h({value:e,error:!1,updated:new Date},{initialLoad:t})},function(e){var n={error:!0,updated:new Date};void 0!==e&&(n.value=e),h(n,{initialLoad:t,error:!0})})}.bind(this),u=function(){h({},{fromCache:!0})},c=function(){this.pendings[e].always(n.bind(h,this,{},{initialLoad:!0}))}.bind(this);return t||this.disableCache?d(!1):this.hasCached(e)?u():this.hasPending(e)?c():d(!0),r.promise()},setPending:function(e,t,n,a){return this.hasPending(e)?this.pendings[e].update(t):this.pendings[e]=new i.ConcurrentDeferred(t),this.pendings[e].done(function(e){n(e)}).fail(function(e){a(e)})},getIdByValue:function(e){var t;for(t in this.data)if(this.data[t].value===e)return t;return null},getMeta:function(e){return this.data[e]||{}},getAllCached:function(){var e={};return n.each(this.data,function(t,n){e[n]=t.value}),e},hasCached:function(e){var t=this.getMeta(e);return void 0!==t.value||t.error===!0},hasError:function(e){var t=this.getMeta(e);return t.error===!0},hasPending:function(e){var t=this.pendings[e];return!!t&&t.isPending()},set:function(e,t){return this._set(this.data,e,{value:t,updated:new Date},!0)},remove:function(e){return!!this.data[e]&&(delete this.data[e],this.triggerChange(),!0)},setError:function(e,t){var n={error:!0,updated:new Date};return void 0!==t&&(n.value=t),this._set(this.data,e,n,!0)},setMultiple:function(e){var t=new Date,i=!1;return n.each(e,function(e,a){e=n.pick(e,"value","error"),e.updated=t,this._set(this.data,a,e,!1)&&(i=!0)}.bind(this)),i&&this.triggerChange(),i},reset:function(e){this.data={},this.pendings={},this.accessIndex=0,e?this.setMultiple(e):this.triggerChange()},_set:function(e,t,i,a,r){this.disableCache&&e===this.data&&(e={});var s=e[t]?n.clone(e[t]):{},h=this.mergeFetchedAndCached(s,i,r?r:{},e[t]);return!a||e[t]&&!h&&e[t].error===s.error||e!==this.data||this.triggerChange(),!e[t]&&this.maxCacheSize&&n.keys(e).length===this.maxCacheSize?i.accessIndex&&(this._dropItem(e),e[t]=s):e[t]=s,h},_dropItem:function(e){var t=null;for(var n in e){if(!e[n].accessIndex){t=n;break}(null===t||e[n].accessIndex<e[t].accessIndex)&&(t=n)}null!==t&&delete e[t]},fetch:function(e){var t=this.getMeta(e),n=new i.Deferred;return!this.hasCached(e)||t.error?n.reject(t.value):n.resolve(t.value),n.promise()},mergeFetchedAndCached:function(e,t,i,a){return n.extend(e,t),!a||a.value!==e.value||a.error!==e.error}})});
//# sourceMappingURL=AsyncData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/ViewIssueData.js' */
define("jira/components/issueviewer/legacy/viewissuedata",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueviewer/legacy/asyncdata"),n=e("jira/util/data/meta"),t=e("jquery"),u=window.AJS.contextPath();return i.extend({initialize:function(e){e=e||{},i.prototype.initialize.call(this,s.defaults(e||{},{disableCache:!1,maxCacheSize:n.get("viewissue-max-cache-size")}))},fetch:function(e,i){var n={issueKey:e,decorator:"none",prefetch:!!i.prefetch};if(n.shouldUpdateCurrentProject=!i.detailView,i.mergeIntoCurrent&&this.data&&this.data[e]&&this.data[e].value&&this.data[e].value.issue){n.lastReadTime=this.data[e].value.readTime,n.fields=[],s.each(this.data[e].value.fields,function(e){n.fields.push(e.id+":"+e.contentId)}),n.issue=["summary:"+this.data[e].value.issue.summaryContentId],n.links=[];var a=function c(e){s.each(e.links,function(e){n.links.push(e.id+":"+e.contentId)}),s.each(e.groups,function(e){c(e)})};s.each(this.data[e].value.issue.operations.linkGroups,function(e){a(e)}),n.panels=[];var r=this,o=function(i){s.each(r.data[e].value.panels[i],function(e){n.panels.push(e.completeKey+":"+e.contentId)})};o("leftPanels"),o("rightPanels"),o("infoPanels")}"loadFields"in i&&(n.loadFields=i.loadFields),i.issueEntity&&s.defaults(n,i.issueEntity.viewIssueQuery);var d="true"===t('meta[name="ajs-new-jira-issue-view-gin-enabled"]').attr("content");if(d&&i.detailView){var l=t.Deferred();return l.resolve({issue:{id:void 0,key:n.issueKey,status:{name:void 0}}})}var p=t.ajax({url:u+"/secure/AjaxIssueAction!default.jspa",headers:{"X-SITEMESH-OFF":!0},data:n,type:i.mergeIntoCurrent?"POST":"GET"}),l=p.pipe(function(e){return JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireSuccessSlaEvent&&JIRA.Issues.Application.fireSuccessSlaEvent("getLegacyIssueViewData"),e},function(e){return JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireFailSlaEvent&&e.status>=500&&JIRA.Issues.Application.fireFailSlaEvent("getLegacyIssueViewData",{reason:"get-legacy-issue-view-data-failed-with-status-code",statusCode:e.status}),s.pick(e,"status","responseText","statusText")});return l.abort=function(){p.abort.apply(p,arguments)},l},mergeFetchedAndCached:function(e,i,n){if(this._skipMerging(e,i,n))return s.extend(e,i),null;s.each(s.pairs(i),function(s){"value"!==s[0]&&(e[s[0]]=s[1])});var t=i.value,u=[],a=[],r=[];s.each(t.removedContentIds,function(e,i){var n;"fields"===i?n=u:"panels"===i?n=a:"links"===i&&(n=r),n&&s.each(e,function(e){n.push(e)})});var o=t.fields,d=t.issue.operations.linkGroups,l=t.panels,p=t.issue.summary,c=t.issue.primaryActions,h=t.issue.transitions;if(this._nothingChanged(u,a,r,o,l,d,p))return null;var g={updated:{},added:{},deleted:{}},f=e.value,v=this._comparator;return(u.length>0||o.length>0)&&this._mergeFields(o,f,g,u),(a.length>0||l.leftPanels.length>0||l.rightPanels.length>0||l.infoPanels.length>0)&&this._mergePanels(l,f,g,a,v),(r.length>0||d.length>0)&&this._mergeLinks(d,f,g,r,v),p&&this._mergeSummary(t,f,g),c&&this._mergePrimaryActions(t,f,g),h&&this._mergeTransitions(t,f,g),f.issue.status=t.issue.status,g},_skipMerging:function(e,i,n){return s.isEmpty(e)||!n.mergeIntoCurrent||!e.value||!e.value.issue||i.error===!0},_nothingChanged:function(e,s,i,n,t,u,a){return 0===e.length&&0===s.length&&0===i.length&&0===n.length&&0===u.length&&0===t.leftPanels.length&&0===t.rightPanels.length&&0===t.infoPanels.length&&!a},_mergeFields:function(e,i,n,t){n.added.fields=[],n.updated.fields=[],n.deleted.fields=[],s.each(e,function(e){var t=s.find(i.fields,function(s){return s.id===e.id});t?n.updated.fields.push(e.id):n.added.fields.push(e.id)});var u=e;s.each(i.fields,function(e){s.contains(t,e.id)?n.deleted.fields.push(e.id):s.contains(n.updated.fields,e.id)||u.push(e)}),i.fields=u},_mergeSummary:function(e,s,i){i.updated.issue=["summary"],s.issue.summary=e.issue.summary,s.issue.summaryContentId=e.issue.summaryContentId},_mergePrimaryActions:function(e,s,i){i.updated.issue=["primaryActions"],s.issue.primaryActions=e.issue.primaryActions},_mergeTransitions:function(e,s,i){i.updated.issue=["transitions"],s.issue.transitions=e.issue.transitions},_mergePanels:function(e,i,n,t,u){n.added.panels={},n.updated.panels={},n.deleted.panels={};var a=function(a){n.added.panels[a]=[],n.updated.panels[a]=[],n.deleted.panels[a]=[],s.each(e[a],function(e){var t=s.find(i.panels[a],function(s){return s.id===e.id});t?n.updated.panels[a].push(e.id):n.added.panels[a].push(e.id)});var r=e[a];s.each(i.panels[a],function(e){s.contains(t,e.completeKey)?n.deleted.panels[a].push(e.id):s.contains(n.updated.panels[a],e.id)||r.push(e)}),r.sort(u),i.panels[a]=r};a("leftPanels"),a("rightPanels"),a("infoPanels")},_mergeLinks:function(e,s,i,n,t){i.added.groups={},i.updated.groups={},i.deleted.groups={};var u=[];this._mergeOperationsLinks(e,s,u,i,n,t),this._mergeToolsLinks(e,s,u,i,n,t),s.issue.operations.linkGroups=u},_mergeOperationsLinks:function(e,i,n,t,u,a){t.added.groups["view.issue.opsbar"]=[],t.updated.groups["view.issue.opsbar"]=[],t.deleted.groups["view.issue.opsbar"]=[];var r=s.find(i.issue.operations.linkGroups,function(e){return"view.issue.opsbar"===e.id}),o=s.find(e,function(e){return"view.issue.opsbar"===e.id}),d={},l={};if(o&&s.each(o.groups,function(e){var i=s.find(r.groups,function(s){return e.id===s.id});if(i?t.updated.groups["view.issue.opsbar"].push(e.id):t.added.groups["view.issue.opsbar"].push(e.id),s.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id}),e.groups&&e.groups.length>0){var n=e.groups[0];s.each(n.groups,function(e){s.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id})})}}),r){var p=[];o&&s.each(o.groups,function(e){s.contains(t.added.groups["view.issue.opsbar"],e.id)&&p.push(e)}),s.each(r.groups,function(e){var i=[],n=null;o&&(n=s.find(o.groups,function(s){return e.id===s.id}),n&&s.each(n.links,function(n){var t=s.find(e.links,function(e){return n.id===e.id});t||i.push(n)}));var r=!1,c=function(e,i){s.each(e.links,function(n){var t=l[n.id];t&&t!==e.id?r=!0:d[n.id]?i.push(d[n.id]):s.contains(u,n.id)?r=!0:i.push(n)})};c(e,i),i.sort(a),e.links=i;var h=null;n&&n.groups&&n.groups.length>0&&(h=n.groups[0]);var g=null;if(e.groups&&e.groups.length>0){g=e.groups[0];var f=[];h&&s.each(h.groups,function(e){var i=s.find(g.groups,function(s){return e.id===s.id});i||f.push(e)}),s.each(g.groups,function(e){var i=[];if(h){var n=s.find(h.groups,function(s){return s.id===e.id});n&&s.each(n.links,function(n){var t=s.find(e.links,function(e){return n.id===e.id});t||i.push(n)})}c(e,i),i.length>0&&(i.sort(a),e.links=i,f.push(e))}),f.length>0?(f.sort(a),g.groups=f):(g=null,r=!0)}else h&&(g=n.groups[0]);e.groups=[],g&&(e.groups[0]=g),i.length>0||g?(p.push(e),r&&!s.contains(t.updated.groups["view.issue.opsbar"],e.id)&&t.updated.groups["view.issue.opsbar"].push(e.id)):t.deleted.groups["view.issue.opsbar"].push(e.id)}),p.length>0&&(p.sort(a),r.groups=p,n.push(r))}else o&&n.push(o);t.added.groups["view.issue.opsbar"].sort(),t.deleted.groups["view.issue.opsbar"].sort(),t.updated.groups["view.issue.opsbar"].sort()},_updatedLinks:function(e,i,n,t){function u(e){return!s.contains(n,e.id)}function a(i){return!s.findWhere(e,{id:i.id})}var r=s.chain(i).filter(a).union(e).filter(u).value();return r.sort(t),r},_collectAllLinks:function(e){var i=e.links||[],n=e.groups||[];return s.chain(n).map(this._collectAllLinks.bind(this)).flatten().union(i).value()},_mergeGroupLinks:function(e,i,n,t,u){s.map(e.groups||[],this._mergeGroupLinks.bind(this));var a=[],r=null;i&&i.groups&&i.groups.length>0&&(r=s.find(i.groups,function(s){return e.id===s.id})),r&&s.each(r.links,function(i){var n=s.find(e.links,function(e){return i.id===e.id});n||a.push(i)}),s.each(e.links,function(e){n[e.id]?a.push(n[e.id]):s.contains(t,e.id)||a.push(e)}),a.length>0&&(a.sort(u),e.links=a)},_mergeToolsLinks:function(e,i,n,u,a,r){u.updated.groups["jira.issue.tools"]=!1;var o=s.find(i.issue.operations.linkGroups,function(e){return"jira.issue.tools"===e.id}),d=s.find(e,function(e){return"jira.issue.tools"===e.id}),l={};if(d&&(u.updated.groups["jira.issue.tools"]=!0,l=s.indexBy(this._collectAllLinks(d),"id")),o){var p=d&&d.links||[],c=o.links||[];o.links=this._updatedLinks(p,c,a,r),o.groups&&o.groups.length>0?s.each(o.groups,function(e){this._mergeGroupLinks(e,d,l,a,r)}.bind(this)):d.groups&&d.groups.length>0&&(o.groups=t.extend(!0,{},d.groups)),n.push(o)}else d&&n.push(d)},_comparator:function(e,s){return e.weight&&s.weight?e.weight>s.weight?1:e.weight<s.weight?-1:0:e.weight&&!s.weight?1:!e.weight&&s.weight?-1:0},updateIssue:function(e,s){var i=this.getMeta(e);i&&i.value&&(i.value.fields=s.fields||{})}})});
//# sourceMappingURL=ViewIssueData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/IssueFieldUtil.js' */
define("jira/components/issueviewer/legacy/issuefieldutil",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jquery"),r={getFieldSelector:function(e){return"issuetype"===e?"#type-val":"fixVersions"===e?"#fixfor-val":"summary"===e?"#summary-val":"labels"===e?"#wrap-labels .value":"duedate"===e?"#due-date":"#"+e+"-val"},matchesFieldSelector:function(e){return 1===i(r.getFieldSelector(e)).length},transformFieldHtml:function(e){return e.fields=t.map(e.fields,function(e){var t=i("<div />").htmlCatchExceptions(e.editHtml);return 0!==t.find("input.radio,input.checkbox").length?t.find("legend").eq(0).remove():t.find("label").eq(0).remove(),{id:e.id,label:e.label,editHtml:t.html(),required:e.required,contentId:e.contentId}}),e},getAccessKeyModifier:function(){var e=i("#home_link_drop").attr("title"),t=/\(([\w\+]+)\+\w\)/i;return t.test(e)?t.exec(e)[1]:"Alt"}};return r});
//# sourceMappingURL=IssueFieldUtil-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/Utils.js' */
define("jira/components/issueviewer/utils",["require"],function(e){"use strict";var i=e("aui/inline-dialog"),r=e("jira/ajs/layer/inline-layer"),n=e("jquery");return{hideLightbox:function(){n.fancybox.close()},hideDropdown:function(){if(i.current&&"column-picker-dialog"!==i.current.id&&i.current.hide(),r.current){var e=r.current.options.offsetTarget();e instanceof n&&(e.is(":visible")||r.current.hide())}}}});
//# sourceMappingURL=Utils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/actions.js' */
define("jira/components/issueviewer/actions",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore");return n.extend(AJS.namespace("JIRA.Issues.Actions"),{EDIT_COMMENT:"editComment"})});
//# sourceMappingURL=actions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/eventtypes.js' */
define("jira/components/issueviewer/eventtypes",["require"],function(e){"use strict";var s=e("jira/util/events/types");return s.ISSUE_REFRESHED="issueRefreshed",s.PANEL_REFRESHED="panelRefreshed",s});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/analytics/IssueOpsbar.js' */
define("jira/components/issueviewer/analytics/issueopsbar",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),e=t("jquery"),n=t("jira/viewissue/analytics-utils"),r=t("jira/components/utils/ajshelper"),s=t("jira/components/analytics-tracker/tracker"),a=function(t){this.issueId=t.model.get("id"),this.$el=t.$el,this.bindEventsToOpsbar()};return a.prototype.triggerEvent=function(t){s.trackEvent("viewissue","opsbar.operation",t),r.trigger("analyticsEvent",{name:"kickass.opsbar.operation",data:t})},a.prototype._getParamsButtonMain=function(t,e,n){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n})},a.prototype._getParamsButtonSubmenu=function(t,e,n,r,s){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n,parentId:r.attr("id"),parentIdx:s})},a.prototype._getParamsCommon=function(){return{context:n.context()}},a.prototype.bindEventsToOpsbar=function(){var t=this.$el.find(".toolbar-analytics");t.each(function(t,i){var n=e(i),r=n.find("a.toolbar-trigger");r.click(function(i){this.triggerEvent(this._getParamsButtonMain(i,r,t))}.bind(this));var s=n.find("li.aui-list-item a");s.length>=1&&s.each(function(i,n){var s=e(n);s.click(function(e){this.triggerEvent(this._getParamsButtonSubmenu(e,s,i,r,t))}.bind(this))}.bind(this))}.bind(this))},a});
//# sourceMappingURL=IssueOpsbar-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/analytics/IssueUxMetrics.js' */
define("jira/components/issueviewer/analytics/issue-uxmetrics",["jquery","jira/components/analytics-tracker/tracker"],function(t,e){"use strict";return{trackPageMetrics:function(){var s=t("#assignee-val").text().trim().search("Unassigned")===-1,n=0!==t("#reporter-val").text().trim().length,i=t("#opsbar-opsbar-transitions .issueaction-workflow-transition").length,o=t("#description-val"),l=o.text().trim().length,a=o.height(),u=t("#details-module ul#issuedetails>li").length,r=t("#customfield-tabs ul.property-list>li.item").length,c=t("#customfield-tabs ul.property-list").length,m=t("#details-module #wrap-labels ul>li").length,d=m>0?m-1:0,h=t("#details-module ul#issuedetails>li li").length,p=t("#customfield-tabs ul.property-list>li.item li").length,g=t("ol#attachment_thumbnails>li").length,C=t(".issue-body-content .legacy-jira-fe-module.toggle-wrap"),b=C.not(":has(.ap-container)").length,y=C.has(".ap-container").length,v=t("#opsbar-operations_more_drop .aui-dropdown2-section .aui-list-item").length,f=t("#peoplemodule ul dl").length,w=t("#datesmodule ul dl").length,F={isAssigned:s,hasReporter:n,transitionsCount:i,descriptionCharacterCount:l,descriptionBlockHeight:a,customFieldTabsCount:c,systemFieldsCount:u,customFieldsCount:r,labelsCount:d,systemFieldChildItemsCount:h,customFieldChildItemsCount:p,attachmentsCount:g,nonConnectWebPanelsCount:b,connectWebPanelsCount:y,moreMenuItemCount:v,peopleModuleFieldsCount:f,datesModuleFieldsCount:w},_=t("#comment-tabpanel.active").length>0;_&&(F.visibleCommentsCount=t("#issue_actions_container .activity-comment").length,F.collapsedCommentsCount=t("#issue_actions_container .show-more-comments").attr("data-collapsed-count")||0),e.trackEvent("viewissue","uxmetrics",F)}}});
//# sourceMappingURL=IssueUxMetrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/IssueViewer.js' */
define("jira/components/issueviewer",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueviewer/actions"),r=e("jira/components/issueviewer/controllers/error"),t=e("jira/util/events"),o=e("jira/components/issueviewer/controllers/issue"),n=e("jira/components/issueviewer/legacy/issueeventbus"),u=e("jira/components/issueviewer/services/issueloader"),a=e("jira/components/issueviewer/entities/issue"),d=e("jquery"),l=e("jira/components/issueviewer/linkscapturer"),h=e("jira/components/libs/marionette-1.4.1/controller"),c=e("jira/util/data/meta"),m=e("jira/components/issueviewer/services/metadataservice"),g=e("jira/util/events/reasons"),p=window.JIRA,f=e("jira/components/issueviewer/eventtypes"),I=e("jira/components/issueviewer/utils"),C=e("jira/components/issueviewer/legacy/viewissuedata"),v=e("wrm/data"),w=e("jira/components/issueviewer/analytics/issue-uxmetrics"),E=(e("jira/featureflags/feature-manager"),window.AJS.contextPath()),R=function(){p.trace.apply(p,arguments)};return h.extend({namedEvents:["loadComplete","loadError","close","replacedFocusedPanel","linkToIssue"],initialize:function(e){var i=this;e=e||{},e.useJIRAEvents=e.useJIRAEvents!==!1,this.shouldRenderIssueHeader=e.shouldRenderIssueHeader,this.model=new a,this.eventBus=new n,this.viewIssueData=new C,this._buildIssueLoader(),this._buildLinksCapturer(),this._buildErrorController({showReturnToSearchOnError:e.showReturnToSearchOnError}),this._buildIssueController(),t.bind(f.REFRESH_ISSUE_PAGE,function(e,s,i){this.model.isCurrentIssue(s)&&this.refreshIssue(i)}.bind(this)),this.memoizedUxMetricsTracker=s.memoize(w.trackPageMetrics,function(){return i.model.getId()})},_buildIssueLoader:function(){this.issueLoader=new u,this.listenTo(this.issueLoader,"error",function(e,s){this.trigger("loadError",s),this.errorController.render(e,s.issueKey),this.removeIssueMetadata(),R("jira.issue.refreshed",{id:s.issueId}),this.options.useJIRAEvents&&t.trigger(f.ISSUE_REFRESHED,[s.issueId])}),this.listenTo(this.issueLoader,"issueLoaded",this._onIssueLoaded)},_buildLinksCapturer:function(){this.linksCapturer=new l,this.listenTo(this.linksCapturer,{linkToIssue:function(e){this.trigger("linkToIssue",e)},refineViewer:function(e){this.trigger("refineViewer",e)},reorderSubtasks:function(){this.issueController.showLoading(),this.refreshIssue({reason:i.UPDATE}).always(function(){this.issueController.hideLoading()}.bind(this))}})},_buildErrorController:function(e){e=e||{},this.errorController=new r({contextPath:E,showReturnToSearchOnError:e.showReturnToSearchOnError}),this.listenTo(this.errorController,"before:render",function(){this.issueController.close()}),this.listenTo(this.errorController,"returnToSearch",function(){this.trigger("close")}),this.listenAndRethrow(this.errorController,"render")},_buildIssueController:function(){this.issueController=new o({shouldRenderIssueHeader:this.shouldRenderIssueHeader,model:this.model}),this.listenAndRethrow(this.issueController,"replacedFocusedPanel"),this.listenTo(this.issueController,{render:function(e,s){I.hideDropdown(),this.errorController.close(),this.trigger("render",e,s),R("jira.psycho.issue.refreshed",{id:this.model.getId()}),this.memoizedUxMetricsTracker()},renderMainView:function(e){this.options.useJIRAEvents&&(t.trigger(f.NEW_CONTENT_ADDED,[e,g.pageLoad]),t.trigger(f.REFRESH_TOGGLE_BLOCKS,[this.model.getId()])),this.trigger("renderMainView",e,this.model.getId())},panelRendered:function(e,s,i){this.eventBus.triggerPanelRendered(e,s),this.options.useJIRAEvents&&t.trigger(f.PANEL_REFRESHED,[e,s,i]),this.trigger("panelRendered",e,s,i)},close:function(){I.hideDropdown()},individualPanelRendered:function(e){this.options.useJIRAEvents&&t.trigger(f.NEW_CONTENT_ADDED,[e,g.panelRefreshed]),this.trigger("individualPanelRendered",e)}})},_updateModel:function(e,s){this.model.update(e,s)},_onIssueLoaded:function(e,s,i){var r=i.issueEntity,o=!s.mergeIntoCurrent&&i.initialize!==!1,n=!this.model.isCurrentIssue(r.id),u=!!r.detailView,a=!JIRA.Issues.Api.isNewIssueViewEnabled();s.isUpdate&&!o||(this.model.resetToDefault(),this.errorController.close()),this._updateModel(e,{initialize:o,changed:s.changed,mergeIntoCurrent:s.mergeIntoCurrent,stopRendering:a}),s.isUpdate&&!o||this.issueController.close(),this.issueController.show(),s.fromCache&&this.refreshIssue(r,{fromCache:!0,mergeIntoCurrent:!s.error,detailView:u}),m.addIssueMetadata(this.model),r.bringToFocus&&r.bringToFocus(),this._triggerLoadComplete(n,s,r);var d={id:r.id};s.fromCache?R("jira.issue.loadFromCache",d):R("jira.issue.loadFromServer",d),R("jira.issue.refreshed",d),this.options.useJIRAEvents&&t.trigger(f.ISSUE_REFRESHED,[r.id])},_triggerLoadComplete:function(e,s,i){this.trigger("loadComplete",this.model,{isNewIssue:e,issueId:i.id,issueKey:i.key,duration:s.loadDuration,loadReason:s.fromCache?"issues-cache-refresh":void 0,fromCache:s.fromCache,issueRefreshedEvent:!!this.options.useJIRAEvents})},abortPending:function(){this.issueLoader.cancel()},canDismissComment:function(){return this.issueController.canDismissComment()},beforeHide:function(){I.hideLightbox(),I.hideDropdown(),this.abortPending(),this.removeIssueMetadata()},beforeShow:function(){m.addIssueMetadata(this.model)},getIssueId:function(){return this.model.getEntity().id||null},getIssueKey:function(){return this.model.getEntity().key||null},getProjectKey:function(){return this.model.get("projectKey")||null},getProjectType:function(){return this.model.get("projectType")||null},getProjectId:function(){return this.model.get("projectId")||null},_loadIssueFromDom:function(e){e.id&&e.id!==-1?this.issueController.applyToDom(s.extend({id:-1},e)):(this.errorController.applyToDom("notfound",e.key),this.trigger("loadError")),c.set("serverRenderedViewIssue",null);var i={id:this.getIssueId()};R("jira.issue.refreshed",i)},loadIssue:function(e){var s=c.get("serverRenderedViewIssue");return s?(e.project={id:v.claim("projectId"),key:v.claim("projectKey"),projectType:v.claim("projectType")},this.loadIssueRenderedByTheServer(e)):this.canDismissComment()&&e.key?(this.issueController.showLoading(),this.issueLoader.load({issueEntity:e,viewIssueData:this.viewIssueData})):(new d.Deferred).reject()},loadIssueRenderedByTheServer:function(e){var s=d("#key-val"),i=d("#summary-val");return e.id=s.attr("rel")||-1,e.summary=i.text(),this._loadIssueFromDom(e),this.trigger("loadComplete",this.model,{isNewIssue:!1,issueId:e.id,issueKey:e.key,duration:0,loadReason:void 0,fromCache:!1}),(new d.Deferred).resolve().promise()},refreshIssue:function(e){var i;return e=s.defaults({},e,{mergeIntoCurrent:!0}),this.model.hasIssue()?(i=this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:e.mergeIntoCurrent,detailView:e.detailView}),e.complete&&(i=i.done(e.complete).fail(e.complete)),this.issueController.showLoading()):i=(new d.Deferred).resolve().promise(),i},removeIssueMetadata:function(){m.removeIssueMetadata(this.model)},setContainer:function(e){this.linksCapturer.capture(e),this.errorController.setElement(e),this.issueController.setElement(e)},isCurrentlyLoading:function(){return this.issueLoader.isLoading()},updateIssueWithQuery:function(e){this.model.updateIssueQuery(e),this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:!0})},dismiss:function(){this.model.resetToDefault(),this.errorController.close(),this.issueController.close(),this.linksCapturer.destroy()},close:function(){this.canDismissComment()&&(this.dismiss(),this.trigger("close"))},applyResponsiveDesign:function(){this.issueController.applyResponsiveDesign()},isShowingError:function(){return this.errorController.isRendered()},focus:function(){this.issueController.focus()},initialFocus:function(){this.issueController.initialFocus()}})});
//# sourceMappingURL=IssueViewer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/IssueViewerAppModule.js' */
define("jira/components/issueviewer/appmodule",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),n=e("jira/components/issueviewer"),s=e("jira/components/libs/marionette-1.4.1/appmodule");return s.extend({name:"issueViewer",generateMasterRequest:!0,create:function(e){return e=r.defaults({},e,{showReturnToSearchOnError:function(){return!1}}),new n({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(){return{abortPending:!0,beforeHide:!0,beforeShow:!0,removeIssueMetadata:!0,updateIssueWithQuery:!0,close:!0,setContainer:!0,dismiss:!0}},requests:function(){return{loadIssue:!0,canDismissComment:!0,getIssueId:!0,getIssueKey:!0,refreshIssue:!0,isCurrentlyLoading:!0}},events:function(){return["loadComplete","loadError","close","render","replacedFocusedPanel","linkToIssue","refineViewer"]}})});
//# sourceMappingURL=IssueViewerAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/Issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),JIRA.Components.IssueViewer.Templates.layout=function(e,s){return'<div id="issue-content" class="issue-edit-form">'+(e.serverRenderedViewIssue?'<header id="stalker" class="issue-header js-stalker" tabindex="-1">'+JIRA.Components.IssueViewer.Templates.Header.issueHeader(e)+'</header><div class="issue-body-content">'+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels(e)+"</div>":'<div class="issue-header-container"></div>'+(e.isNewIssueViewEnabled?'<div id="new-issue-body-container"></div>':'<div class="issue-body-container" id="legacy-issue-body-container"></div>'))+"</div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueHeader.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Header&&(JIRA.Components.IssueViewer.Templates.Header={}),JIRA.Components.IssueViewer.Templates.Header.issueHeader=function(e,s){return'<div class="issue-header-content">'+aui.page.pageHeader({content:""+(e.issue.project?aui.page.pageHeaderImage({content:""+JIRA.Templates.Headers.projectAvatar({id:""+soy.$$escapeHtml(e.issue.project.id),projectKey:""+soy.$$escapeHtml(e.issue.project.key),projectName:""+soy.$$escapeHtml(e.issue.project.name),avatarUrl:""+soy.$$escapeHtml(e.issue.project.avatarUrls["48x48"]),avatarAlt:""+soy.$$escapeHtml(e.issue.project.name),isSystemAvatar:e.issue.project.systemAvatar})})+(e.isNewIssueViewEnabled?aui.page.pageHeaderMain({content:'<div id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'" class="hidden">'+soy.$$escapeHtml(e.issue.key)+"</div>"}):aui.page.pageHeaderMain({content:'<ol class="aui-nav aui-nav-breadcrumbs"><li class="breadcrumbs-project-name"><a id="project-name-val" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.project.key)+'">'+soy.$$escapeHtml(e.issue.project.name)+"</a></li>"+(e.issue.parent&&e.issue.parent.id?'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.parent.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.parent.key)+'" id="parent_issue_summary" title="'+soy.$$escapeHtml(e.issue.parent.summary)+'">'+soy.$$escapeHtml(e.issue.parent.key)+" "+soy.$$escapeHtml(e.issue.parent.summary)+"</a></li>":"")+'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.key)+'" id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'">'+soy.$$escapeHtml(e.issue.key)+'</a></li></ol><h1 id="summary-val">'+soy.$$escapeHtml(e.issue.summary)+"</h1>"})):"")+aui.page.pageHeaderActions({content:'<div id="issue-header-pager">'+(e.pager?JIRA.Components.IssueViewer.Templates.Header.pager(e.pager):"")+"</div>"})})+(e.isNewIssueViewEnabled?"":'<div class="command-bar">'+(e.serverRenderedViewIssue?JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar(e):"")+"</div>")+"</div>"},JIRA.Components.IssueViewer.Templates.Header.titleAttr=function(e,s){return""+(e.title?'title="'+soy.$$escapeHtml(e.title)+'"':e.label&&e.label.length&&e.label.length>25?'title="'+soy.$$escapeHtml(e.label)+'"':"")};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueBody.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Body&&(JIRA.Components.IssueViewer.Templates.Body={}),JIRA.Components.IssueViewer.Templates.Body.issueBody=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels({panels:!1,serverRenderedViewIssue:!1})},JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels=function(e,s){var i='<div class="aui-group issue-body"><div class="aui-item issue-main-column">';if(e.serverRenderedViewIssue)for(var a=e.panels.leftPanels,l=a.length,o=0;o<l;o++){var n=a[o];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(n)}if(i+='</div><div id="viewissuesidebar" class="aui-item issue-side-column">',e.serverRenderedViewIssue)for(var t=e.panels.rightPanels,r=t.length,d=0;d<r;d++){var u=t[d];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(u)}return i+="</div></div>"},JIRA.Components.IssueViewer.Templates.Body.issuePanel=function(e,s){var i="";if(e.renderHeader){i+="<div id="+soy.$$escapeHtml(e.id)+' class="legacy-jira-fe-module toggle-wrap"><div id="'+soy.$$escapeHtml(e.id)+'_heading" class="mod-header"><ul class="ops">';for(var a=e.headerLinks.links,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:n})+"</li>"}if(e.headerLinks.groups.length>0){i+='<li class="drop"><div class="aui-dd-parent"><a href="#" class="more-menu aui-button aui-button-subtle aui-icon aui-icon-small aui-iconfont-more js-default-dropdown" title="'+soy.$$escapeHtml("Options")+'"><span>'+soy.$$escapeHtml("Options")+'</span></a><div class="aui-dropdown-content aui-list">';for(var t=e.headerLinks.groups,r=t.length,d=0;d<r;d++){var u=t[d];i+=(u.header&&u.header.label?"<h5>"+soy.$$escapeHtml(u.header.label)+"</h5>":"")+"<ul "+(u.header&&u.header.id?'id="'+soy.$$escapeHtml(u.header.id)+'"':"")+'class="aui-list-section'+(u.header&&u.header.styleClass?" "+soy.$$escapeHtml(u.header.styleClass):"")+(0==d?" aui-first":"")+(d==r-1?" aui-last":"")+'">';for(var m=u.links,p=m.length,c=0;c<p;c++){var f=m[c];i+='<li class="aui-list-item">'+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:f,additionalStyleClass:"aui-list-item-link"})+"</li>"}i+="</ul>"}i+="</div></div></li>"}if(i+="</ul>",e.subpanelHtmls.length>0){i+='<div class="mod-header-panels">';for(var y=e.subpanelHtmls,v=y.length,I=0;I<v;I++){var h=y[I];i+='<div class="mod-header-panel">'+soy.$$filterNoAutoescape(h)+"</div>"}i+="</div>"}i+='<h2 class="toggle-title">'+soy.$$escapeHtml(e.label)+'</h2></div><div class="mod-content">'+soy.$$filterNoAutoescape(e.html)+"</div></div>"}else i+=soy.$$filterNoAutoescape(e.html);return i},JIRA.Components.IssueViewer.Templates.Body.errorsLoading=function(e,s){e=e||{};var i=""+(e.isTimeout?soy.$$escapeHtml("The Jira server could not be contacted. This may be a temporary glitch or the server may be down."):soy.$$escapeHtml("There were errors loading the issue."));if(e.errorMessages){i+="<ul>";for(var a=e.errorMessages,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+soy.$$escapeHtml(n)+"</li>"}i+="</ul>"}return i},JIRA.Components.IssueViewer.Templates.Body.focusShifter=function(e,s){return'<div class="aui-message closeable" id="focus-shifter"><label><span>'+soy.$$escapeHtml("viewissue.focusshifter")+'</span><div id="focus-shifter-content"></div></label><span class="aui-icon icon-close"></span></div>'},JIRA.Components.IssueViewer.Templates.Body.simpleLink=function(e,s){return"<a "+(e.link.id?' id="'+soy.$$escapeHtml(e.link.id)+'"':"")+'href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'"'+(e.link.styleClass||e.additionalStyleClass?'class="'+soy.$$escapeHtml(e.link.styleClass)+(e.additionalStyleClass?" "+soy.$$escapeHtml(e.additionalStyleClass):"")+'"':"")+(e.link.title?'title="'+soy.$$escapeHtml(e.link.title)+'"':"")+"><span>"+soy.$$escapeHtml(e.link.label)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueError.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Error&&(JIRA.Components.IssueViewer.Templates.Error={}),JIRA.Components.IssueViewer.Templates.Error.NoPermission=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.Generic(null)},JIRA.Components.IssueViewer.Templates.Error.DoesNotExist=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be viewed",body:"The issue you\'re trying to view can\'t be displayed.",bodyAfter:"It may have been deleted or you don\'t have permission to view it right now.",error:"canNotBeViewed",showReloadButton:!1})},JIRA.Components.IssueViewer.Templates.Error.Generic=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be displayed right now",body:"It could be for a variety of reasons, like a network or application error.",bodyAfter:"Try reloading the page.",error:"genericError",showReloadButton:!0})},JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="issue-error"><span class="error-image error-image-'+soy.$$escapeHtml(e.error)+'"></span><h1>'+soy.$$escapeHtml(e.title)+"</h1><p>"+soy.$$escapeHtml(e.body)+"<br />"+soy.$$escapeHtml(e.bodyAfter)+"</p>"+(e.showReloadButton?'<p><button id="issue-error-reload-button" class="aui-button aui-button-primary">Reload</button></p>':"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.viewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-main"><h1>'+soy.$$escapeHtml(e.title)+'</h1></div><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="aui-message '+soy.$$escapeHtml(e.error)+'"><span class="aui-icon icon-'+soy.$$escapeHtml(e.error)+'"></span><p>'+soy.$$escapeHtml(e.body)+"</p><p>"+soy.$$escapeHtml("If you think this message is wrong, please contact your")+' <a href="'+soy.$$escapeHtml(AJS.contextPath())+'/secure/ContactAdministrators!default.jspa">'+soy.$$escapeHtml("Jira administrators")+"</a>.</p>"+(e.returnToSearch?'<p><a id="return-to-search" class="push-state" href="'+soy.$$escapeHtml(AJS.contextPath())+'/issues/" title="'+soy.$$escapeHtml("Return to search")+'">'+soy.$$escapeHtml("Return to search")+"</a></p>":"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError=function(e,s){return'<div id="issue-content"><header class="issue-header issue-error-header"><div class="issue-header-content">'+soy.$$filterNoAutoescape(e.header)+'</div></header><div class="issue-body-content issue-error-content">'+soy.$$filterNoAutoescape(e.body)+"</div></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueOpsbar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueOpsbar&&(JIRA.Components.IssueViewer.Templates.IssueOpsbar={}),JIRA.Components.IssueViewer.Templates.IssueOpsbar.opsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var a=e.issue.operations.linkGroups,l=a.length,r=0;r<l;r++){var t=a[r];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var i=t.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var a=e.issue.operations.linkGroups,l=a.length,r=0;r<l;r++){var t=a[r];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var i=t.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup=function(e,s){var o="";if(e.group.header&&(e.group.links.length>0||e.group.groups.length>0))o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(e.group);else{o+="<ul "+(e.group.id?'id="opsbar-'+soy.$$escapeHtml(e.group.id)+'" ':"")+'class="toolbar-group pluggable-ops">';for(var a=e.group.links,l=a.length,r=0;r<l;r++){var t=a[r];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})}if(1==e.group.groups.length&&0==e.group.groups[0].links.length&&1==e.group.groups[0].groups.length&&1==e.group.groups[0].groups[0].links.length)o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:e.group.groups[0].groups[0].links[0]});else for(var i=e.group.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u})}o+="</ul>"}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks=function(e,s){for(var o="",a=e.group.links,l=a.length,r=0;r<l;r++){var t=a[r];o+='<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})+"</ul>"}for(var i=e.group.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=u.groups.length>0||u.links.length>0?'<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(soy.$$augmentMap(u,{shouldHideLabel:!0}))+"</ul>":""}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink=function(e,s){var o='<li class="toolbar-item toolbar-analytics"><div><a href="#"'+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'"':"")+'aria-owns="'+(e.header.id?soy.$$escapeHtml(e.header.id)+"_drop":"")+'" aria-haspopup="true"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.header.title,label:e.header.label})+'class="toolbar-trigger aui-button aui-style-default'+(e.links.length>0||e.groups.length>0?" aui-dropdown2-trigger":"")+(e.header.styleClass?" "+soy.$$escapeHtml(e.header.styleClass):"")+'">'+(e.header.iconClass?'<span class="icon '+soy.$$escapeHtml(e.header.iconClass)+'"></span> ':"")+'<span class="dropdown-text">'+(!e.shouldHideLabel&&e.header.label?soy.$$truncate(soy.$$escapeHtml(e.header.label),25,!0):"")+"</span></a><div "+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'_drop"':"")+' class="aui-style-default aui-dropdown2">';if(e.links.length>0){o+="<ul>";for(var a=e.links,l=a.length,r=0;r<l;r++){var t=a[r];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(t)}o+="</ul>"}for(var i=e.groups,n=i.length,p=0;p<n;p++){var u=i[p];if(u.links.length>0){o+='<div class="aui-dropdown2-section"><ul>';for(var d=u.links,m=d.length,I=0;I<m;I++){var g=d[I];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(g)}o+="</ul></div>"}}return o+="</div></div></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem=function(e,s){return'<li class="aui-list-item"><a  href="'+(e.href?soy.$$escapeHtml(e.href):"#")+'"'+(e.styleClass?'class="'+soy.$$escapeHtml(e.styleClass)+'"':"")+JIRA.Components.IssueViewer.Templates.Header.titleAttr(e)+(e.id?'id="'+soy.$$escapeHtml(e.id)+'"':"")+'><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.label),25,!0)+"</span></a></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem=function(e,s){return'<li class="toolbar-item toolbar-analytics"><a id="'+soy.$$escapeHtml(e.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.link.title,label:e.link.label})+'class="toolbar-trigger'+(e.link.styleClass?" "+soy.$$escapeHtml(e.link.styleClass):"")+'" href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'">'+(e.link.iconClass?'<span class="icon '+soy.$$escapeHtml(e.link.iconClass)+'"></span> <span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>":'<span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>")+"</a></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.newIssueViewItem=function(e,s){return'<div class="aui-dropdown2-section" id="opsbar-more-new-issue-view-items"><ul><li class="aui-list-item"><span class="group-title">'+soy.$$escapeHtml("New Jira issue view")+'</span></li><li class="aui-list-item"><a href="https://support.atlassian.com/jira-core-cloud/docs/what-is-the-new-jira-issue-view/" target="_blank">'+soy.$$escapeHtml("Learn more")+'</a></li><li class="aui-list-item"><a href="#" id="turn-on-new-issue-view">'+soy.$$escapeHtml("Turn on the new issue view")+"</a></li></ul></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueActionsBar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueActionsBar&&(JIRA.Components.IssueViewer.Templates.IssueActionsBar={}),JIRA.Components.IssueViewer.Templates.IssueActionsBar.container=function(s,e){for(var t='<div class="actions-bar"><div class="ops-menus">'+(s.issue.transitions.length?JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown({workflowName:s.issue.workflowName,status:s.issue.status,transitions:s.issue.transitions}):""),n=s.issue.primaryActions,a=n.length,o=0;o<a;o++)for(var i=n[o],r=i.links,l=r.length,u=0;u<l;u++){var p=r[u];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink({link:p})}return t+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown=function(s,e){for(var t='<button class="actions-bar-status-trigger aui-button aui-dropdown2-trigger aui-dropdown2-trigger-arrowless status-lozenge-'+soy.$$escapeHtml(s.status.statusColor)+'" aria-owns="actions-bar-status-dropdown">'+soy.$$escapeHtml(s.status.name)+'<span class="aui-icon aui-icon-small aui-iconfont-expanded"></span></button><div id="actions-bar-status-dropdown" class="aui-style-default aui-dropdown2"><div class="aui-dropdown2-section"><div class="actions-bar-status-list">',n=s.transitions,a=n.length,o=0;o<a;o++){var i=n[o];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem({transitionName:i.transitionName,statusName:i.destinationStatusName,statusColor:i.destinationStatusColor,link:i.url})}return t+='</div></div><div class="aui-dropdown2-section"><ul><li><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/admin/workflows/ViewWorkflowSteps.jspa?workflowMode=live&workflowName="+soy.$$escapeHtml(s.workflowName)+'" class="issueaction-viewworkflow jira-workflow-designer-link new-workflow-designer">'+soy.$$escapeHtml("View workflow")+"</a></li></ul></div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem=function(s,e){return'<a href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" class="actions-bar-status-item issueaction-workflow-transition"><span>'+soy.$$escapeHtml(s.transitionName)+'</span><span><span class="aui-icon aui-icon-small aui-iconfont-up">→</span></span><span>'+JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge({name:s.statusName,color:null!=s.statusColor?s.statusColor:"medium-gray"})+"</span></a>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge=function(s,e){return'<span class="jira-issue-status-lozenge aui-lozenge status-lozenge-'+soy.$$escapeHtml(s.color)+'">'+soy.$$escapeHtml(s.name)+"</span>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink=function(s,e){return'<a id="'+soy.$$escapeHtml(s.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:s.link.title,label:s.link.label})+'class="aui-button '+soy.$$escapeHtml(s.link.styleClass)+'" href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" ><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(s.link.label),25,!0)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/amd-wrapper.js' */
define("jira/components/issueviewer/templates",function(){"use strict";return JIRA.Components.IssueViewer.Templates}),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueViewer",null,require("jira/components/issueviewer")),AJS.namespace("JIRA.Components.IssueViewer.AppModule",null,require("jira/components/issueviewer/appmodule")),AJS.namespace("JIRA.Components.IssueViewer.Utils",null,require("jira/components/issueviewer/utils")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Error",null,require("jira/components/issueviewer/controllers/error")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Issue",null,require("jira/components/issueviewer/controllers/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Issue",null,require("jira/components/issueviewer/entities/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Panel",null,require("jira/components/issueviewer/entities/panel")),AJS.namespace("JIRA.Components.IssueViewer.Collections.Panels",null,require("jira/components/issueviewer/entities/panels")),AJS.namespace("JIRA.Components.IssueViewer.Models.PanelsGroup",null,require("jira/components/issueviewer/entities/panelsgroup")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.AsyncData",null,require("jira/components/issueviewer/legacy/asyncdata")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueEventBus",null,require("jira/components/issueviewer/legacy/issueeventbus")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueFieldUtil",null,require("jira/components/issueviewer/legacy/issuefieldutil")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.ViewIssueData",null,require("jira/components/issueviewer/legacy/viewissuedata")),AJS.namespace("JIRA.Components.IssueViewer.Services.IssueLoader",null,require("jira/components/issueviewer/services/issueloader")),AJS.namespace("JIRA.Components.IssueViewer.Services.Metadata",null,require("jira/components/issueviewer/services/metadataservice")),AJS.namespace("JIRA.Components.IssueViewer.Services.OptInNewIssueView",null,require("jira/components/issueviewer/services/optinnewissueviewservice")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorGeneric",null,require("jira/components/issueviewer/views/errorgeneric")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorNotFound",null,require("jira/components/issueviewer/views/errornotfound")),AJS.namespace("JIRA.Components.IssueViewer.Views.Error",null,require("jira/components/issueviewer/views/error")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueBody",null,require("jira/components/issueviewer/views/issuebody")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueHeader",null,require("jira/components/issueviewer/views/issueheader")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueOpsbar",null,require("jira/components/issueviewer/views/issueopsbar")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanels",null,require("jira/components/issueviewer/views/issuepanels")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanel",null,require("jira/components/issueviewer/views/issuepanel")),AJS.namespace("JIRA.Components.IssueViewer.Views.Issue",null,require("jira/components/issueviewer/views/issue")),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload', location = 'jira-attachment-module/jira-attachments.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),o=r(i),a=n(78),s=r(a),u=n(79),c=r(u),l=n(84),f=r(l),d=n(86),h=r(d),p=n(87),v=r(p),m=n(90),y=r(m),b=n(4),g=r(b),_=n(91),w=r(_),x=n(9),k=r(x);g.default.areAttachmentsEnabled()&&((0,w.default)(),k.default.install(),h.default.registerAttachmentMenuHandlerFactory(c.default),h.default.registerBrowseLinkHandlerFactory(c.default),h.default.registerAttachmentsZoneCreator(o.default),h.default.registerTemporaryAttachmentCreatorFactory(f.default),h.default.registerTemporaryAttachmentZoneCreator(s.default),h.default.registerTemporaryBinaryUploadHandler(v.default),h.default.registerConnectedTemporaryBinaryUploadHandler(y.default))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(16),a=r(o),s=n(10),u=r(s),c=n(20),l=r(c);t.default=function(e){var t="view-issue/drop-zone",n=(0,i.dropzone)(e).then(function(e){return e.on("drop",function(){a.default.triggerAttachRequested("viewIssueDropZone")}),e}),r=!1;return{activate:function(){return n.then(function(e){r||(r=!0,e.activate(),u.default.publish("upload/switch-context",{name:t}))})},deactivate:function(){return n.then(function(e){r&&(e.deactivate(),r=!1)})},drop:function(){return n.catch(function(e){a.default.triggerInitialisationException((0,l.default)(e)),u.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.connectedTemporaryBinary=t.binary=t.dropzone=t.popup=t.browser=t.temporaryAttachmentDropzone=t.temporaryAttachmentPopup=t.temporaryAttachmentBrowser=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(3),a=r(o),s=n(16),u=r(s),c=n(17),l=r(c),f=n(25),d=n(20),h=r(d),p=n(77),v=n(19),m=r(v),y="user_token_fetch_fail",b=3e4,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.getApiUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.authProvider,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default.getUploadParameters,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.connectToIssueChanges;return n().then(function(t){m.default.mark("attachments.media.components."+e+".credentials.received");var n=i({},{apiUrl:t},{authProvider:r});return n}).then(function(n){return(0,f.MediaPicker)(e,n,t)}).then(function(t){return m.default.mark("attachments.media.components."+e+".component.created"),t}).then(p.connect).then(s).then(function(e){return o().then(function(t){return e.setUploadParams(t)}),e})}},_=function(e){return new Promise(function(t,n){var r=l.default.schedule(function(){u.default.triggerInitializationTimeout(),n({message:"Initialisation Timeout",logged:!0})},b);e.on("ready",function(){m.default.mark("attachments.media.components.popup.ready"),l.default.cancel(r),u.default.triggerPopupInitialized(),u.default.triggerPopupMetrics(),t(e)}),e.on("upload-error",function(t){var i=t.error;i.logged=!0,i.name===y?(u.default.triggerUserNotLoggedIn(),m.default.mark("attachments.media.components.popup.user.not.logged"),l.default.cancel(r),e.teardown(),n(i)):u.default.triggerPopupError((0,h.default)(i))})})},w=g("browser",{multiple:!0}),x=function(e){return g("popup",{userAuthProvider:e})().then(_)},k=function(e){return g("dropzone",{headless:!0,container:e})()},A=(t.temporaryAttachmentBrowser=function(e){return function(){return w(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)}},t.temporaryAttachmentPopup=function(e){return function(t){return g("popup",{userAuthProvider:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges).then(_)}},t.temporaryAttachmentDropzone=function(e,t){return g("dropzone",{headless:!0,container:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)},function(e){return a.default.getApiUrl().then(function(t){var n=i({},{apiUrl:t},{authProvider:function(){return a.default.temporaryAuthProviderGetter(e)}});return n}).then(function(e){return(0,f.MediaPicker)("binary",e)}).then(function(t){return a.default.getTemporaryAttachmentUploadParameters(e).then(function(e){return t.setUploadParams(e),t})})}),S=function(e){return g("binary")(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)};t.browser=w,t.popup=x,t.dropzone=k,t.binary=A,t.connectedTemporaryBinary=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(4),s=r(a),u=n(8),c=r(u),l=n(9),f=r(l),d=n(11),h=r(d),p=n(16),v=r(p),m=n(20),y=r(m),b=n(23),g=r(b),_=n(7),w=r(_);n(24);var x=(0,c.default)(),k=function(e){return e.ok?e.json():e.text().then(function(t){t=t||"Unexpected error",t="Credentials request failure: "+t+" (http status code: "+e.status+")";var n=new Error(t);throw n.description=t,n})},A=function(e){return[x+"/rest/api/2/attachment/upload/issue/"+e+"/credentials",{credentials:"same-origin"}]},S=function(e){return[x+"/rest/api/2/attachment/upload/project/"+e+"/credentials",{credentials:"same-origin"}]},P=function(e,t){return[x+"/rest/api/2/attachment/upload/issue/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t}),headers:{"Content-Type":"application/json"}}]},O=function(e,t,n){return[x+"/rest/api/2/attachment/upload/project/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t,formToken:n}),headers:{"Content-Type":"application/json"}}]},I=function(){return new Request(x+"/rest/internal/latest/media/user/credentials",{credentials:"same-origin"})},E={fetchMetadata:!1,autoFinalize:!0},j=function(e){return Promise.resolve(e).then(F).then(k).then(function(e){var t=e.token,n=e.targetCollection,r=e.tokenDurationInMins;return o({},{token:t,targetCollection:n},isNaN(r)?{}:{tokenDurationInMins:r})})},T=function(e){return Promise.resolve(e).then(fetch).then(k).then(function(e){var t=e.id,n=e.token,r=e.tokenDurationInMins;return o({},{clientId:t,token:n},isNaN(r)?{}:{tokenDurationInMins:r})})},C=function(e){return 60*((e.tokenDurationInMins||10)-1)*1e3},M=(0,g.default)(function(e){return Promise.resolve(e).then(A).then(j)},C),U=(0,g.default)(function(e){return Promise.resolve(e).then(S).then(j)},C),L=(0,g.default)(function(e){return Promise.resolve(e).then(I).then(T)},C),F=function(e){var t=i(e,2),n=t[0],r=t[1];return fetch(n,r)},R=w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiClientId)return e.apiClientId;throw new Error("Media clientId is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve clientId",description:(0,y.default)(e)})})}),N=function(e){return R().then(function(t){return U.get(e).then(function(e){return{clientId:t,token:e.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})};t.default={getClientId:R,getApiUrl:w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiUrl)return e.apiUrl;throw new Error("Media apiUrl is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve apiUrl",description:(0,y.default)(e)})})}),authProvider:function(){return R().then(function(e){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(t){return{clientId:e,token:t.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},userAuthProvider:function(){return Promise.resolve("userAuth").then(L.get).catch(function(e){v.default.triggerUserAuthFetchFailed((0,y.default)(e))})},temporaryAuthProvider:function(){return f.default.getProjectContext().then(function(e){return N(e)}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},temporaryAuthProviderGetter:N,getUploadParameters:function(){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},createAttachment:function(e,t){return Promise.resolve(P(e,t)).then(F).then(k)},createTemporaryAttachment:function(e,t,n){return Promise.resolve(O(e,t,n)).then(F).then(k)},getTemporaryAttachmentUploadParameters:function(e){return Promise.resolve(e).then(U.get).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},reset:function(){M.clear()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(6),s=r(a),u=n(7),c=r(u),l="com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload.integration-configuration",f=["\\","/",'"',":","?","*","<","|",">"],d=o.default.getWRM("upload-limit")||1/0,h=o.default.getWRM("thumbnail-mime-types"),p=c.default.memoize(function(){return s.default.claim(l)});t.default={getInvalidChars:function(){return f},getMaxFileSize:function(){return d},getThumbnailMimeType:function(){return h},getMediaCredentials:function(){var e=p(),t=e.apiUrl,n=e.apiClientId;return{apiUrl:t,apiClientId:n}},areAttachmentsEnabled:function(){return p().attachmentsEnabled===!0}}},function(e,t){e.exports=require("dndattachment/util/Configuration")},function(e,t){e.exports=require("wrm/data")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a={uploadContext:null,projectId:null};t.default={getProjectContext:function(){return a.projectId?Promise.resolve(a.projectId):Promise.reject(new Error("Project id wasn't set"))},getUploadContextName:function(){return a.uploadContext&&a.uploadContext.name},getUploadContextSettings:function(){return a.uploadContext&&a.uploadContext.uploadSettings},install:function(){o.default.subscribe("upload/switch-context",function(e){a.uploadContext=e}),o.default.subscribe("project/changed",function(e){a.projectId=e})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map;t.default={subscribe:function(e,t){n.has(e)||n.set(e,[]),n.get(e).push(t)},publish:function(e,t){n.has(e)&&n.get(e).forEach(function(e){e(t)})},unsubscribe:function(e){n.forEach(function(t){for(var n=0,r=t.length;n<r;n++)t[n]===e&&(t.splice(n,1),n--)})},reset:function(){n=new Map}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a=n(12),s=r(a),u=n(13),c=r(u),l=n(14),f=r(l),d=n(15),h=r(d),p=2e3,v=function(){return new Promise(function(e,t){var n=s.default.getSelectedIssueId(),r=void 0;n?e(n):r=setInterval(function(){n=s.default.getSelectedIssueId(),n&&(clearInterval(r),e(n))},p)})},m=void 0;c.default.bind(f.default.ISSUE_REFRESHED,function(e,t){m=Promise.resolve(t),o.default.publish("issue/changed",t)}),t.default={getIssueId:function(){return m=m||v()},getIssueKey:function(){return s.default.getSelectedIssueKey()},getIssuePermlink:function(){return h.default.get("viewissue-permlink")}}},function(e,t){e.exports=require("jira/issues/api")},function(e,t){e.exports=require("jira/util/events")},function(e,t){e.exports=require("jira/components/issueviewer/eventtypes")},function(e,t){e.exports=require("jira/util/data/meta")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),a=r(o),s=n(19),u=r(s),c=n(20),l=r(c),f=n(21),d=r(f),h=n(22),p=r(h),v={stopInitialising:function(e){this.initialising=!1,this.popupInitialised=e},startRequest:function(e){this.requestStartedTime=a.default.current(),this.source=e},getData:function(e){var t=e.error,n=e.fileSize,r=e.uploadId;return{msSinceLastUserAction:a.default.since(this.requestStartedTime),initialising:this.initialising,popupInitialised:this.popupInitialised,source:this.source,error:(0,d.default)(t),fileSize:n,uploadId:r}},reset:function(){this.initialising=!0,this.popupInitialised=!1,this.requestStartedTime=Number.MAX_VALUE}};v.reset();var m=function(e,t){return AJS.trigger("analytics",{name:e,data:t})},y=function(e,t){return m(e,v.getData(t||{}))},b=function(e,t){return m(e,i({},{source:v.source},t))};t.default={triggerPopupInitialized:function(){v.stopInitialising(!0),y("issue.attachment.media-picker.popup-initialized")},triggerUserNotLoggedIn:function(){v.stopInitialising(!1),y("issue.attachment.media-picker.user-not-logged")},triggerPopupError:function(e){y("issue.attachment.media-picker.popup-error",{error:e})},triggerGenericPopupInitialisationError:function(e){y("issue.attachment.media-picker.generic-popup-initialisation-error",{error:e})},triggerAttachRequested:function(e){v.startRequest(e);var t="issue.attachment.media-picker.attach-requested";y(t),p.default.trigger("legacy-gas-v2-event",t)},triggerPopupShown:function(){y("issue.attachment.media-picker.popup-shown")},triggerPopupFailedToShow:function(e){y("issue.attachment.media-picker.popup-failed-to-show",{error:e})},triggerAttachFileBrowserShown:function(){y("issue.attachment.media-picker.browse-shown")},triggerAttachFileBrowserFailedToShow:function(e){y("issue.attachment.media-picker.browse-failed-to-show",{error:e})},triggerInitialisationException:function(e){e=(0,l.default)(e),v.stopInitialising(!1),y("issue.attachment.media-picker.initialisation-exception",{error:e})},triggerFileUploadFinished:function(e){y("issue.attachment.media-picker.file-upload-finished",{uploadId:e})},triggerAttachmentCreatedInJIRA:function(e){y("issue.attachment.media-picker.attachment-created-in-jira",{uploadId:e})},triggerCantCreateAttachmentInJIRA:function(e,t){y("issue.attachment.media-picker.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerUploadStarted:function(e,t){y("issue.attachment.media-picker.upload-started",{uploadId:e,fileSize:t})},triggerUploadError:function(e,t){y("issue.attachment.media-picker.upload-error",{error:e,uploadId:t})},triggerUploadCancelled:function(e){y("issue.attachment.media-picker.upload-cancelled",{uploadId:e})},triggerUploadValidationFailed:function(e,t){y("issue.attachment.media-picker.upload-validation-failed",{error:e,uploadId:t})},triggerInitializationTimeout:function(){y("issue.attachment.media-picker.initialization-timeout")},triggerTokenFetchFailed:function(e){y("issue.attachment.media-picker.error.token-fetch",{error:e})},triggerUserAuthFetchFailed:function(e){y("issue.attachment.media-picker.popup-error.user-auth-fetch",{error:e})},triggerUploadParametersFetchFailed:function(e){y("issue.attachment.media-picker.error.upload-params-fetch",{error:e})},triggerUploadRequestedWhenNotInitialised:function(){y("issue.attachment.media-picker.upload-request.not-initialised")},triggerBrowserRequestedWhenNotInitialised:function(){y("issue.attachment.media-picker.upload-request.browser.not-initialised")},triggerTemporaryAttachmentCreatedInJIRA:function(e){b("issue.attachment.media-picker.temporary.attachment-created-in-jira",{uploadId:e})},triggerCantCreateTemporaryAttachmentInJIRA:function(e,t){b("issue.attachment.media-picker.temporary.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerPopupMetrics:function(){var e=i({"dom.loaded":u.default.getDomContentLoadedTiming()},u.default.getMarksForNamespace("attachments.media.components.popup"));AJS.trigger("analytics",{name:"issue.attachment.media-picker.popup-metrics",data:e})},getRequestIdentifier:function(){return v.requestIdentifier},reset:function(){v.reset()}}},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={current:function(){return Math.round(e&&e.performance&&e.performance.now())},since:function(e){return Math.round(this.current()-e)},schedule:function(e,t){return setTimeout(e,t)},cancel:function(e){clearTimeout(e)}}}).call(t,n(18))},function(e,t,n){(function(t){"use strict";e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(18))},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mark:function(t){return e&&e.performance&&e.performance.mark(t)},getMarksForNamespace:function(t){var n={};if(e&&e.performance){e.performance.getEntriesByType("mark").filter(function(e){return 0===e.name.indexOf(t)}).forEach(function(e){var t=e.name,r=e.startTime;return n[t]=parseInt(r,10)})}return n},getDomContentLoadedTiming:function(){var t=e&&e.performance&&e.performance.timing;return t?parseInt(t.domContentLoadedEventStart-t.navigationStart,10):0}}}).call(t,n(18))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e){return"undefined"!=typeof e},i=function(e){return r(e.config)&&r(e.config.headers)&&r(e.response)&&r(e.response.config)&&r(e.response.config.headers)};t.default=function(e){if(r(e.name)&&r(e.message))return e.toString();if(r(e.name)&&r(e.description))return e.name+": "+e.description;if(r(e.message))return e.message;if("string"==typeof e)return e;if(i(e)){var t=n({},e);return delete t.config.headers.Authorization,delete t.response.config.headers.Authorization,""+e}return""+e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&e.indexOf("Authorization")!==-1?"Error sanitized":e}},function(e,t){e.exports=require("jira/customevents/trigger-custom-event")},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},n=new Map;return{get:function(i){if(!n.has(i)){var o=e(i).then(function(e){var o=t(e);return o&&setTimeout(function(){return r(n,i)},o),e}).catch(function(e){throw r(n,i),e});n.set(i,o)}return n.get(i)},clear:function(){n.clear()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=function(e,t){return e.has(t)&&e.delete(t)}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&g(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},f.call(h.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];m.redirect=function(e,t){if(x.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var i=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t(t.s=149)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(159),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(61)("wks"),i=n(42),o=n(4).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(4),i=n(2),o=n(14),a=n(15),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";function r(e){return"[object Array]"===k.call(e)}function i(e){return"[object ArrayBuffer]"===k.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===k.call(e)}function d(e){return"[object File]"===k.call(e)}function h(e){return"[object Blob]"===k.call(e)}function p(e){return"[object Function]"===k.call(e)}function v(e){return l(e)&&p(e.pipe)}function m(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function b(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function g(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function _(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=_(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)g(arguments[n],e);return t}function w(e,t,n){return g(t,function(t,r){e[r]=n&&"function"==typeof t?x(t,n):t}),e}var x=n(117),k=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:d,isBlob:h,isFunction:p,isStream:v,isURLSearchParams:m,isStandardBrowserEnv:b,forEach:g,merge:_,extend:w,trim:y}},function(e,t,n){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.1
	 */
!function(t,r){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function i(e){return"function"==typeof e}function o(e){V=e}function a(e){J=e}function s(){return void 0!==$?function(){$(c)}:u()}function u(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<q;e+=2)(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0;q=0}function l(e,t){var n=arguments,r=this,i=new this.constructor(d);void 0===i[ee]&&T(i);var o=r._state;return o?function(){var e=n[o-1];J(function(){return I(o,i,e,r._result)})}():A(r,i,e,t),i}function f(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(d);return _(n,e),n}function d(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function v(e){try{return e.then}catch(e){return ie.error=e,ie}}function m(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function y(e,t,n){J(function(e){var r=!1,i=m(n,t,function(n){r||(r=!0,t!==n?_(e,n):x(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function b(e,t){t._state===ne?x(e,t._result):t._state===re?k(e,t._result):A(t,void 0,function(t){return _(e,t)},function(t){return k(e,t)})}function g(e,t,n){t.constructor===e.constructor&&n===l&&t.constructor.resolve===f?b(e,t):n===ie?(k(e,ie.error),ie.error=null):void 0===n?x(e,t):i(n)?y(e,t,n):x(e,t)}function _(t,n){t===n?k(t,h()):e(n)?g(t,n,v(n)):x(t,n)}function w(e){e._onerror&&e._onerror(e._result),S(e)}function x(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&J(S,e))}function k(e,t){e._state===te&&(e._state=re,e._result=t,J(w,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=n,i[o+re]=r,0===o&&e._state&&J(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function P(){this.error=null}function O(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function I(e,t,n,r){var o=i(n),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if(a=O(n,r),a===oe?(c=!0,s=a.error,a.error=null):u=!0,t===a)return void k(t,p())}else a=r,u=!0;t._state!==te||(o&&u?_(t,a):c?k(t,s):e===ne?x(t,a):e===re&&k(t,a))}function E(e,t){try{t(function(t){_(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function j(){return ae++}function T(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function C(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[ee]||T(this.promise),H(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&x(this.promise,this._result))):k(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function U(e){return new C(this,e).promise}function L(e){var t=this;return new t(H(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(d);return k(n,e),n}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[ee]=j(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&R(),this instanceof z?E(this,e):N())}function D(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=z}var B=void 0;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H=B,q=0,$=void 0,V=void 0,J=function(e,t){X[q]=e,X[q+1]=t,2===(q+=2)&&(V?V(c):Z())},W="undefined"!=typeof window?window:void 0,K=W||{},G=K.MutationObserver||K.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Z=void 0;Z=Y?function(){return function(){return t.nextTick(c)}}():G?function(){var e=0,t=new G(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():Q?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===W?function(){try{var e=r(209);return $=e.runOnLoop||e.runOnContext,s()}catch(e){return u()}}():u();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,re=2,ie=new P,oe=new P,ae=0;return C.prototype._enumerate=function(e){for(var t=0;this._state===te&&t<e.length;t++)this._eachEntry(e[t],t)},C.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===f){var i=v(e);if(i===l&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(d);g(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},C.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?k(r,n):this._result[t]=n),0===this._remaining&&x(r,this._result)},C.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},z.all=U,z.race=L,z.resolve=f,z.reject=F,z._setScheduler=o,z._setAsap=a,z._asap=J,z.prototype={constructor:z,then:l,catch:function(e){return this.then(null,e)}},z.polyfill=D,z.Promise=z,z}()}()}).call(t,n(78),n(52))},function(e,t,n){var r=n(140)("wks"),i=n(141),o=n(13).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(10),i=n(92),o=n(63),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9),i=n(43);e.exports=n(12)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports={default:n(156),__esModule:!0}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(93),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(178),o=r(i),a=n(182),s=r(a),u=n(93),c=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(110),i=n(25);t.handleError=function(e,t){var n=Error().stack||"",o=t||"",a=e+": "+o+" \n "+n;(new r.UserTracker).track()(new i.ErrorException(e,n,t)),console.error(a)}},function(e,t){e.exports={}},function(e,t,n){var r=n(66),i=n(59);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(19),s=r(a),u=n(20),c=r(u),l=n(0),f=r(l),d=n(1),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(t,n){(0,f.default)(this,e),this.prefix="files.mediapicker-web.",this.name=this.prefix+t,this.properties=n}return(0,h.default)(e,[{key:"toJSON",value:function(){return{name:this.name,properties:this.properties}}}]),e}();t.UserEvent=p;var v=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"library.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MediaPickerLoaded=v;var m=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"browser.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPBrowserLoaded=m;var y=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"dropzone.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPDropzoneLoaded=y;var b=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"cliboard.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPClipboardLoaded=b;var g=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupLoaded=g;var _=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.shown",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupShown=_;var w=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.hidden",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupHidden=w;var x=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.ended",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadEnded=x;var k=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadStarted=k;var A=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.processing.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileProcessingStarted=A;var S=function(e){function t(e,n,r){(0,f.default)(this,t);var i={alias:e,description:r,stacktrace:n};return(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"files.mediapicker-web.library.exception.fired",i))}return(0,c.default)(t,e),t}(p);t.ErrorException=S},function(e,t){e.exports=n(26)},function(e,t,n){var r=n(55),i=n(138);e.exports=n(37)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(56);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(164)(!0);n(65)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(9).f,i=n(17),o=n(3)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(169);for(var r=n(4),i=n(15),o=n(23),a=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){var r=n(14),i=n(189),o=n(190),a=n(10),s=n(67),u=n(102),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(80),o=n(122),a=n(112),s=function(e,t){return o.checkWebpSupport().then(function(t){return e.accept=t?"image/webp,image/*,*/*;q=0.8":"image/*,*/*;q=0.8",e})},u=function(t,n,i,o){var u=r.__assign({},n,{"Content-Type":"application/json"});return i||(a.isAsapBasedAuth(t)?u["X-Issuer"]=t.asapIssuer:a.isClientBasedAuth(t)&&(u["X-Client-Id"]=t.clientId),u.Authorization="Bearer "+t.token),"image"===o?s(u):e.resolve(u)},c=function(t,n,i,o){var s={};return i&&(s.token=t.token,a.isClientBasedAuth(t)?s.client=t.clientId:a.isAsapBasedAuth(t)&&(s.issuer=t.asapIssuer)),e.resolve(r.__assign({collection:o},n,s))},l=function(e){return e=e||"json",{image:"blob",json:"json"}[e]};t.default=function(t){var n=t.preventPreflight,r=t.collectionName,o=t.config,a=o.authProvider,s=o.serviceHost;return function(t){var o=t.url,f=t.headers,d=t.params,h=t.responseType,p=t.method,v=t.data,m=a({collectionName:r}),y=function(t){return e.all([u(t,f,n,h),c(t,d,n,r)])},b=function(e){var t=e[0],n=e[1];return i.default({method:p||"get",url:o,baseURL:s,headers:t,params:n,data:v,responseType:l(h)})};return m.then(y).then(b).then(function(e){return e.data})}}}).call(t,n(7))},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(137)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports={}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],t));d[r.id]={id:r.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],u=i[3],c={css:a,media:s,sourceMap:u};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function i(e,t){var n=v(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var n,r,i;if(t.singleton){var u=y++;n=m||(m=a(t)),r=c.bind(null,n,u,!1),i=c.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=f.bind(null,n),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=l.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function l(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},h=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},p=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,b=[];e.exports=function(e,t){t=t||{},void 0===t.singleton&&(t.singleton=p()),void 0===t.insertAt&&(t.insertAt="bottom");var i=r(e);return n(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var s=i[a],u=d[s.id];u.refs--,o.push(u)}e&&n(r(e),t);for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete d[u.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(59);e.exports=function(e){return Object(r(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!0},function(e,t,n){var r=n(10),i=n(166),o=n(68),a=n(60)("IE_PROTO"),s=function(){},u=function(){var e,t=n(62)("iframe"),r=o.length;for(t.style.display="none",n(96).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(95),i=n(68);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(185),v=n(132),m=n(271),y=function(e){function t(e,n){var r=n.apiUrl,i=n.authProvider,a=n.uploadParams;(0,s.default)(this,t);var u=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return u.onFilesAdded=function(e){var t=e.files;u.emitUploadsStart(t)},u.onFileAdded=function(e){var t=e.file;u.emitUploadStart(t),t.raw&&t.type.match(/^image\//)&&m.default(t.raw).then(function(e){u.emitUploadPreviewUpdate(t,e)})},u.onFileUploading=function(e){var t=e.file,n=e.progress;u.emitUploadProgress(t,n)},u.onFileFinalizeReady=function(e){var t=e.file,n=e.finalize;u.emitUploadFinalizeReady(t,n)},u.onFileConverting=function(e){var t=e.file;u.emitUploadProcessing(t)},u.onFileConverted=function(e){var t=e.file,n=e.progress,r=e.metadata;u.emitUploadProgress(t,n),u.emitUploadEnd(t,r)},u.onUploadError=function(e){var t=e.file,n=e.error;u.emitUploadError(t,n)},u.uploadService=new p.UploadService(r,i,a||{}),u.uploadService.on("files-added",u.onFilesAdded),u.uploadService.on("file-added",u.onFileAdded),u.uploadService.on("file-uploading",u.onFileUploading),u.uploadService.on("file-finalize-ready",u.onFileFinalizeReady),u.uploadService.on("file-converting",u.onFileConverting),u.uploadService.on("file-converted",u.onFileConverted),u.uploadService.on("file-upload-error",u.onUploadError),u}return(0,h.default)(t,e),(0,c.default)(t,[{key:"cancel",value:function(e){this.uploadService.cancel(e)}},{key:"setUploadParams",value:function(e){this.uploadService.setUploadParams(e)}}]),t}(v.MPComponent);t.MediaLocalUpload=y},function(e,t,n){var r=n(31),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={default:n(203),__esModule:!0}},function(e,t,n){var r=n(207),i=n(208),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";(function(t){e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(52))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(t,n,r,i){return new(r||(r=e))(function(e,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function s(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){t.done?e(t.value):new r(function(e){e(t.value)}).then(a,s)}u((i=i.apply(t,n||[])).next())})}function c(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function v(t,n,r){function i(t){f[t]&&(l[t]=function(n){return new e(function(e,r){d.push([t,n,e,r])>1||o(t,n)})})}function o(e,t){try{a(f[e](t))}catch(e){c(d[0][3],e)}}function a(t){t.value instanceof p?e.resolve(t.value.v).then(s,u):c(d[0][2],t)}function s(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),d.shift(),d.length&&o(d[0][0],d[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,f=r.apply(t,n||[]),d=[];return l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l}function m(e){function t(t,i){e[t]&&(n[t]=function(n){return(r=!r)?{value:p(e[t](n)),done:"return"===t}:i?i(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof f?f(e):e[Symbol.iterator]()}t.__extends=r,n.d(t,"__assign",function(){return g}),t.__rest=i,t.__decorate=o,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=c,t.__exportStar=l,t.__values=f,t.__read=d,t.__spread=h,t.__await=p,t.__asyncGenerator=v,t.__asyncDelegator=m,t.__asyncValues=y;/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}}.call(t,n(7))},function(e,t,n){var r=n(86);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(28),i=n(276),o=n(277),a=Object.defineProperty;t.f=n(37)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(61)("keys"),i=n(42);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(11),i=n(4).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(44),i=n(5),o=n(94),a=n(15),s=n(17),u=n(23),c=n(165),l=n(32),f=n(91),d=n(3)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&w.next&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t,n){var r=n(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(64),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){t.f=n(3)},function(e,t,n){var r=n(42)("meta"),i=n(11),o=n(17),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(18)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,n){var r=n(4),i=n(2),o=n(44),a=n(69),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(29);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(15);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){(function(r,i){var o;!function(a){function s(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==a?e.maxListeners:p,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=p}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}function f(e,t,n,r){if(!n)return[];var i,o,a,s,u,c,l,d=[],h=t.length,p=t[r],v=t[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(d=d.concat(f(e,t,n[a],r+1)));return d}if("**"===p){(l=r+1===h||r+2===h&&"*"===v)&&n._listeners&&(d=d.concat(f(e,t,n,h)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!l&&(d=d.concat(f(e,t,n[a],h))),d=d.concat(f(e,t,n[a],r))):d=a===v?d.concat(f(e,t,n[a],r+2)):d.concat(f(e,t,n[a],r)));return d}d=d.concat(f(e,t,n[p],r+1))}if(s=n["*"],s&&f(e,t,s,r+1),u=n["**"])if(r<h){u._listeners&&f(e,t,u,h);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===v?f(e,t,u[a],r+2):a===p?f(e,t,u[a],r+1):(c={},c[a]=u[a],f(e,t,{"**":c},r+1)))}else u._listeners?f(e,t,u,h):u["*"]&&u["*"]._listeners&&f(e,t,u["*"],h);return d}function d(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,o=e.shift();o!==a;){if(i[o]||(i[o]={}),i=i[o],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,c.call(this,i._listeners.length,o))):i._listeners=t,!0;o=e.shift()}return!0}var h=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=10;l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this._on(e,i,r),o},l.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,o,u,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return i.resolve([!1]);var t,n,r,o,a,u=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),o=1;o<c;o++)t[o]=arguments[o];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:u.push(this._all[r].call(this,e));break;case 2:u.push(this._all[r].call(this,e,arguments[1]));break;case 3:u.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:u.push(this._all[r].apply(this,t))}}if(this.wildcard){a=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,a,l,this.listenerTree,0)}else a=this._events[e];if("function"==typeof a)switch(this.event=e,c){case 1:u.push(a.call(this));break;case 2:u.push(a.call(this,arguments[1]));break;case 3:u.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];u.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,c){case 1:u.push(a[r].call(this));break;case 2:u.push(a[r].call(this,arguments[1]));break;case 3:u.push(a[r].call(this,arguments[1],arguments[2]));break;default:u.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?i.reject(arguments[1]):i.reject("Uncaught, unspecified 'error' event.");return i.all(u)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this.emit("newListener",e,t),this.wildcard?(d.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){function n(e){if(e!==a){var t=Object.keys(e);for(var r in t){var i=t[r],o=e[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&n(e[i]),0===Object.keys(o).length&&delete e[i])}}}if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();i=f.call(this,null,o,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var s=0;s<i.length;s++){var u=i[s];if(r=u._listeners,h(r)){for(var c=-1,l=0,d=r.length;l<d;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?u._listeners.splice(c,1):this._events[e].splice(c,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete u._listeners:delete this._events[e],this.emit("removeListener",e,t))}return n(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||s.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=f.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return f.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),h(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(o=function(){return l}.call(t,n,t,e))!==a&&(e.exports=o)}()}).call(t,n(78),n(7))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],v=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){e.exports=n(40)},function(e,t,n){e.exports=n(220)},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(6),o=n(222),a=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(118):void 0!==t&&(e=n(118)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(a,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(78))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.referenceCountById={},this.referencesById={}}return e.prototype.acquire=function(e,t){return this.referenceCountById[e]||(this.referencesById[e]=t(),this.referenceCountById[e]=0),this.referenceCountById[e]=this.referenceCountById[e]+1,this.referencesById[e]},e.prototype.release=function(e){this.referenceCountById[e]>0&&(this.referenceCountById[e]=this.referenceCountById[e]-1),this.referenceCountById[e]||delete this.referencesById[e]},e}();t.Pool=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(50),f=r(l);Object.defineProperty(t,"__esModule",{value:!0});var d=n(80),h=n(111);t.isTokenError=function(e){if(e&&e.error){var t=e.error.code;return"JwtAuthoriser:TokenExpiredError"===t||"JwtAuthoriser:AuthenticationError"===t}return!1},t.addAuthToHeaders=function(e,t){var n=e.headers||{};return(0,f.default)({},e,{headers:(0,f.default)({},n,h.mapAuthToAuthHeaders(t))})},t.addAuthToQueryParameters=function(e,t){return(0,f.default)({},e,{parameters:(0,f.default)({},e.parameters,h.mapAuthToQueryParameters(t))})};var p=function(){function e(t,n,r){(0,s.default)(this,e),this.apiUrl=t,this.authProvider=n,this.collection=r}return(0,c.default)(e,[{key:"refreshAuth",value:function(){var e=this;return this.authProvider({collectionName:this.collection}).then(function(t){return e.auth=t,t})}},{key:"call",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.addAuthToHeaders;return this.makeCall(e,r).catch(function(i){if(!(i&&i.response&&t.isTokenError(i.response.data)))throw i;return n.makeCall(e,r,!0)})}},{key:"makeCall",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getAuth(r).then(function(r){return n.makeCallWithToken(e,t,r)})}},{key:"getAuth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.auth&&!e?o.default.resolve(this.auth):this.refreshAuth()}},{key:"makeCallWithToken",value:function(e,t,n){var r=t(e,n),i=this.getAxiosRequestConfig(r);return d.default.request(i).then(function(e){return e.data})}},{key:"getAxiosRequestConfig",value:function(e){var t=e.httpMethod,n=e.mediaApiMethod,r=e.parameters,i=e.headers,o=e.data;return{url:this.apiUrl+"/"+n,method:t,headers:(0,f.default)({},i,o?{"Content-Type":"application/json; charset=utf-8"}:{}),params:r,data:o}}},{key:"storedAuth",get:function(){return this.auth}}]),e}();t.MediaClient=p},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(56),i=n(13).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(284),i=n(85);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(140)("keys"),i=n(141);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(55).f,i=n(57),o=n(8)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(17),i=n(41),o=n(60)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){e.exports=!n(12)&&!n(18)(function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(162),o=r(i),a=n(171),s=r(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){e.exports=n(15)},function(e,t,n){var r=n(17),i=n(24),o=n(167)(!1),a=n(60)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(31);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(95),i=n(68).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(47),i=n(43),o=n(24),a=n(63),s=n(17),u=n(92),c=Object.getOwnPropertyDescriptor;t.f=n(12)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){e.exports={default:n(186),__esModule:!0}},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(10),i=n(29),o=n(3)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r,i,o,a=n(14),s=n(191),u=n(96),c=n(62),l=n(4),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,m=0,y={},b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},g=function(e){b.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},h=function(e){delete y[e]},"process"==n(31)(f)?r=function(e){f.nextTick(a(b,e,1))}:v&&v.now?r=function(e){v.now(a(b,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=g,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(10),i=n(11),o=n(75);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(4),i=n(2),o=n(9),a=n(12),s=n(3)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(t,n(52))},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(50),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(210),f=function(){function e(){(0,s.default)(this,e),this.defaults={storage_key:"media-picker.herment.storage",product:"media-picker",subproduct:"library",version:"1.0"},this.queue=[],this.queueProcessor=l.default((0,o.default)({},this.defaults,{queue:this.queue})),this.queueProcessor&&this.queueProcessor.start(),this.defaultProperties={}}return(0,c.default)(e,[{key:"track",value:function(){var e=this;return function(t){var n=t.toJSON();n.properties=(0,o.default)({},e.defaultProperties,n.properties),e.queue.push(n)}}}]),e}();t.UserTracker=f},function(e,t,n){"use strict";function r(e){return o.isClientBasedAuth(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer "+e.token}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer "+e.token}}function i(e){return o.isClientBasedAuth(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(212);t.mapAuthToAuthHeaders=r,t.mapAuthToQueryParameters=i},function(e,t,n){"use strict";function r(e){return!!e.clientId}function i(e){return!!e.asapIssuer}Object.defineProperty(t,"__esModule",{value:!0}),t.isClientBasedAuth=r,t.isAsapBasedAuth=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114);t.RemoteMediaCollectionProvider=r.RemoteMediaCollectionProvider;var i=n(116);t.FileProvider=i.FileProvider;var o=n(123);t.LinkProvider=o.LinkProvider;var a=n(239);t.MediaItemProvider=a.MediaItemProvider;var s=n(240);t.MediaUrlPreviewProvider=s.MediaUrlPreviewProvider;var u=n(126);t.UrlPreviewProvider=u.UrlPreviewProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115);n(79);var i=function(){function e(e,t,n,i){this.collectionService=e,this.collectionName=t,this.pageSize=n,this.sortDirection=i,this.subject=new r.Subject,this.connectableObservable=this.subject.publishReplay(1),this.items=[],this.nextInclusiveStartKey=void 0,this.isLoading=!1,this.connectableObservable.connect(),this.loadNextPage()}return e.prototype.observable=function(){return this.connectableObservable},e.prototype.loadNextPageUntil=function(e){var t=this;if(!this.items.some(e))var n=this.connectableObservable.subscribe({next:function(r){!t.nextInclusiveStartKey||r.items.some(e)?n.unsubscribe():t.loadNextPage()},complete:function(){return n.unsubscribe()},error:function(e){return n.unsubscribe()}})},e.prototype.loadNextPage=function(){var e=this;this.isLoading||(this.isLoading=!0,this.collectionService.getCollectionItems(this.collectionName,this.pageSize,this.nextInclusiveStartKey,this.sortDirection,"full").then(function(t){e.isLoading=!1,(r=e.items).push.apply(r,t.items);var n={id:e.collectionName,items:e.items};e.nextInclusiveStartKey=t.nextInclusiveStartKey,e.subject.next(n);var r},function(t){e.isLoading=!1,e.subject.error(t)}))},e.prototype.refresh=function(){var e=this;if(!this.isLoading){this.isLoading=!0;var t,n=this.items[0]&&this.items[0].details,r=n&&n.id,i=n&&n.occurrenceKey,o=[],a=function(){e.collectionService.getCollectionItems(e.collectionName,e.pageSize,t,e.sortDirection,"full").then(function(n){for(var s=!1,u=0,c=n.items;u<c.length;u++){var l=c[u],f=l.details,d=f.id,h=f.occurrenceKey;if(d===r&&h===i){s=!0;break}o.push(l)}s?(e.isLoading=!1,e.items=o.concat(e.items),e.subject.next({id:e.collectionName,items:e.items})):n.nextInclusiveStartKey&&(t=n.nextInclusiveStartKey,a())},function(t){e.isLoading=!1,e.subject.error(t)})};a()}},e}();t.RemoteMediaCollectionProvider=i},function(e,t){e.exports=n(43)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),i=n(26);n(79),t.FILE_PROVIDER_RETRY_INTERVAL=2e3;var o=function(){function e(){}return e.fromMediaApi=function(t,n,i,o,a){return e.fromFileService(new r.MediaFileService(t,n),i,o,a)},e.fromFileService=function(e,t,n,r){return{observable:function(){var o=new i.Observable(function(i){var o,a=r||1e3,s=function(){e.getFileItem(t,n).then(function(e){"pending"!==e.details.processingStatus?(i.next(e),i.complete()):(i.next(e),o=setTimeout(function(){return s()},a))},function(e){i.error(e)})};return s(),function(){null!==o&&clearTimeout(o)}}).publishReplay(1);return o.connect(),o}}},e}();t.FileProvider=o},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";(function(t){var r=n(6),i=n(223),o=n(225),a=n(226),s=n(227),u=n(119),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(228);e.exports=function(e){return new t(function(t,l){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest,p="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(e.url)||(h=new window.XDomainRequest,p="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var m=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+c(m+":"+y)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[p]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?h.response:h.responseText,o={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:n,config:e,request:h};i(t,l,o),h=null}},h.onerror=function(){l(u("Network Error",e)),h=null},h.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),h=null},r.isStandardBrowserEnv()){var b=n(229),g=(e.withCredentials||s(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(d,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(e){if("json"!==h.responseType)throw e}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),l(e),h=null)}),void 0===f&&(f=null),h.send(f)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(224);e.exports=function(e,t,n,i){var o=new Error(e);return r(o,t,n,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(237)),r(n(238))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124),i=n(26);n(79);var o=function(){function e(){}return e.fromMediaApi=function(t,n,i){return e.fromLinkService(new r.MediaLinkService(t),n,i)},e.fromLinkService=function(e,t,n){return{observable:function(){
var r=new i.Observable(function(r){return e.getLinkItem(t,n).then(function(e){r.next(e),r.complete()},function(e){r.error(e)}),function(){}}).publishReplay(1);return r.connect(),r}}},e}();t.LinkProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getLinkItem=function(e,t){return r.default({config:this.config,collectionName:t,preventPreflight:!0})({url:"/link/"+e}).then(function(e){return e.data}).then(function(e){return{type:"link",details:{id:e.id,url:e.url,type:e.metadata.type,title:e.metadata.title,description:e.metadata.description,site:e.metadata.site,author:e.metadata.author,date:e.metadata.date,resources:e.metadata.resources}}})},e.prototype.addLinkItem=function(e,t,n){return r.default({config:this.config,collectionName:t})({method:"post",url:"/link",data:{url:e,metadata:n}}).then(function(e){return e.data.id})},e}();t.MediaLinkService=i},function(e,t,n){"use strict";function r(e,t,n){return new i.Observable(function(r){var i=e.acquire(t,n),o=i.subscribe(r);return function(){o.unsubscribe(),e.release(t)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.observableFromObservablePool=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(241),i=n(26),o=function(){function e(){}return e.fromMediaApi=function(t,n){return e.fromUrlPreviewService(new r.MediaUrlPreviewService(t),n)},e.fromUrlPreviewService=function(e,t){return{observable:function(){return new i.Observable(function(n){return e.getUrlPreview(t).then(function(e){n.next(e),n.complete()},function(e){n.error(e)}),function(){}})}}},e}();t.UrlPreviewProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(35);t.DEFAULT_COLLECTION_PAGE_SIZE=10;var o=function(){function e(e){this.config=e}return e.prototype.mapToMediaCollectionItem=function(e){var t=e.id,n=e.type,i=e.occurrenceKey,o=e.details;if("file"===n){var a=o;return{type:"file",details:r.__assign({id:t,occurrenceKey:i},a)}}var s=o;return{type:"link",details:r.__assign({id:t,type:"link",occurrenceKey:i,title:s.title||""},s)}},e.prototype.getCollectionItems=function(e,n,r,o,a){var s=this;return void 0===n&&(n=t.DEFAULT_COLLECTION_PAGE_SIZE),i.default({config:this.config,preventPreflight:!0,collectionName:e})({url:"/collection/"+e+"/items",params:{limit:n,inclusiveStartKey:r,sortDirection:o,details:a}}).then(function(e){return{items:e.data.contents.map(s.mapToMediaCollectionItem),nextInclusiveStartKey:e.data.nextInclusiveStartKey}})},e}();t.MediaCollectionService=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_NAMES={OBJ_CREATE_FAIL:"object_create_fail",METADATA_FETCH_FAIL:"metadata_fetch_fail",TOKEN_FETCH_FAIL:"token_fetch_fail",TOKEN_UPDATE_FAIL:"token_update_fail",TOKEN_SOURCE_EMPTY:"token_source_empty",UPLOAD_FAIL:"upload_fail",USER_TOKEN_FETCH_FAIL:"user_token_fetch_fail"};var u=function(){function e(t,n,r){(0,o.default)(this,e),this.fileId=t,this.name=n,this.description=r}return(0,s.default)(e,[{key:"toJSON",value:function(){return{fileId:this.fileId,name:this.name,description:this.description}}}]),e}();t.MediaError=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(246),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(22),f=function(){function e(t,n,r,i,o,a,u){(0,s.default)(this,e),e.isValidFileId(t)||l.handleError("wrong_file_id","Passed fileId is incorrect."),e.isValidName(n)||l.handleError("wrong_file_name","Passed file name is incorrect."),e.isValidSize(r)||l.handleError("wrong_file_size","Passed file size is incorrect."),e.isValidCreationDate(i)||l.handleError("wrong_file_date","Passed file creation date is incorrect."),e.isValidType(o)||l.handleError("wrong_file_type","Passed file type is incorrect."),this.id=t,this.name=n,this.size=r,this.creationDate=i,this.type=o,this.publicId=a,this.resumableFile=u}return(0,c.default)(e,[{key:"toJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId,chunks:this.chunks,toPureJSON:this.toPureJSON.bind(this)}}},{key:"toPureJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId}}},{key:"_isImage",value:function(){return new o.default(["image/png","image/jpeg","image/jpg","image/gif"]).has(this.type)}},{key:"chunks",get:function(){return this.resumableFile?this.resumableFile.chunks:void 0}},{key:"raw",get:function(){return this.resumableFile?this.resumableFile.file:void 0}},{key:"preview",get:function(){return this._isImage()?this.raw:void 0}}],[{key:"isValidFileId",value:function(e){return"string"==typeof e&&e.length>0}},{key:"isValidName",value:function(e){return"string"==typeof e}},{key:"isValidType",value:function(e){return"string"==typeof e}},{key:"isValidSize",value:function(e){return"number"==typeof e&&e>=0}},{key:"isValidCreationDate",value:function(e){return"number"==typeof e&&e>0}}]),e}();t.MediaFile=f},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUploadParams={collection:void 0,fetchMetadata:!0,autoFinalize:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(270),c=n(77),l=n(22),f=n(25),d=function(){function e(t){(0,o.default)(this,e),this.context=t,this.emitter=new c.EventEmitter2({wildcard:!0})}return(0,s.default)(e,[{key:"once",value:function(e,t){this.emitter.once(e,t)}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"onAny",value:function(e){this.emitter.onAny(e)}},{key:"addListener",value:function(e,t){this.emitter.addListener(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"removeListener",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"removeAllListeners",value:function(e){this.emitter.removeAllListeners(e)}},{key:"emit",value:function(e,t){return this.emitter.emit(e,t)}},{key:"emitUploadsStart",value:function(e){this.emit("uploads-start",{files:e.map(function(e){return e.toJSON()})})}},{key:"emitUploadStart",value:function(e){this.emit("upload-start",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileUploadStarted)}},{key:"emitUploadProgress",value:function(e,t){this.emit("upload-status-update",{file:e.toJSON(),progress:t})}},{key:"emitUploadFinalizeReady",value:function(e,t){this.emit("upload-finalize-ready",{file:e.toJSON(),finalize:t})}},{key:"emitUploadPreviewUpdate",value:function(e,t){this.emit("upload-preview-update",{file:e.toJSON(),preview:t})}},{key:"emitUploadProcessing",value:function(e){this.emit("upload-processing",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileProcessingStarted)}},{key:"emitUploadEnd",value:function(e,t){this.emit("upload-end",{file:e.toJSON(),public:t}),this.context.trackEvent(new f.MPFileUploadEnded)}},{key:"emitUploadError",value:function(e,t){this.emit("upload-error",{file:e.toJSON(),error:t.toJSON()})}},{key:"getStaticAssetUrl",value:function(e){return void 0===u.html[e]&&l.handleError("wrong_static_asset","The passet static asset does not exist"),!0===u.usingVersions?u.baseUrl+"/"+u.version+"/"+u.html[e]:u.baseUrl+"/"+u.html[e]}}]),e}();t.MPComponent=d},function(e,t,n){e.exports={default:n(272),__esModule:!0}},function(e,t,n){"use strict";var r=n(135),i=n(136),o=n(278),a=n(27),s=n(57),u=n(38),c=n(279),l=n(90),f=n(287),d=n(8)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t){e.exports=!0},function(e,t,n){var r=n(13),i=n(36),o=n(54),a=n(27),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(84),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(13),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(13).document&&document.documentElement},function(e,t,n){var r=n(58),i=n(8)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r,i,o,a=n(54),s=n(300),u=n(143),c=n(87),l=n(13),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete m[e]},"process"==n(58)(f)?r=function(e){f.nextTick(a(y,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){var r=n(307);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){/*!
	  * domready (c) Dustin Diaz 2014 - License MIT
	  */
!function(t,n){e.exports=function(){var e,t=[],n=document,r=n.documentElement.doScroll,i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener("DOMContentLoaded",e=function(){for(n.removeEventListener("DOMContentLoaded",e),i=1;e=t.shift();)e()}),function(e){i?setTimeout(e,0):t.push(e)}}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]}},function(e,t,n){e.exports=n(150)},function(e,t,n){"use strict";function r(e,t,n){if(!t)return{binary:i.BinaryUploader,browser:o.Browser,clipboard:a.Clipboard,dropzone:s.Dropzone,popup:u.Popup}[e];var r={trackEvent:f};switch(e){case"binary":return new i.BinaryUploader(r,t);case"browser":return new o.Browser(r,t,n);case"clipboard":return new a.Clipboard(r,t);case"dropzone":return new s.Dropzone(r,t,n);case"popup":return new u.Popup(r,t,n);default:var c="The component "+e+" does not exist";throw l.handleError("wrong_component",c),new Error(c)}}Object.defineProperty(t,"__esModule",{value:!0}),n(151),n(153);var i=n(155);t.BinaryUploader=i.BinaryUploader;var o=n(306);t.Browser=o.Browser;var a=n(308);t.Clipboard=a.Clipboard;var s=n(309);t.Dropzone=s.Dropzone;var u=n(313);t.Popup=u.Popup;var c=n(110),l=n(22),f=(new c.UserTracker).track();t.MediaPicker=r},function(e,t,n){var r=n(152);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,'.mpAUI{color:#333;font-family:Arial,sans-serif;font-size:14px;line-height:1.42857143}.mpAUI h2{color:#333;font-size:24px;font-weight:400;line-height:1.25;text-transform:none;margin:30px 0 0}.mpAUI .aui-dialog2-header-close img{width:16px!important;height:16px!important;position:relative;top:2px;opacity:.5}.mpAUI .aui-dialog2-header-close:hover img{opacity:1}.mpAUI .aui-dialog2{box-sizing:border-box;position:relative;left:0;right:0;visibility:hidden}.mpAUI .aui-dialog2-xlarge{width:980px;min-height:431px}.mpAUI .aui-dialog2-small .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:380px}@media (max-height:700px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large,.mpAUI .aui-dialog2-xlarge{min-height:131px;height:-120%}}@media (max-height:500px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-medium .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium{min-height:131px;height:-120%}}@media (max-width:1000px){.mpAUI .aui-dialog2-xlarge{width:100%;height:-20%}.mpAUI .aui-dialog2-xlarge.aui-layer{top:69px}.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{height:100%}}@media (max-width:820px){.mpAUI .aui-dialog2-large{width:100%;height:-20%}.mpAUI .aui-dialog2-large.aui-layer{top:69px}.mpAUI .aui-dialog2-large .aui-dialog2-content{height:100%}}@media (max-width:620px){.mpAUI .aui-dialog2-medium{width:100%;height:-20%}.mpAUI .aui-dialog2-medium.aui-layer{top:69px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{height:100%}}@media (max-width:420px){.mpAUI .aui-dialog2-small{width:100%;height:-20%}.mpAUI .aui-dialog2-small.aui-layer{top:69px}.mpAUI .aui-dialog2-small .aui-dialog2-content{height:100%}}.mpAUI .aui-dialog2-footer,.mpAUI .aui-dialog2-header{background:#f5f5f5;visibility:visible}.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-header{opacity:0;transition:opacity .2s,visibility .2s;transition-delay:0s;visibility:hidden}.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-header{opacity:1;transition:opacity .2s;transition-delay:0s;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-content{max-height:100%}.mpAUI .aui-dialog2-content{border-radius:3px;background-color:#fff;box-sizing:border-box;overflow:auto;padding:20px;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-header{margin-top:-69px}.mpAUI .aui-dialog2-header{border-bottom:1px solid #ccc;border-radius:5px 5px 0 0;box-sizing:border-box;color:#333;font-weight:400;height:69px;padding:0 20px;width:100%;display:table}.mpAUI .aui-dialog2-header-actions{width:100%}.mpAUI .aui-dialog2-header-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-main,.mpAUI .aui-dialog2-header-secondary{display:table-cell;vertical-align:middle}.mpAUI .aui-dialog2[data-aui-modal=true] .aui-dialog2-header-close{display:none}.mpAUI .aui-dialog2-footer-hint{color:#707070;line-height:31px}.mpAUI .aui-dialog2-footer-hint,.mpAUI .aui-dialog2-header-main{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:10px}.mpAUI .aui-dialog2-header-main{max-width:400px}.mpAUI .aui-dialog2-footer-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-secondary{text-align:right}.mpAUI .aui-dialog2-footer-actions{float:right}.mpAUI .aui-dialog2-header-close{width:20px;height:20px;padding-left:5px;text-align:right;vertical-align:middle;line-height:100%;cursor:pointer;color:#707070}.mpAUI .aui-iconfont-close-dialog:before{content:"\\F11B"}.mpAUI .aui-dialog2-warning .aui-dialog2-header{background-color:#d04437;border-bottom-color:#d04437;color:#fff}.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-actions a,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-close,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-main,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-secondary a{color:inherit}.mpAUI .aui-dialog2-header-close .aui-icon{vertical-align:middle}.mpAUI .aui-dialog2-footer{border-top:1px solid #ccc;box-sizing:border-box;height:51px;overflow:hidden;padding:10px 20px;width:100%;border-radius:0 0 5px 5px}.mpAUI .aui-dialog2-footer:empty{height:5px;padding:0}.mpAUI .aui-button,.mpAUI .aui-button:visited,.mpAUI a.aui-button{box-sizing:border-box;background:#f5f5f5;border:1px solid #ccc;border-radius:3.01px;color:#333;cursor:pointer;display:inline-block;font-family:inherit;font-size:14px;font-variant:normal;font-weight:400;height:2.14285714em;line-height:1.42857143;margin:0;padding:4px 10px;text-decoration:none;vertical-align:baseline;white-space:nowrap}.mpAUI .aui-button.aui-button-light,.mpAUI .aui-button:visited.aui-button-light,.mpAUI a.aui-button.aui-button-light{background:#fff}.mpAUI .aui-button~.aui-button{margin-left:10px}.mpAUI a.aui-button:active,.mpAUI a.aui-button:focus,.mpAUI a.aui-button:hover{text-decoration:none}.mpAUI .aui-button:focus,.mpAUI form.aui .button:focus,.mpAUI form.aui .cancel:focus{outline:1px dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:1px}.mpAUI .aui-button::-moz-focus-inner{border:0;padding:0}.mpAUI .aui-button-subtle.aui-button:focus,.mpAUI .aui-button-subtle.aui-button:hover,.mpAUI .aui-button:focus,.mpAUI .aui-button:hover{background:#e9e9e9;border-color:#999;color:#000;text-decoration:none}.mpAUI .aui-button.aui-button-subtle.active,.mpAUI .aui-button.aui-button-subtle:active{border-color:#999}.mpAUI .aui-button-subtle.aui-button.active,.mpAUI .aui-button-subtle.aui-button:active,.mpAUI .aui-button.active,.mpAUI .aui-button:active,.mpAUI .aui-header .aui-button-split-more.active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#f5f5f5;text-decoration:none}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(:active){border-right-color:transparent}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:active:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:focus:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:hover:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):active+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):focus+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more:before{visibility:hidden}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more{border-left:1px solid #999;margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more{margin-left:-1px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:focus,.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:hover{margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger:before{content:"";border-left:1px solid #ccc;bottom:4px;display:block;left:-1px;position:absolute;top:4px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger.aui-button-primary:before{border-color:#fff}.mpAUI .aui-button.aui-button-primary,.mpAUI .aui-button.aui-button-primary:visited{background:#3572b0;border-color:transparent;color:#fff;font-weight:700;-webkit-font-smoothing:antialiased}.mpAUI .aui-button.aui-button-primary:focus,.mpAUI .aui-button.aui-button-primary:hover{background:#2a67a5;border-color:transparent;color:#fff}.mpAUI .aui-button.aui-button-primary:active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#3572b0;text-decoration:none}.mpAUI .aui-button.aui-button-link,.mpAUI .aui-button.aui-button-link:visited,.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{background:transparent;border-color:transparent;color:#3572b0;padding:4px 0;text-decoration:none;box-shadow:none}.mpAUI .aui-button.aui-button-link:active,.mpAUI .aui-button.aui-button-link:focus,.mpAUI .aui-button.aui-button-link:hover,.mpAUI .aui-button.aui-button-text:active,.mpAUI .aui-button.aui-button-text:focus,.mpAUI .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-link:active,.mpAUI .aui-buttons .aui-button.aui-button-link:focus,.mpAUI .aui-buttons .aui-button.aui-button-link:hover,.mpAUI .aui-buttons .aui-button.aui-button-link[aria-pressed=true],.mpAUI .aui-buttons .aui-button.aui-button-text:active,.mpAUI .aui-buttons .aui-button.aui-button-text:focus,.mpAUI .aui-buttons .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-text[aria-pressed=true]{background:transparent;border-color:transparent;box-shadow:none;text-decoration:underline}.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{border:none;font-size:inherit;height:inherit;line-height:normal;padding:0}.mpAUI .aui-button.aui-button-subtle{background:transparent;border-color:transparent;color:#707070}.mpAUI .aui-buttons .aui-button.aui-button-subtle{border-radius:3.01px}.mpAUI .aui-button.aui-button-subtle .aui-icon{margin-right:1px}.mpAUI .aui-button>.aui-icon+.aui-button-label{margin-left:4px}',""])},function(e,t,n){var r=n(154);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup .aui-dialog2-large{width:845px;height:530px;position:fixed;left:calc(50% - 845px/2);top:calc(50% - 530px/2);margin:0;overflow:visible}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=function(e){function t(e,n){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"upload",value:function(e,t){var n=t||"file",r=this._urltoFile(e,n);this.uploadService.addFile(r)}},{key:"_urltoFile",value:function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/);if(!r||r.length<2)throw new Error("Failed to retrieve file from data URL");for(var i=r[1],o=atob(n[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);var u=new Blob([s],{type:i});return u.name=t,u}}]),t}(p.MediaLocalUpload);t.BinaryUploader=v},function(e,t,n){n(157),e.exports=n(2).Object.getPrototypeOf},function(e,t,n){var r=n(41),i=n(91);n(158)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(5),i=n(2),o=n(18);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(160),__esModule:!0}},function(e,t,n){n(161);var r=n(2).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(5);r(r.S+r.F*!n(12),"Object",{defineProperty:n(9).f})},function(e,t,n){e.exports={default:n(163),__esModule:!0}},function(e,t,n){n(30),n(33),e.exports=n(69).f("iterator")},function(e,t,n){var r=n(64),i=n(59);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(45),i=n(43),o=n(32),a={};n(15)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(9),i=n(10),o=n(46);e.exports=n(12)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(24),i=n(67),o=n(168);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(64),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(170),i=n(97),o=n(23),a=n(24);e.exports=n(65)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(172),__esModule:!0}},function(e,t,n){n(173),n(73),n(176),n(177),e.exports=n(2).Symbol},function(e,t,n){"use strict";var r=n(4),i=n(17),o=n(12),a=n(5),s=n(94),u=n(70).KEY,c=n(18),l=n(61),f=n(32),d=n(42),h=n(3),p=n(69),v=n(71),m=n(174),y=n(98),b=n(10),g=n(24),_=n(63),w=n(43),x=n(45),k=n(175),A=n(100),S=n(9),P=n(46),O=A.f,I=S.f,E=k.f,j=r.Symbol,T=r.JSON,C=T&&T.stringify,M=h("_hidden"),U=h("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),R=l("symbols"),N=l("op-symbols"),z=Object.prototype,D="function"==typeof j,B=r.QObject,H=!B||!B.prototype||!B.prototype.findChild,q=o&&c(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=O(z,t);r&&delete z[t],I(e,t,n),r&&e!==z&&I(z,t,r)}:I,$=function(e){var t=R[e]=x(j.prototype);return t._k=e,t},V=D&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},J=function(e,t,n){return e===z&&J(N,t,n),b(e),t=_(t,!0),b(n),i(R,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=x(n,{enumerable:w(0,!1)})):(i(e,M)||I(e,M,w(1,{})),e[M][t]=!0),q(e,t,n)):I(e,t,n)},W=function(e,t){b(e);for(var n,r=m(t=g(t)),i=0,o=r.length;o>i;)J(e,n=r[i++],t[n]);return e},K=function(e,t){return void 0===t?x(e):W(x(e),t)},G=function(e){var t=L.call(this,e=_(e,!0));return!(this===z&&i(R,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(R,e)||i(this,M)&&this[M][e])||t)},Y=function(e,t){if(e=g(e),t=_(t,!0),e!==z||!i(R,t)||i(N,t)){var n=O(e,t);return!n||!i(R,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=E(g(e)),r=[],o=0;n.length>o;)i(R,t=n[o++])||t==M||t==u||r.push(t);return r},X=function(e){for(var t,n=e===z,r=E(n?N:g(e)),o=[],a=0;r.length>a;)!i(R,t=r[a++])||n&&!i(z,t)||o.push(R[t]);return o};D||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(N,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),q(this,e,w(1,n))};return o&&H&&q(z,e,{configurable:!0,set:t}),$(e)},s(j.prototype,"toString",function(){return this._k}),A.f=Y,S.f=J,n(99).f=k.f=Q,n(47).f=G,n(72).f=X,o&&!n(44)&&s(z,"propertyIsEnumerable",G,!0),p.f=function(e){return $(h(e))}),a(a.G+a.W+a.F*!D,{Symbol:j});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)h(Z[ee++]);for(var te=P(h.store),ne=0;te.length>ne;)v(te[ne++]);a(a.S+a.F*!D,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=j(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!D,"Object",{create:K,defineProperty:J,defineProperties:W,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Q,getOwnPropertySymbols:X}),T&&a(a.S+a.F*(!D||c(function(){var e=j();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!V(t))return t}),r[1]=t,C.apply(T,r)}}}),j.prototype[U]||n(15)(j.prototype,U,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(46),i=n(72),o=n(47);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(24),i=n(99).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){n(71)("asyncIterator")},function(e,t,n){n(71)("observable")},function(e,t,n){e.exports={default:n(179),__esModule:!0}},function(e,t,n){n(180),e.exports=n(2).Object.setPrototypeOf},function(e,t,n){var r=n(5);r(r.S,"Object",{setPrototypeOf:n(181).set})},function(e,t,n){var r=n(11),i=n(10),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(14)(Function.call,n(100).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t,n){n(184);var r=n(2).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(5);r(r.S,"Object",{create:n(45)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(21),s=r(a),u=n(196),c=r(u),l=n(50),f=r(l),d=n(0),h=r(d),p=n(1),v=r(p);Object.defineProperty(t,"__esModule",{value:!0});var m=n(206),y=n(51),b=n(77),g=n(22),_=n(211),w=n(111),x=n(128),k=n(129),A=n(261),S=n(131),P=n(262),O=n(83),I=n(267),E=n(268),j=function(){function e(t,n,r){var i=this;(0,h.default)(this,e),this.uploads={},this.retry=0,this.emit=function(e,t){i.emitter.emit(e,t)},this.getQueryParameters=function(e,t){var n=i.getMediaClient(e),r=n.storedAuth;if(r)return(0,f.default)({hash:t.hash},w.mapAuthToQueryParameters(r));throw new Error("auth required")},this.generateTarget=function(e){var t=e.map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,c.default)(t,2),r=n[0],i=n[1];return e[r]=i,e},{}),n=t.hash,r=t.resumableCurrentChunkSize,o=t.client,a=t.issuer,s=t.token,u=void 0;return u=a?"issuer="+a+"&token="+s:"client="+o+"&token="+s,i.uploadChunkUrl+"/"+n+"-"+r+"?"+u},this.onFilesAdded=function(e){if(0!==e.length){var t=i.uploadParams;e.forEach(function(e){i.uploads[e.uniqueIdentifier]={creationDate:Date.now(),uploadParams:t}});var n=t.collection;i.mediaClientPool.getMediaClient(n).refreshAuth().then(function(){i.retry=0;var t=e.map(function(e){return i.mapResumableFileToMediaFile(e)});i.emit("files-added",{files:t}),t.forEach(function(e){return i.emit("file-added",{file:e})}),i.resumable.upload()},function(){e.forEach(function(e){return i.onError(e,x.ERROR_NAMES.TOKEN_FETCH_FAIL)}),e.forEach(function(e){return e.cancel()}),e.forEach(i.cleanupResumableFile)})}},this.onChunkingComplete=function(e){e.chunks.forEach(function(t){var n=t.callback;t.callback=function(t,r){return"error"===t?(i.retry++,e.abort(),e.pause(!0),void i.resumable.fire("fileError",e,r||"")):("success"===t&&(i.retry=0),void n(t,r))}})},this.onFileProgress=function(e){var t=e.progress(),n=i.mapResumableFileToMediaFile(e);if(t>0&&t<1){var r=new A.MediaProgress(n.size,n.size*t,n.creationDate,Date.now());i.emit("file-uploading",{file:n,progress:r})}},this.onFileSuccess=function(e){return i.getResumableFileUploadParams(e).autoFinalize?void i.finalizeFile(e):void i.emit("file-finalize-ready",{file:i.mapResumableFileToMediaFile(e),finalize:function(){i.finalizeFile(e)}})},this.onFileError=function(e,t){var n=i.getMediaClient(e);i.onUploadError(e,x.ERROR_NAMES.UPLOAD_FAIL,t,n).then(function(){e._prevProgress=0,e.pause(!1),e.chunks.forEach(function(e){"error"===e.status()&&(e.preprocessState=0,e.send()),"pending"===e.status()&&2===e.preprocessState&&(e.preprocessState=0)})}).catch(function(){e.cancel()})},this.onDrop=function(e){e.preventDefault(),e.stopPropagation(),i.emit("file-dropped",e)},this.mapResumableFileToMediaFile=function(e,t){return new k.MediaFile(e.uniqueIdentifier,e.file.name,e.file.size,i.getResumableFileCreationDate(e),e.file.type,t,e)},this.getResumableFileCreationDate=function(e){return i.uploads[e.uniqueIdentifier].creationDate},this.getResumableFileUploadParams=function(e){return i.uploads[e.uniqueIdentifier].uploadParams},this.cleanupResumableFile=function(e){delete i.uploads[e.uniqueIdentifier]},this.emitter=new b.EventEmitter2,this.uploadChunkUrl=t+"/chunk",this.mediaClientPool=new I.MediaClientPool(t,n),this.api=new E.MediaApi,this.setUploadParams(r),this.resumable=new m({target:this.generateTarget,uploadMethod:"PUT",testMethod:"HEAD",chunkSize:4194304,chunkRetryInterval:2500,maxChunkRetries:5,simultaneousUploads:3,forceChunkSize:!0,permanentErrors:[400,403,404,415,500,501],method:"octet",minFileSize:0,query:this.getQueryParameters,preprocess:function(t){return e.hasher.hash(t)},generateUniqueIdentifier:function(){return y.v4()}}),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("chunkingComplete",this.onChunkingComplete),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileError",this.onFileError)}return(0,v.default)(e,[{key:"setUploadParams",value:function(e){this.uploadParams=(0,f.default)({},S.defaultUploadParams,e)}},{key:"getUploadParams",value:function(){return this.uploadParams}},{key:"addBrowse",value:function(e){this.resumable.assignBrowse(e)}},{key:"addDropzone",value:function(e){this.dropzoneElement||(this.dropzoneElement=e,this.dropzoneElement.addEventListener("drop",this.onDrop),this.resumable.assignDrop(this.dropzoneElement))}},{key:"removeDropzone",value:function(){this.dropzoneElement&&(this.dropzoneElement.removeEventListener("drop",this.onDrop),this.resumable.unAssignDrop(this.dropzoneElement),this.dropzoneElement=void 0)}},{key:"addFile",value:function(e){this.resumable.addFile(e)}},{key:"cancel",value:function(e){if(e){var t=this.resumable.getFromUniqueIdentifier(e);t&&t.cancel()}else this.resumable.cancel()}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"getMediaClient",value:function(e){var t=this.getResumableFileUploadParams(e),n=t.collection;return this.mediaClientPool.getMediaClient(n)}},{key:"finalizeFile",value:function(e){var t=this,n=e.fileName,r=e.file,i=this.getResumableFileUploadParams(e),o=i.collection,a=e.chunks.map(function(e){return e.hash+"-"+(e.endByte-e.startByte)}),s=this.getMediaClient(e);this.api.createUpload(s).then(function(e){return t.appendChunksToUpload(s,e,a,1e3)}).then(function(e){return t.api.createFileFromUpload(s,n,r.type,e,o)}).then(function(n){return t.processFile(s,n,e)}).catch(function(n){t.onError(e,x.ERROR_NAMES.OBJ_CREATE_FAIL,n)})}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i=this;return _.sliceByChunks(n,r).map(function(n,o){var a=o*r;return function(){return i.api.appendChunksToUpload(e,t,n,a)}}).reduce(function(e,t){return e.then(t)},s.default.resolve()).then(function(){return t})}},{key:"processFile",value:function(e,t,n){var r=this;return this.fetchFileMetadata(e,t,n).then(function(e){var t=r.mapResumableFileToMediaFile(n,e.id),i=new A.MediaProgress(t.size,t.size,t.creationDate,Date.now());r.emit("file-converted",{file:t,progress:i,metadata:e})}).catch(function(e){r.onError(n,x.ERROR_NAMES.METADATA_FETCH_FAIL,e)})}},{key:"fetchFileMetadata",value:function(e,t,n){var r=this.getResumableFileUploadParams(n),i=r.collection;return r.fetchMetadata?(this.emit("file-converting",{file:this.mapResumableFileToMediaFile(n,t)}),this.api.pollForFileMetadata(e,t,i)):s.default.resolve({id:t})}},{key:"onUploadError",value:function(e,t,n,r){var i=this;return new s.default(function(o,a){var s=e.uniqueIdentifier,u=void 0;try{u=JSON.parse(n)}catch(e){}return O.isTokenError(u)&&i.retry<=1?void r.refreshAuth().then(function(){return o()}).catch(function(){i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,x.ERROR_NAMES.TOKEN_UPDATE_FAIL,n)}),g.handleError(t,n),a()}):(u&&u.error&&u.error.title&&(n=u.error.title),i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,t,n)}),g.handleError(t,n),a(),void 0)})}},{key:"onError",value:function(e,t,n){var r=void 0;r=n&&n.error&&n.error.title?n.error.title:(0,o.default)(n||{}),this.emit("file-upload-error",{file:this.mapResumableFileToMediaFile(e),error:new x.MediaError(e.uniqueIdentifier,t,r)}),g.handleError(t,r)}}]),e}();j.hasher=P.createHasher(),t.UploadService=j},function(e,t,n){var r=n(2),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(73),n(30),n(33),n(188),n(194),n(195),e.exports=n(2).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(44),u=n(4),c=n(14),l=n(49),f=n(5),d=n(11),h=n(29),p=n(74),v=n(34),m=n(103),y=n(104).set,b=n(192)(),g=n(75),_=n(105),w=n(106),x=u.TypeError,k=u.process,A=u.Promise,S="process"==l(k),P=function(){},O=i=g.f,I=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(P,P)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(e){}}(),E=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(x("Promise-chain cycle")):(o=E(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){y.call(u,function(){var t,n,r,i=e._v,o=C(e);if(o&&(t=_(function(){S?k.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=S||C(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},C=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!C(t.promise))return!1;return!0},M=function(e){y.call(u,function(){var t;S?k.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=E(e))?b(function(){var r={_w:n,_d:!1};try{t.call(e,c(L,r,1),c(U,r,1))}catch(e){U.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){U.call({_w:n,_d:!1},e)}}};I||(A=function(e){p(this,A,"Promise","_h"),h(e),r.call(this);try{e(c(L,this,1),c(U,this,1))}catch(e){U.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(76)(A.prototype,{then:function(e,t){var n=O(m(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(L,e,1),this.reject=c(U,e,1)},g.f=O=function(e){return e===A||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:A}),n(32)(A,"Promise"),n(107)("Promise"),a=n(2).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return w(s&&this===a?A:this,e)}}),f(f.S+f.F*!(I&&n(193)(function(e){A.all(e).catch(P)})),"Promise",{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=_(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(23),i=n(3)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(4),i=n(104).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(31)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(3)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(4),a=n(103),s=n(106);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(5),i=n(75),o=n(105);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;
var i=n(197),o=r(i),a=n(200),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(198),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(199)},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(201),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(202)},function(e,t,n){var r=n(10),i=n(102);e.exports=n(2).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){n(204),e.exports=n(2).Object.assign},function(e,t,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(205)})},function(e,t,n){"use strict";var r=n(46),i=n(72),o=n(47),a=n(41),s=n(66),u=Object.assign;e.exports=!u||n(18)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var d,h=s(arguments[c++]),p=l?r(h).concat(l(h)):r(h),v=p.length,m=0;v>m;)f.call(h,d=p[m++])&&(n[d]=h[d]);return n}:u},function(e,t,n){!function(){"use strict";var t=function(e){function n(e,t,n){var i=this;i.opts={},i.getOpt=e.getOpt,i._prevProgress=0,i.resumableObj=e,i.file=t,i.fileName=t.fileName||t.name,i.size=t.size,i.relativePath=t.webkitRelativePath||t.relativePath||i.fileName,i.uniqueIdentifier=n,i._pause=!1,i.container="";var a=void 0!==n,s=function(e,t){switch(e){case"progress":i.resumableObj.fire("fileProgress",i);break;case"error":i.abort(),a=!0,i.chunks=[],i.resumableObj.fire("fileError",i,t);break;case"success":if(a)return;i.resumableObj.fire("fileProgress",i),i.isComplete()&&i.resumableObj.fire("fileSuccess",i,t);break;case"retry":i.resumableObj.fire("fileRetry",i)}};return i.chunks=[],i.abort=function(){var e=0;o.each(i.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&i.resumableObj.fire("fileProgress",i)},i.cancel=function(){var e=i.chunks;i.chunks=[],o.each(e,function(e){"uploading"==e.status()&&(e.abort(),i.resumableObj.uploadNextChunk())}),i.resumableObj.removeFile(i),i.resumableObj.fire("fileProgress",i)},i.retry=function(){i.bootstrap();var e=!1;i.resumableObj.on("chunkingComplete",function(){e||i.resumableObj.upload(),e=!0})},i.bootstrap=function(){i.abort(),a=!1,i.chunks=[],i._prevProgress=0;for(var e=i.getOpt("forceChunkSize")?Math.ceil:Math.floor,t=Math.max(e(i.file.size/i.getOpt("chunkSize")),1),n=0;n<t;n++)!function(e){window.setTimeout(function(){i.chunks.push(new r(i.resumableObj,i,e,s)),i.resumableObj.fire("chunkingProgress",i,e/t)},0)}(n);window.setTimeout(function(){i.resumableObj.fire("chunkingComplete",i)},0)},i.progress=function(){if(a)return 1;var e=0,t=!1;return o.each(i.chunks,function(n){"error"==n.status()&&(t=!0),e+=n.progress(!0)}),e=t?1:e>.99999?1:e,e=Math.max(i._prevProgress,e),i._prevProgress=e,e},i.isUploading=function(){var e=!1;return o.each(i.chunks,function(t){if("uploading"==t.status())return e=!0,!1}),e},i.isComplete=function(){var e=!1;return o.each(i.chunks,function(t){var n=t.status();if("pending"==n||"uploading"==n||1===t.preprocessState)return e=!0,!1}),!e},i.pause=function(e){i._pause=void 0===e?!i._pause:e},i.isPaused=function(){return i._pause},i.resumableObj.fire("chunkingStart",i),i.bootstrap(),this}function r(e,t,n,r){var i=this;i.opts={},i.getOpt=e.getOpt,i.resumableObj=e,i.fileObj=t,i.fileObjSize=t.size,i.fileObjType=t.file.type,i.offset=n,i.callback=r,i.lastProgressCallback=new Date,i.tested=!1,i.retries=0,i.pendingRetry=!1,i.preprocessState=0;var a=i.getOpt("chunkSize");return i.loaded=0,i.startByte=i.offset*a,i.endByte=Math.min(i.fileObjSize,(i.offset+1)*a),i.fileObjSize-i.endByte<a&&!i.getOpt("forceChunkSize")&&(i.endByte=i.fileObjSize),i.xhr=null,i.test=function(){i.xhr=new XMLHttpRequest;var e=function(e){i.tested=!0;var t=i.status();"success"==t?(i.callback(t,i.message()),i.resumableObj.uploadNextChunk()):i.send()};i.xhr.addEventListener("load",e,!1),i.xhr.addEventListener("error",e,!1),i.xhr.addEventListener("timeout",e,!1);var t=[],n=i.getOpt("parameterNamespace"),r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,r){t.push([encodeURIComponent(n+e),encodeURIComponent(r)].join("="))}),t.push([n+"resumableChunkNumber",encodeURIComponent(i.offset+1)].join("=")),t.push([n+"resumableChunkSize",encodeURIComponent(i.getOpt("chunkSize"))].join("=")),t.push([n+"resumableCurrentChunkSize",encodeURIComponent(i.endByte-i.startByte)].join("=")),t.push([n+"resumableTotalSize",encodeURIComponent(i.fileObjSize)].join("=")),t.push([n+"resumableType",encodeURIComponent(i.fileObjType)].join("=")),t.push([n+"resumableIdentifier",encodeURIComponent(i.fileObj.uniqueIdentifier)].join("=")),t.push([n+"resumableFilename",encodeURIComponent(i.fileObj.fileName)].join("=")),t.push([n+"resumableRelativePath",encodeURIComponent(i.fileObj.relativePath)].join("=")),t.push([n+"resumableTotalChunks",encodeURIComponent(i.fileObj.chunks.length)].join("=")),i.xhr.open(i.getOpt("testMethod"),o.getTarget(t)),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var a=i.getOpt("headers");"function"==typeof a&&(a=a(i.fileObj,i)),o.each(a,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(null)},i.preprocessFinished=function(){i.preprocessState=2,i.send()},i.send=function(){var e=i.getOpt("preprocess");if("function"==typeof e)switch(i.preprocessState){case 0:return i.preprocessState=1,void e(i);case 1:return}if(i.getOpt("testChunks")&&!i.tested)return void i.test();i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",function(e){new Date-i.lastProgressCallback>1e3*i.getOpt("throttleProgressCallbacks")&&(i.callback("progress"),i.lastProgressCallback=new Date),i.loaded=e.loaded||0},!1),i.loaded=0,i.pendingRetry=!1,i.callback("progress");var t=function(e){var t=i.status();if("success"==t||"error"==t)i.callback(t,i.message()),i.resumableObj.uploadNextChunk();else{i.callback("retry",i.message()),i.abort(),i.retries++;var n=i.getOpt("chunkRetryInterval");void 0!==n?(i.pendingRetry=!0,setTimeout(i.send,n)):i.send()}};i.xhr.addEventListener("load",t,!1),i.xhr.addEventListener("error",t,!1),i.xhr.addEventListener("timeout",t,!1);var n={resumableChunkNumber:i.offset+1,resumableChunkSize:i.getOpt("chunkSize"),resumableCurrentChunkSize:i.endByte-i.startByte,resumableTotalSize:i.fileObjSize,resumableType:i.fileObjType,resumableIdentifier:i.fileObj.uniqueIdentifier,resumableFilename:i.fileObj.fileName,resumableRelativePath:i.fileObj.relativePath,resumableTotalChunks:i.fileObj.chunks.length},r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,t){n[e]=t});var a=i.fileObj.file.slice?"slice":i.fileObj.file.mozSlice?"mozSlice":i.fileObj.file.webkitSlice?"webkitSlice":"slice",s=i.fileObj.file[a](i.startByte,i.endByte),u=null,c=i.getOpt("target"),l=i.getOpt("parameterNamespace");if("octet"===i.getOpt("method")){u=s;var f=[];o.each(n,function(e,t){f.push([encodeURIComponent(l+e),encodeURIComponent(t)].join("="))}),c=o.getTarget(f)}else u=new FormData,o.each(n,function(e,t){u.append(l+e,t)}),u.append(l+i.getOpt("fileParameterName"),s);var d=i.getOpt("uploadMethod");i.xhr.open(d,c),"octet"===i.getOpt("method")&&i.xhr.setRequestHeader("Content-Type","binary/octet-stream"),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var h=i.getOpt("headers");"function"==typeof h&&(h=h(i.fileObj,i)),o.each(h,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(u)},i.abort=function(){i.xhr&&i.xhr.abort(),i.xhr=null},i.status=function(){return i.pendingRetry?"uploading":i.xhr?i.xhr.readyState<4?"uploading":200==i.xhr.status||201==i.xhr.status?"success":o.contains(i.getOpt("permanentErrors"),i.xhr.status)||i.retries>=i.getOpt("maxChunkRetries")?"error":(i.abort(),"pending"):"pending"},i.message=function(){return i.xhr?i.xhr.responseText:""},i.progress=function(e){void 0===e&&(e=!1);var t=e?(i.endByte-i.startByte)/i.fileObjSize:1;if(i.pendingRetry)return 0;switch(i.status()){case"success":case"error":return 1*t;case"pending":return 0*t;default:return i.loaded/(i.endByte-i.startByte)*t}},this}if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var i=this;i.files=[],i.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:void 0,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,maxFilesErrorCallback:function(e,t){var n=i.getOpt("maxFiles");alert("Please upload no more than "+n+" file"+(1===n?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+o.formatSize(i.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+o.formatSize(i.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+i.getOpt("fileType")+".")}},i.opts=e||{},i.getOpt=function(e){var i=this;if(e instanceof Array){var a={};return o.each(e,function(e){a[e]=i.getOpt(e)}),a}if(i instanceof r){if(void 0!==i.opts[e])return i.opts[e];i=i.fileObj}if(i instanceof n){if(void 0!==i.opts[e])return i.opts[e];i=i.resumableObj}if(i instanceof t)return void 0!==i.opts[e]?i.opts[e]:i.defaults[e]},i.events=[],i.on=function(e,t){i.events.push(e.toLowerCase(),t)},i.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n=e[0].toLowerCase(),t=0;t<=i.events.length;t+=2)i.events[t]==n&&i.events[t+1].apply(i,e.slice(1)),"catchall"==i.events[t]&&i.events[t+1].apply(null,e);"fileerror"==n&&i.fire("error",e[2],e[1]),"fileprogress"==n&&i.fire("progress")};var o={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if(void 0!==e.length){for(var n=0;n<e.length;n++)if(!1===t(e[n]))return}else for(n in e)if(!1===t(n,e[n]))return},generateUniqueIdentifier:function(e){var t=i.getOpt("generateUniqueIdentifier");if("function"==typeof t)return t(e);var n=e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var n=!1;return o.each(e,function(e){return e!=t||(n=!0,!1)}),n},formatSize:function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e){var t=i.getOpt("target");return"function"==typeof t?t(e):(t+=t.indexOf("?")<0?"?":"&",t+e.join("&"))}},a=function(e){o.stopEvent(e),e.dataTransfer&&e.dataTransfer.items?u(e.dataTransfer.items,e):e.dataTransfer&&e.dataTransfer.files&&u(e.dataTransfer.files,e)},s=function(e){e.preventDefault()},u=function(e,t,n,r){n||(n={total:0,files:[],event:t}),c(e.length,n);for(var i=0;i<e.length;i++){var o,a,s=e[i];if(s.isFile||s.isDirectory)o=s;else if(s.getAsEntry)o=s.getAsEntry();else{if(!s.webkitGetAsEntry){if("function"==typeof s.getAsFile){l(s.getAsFile(),n,r);continue}if(File&&s instanceof File){l(s,n,r);continue}c(-1,n);continue}o=s.webkitGetAsEntry()}if(o){if(o.isFile)o.file(function(e){l(e,n,r)},function(e){console.warn(e)});else if(o.isDirectory){a=o.createReader();var f=[],d=function(e){a.readEntries(function(r){if(r.length>0){for(var i=0;i<r.length;i++)f.push(r[i]);d(o.fullPath)}else u(f,t,n,e),c(-1,n)},function(e){c(-1,n),console.warn(e)})};d(o.fullPath)}}else c(-1,n)}},c=function(e,t){t.total+=e,t.files.length===t.total&&f(t.files,t.event)},l=function(e,t,n){n&&(e.relativePath=n+"/"+e.name),t.files.push(e),t.files.length===t.total&&f(t.files,t.event)},f=function(e,t){var r=0,a=i.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if(void 0!==a.maxFiles&&a.maxFiles<e.length+i.files.length){if(1!==a.maxFiles||1!==i.files.length||1!==e.length)return a.maxFilesErrorCallback(e,r++),!1;i.removeFile(i.files[0])}var s=[];o.each(e,function(e){function u(r){i.getFromUniqueIdentifier(r)||function(){e.uniqueIdentifier=r;var o=new n(i,e,r);i.files.push(o),s.push(o),o.container=void 0!==t?t.srcElement:null,window.setTimeout(function(){i.fire("fileAdded",o,t)},0)}()}var c=e.name;if(a.fileType.length>0){var l=!1;for(var f in a.fileType){var d="."+a.fileType[f];if(-1!==c.indexOf(d,c.length-d.length)){l=!0;break}}if(!l)return a.fileTypeErrorCallback(e,r++),!1}if(void 0!==a.minFileSize&&e.size<a.minFileSize)return a.minFileSizeErrorCallback(e,r++),!1;if(void 0!==a.maxFileSize&&e.size>a.maxFileSize)return a.maxFileSizeErrorCallback(e,r++),!1;var h=o.generateUniqueIdentifier(e);h&&"function"==typeof h.done&&"function"==typeof h.fail?h.done(function(e){u(e)}).fail(function(){u()}):u(h)}),window.setTimeout(function(){i.fire("filesAdded",s)},0)};return i.uploadNextChunk=function(){var e=!1;if(i.getOpt("prioritizeFirstAndLastChunk")&&(o.each(i.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(o.each(i.files,function(t){if(!1===t.isPaused()&&o.each(t.chunks,function(t){if("pending"==t.status()&&0===t.preprocessState)return t.send(),e=!0,!1}),e)return!1}),e)return!0;var t=!1;return o.each(i.files,function(e){if(!e.isComplete())return t=!0,!1}),t||i.fire("complete"),!1},i.assignBrowse=function(e,t){void 0===e.length&&(e=[e]),o.each(e,function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:(n=document.createElement("input"),n.setAttribute("type","file"),n.style.display="none",e.addEventListener("click",function(){n.style.opacity=0,n.style.display="block",n.focus(),n.click(),n.style.display="none"},!1),e.appendChild(n));var r=i.getOpt("maxFiles");void 0===r||1!=r?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),t?n.setAttribute("webkitdirectory","webkitdirectory"):n.removeAttribute("webkitdirectory"),n.addEventListener("change",function(e){f(e.target.files,e),e.target.value=""},!1)})},i.assignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.addEventListener("dragover",s,!1),e.addEventListener("dragenter",s,!1),e.addEventListener("drop",a,!1)})},i.unAssignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.removeEventListener("dragover",s),e.removeEventListener("dragenter",s),e.removeEventListener("drop",a)})},i.isUploading=function(){var e=!1;return o.each(i.files,function(t){if(t.isUploading())return e=!0,!1}),e},i.upload=function(){if(!i.isUploading()){i.fire("uploadStart");for(var e=1;e<=i.getOpt("simultaneousUploads");e++)i.uploadNextChunk()}},i.pause=function(){o.each(i.files,function(e){e.abort()}),i.fire("pause")},i.cancel=function(){for(var e=i.files.length-1;e>=0;e--)i.files[e].cancel();i.fire("cancel")},i.progress=function(){var e=0,t=0;return o.each(i.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},i.addFile=function(e,t){f([e],t)},i.removeFile=function(e){for(var t=i.files.length-1;t>=0;t--)i.files[t]===e&&i.files.splice(t,1)},i.getFromUniqueIdentifier=function(e){var t=!1;return o.each(i.files,function(n){n.uniqueIdentifier==e&&(t=n)}),t},i.getSize=function(){var e=0;return o.each(i.files,function(t){e+=t.size}),e},this};e.exports=t}()},function(e,t,n){function r(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:u,f=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:l+1,h=f-c+(d-l)/1e4;if(h<0&&void 0===e.clockseq&&(a=a+1&16383),(h<0||f>c)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=d,u=a,f+=122192928e5;var p=(1e4*(268435455&f)+d)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var v=f/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var m=e.node||s,y=0;y<6;++y)i[r+y]=m[y];return t||o(i)}var i=n(108),o=n(109),a=i(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]],u=16383&(a[6]<<8|a[7]),c=0,l=0;e.exports=r},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(108),o=n(109);e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l={internalStorage:{storage:{},getItem:function(e){return this.storage[e]},setItem:function(e,t){this.storage[e]=t},clear:function(){this.storage={}}},getLocalStorage:function(){return window.localStorage},getSessionStorage:function(){return window.sessionStorage},getInternalStorage:function(){return this.internalStorage},getStorage:function(){try{var e=this.getLocalStorage();if(e)return e;var t=this.getSessionStorage();if(t)return t}catch(e){return this.getInternalStorage()}},isCORSRequest:function(e){var t=document.createElement("a");return t.href=e,t.host!==window.location.host},getCookieValue:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}},f=function(){function e(t){var n=this;(0,s.default)(this,e),this.STORAGE_KEY_PREAMBLE="herment",this.MAXEVENTS=100,this.PUBLISH_INTERVAL=5e3,this.SAVE_INTERVAL=1e3,this.isStarted=!1,this.config=this.parseConfig(t),this.storage=l.getStorage(),window.addEventListener("unload",function(){return n.moveQueueToStorage()})}return(0,c.default)(e,[{key:"getAtlPath",value:function(){return l.getCookieValue("__atl_path")}},{key:"getServerName",value:function(){return document.location.hostname}},{key:"getProductNameFromServerName",value:function(e){return void 0!==e?e.replace(".com","").replace(".net","").replace(".org","").replace(".au","").replace(".io",""):"-"}},{key:"getSubdomain",value:function(e){if(e.match(/^([a-z0-9\.]*)[\-\.]{1}([a-z0-9]+)+\.([a-z]{2,6})$/i)){var t=e.split(".");if(t=2===t[t.length-1].length?t.slice(0,t.length-3):t.slice(0,t.length-2),0!==t.length)return t.join(".")}return"-"}},{key:"generateRandomStorageKey",value:function(){var e=(Math.random()+"").slice(2,12),t=(Math.random()+"").slice(2,12);return e.concat(t)}},{key:"ajaxPost",value:function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json, text/javascript, */*;"),n.send(t)}},{key:"parseConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window,n=t.AJS?t.AJS.EventQueue:[],r=e.queue||n,i=e.analyticsscheme||"https",o=e.analyticsserver||"analytics.atlassian.com",a=e.analyticsurl||"/analytics/events",s=e.server||this.getServerName();return{queue:r,gasScheme:i,gasServer:o,gasUrl:a,serverName:s,productName:e.product||this.getProductNameFromServerName(s),subProductName:e.subproduct||this.getSubdomain(s)||"-",version:e.version,session:e.session,sen:e.sen,sourceIP:e.sourceIP,atlPath:e.atlpath||this.getAtlPath(),post:e.ajax||this.ajaxPost,maxevents:e.maxevents||this.MAXEVENTS,storageKey:e.storage_key||this.STORAGE_KEY_PREAMBLE+this.generateRandomStorageKey()+this.generateRandomStorageKey(),user:e.user||"default",publishInterval:e.publish_interval||this.PUBLISH_INTERVAL,saveInterval:e.save_interval||this.SAVE_INTERVAL}}},{key:"pushToServer",value:function(e,t){var n=this.config,r=n.gasScheme,i=n.gasServer,a=n.gasUrl;(t||this.config.post)(r+"://"+i+a,(0,o.default)({events:e}))}},{key:"addEventsToArray",value:function(e,t,n){if(n&&n.server&&n.product&&n.subproduct&&n.user)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(t.length>=this.config.maxevents)return;if(i.name&&i.properties){var o={name:i.name,properties:i.properties,serverTime:i.time||(new Date).getTime(),server:n.server,user:n.user,product:n.product,subproduct:n.subproduct,version:n.version,session:n.session,sen:n.sen,sourceIP:n.sourceIP,atlPath:n.atlPath};t.push(o)}}}},{key:"publishFromQueueAndStorage",value:function(e){try{var t=e||this.pushToServer.bind(this),n=[];if(this.config.queue.length<1&&(void 0===this.storage||this.storage.length<1))return;var r={server:this.config.serverName,user:this.config.user,product:this.config.productName,subproduct:this.config.subProductName,version:this.config.version,session:this.config.session,sen:this.config.sen,sourceIP:this.config.sourceIP,atlPath:this.config.atlPath};this.addEventsToArray(this.config.queue,n,r);var i=this.popEventsFromStorage();this.addEventsToArray(i,n,r),this.config.queue.length=0,n&&n.length&&t(n)}catch(e){}}},{key:"serialiseEventsToString",value:function(e){return(0,o.default)(e)}},{key:"deserialiseEvents",value:function(e){return JSON.parse(e)}},{key:"storeEvents",value:function(e){if(this.storage)try{if(this.storage[this.config.storageKey]){var t=this.deserialiseEvents(this.storage[this.config.storageKey])||[];t.length<this.config.maxevents&&t.push.apply(t,e),e=t}this.storage.setItem(this.config.storageKey,this.serialiseEventsToString(e))}catch(e){}}},{key:"popEventsFromStorage",value:function(){if(!this.storage)return[];try{if(this.storage[this.config.storageKey]){var e=this.deserialiseEvents(this.storage[this.config.storageKey]);return this.storage[this.config.storageKey]=this.serialiseEventsToString([]),e}}catch(e){}return[]}},{key:"moveQueueToStorage",value:function(){0!==this.config.queue.length&&this.storage&&(this.storeEvents(this.config.queue),this.config.queue.length=0)}},{key:"start",value:function(){var e=this;this.isStarted=!0;var t=Array.prototype.push;this.config.queue.push=function(n){n.time=(new Date).getTime(),t.call(e.config.queue,n)},this.initialSaveTimeout=setTimeout(this.publishFromQueueAndStorage.bind(this),this.config.saveInterval),this.publishInterval=setInterval(this.publishFromQueueAndStorage.bind(this),this.config.publishInterval),this.saveInterval=setInterval(this.moveQueueToStorage.bind(this),this.config.saveInterval)}},{key:"stop",value:function(){this.isStarted=!1,this.publishFromQueueAndStorage(),clearTimeout(this.initialSaveTimeout),clearInterval(this.saveInterval),clearInterval(this.publishInterval)}},{key:"destroy",value:function(){this.stop()}}]),e}(),d=void 0,h=function(){return function(e){return d?(d.stop(),void(d.config=d.parseConfig(e))):d=new f(e)}}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliceByChunks=function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(213)),r(n(112)),r(n(214)),r(n(216)),r(n(113)),r(n(122))},function(e,t,n){"use strict";function r(e,t){return{type:"FETCHING_COLLECTION_SUCCEEDED",collection:e,hasNextPage:t}}function i(e){return{type:"FETCHING_COLLECTION_FAILED",error:e}}Object.defineProperty(t,"__esModule",{value:!0});var o;!function(e){e[e.click=0]="click",e[e.delete=1]="delete",e[e.download=2]="download",e[e.retry=3]="retry",e[e.custom=4]="custom"}(o=t.CardActionType||(t.CardActionType={})),t.CardClick=function(e){return{type:o.click,handler:e}},t.CardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.ListCardClick=function(e){return{type:o.click,handler:e}},t.ListCardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.CollectionCardClick=function(e){return{type:o.click,handler:e}},t.fetchingCollectionSucceeded=r,t.fetchingCollectionFailed=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(215);t.DefaultMediaStateManager=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=function(){function e(){this.subscribers={},this.state=new Map}return e.prototype.getState=function(e){return this.state.get(e)},e.prototype.updateState=function(e,t){var n=this.subscribers[e],i=r.__assign({},this.state.get(e)||{},t);this.state.set(e,i),void 0!==n&&Array.from(n).forEach(function(e){return e.call(e,i)})},e.prototype.subscribe=function(e,t){var n=this.subscribers,r=n[e];void 0===r&&(r=[],n[e]=r),r.indexOf(t)>-1||r.push(t)},e.prototype.unsubscribe=function(e,t){var n=this.subscribers[e];if(void 0!==n){var r=n.indexOf(t);r>-1&&n.splice(r,1)}},e.prototype.destroy=function(){this.subscribers={}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26);n(217),n(218);var i=n(113),o=n(242),a=n(244),s=n(124),u=n(245),c=n(127),l=200,f=function(){function e(){}return e.create=function(e){return new d(e)},e}();t.ContextFactory=f;var d=function(){function e(e){this.config=e,this.collectionPool=o.RemoteMediaCollectionProviderFactory.createPool(),this.itemPool=i.MediaItemProvider.createPool(),this.urlPreviewPool=i.MediaUrlPreviewProvider.createPool(),this.fileItemCache=new u.LRUCache(e.cacheSize||l)}return e.prototype.getMediaItemProvider=function(e,t,n,o){var a=o&&"link"===o.type,s=o&&"file"===o.type&&"pending"!==o.details.processingStatus;if(o&&(a||s))return{observable:function(){return r.Observable.of(o)}};var u=i.MediaItemProvider.fromPool(this.itemPool,this.apiConfig,this.fileItemCache,t,e,n);return o?{observable:function(){return u.observable().startWith(o)}}:u},e.prototype.getMediaCollectionProvider=function(e,t){return void 0===t&&(t=c.DEFAULT_COLLECTION_PAGE_SIZE),o.RemoteMediaCollectionProviderFactory.fromPool(this.collectionPool,this.apiConfig,e,t)},e.prototype.getDataUriService=function(e){return new a.MediaDataUriService(this.config.authProvider,this.config.serviceHost,e)},e.prototype.getUrlPreviewProvider=function(e){return i.MediaUrlPreviewProvider.fromPool(this.urlPreviewPool,this.apiConfig,e)},e.prototype.addLinkItem=function(e,t,n){return new s.MediaLinkService(this.apiConfig).addLinkItem(e,t,n)},e.prototype.refreshCollection=function(e,t){this.getMediaCollectionProvider(e,t).refresh()},Object.defineProperty(e.prototype,"apiConfig",{get:function(){return{serviceHost:this.config.serviceHost,authProvider:this.config.authProvider}},enumerable:!0,configurable:!0}),e}()},function(e,t){e.exports=n(57)},function(e,t){e.exports=n(63)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t){this.config=e,this.fileItemCache=t}return t.prototype.getFileItem=function(t,n){var i=this,o=[t,"file"].join("-"),a=this.fileItemCache.get(o);return a?e.resolve(a):r.default({config:this.config,collectionName:n,preventPreflight:!0})({url:"/file/"+t}).then(function(e){return e.data}).then(function(e){var t={type:"file",details:{id:e.id,mediaType:e.mediaType,mimeType:e.mimeType,name:e.name,processingStatus:e.processingStatus,size:e.size,artifacts:e.artifacts}};return"succeeded"===e.processingStatus&&i.fileItemCache.set(o,t),t})},t}();t.MediaFileService=i}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(6),o=n(117),a=n(221),s=n(81),u=r(s);u.Axios=a,u.create=function(e){return r(i.merge(s,e))},u.Cancel=n(121),u.CancelToken=n(235),u.isCancel=n(120),u.all=function(e){return t.all(e)},u.spread=n(236),e.exports=u,e.exports.default=u}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(81),o=n(6),a=n(230),s=n(231),u=n(233),c=n(234);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url));var n=[s,void 0],r=t.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(119);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(6);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){
var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(6);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";(function(t){function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(6),o=n(232),a=n(120),s=n(81);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(n){return a(n)||(r(e),n&&n.response&&(n.response.data=o(n.response.data,n.response.headers,e.transformResponse))),t.reject(n)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t,n){"use strict";(function(t){function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new t(function(e){n=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),n(r.reason))})}var i=n(121);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImageRemote=function(e,t){if(void 0===t&&(t=window.location.origin),URL&&URL.prototype){var n=new URL(e);return!!n.host&&n.origin!==t}return!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n;t.checkWebpSupport=function(){return void 0!==n?e.resolve(n):new e(function(e){var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){n=2===t.height,e(n)}})}}).call(t,n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(123),o=n(82),a=n(125),s=function(){function e(){}return e.fromMediaApi=function(e,t,n,o,a){switch(n){case"file":return r.FileProvider.fromMediaApi(e,t,o,a,r.FILE_PROVIDER_RETRY_INTERVAL);case"link":return i.LinkProvider.fromMediaApi(e,o,a);default:throw new Error("invalid media type "+n)}},e.fromPool=function(t,n,r,i,o,s){return{observable:function(){var u=[i,o,s].join("-");return a.observableFromObservablePool(t,u,function(){return e.fromMediaApi(n,r,i,o,s).observable()})}}},e.createPool=function(){return new o.Pool},e}();t.MediaItemProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(126),o=n(82),a=n(125),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.fromMediaApi=function(e,t){return i.UrlPreviewProvider.fromMediaApi(e,t)},t.fromPool=function(e,n,r){return{observable:function(){return a.observableFromObservablePool(e,r,function(){return t.fromMediaApi(n,r).observable()})}}},t.createPool=function(){return new o.Pool},t}(i.UrlPreviewProvider);t.MediaUrlPreviewProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getUrlPreview=function(e){return r.default({config:this.config})({url:"/link/preview",params:{url:e}}).then(function(e){var t=e.data,n=t.preview,r=t.previewError;if(r)throw new Error(r.code+": "+r.name);return n})},e}();t.MediaUrlPreviewService=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=n(127),o=n(243),a=n(82),s=function(){function e(){}return e.fromCollectionService=function(e,t,n,i){return void 0===i&&(i="desc"),new r.RemoteMediaCollectionProvider(e,t,n,i)},e.fromMediaAPI=function(t,n,r,o){return void 0===o&&(o="desc"),e.fromCollectionService(new i.MediaCollectionService(t),n,r,o)},e.fromPool=function(e,t,n,a,s){void 0===s&&(s="desc");var u=[n,a,s].join("-"),c=function(){var e=new i.MediaCollectionService(t);return new r.RemoteMediaCollectionProvider(e,n,a,s)};return o.mediaCollectionProviderFromPool(e,u,c)},e.createPool=function(){return new a.Pool},e}();t.RemoteMediaCollectionProviderFactory=s},function(e,t,n){"use strict";function r(e,t,n){return e.acquire(t,function(){var r=n(),o=r.observable;return r.observable=function(){return new i.Observable(function(n){var i=o.bind(r)(),a=i.subscribe(n);return function(){a.unsubscribe(),e.release(t)}})},r})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.mediaCollectionProviderFromPool=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t,n){this.authProvider=e,this.serviceHost=t,this.collectionName=n,this.request=r.default({config:{serviceHost:this.serviceHost,authProvider:this.authProvider},collectionName:this.collectionName})}return t.prototype.fetchOriginalDataUri=function(e){return this.fetchSomeDataUri("/file/"+e.details.id+"/binary",{"max-age":3600,collection:this.collectionName})},t.prototype.fetchImageDataUri=function(e,t,n,r){return void 0===r&&(r="crop"),this.fetchSomeDataUri("/file/"+e.details.id+"/image",{width:t,height:n,mode:r,"max-age":3600,collection:this.collectionName})},t.prototype.fetchSomeDataUri=function(e,t){return this.request({url:e,params:t,responseType:"image"}).then(this.readBlob)},t.prototype.readBlob=function(t){return new e(function(e,n){var r=new FileReader;r.addEventListener("load",function(){return e(r.result)}),r.addEventListener("error",function(){return n(r.error)}),r.readAsDataURL(t)})},t}();t.MediaDataUriService=i}).call(t,n(7))},function(e,t){function n(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}n.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},n.prototype.put=function(e,t){var n=this._keymap[e];return n?(n.value=t,void this._markEntryAsUsed(n)):(this._keymap[e]=n={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=n,n.older=this.newest):this.oldest=n,this.newest=n,this.size++,this.size>this.limit?this.shift():void 0)},n.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},n.prototype.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return this._markEntryAsUsed(n),t?n:n.value},n.prototype.find=function(e){return this._keymap[e]},n.prototype.set=function(e,t){var n,r=this.get(e,!0);return r?(n=r.value,r.value=t):(n=this.put(e,t))&&(n=n.value),n},n.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},n.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?n.prototype.keys=function(){return Object.keys(this._keymap)}:n.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},n.prototype.forEach=function(e,t,n){var r;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(r=this.newest;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.oldest;r;)e.call(t,r.key,r.value,this),r=r.newer},n.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,n=this.oldest;n;)e[t++]={key:n.key,value:n.value},n=n.newer;return e},n.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=n)},function(e,t,n){e.exports={default:n(247),__esModule:!0}},function(e,t,n){n(73),n(30),n(33),n(248),n(254),n(257),n(259),e.exports=n(2).Set},function(e,t,n){"use strict";var r=n(249),i=n(130);e.exports=n(250)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(9).f,i=n(45),o=n(76),a=n(14),s=n(74),u=n(34),c=n(65),l=n(97),f=n(107),d=n(12),h=n(70).fastKey,p=n(130),v=d?"_s":"size",m=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(70),a=n(18),s=n(15),u=n(76),c=n(34),l=n(74),f=n(11),d=n(32),h=n(9).f,p=n(251)(0),v=n(12);e.exports=function(e,t,n,m,y,b){var g=r[e],_=g,w=y?"set":"add",x=_&&_.prototype,k={};return v&&"function"==typeof _&&(b||x.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,n){l(t,_,e,"_c"),t._c=new g,void 0!=n&&c(n,y,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!b||"clear"!=e)&&s(_.prototype,e,function(n,r){if(l(this,_,e),!t&&b&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),b||h(_.prototype,"size",{get:function(){return this._c.size}})):(_=m.getConstructor(t,e,y,w),u(_.prototype,n),o.NEED=!0),d(_,e),k[e]=_,i(i.G+i.W+i.F,k),b||m.setStrong(_,e,y),_}},function(e,t,n){var r=n(14),i=n(66),o=n(41),a=n(67),s=n(252);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var v,m,y=o(t),b=i(y),g=r(s,p,3),_=a(b.length),w=0,x=n?h(t,_):u?h(t,0):void 0;_>w;w++)if((d||w in b)&&(v=b[w],m=g(v,w,y),e))if(n)x[w]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(l)return!1;return f?-1:c||l?l:x}}},function(e,t,n){var r=n(253);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(11),i=n(98),o=n(3)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);r(r.P+r.R,"Set",{toJSON:n(255)("Set")})},function(e,t,n){var r=n(49),i=n(256);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(34);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(258)("Set")},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(260)("Set")},function(e,t,n){"use strict";var r=n(5),i=n(29),o=n(14),a=n(34);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(22),c=function(){function e(t,n,r,i){return(0,o.default)(this,e),this.size=t,this.progress=n,this.startTime=r,this.measureTime=i,e.isValidSize(t)?e.isValidProgress(t,n)?e.isValidStartTime(r)?e.isValidMeasureTime(r,i)?(this.size=t,this.progress=n,this.startTime=r,void(this.measureTime=i)):void u.handleError("wrong_measure_time","The progress measure time has incorrect format."):void u.handleError("wrong_start_time","The progress start time has incorrect format."):void u.handleError("wrong_progress","The progress format is incorrect."):void u.handleError("wrong_file_size","Passed file size is incorrect.")}return(0,s.default)(e,[{key:"toJSON",value:function(){return{absolute:this.absolute,portion:this.portion,max:this.max,overallTime:this.overallTime,expectedFinishTime:this.expectedFinishTime,timeLeft:this.timeLeft}}},{key:"absolute",get:function(){return this.progress}},{key:"portion",get:function(){return this.progress/this.size}},{key:"max",get:function(){return this.size}},{key:"overallTime",get:function(){return(this.measureTime-this.startTime)/this.portion}},{key:"expectedFinishTime",get:function(){return this.startTime+this.overallTime}},{key:"timeLeft",get:function(){return this.expectedFinishTime-this.measureTime}}],[{key:"isValidSize",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidProgress",value:function(t,n){return e.isValidSize(t)&&"number"==typeof n&&n>=0&&n<=t}},{key:"isValidStartTime",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidMeasureTime",value:function(t,n){return e.isValidStartTime(t)&&"number"==typeof n&&n>=t}}]),e}();t.MediaProgress=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(263),i=n(265);t.createHasher=function(){var e=void 0;try{e=new i.WorkerHasher(3)}catch(t){e=new r.SimpleHasher}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(264),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"hash",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=new FileReader;r.onload=function(t){var n=t.target.result;e.hash=new u(4194304).digestFromArrayBuffer(n),e.preprocessFinished()},r.readAsArrayBuffer(n)}}]),e}();t.SimpleHasher=c},function(e,t,n){(function(t){!function(){function n(e){"use strict";for(var t={fill:0},o=function(e){for(e+=9;e%64>0;e+=1);return e},a=function(e,t){var n=new Uint8Array(e.buffer),r=t%4,i=t-r;switch(r){case 0:n[i+3]=0;case 1:n[i+2]=0;case 2:n[i+1]=0;case 3:n[i+0]=0}for(var o=1+(t>>2);o<e.length;o++)e[o]=0},s=function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=n/(1<<29)|0,e[15+(2+(t>>2)&-16)]=n<<3},u=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a.charCodeAt(n+3);case 1:e[i+1-(s<<1)|0]=a.charCodeAt(n+2);case 2:e[i+2-(s<<1)|0]=a.charCodeAt(n+1);case 3:e[i+3-(s<<1)|0]=a.charCodeAt(n)}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2]=a.charCodeAt(n+o)<<24|a.charCodeAt(n+o+1)<<16|a.charCodeAt(n+o+2)<<8|a.charCodeAt(n+o+3);switch(u){case 3:e[i+c+1|0]=a.charCodeAt(n+c+2);case 2:e[i+c+2|0]=a.charCodeAt(n+c+1);case 1:e[i+c+3|0]=a.charCodeAt(n+c)}}},c=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a[n+3];case 1:e[i+1-(s<<1)|0]=a[n+2];case 2:e[i+2-(s<<1)|0]=a[n+1];case 3:e[i+3-(s<<1)|0]=a[n]}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2|0]=a[n+o]<<24|a[n+o+1]<<16|a[n+o+2]<<8|a[n+o+3];switch(u){case 3:e[i+c+1|0]=a[n+c+2];case 2:e[i+c+2|0]=a[n+c+1];case 1:e[i+c+3|0]=a[n+c]}}},l=function(e,t,n,r,o){var a,s=this,u=o%4,c=(r+u)%4,l=r-c,f=new Uint8Array(i.readAsArrayBuffer(s.slice(n,n+r)));switch(u){case 0:e[o]=f[3];case 1:e[o+1-(u<<1)|0]=f[2];case 2:e[o+2-(u<<1)|0]=f[1];case 3:e[o+3-(u<<1)|0]=f[0]}if(!(r<c+u)){for(a=4-u;a<l;a=a+4|0)t[o+a>>2|0]=f[a]<<24|f[a+1]<<16|f[a+2]<<8|f[a+3];switch(c){case 3:e[o+l+1|0]=f[l+2];case 2:e[o+l+2|0]=f[l+1];case 1:e[o+l+3|0]=f[l]}}},f=function(e){switch(r.getDataType(e)){case"string":return u.bind(e);case"array":case"buffer":return c.bind(e);case"arraybuffer":return c.bind(new Uint8Array(e));case"view":return c.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return l.bind(e)}},d=new Array(256),h=0;h<256;h++)d[h]=(h<16?"0":"")+h.toString(16);var p=function(e){for(var t=new Uint8Array(e),n=new Array(e.byteLength),r=0;r<n.length;r++)n[r]=d[t[r]];return n.join("")},v=function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");t.offset=0,t.maxChunkLen=e,t.padMaxChunkLen=o(e),t.heap=new ArrayBuffer(v(t.padMaxChunkLen+320+20)),t.h32=new Int32Array(t.heap),t.h8=new Int8Array(t.heap),t.core=new n._core({Int32Array:Int32Array,DataView:DataView},{},t.heap),t.buffer=null}(e||65536);var m=function(e,n){t.offset=0;var r=new Int32Array(e,n+320,5);r[0]=1732584193,r[1]=-271733879,r[2]=-1732584194,r[3]=271733878,r[4]=-1009589776},y=function(e,n){var r=o(e),i=new Int32Array(t.heap,0,r>>2);return a(i,e),s(i,e,n),r},b=function(e,n,r,i){f(e)(t.h8,t.h32,n,r,i||0)},g=function(e,n,r,i,o){var a=r;b(e,n,r),o&&(a=y(r,i)),t.core.hash(a,t.padMaxChunkLen)},_=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),i=new DataView(r.buffer);return i.setInt32(0,n[0],!1),i.setInt32(4,n[1],!1),i.setInt32(8,n[2],!1),i.setInt32(12,n[3],!1),i.setInt32(16,n[4],!1),r},w=this.rawDigest=function(e){var n=e.byteLength||e.length||e.size||0;m(t.heap,t.padMaxChunkLen);var r=0,i=t.maxChunkLen;for(r=0;n>r+i;r+=i)g(e,r,i,n,!1);return g(e,r,n-r,n,!0),_(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return p(w(e).buffer)},this.resetState=function(){return m(t.heap,t.padMaxChunkLen),this},this.append=function(e){var n,r=0,i=e.byteLength||e.length||e.size||0,o=t.offset%t.maxChunkLen;for(t.offset+=i;r<i;)n=Math.min(i-r,t.maxChunkLen-o),b(e,r,n,o),o+=n,r+=n,o===t.maxChunkLen&&(t.core.hash(t.maxChunkLen,t.padMaxChunkLen),o=0);return this},this.getState=function(){var e;if(t.offset%t.maxChunkLen)e=t.heap.slice(0);else{var n=new Int32Array(t.heap,t.padMaxChunkLen+320,5);e=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}return{offset:t.offset,heap:e}},this.setState=function(e){return t.offset=e.offset,20===e.heap.byteLength?new Int32Array(t.heap,t.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):t.h32.set(new Int32Array(e.heap)),this};var x=this.rawEnd=function(){var e=t.offset,n=e%t.maxChunkLen,r=y(n,e);t.core.hash(r,t.padMaxChunkLen);var i=_(t.heap,t.padMaxChunkLen);return m(t.heap,t.padMaxChunkLen),i};this.end=function(){return p(x().buffer)}}var r={getDataType:function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if(void 0!==t&&t.Buffer&&t.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(n._core=function(e,t,n){"use asm";var r=new e.Int32Array(n);function i(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,d=0,h=0,p=0,v=0,m=0;o=r[t+320>>2]|0;s=r[t+324>>2]|0;c=r[t+328>>2]|0;f=r[t+332>>2]|0;h=r[t+336>>2]|0;for(n=0;(n|0)<(e|0);n=n+64|0){a=o;u=s;l=c;d=f;p=h;for(i=0;(i|0)<64;i=i+4|0){m=r[n+i>>2]|0;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[e+i>>2]=m}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)+1859775393|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|s&f|c&f)|0)+((m+h|0)-1894007588|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)-899497514|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}o=o+a|0;s=s+u|0;c=c+l|0;f=f+d|0;h=h+p|0}r[t+320>>2]=o;r[t+324>>2]=s;r[t+328>>2]=c;r[t+332>>2]=f;r[t+336>>2]=h}return{hash:i}},e.exports=n,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,o=function(e,t,n){try{return n(null,e.digest(t))}catch(e){return n(e)}},a=function(e,t,n,r,i){var o=new self.FileReader;o.onloadend=function(){var s=o.result;t+=o.result.byteLength;try{e.append(s)}catch(e){return void i(e)}t<r.size?a(e,t,n,r,i):i(null,e.end())},o.readAsArrayBuffer(r.slice(t,t+n))};self.onmessage=function(e){var t=e.data.data,r=e.data.file,i=e.data.id;if(void 0!==i&&(r||t)){var s=e.data.blockSize||4194304,u=new n(s);u.resetState();var c=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};t&&o(u,t,c),r&&a(u,0,s,r,c)}}}}()}).call(t,n(52))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(266),c=function(){function e(t){(0,o.default)(this,e),this.workers=[],this.jobs={};for(var n=0;n<t;++n)this.workers.push(this.createWorker())}return(0,s.default)(e,[{key:"hash",value:function(e){this.calculateHashInWorker(e)}},{key:"createWorker",value:function(){var e=this,t=new Blob([u]),n=URL.createObjectURL(t),r=new Worker(n),i={worker:r,activeJobs:0};return r.addEventListener("message",function(t){e.handleWorkerMessage(t,i)}),i}},{key:"handleWorkerMessage",value:function(e,t){var n=e.data.id,r=this.jobs[n];r&&(delete this.jobs[n],t.activeJobs--,e.data.error?this.calculateHashInWorker(r):(r.hash=e.data.hash,r.preprocessFinished()))}},{key:"calculateHashInWorker",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=e.fileObj.fileName+e.fileObjSize+e.startByte;this.jobs[r]=e;var i=this.getWorker();this.dispatch(r,i,n)}},{key:"dispatch",value:function(e,t,n){t.activeJobs++;var r=t.worker;if(navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")){var i=new FileReader;return i.onload=function(){r.postMessage({id:e,data:i.result})},void i.readAsBinaryString(n)}r.postMessage({id:e,data:n})}},{key:"getWorker",value:function(){return this.workers.reduce(function(e,t){return t.activeJobs<e.activeJobs?t:e},this.workers[0])}}]),e}();t.WorkerHasher=c},function(e,t){e.exports="(function () {\n    var /*\n * Rusha, a JavaScript implementation of the Secure Hash Algorithm, SHA-1,\n * as defined in FIPS PUB 180-1, tuned for high performance with large inputs.\n * (http://github.com/srijs/rusha)\n *\n * Inspired by Paul Johnstons implementation (http://pajhome.org.uk/crypt/md5).\n *\n * Copyright (c) 2013 Sam Rijs (http://awesam.de).\n * Released under the terms of the MIT license as follows:\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n    util = {\n        getDataType: function (data) {\n            if (typeof data === 'string') {\n                return 'string';\n            }\n            if (data instanceof Array) {\n                return 'array';\n            }\n            if (typeof global !== 'undefined' && global.Buffer && global.Buffer.isBuffer(data)) {\n                return 'buffer';\n            }\n            if (data instanceof ArrayBuffer) {\n                return 'arraybuffer';\n            }\n            if (data.buffer instanceof ArrayBuffer) {\n                return 'view';\n            }\n            if (data instanceof Blob) {\n                return 'blob';\n            }\n            throw new Error('Unsupported data type.');\n        }\n    };\n    function Rusha(chunkSize) {\n        'use strict';\n        var // Private object structure.\n        self$2 = { fill: 0 };\n        var // Calculate the length of buffer that the sha1 routine uses\n        // including the padding.\n        padlen = function (len) {\n            for (len += 9; len % 64 > 0; len += 1);\n            return len;\n        };\n        var padZeroes = function (bin, len) {\n            var h8 = new Uint8Array(bin.buffer);\n            var om = len % 4, align = len - om;\n            switch (om) {\n            case 0:\n                h8[align + 3] = 0;\n            case 1:\n                h8[align + 2] = 0;\n            case 2:\n                h8[align + 1] = 0;\n            case 3:\n                h8[align + 0] = 0;\n            }\n            for (var i$2 = (len >> 2) + 1; i$2 < bin.length; i$2++)\n                bin[i$2] = 0;\n        };\n        var padData = function (bin, chunkLen, msgLen) {\n            bin[chunkLen >> 2] |= 128 << 24 - (chunkLen % 4 << 3);\n            // To support msgLen >= 2 GiB, use a float division when computing the\n            // high 32-bits of the big-endian message length in bits.\n            bin[((chunkLen >> 2) + 2 & ~15) + 14] = msgLen / (1 << 29) | 0;\n            bin[((chunkLen >> 2) + 2 & ~15) + 15] = msgLen << 3;\n        };\n        var // Convert a binary string and write it to the heap.\n        // A binary string is expected to only contain char codes < 256.\n        convStr = function (H8, H32, start, len, off) {\n            var str = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = str.charCodeAt(start + 3);\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = str.charCodeAt(start + 2);\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = str.charCodeAt(start + 1);\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = str.charCodeAt(start);\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2] = str.charCodeAt(start + i$2) << 24 | str.charCodeAt(start + i$2 + 1) << 16 | str.charCodeAt(start + i$2 + 2) << 8 | str.charCodeAt(start + i$2 + 3);\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = str.charCodeAt(start + j + 2);\n            case 2:\n                H8[off + j + 2 | 0] = str.charCodeAt(start + j + 1);\n            case 1:\n                H8[off + j + 3 | 0] = str.charCodeAt(start + j);\n            }\n        };\n        var // Convert a buffer or array and write it to the heap.\n        // The buffer or array is expected to only contain elements < 256.\n        convBuf = function (H8, H32, start, len, off) {\n            var buf = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = buf[start + 3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[start + 2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[start + 1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[start];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[start + i$2] << 24 | buf[start + i$2 + 1] << 16 | buf[start + i$2 + 2] << 8 | buf[start + i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[start + j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[start + j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[start + j];\n            }\n        };\n        var convBlob = function (H8, H32, start, len, off) {\n            var blob = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            var buf = new Uint8Array(reader.readAsArrayBuffer(blob.slice(start, start + len)));\n            switch (om) {\n            case 0:\n                H8[off] = buf[3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[0];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[i$2] << 24 | buf[i$2 + 1] << 16 | buf[i$2 + 2] << 8 | buf[i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[j];\n            }\n        };\n        var convFn = function (data) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return convStr.bind(data);\n            case 'array':\n                return convBuf.bind(data);\n            case 'buffer':\n                return convBuf.bind(data);\n            case 'arraybuffer':\n                return convBuf.bind(new Uint8Array(data));\n            case 'view':\n                return convBuf.bind(new Uint8Array(data.buffer, data.byteOffset, data.byteLength));\n            case 'blob':\n                return convBlob.bind(data);\n            }\n        };\n        var slice = function (data, offset) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return data.slice(offset);\n            case 'array':\n                return data.slice(offset);\n            case 'buffer':\n                return data.slice(offset);\n            case 'arraybuffer':\n                return data.slice(offset);\n            case 'view':\n                return data.buffer.slice(offset);\n            }\n        };\n        var // Precompute 00 - ff strings\n        precomputedHex = new Array(256);\n        for (var i = 0; i < 256; i++) {\n            precomputedHex[i] = (i < 16 ? '0' : '') + i.toString(16);\n        }\n        var // Convert an ArrayBuffer into its hexadecimal string representation.\n        hex = function (arrayBuffer) {\n            var binarray = new Uint8Array(arrayBuffer);\n            var res = new Array(arrayBuffer.byteLength);\n            for (var i$2 = 0; i$2 < res.length; i$2++) {\n                res[i$2] = precomputedHex[binarray[i$2]];\n            }\n            return res.join('');\n        };\n        var ceilHeapSize = function (v) {\n            // The asm.js spec says:\n            // The heap object's byteLength must be either\n            // 2^n for n in [12, 24) or 2^24 * n for n ≥ 1.\n            // Also, byteLengths smaller than 2^16 are deprecated.\n            var p;\n            if (// If v is smaller than 2^16, the smallest possible solution\n                // is 2^16.\n                v <= 65536)\n                return 65536;\n            if (// If v < 2^24, we round up to 2^n,\n                // otherwise we round up to 2^24 * n.\n                v < 16777216) {\n                for (p = 1; p < v; p = p << 1);\n            } else {\n                for (p = 16777216; p < v; p += 16777216);\n            }\n            return p;\n        };\n        var // Initialize the internal data structures to a new capacity.\n        init = function (size) {\n            if (size % 64 > 0) {\n                throw new Error('Chunk size must be a multiple of 128 bit');\n            }\n            self$2.offset = 0;\n            self$2.maxChunkLen = size;\n            self$2.padMaxChunkLen = padlen(size);\n            // The size of the heap is the sum of:\n            // 1. The padded input message size\n            // 2. The extended space the algorithm needs (320 byte)\n            // 3. The 160 bit state the algoritm uses\n            self$2.heap = new ArrayBuffer(ceilHeapSize(self$2.padMaxChunkLen + 320 + 20));\n            self$2.h32 = new Int32Array(self$2.heap);\n            self$2.h8 = new Int8Array(self$2.heap);\n            self$2.core = new Rusha._core({\n                Int32Array: Int32Array,\n                DataView: DataView\n            }, {}, self$2.heap);\n            self$2.buffer = null;\n        };\n        // Iinitializethe datastructures according\n        // to a chunk siyze.\n        init(chunkSize || 64 * 1024);\n        var initState = function (heap, padMsgLen) {\n            self$2.offset = 0;\n            var io = new Int32Array(heap, padMsgLen + 320, 5);\n            io[0] = 1732584193;\n            io[1] = -271733879;\n            io[2] = -1732584194;\n            io[3] = 271733878;\n            io[4] = -1009589776;\n        };\n        var padChunk = function (chunkLen, msgLen) {\n            var padChunkLen = padlen(chunkLen);\n            var view = new Int32Array(self$2.heap, 0, padChunkLen >> 2);\n            padZeroes(view, chunkLen);\n            padData(view, chunkLen, msgLen);\n            return padChunkLen;\n        };\n        var // Write data to the heap.\n        write = function (data, chunkOffset, chunkLen, off) {\n            convFn(data)(self$2.h8, self$2.h32, chunkOffset, chunkLen, off || 0);\n        };\n        var // Initialize and call the RushaCore,\n        // assuming an input buffer of length len * 4.\n        coreCall = function (data, chunkOffset, chunkLen, msgLen, finalize) {\n            var padChunkLen = chunkLen;\n            write(data, chunkOffset, chunkLen);\n            if (finalize) {\n                padChunkLen = padChunk(chunkLen, msgLen);\n            }\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n        };\n        var getRawDigest = function (heap, padMaxChunkLen) {\n            var io = new Int32Array(heap, padMaxChunkLen + 320, 5);\n            var out = new Int32Array(5);\n            var arr = new DataView(out.buffer);\n            arr.setInt32(0, io[0], false);\n            arr.setInt32(4, io[1], false);\n            arr.setInt32(8, io[2], false);\n            arr.setInt32(12, io[3], false);\n            arr.setInt32(16, io[4], false);\n            return out;\n        };\n        var // Calculate the hash digest as an array of 5 32bit integers.\n        rawDigest = this.rawDigest = function (str) {\n            var msgLen = str.byteLength || str.length || str.size || 0;\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            var chunkOffset = 0, chunkLen = self$2.maxChunkLen;\n            for (chunkOffset = 0; msgLen > chunkOffset + chunkLen; chunkOffset += chunkLen) {\n                coreCall(str, chunkOffset, chunkLen, msgLen, false);\n            }\n            coreCall(str, chunkOffset, msgLen - chunkOffset, msgLen, true);\n            return getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n        };\n        // The digest and digestFrom* interface returns the hash digest\n        // as a hex string.\n        this.digest = this.digestFromString = this.digestFromBuffer = this.digestFromArrayBuffer = function (str) {\n            return hex(rawDigest(str).buffer);\n        };\n        this.resetState = function () {\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return this;\n        };\n        this.append = function (chunk) {\n            var chunkOffset = 0;\n            var chunkLen = chunk.byteLength || chunk.length || chunk.size || 0;\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var inputLen;\n            self$2.offset += chunkLen;\n            while (chunkOffset < chunkLen) {\n                inputLen = Math.min(chunkLen - chunkOffset, self$2.maxChunkLen - turnOffset);\n                write(chunk, chunkOffset, inputLen, turnOffset);\n                turnOffset += inputLen;\n                chunkOffset += inputLen;\n                if (turnOffset === self$2.maxChunkLen) {\n                    self$2.core.hash(self$2.maxChunkLen, self$2.padMaxChunkLen);\n                    turnOffset = 0;\n                }\n            }\n            return this;\n        };\n        this.getState = function () {\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var heap;\n            if (!turnOffset) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                heap = io.buffer.slice(io.byteOffset, io.byteOffset + io.byteLength);\n            } else {\n                heap = self$2.heap.slice(0);\n            }\n            return {\n                offset: self$2.offset,\n                heap: heap\n            };\n        };\n        this.setState = function (state) {\n            self$2.offset = state.offset;\n            if (state.heap.byteLength === 20) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                io.set(new Int32Array(state.heap));\n            } else {\n                self$2.h32.set(new Int32Array(state.heap));\n            }\n            return this;\n        };\n        var rawEnd = this.rawEnd = function () {\n            var msgLen = self$2.offset;\n            var chunkLen = msgLen % self$2.maxChunkLen;\n            var padChunkLen = padChunk(chunkLen, msgLen);\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n            var result = getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return result;\n        };\n        this.end = function () {\n            return hex(rawEnd().buffer);\n        };\n    }\n    ;\n    // The low-level RushCore module provides the heart of Rusha,\n    // a high-speed sha1 implementation working on an Int32Array heap.\n    // At first glance, the implementation seems complicated, however\n    // with the SHA1 spec at hand, it is obvious this almost a textbook\n    // implementation that has a few functions hand-inlined and a few loops\n    // hand-unrolled.\n    Rusha._core = function RushaCore(stdlib, foreign, heap) {\n        'use asm';\n        var H = new stdlib.Int32Array(heap);\n        function hash(k, x) {\n            // k in bytes\n            k = k | 0;\n            x = x | 0;\n            var i = 0, j = 0, y0 = 0, z0 = 0, y1 = 0, z1 = 0, y2 = 0, z2 = 0, y3 = 0, z3 = 0, y4 = 0, z4 = 0, t0 = 0, t1 = 0;\n            y0 = H[x + 320 >> 2] | 0;\n            y1 = H[x + 324 >> 2] | 0;\n            y2 = H[x + 328 >> 2] | 0;\n            y3 = H[x + 332 >> 2] | 0;\n            y4 = H[x + 336 >> 2] | 0;\n            for (i = 0; (i | 0) < (k | 0); i = i + 64 | 0) {\n                z0 = y0;\n                z1 = y1;\n                z2 = y2;\n                z3 = y3;\n                z4 = y4;\n                for (j = 0; (j | 0) < 64; j = j + 4 | 0) {\n                    t1 = H[i + j >> 2] | 0;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[k + j >> 2] = t1;\n                }\n                for (j = k + 64 | 0; (j | 0) < (k + 80 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 80 | 0; (j | 0) < (k + 160 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) + 1859775393 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 160 | 0; (j | 0) < (k + 240 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | y1 & y3 | y2 & y3) | 0) + ((t1 + y4 | 0) - 1894007588 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 240 | 0; (j | 0) < (k + 320 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) - 899497514 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                y0 = y0 + z0 | 0;\n                y1 = y1 + z1 | 0;\n                y2 = y2 + z2 | 0;\n                y3 = y3 + z3 | 0;\n                y4 = y4 + z4 | 0;\n            }\n            H[x + 320 >> 2] = y0;\n            H[x + 324 >> 2] = y1;\n            H[x + 328 >> 2] = y2;\n            H[x + 332 >> 2] = y3;\n            H[x + 336 >> 2] = y4;\n        }\n        return { hash: hash };\n    };\n    if (// If we'e running in Node.JS, export a module.\n        typeof module !== 'undefined') {\n        module.exports = Rusha;\n    } else if (// If we're running in a DOM context, export\n        // the Rusha object to toplevel.\n        typeof window !== 'undefined') {\n        window.Rusha = Rusha;\n    }\n    if (// If we're running in a webworker, accept\n        // messages containing a jobid and a buffer\n        // or blob object, and return the hash result.\n        typeof FileReaderSync !== 'undefined') {\n        var reader = new FileReaderSync();\n        var hashData = function hash(hasher, data, cb) {\n            try {\n                return cb(null, hasher.digest(data));\n            } catch (e) {\n                return cb(e);\n            }\n        };\n        var hashFile = function hashArrayBuffer(hasher, readTotal, blockSize, file, cb) {\n            var reader$2 = new self.FileReader();\n            reader$2.onloadend = function onloadend() {\n                var buffer = reader$2.result;\n                readTotal += reader$2.result.byteLength;\n                try {\n                    hasher.append(buffer);\n                } catch (e) {\n                    cb(e);\n                    return;\n                }\n                if (readTotal < file.size) {\n                    hashFile(hasher, readTotal, blockSize, file, cb);\n                } else {\n                    cb(null, hasher.end());\n                }\n            };\n            reader$2.readAsArrayBuffer(file.slice(readTotal, readTotal + blockSize));\n        };\n        self.onmessage = function onMessage(event) {\n            var data = event.data.data, file = event.data.file, id = event.data.id;\n            if (typeof id === 'undefined')\n                return;\n            if (!file && !data)\n                return;\n            var blockSize = event.data.blockSize || 4 * 1024 * 1024;\n            var hasher = new Rusha(blockSize);\n            hasher.resetState();\n            var done = function done$2(err, hash) {\n                if (!err) {\n                    self.postMessage({\n                        id: id,\n                        hash: hash\n                    });\n                } else {\n                    self.postMessage({\n                        id: id,\n                        error: err.name\n                    });\n                }\n            };\n            if (data)\n                hashData(hasher, data, done);\n            if (file)\n                hashFile(hasher, 0, blockSize, file, done);\n        };\n    }\n}());";
},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),a=function e(t,n){var r=this;(0,i.default)(this,e),this.apiUrl=t,this.authProvider=n,this.clients={},this.getMediaClient=function(e){return r.getStoredClient(e)||r.createNewClient(e)},this.createNewClient=function(e){var t=new o.MediaClient(r.apiUrl,r.authProvider,e);return r.setClient(t,e),t},this.getStoredClient=function(e){return void 0===e?r.clientForAbsentCollection:r.clients[e]},this.setClient=function(e,t){return void 0===t?void(r.clientForAbsentCollection=e):void(r.clients[t]=e)}};t.MediaClientPool=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(51),c=n(83),l=n(269),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"createUpload",value:function(e){var t={httpMethod:"POST",mediaApiMethod:"upload",parameters:{createUpTo:1,safariCacheBuster:u.v4()}};return l.retryTask(function(){return e.call(t,c.addAuthToQueryParameters).then(function(e){var t=e.data;if(0===t.length)throw new Error("No uploads were created");return t[0].id})},5,1e3,2)}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i={httpMethod:"PUT",mediaApiMethod:"upload/"+t+"/chunks",data:{chunks:n,offset:r}};return e.call(i)}},{key:"createFileFromUpload",value:function(e,t,n,r,i){var o={httpMethod:"POST",mediaApiMethod:"file/upload",parameters:i?{collection:i}:{},data:{name:t,mimeType:n,uploadId:r}};return e.call(o).then(function(e){return e.data.id})}},{key:"pollForFileMetadata",value:function(e,t,n){var r={httpMethod:"GET",mediaApiMethod:"file/"+t,parameters:n?{collection:n}:{}};return l.retryTask(function(){return e.call(r,c.addAuthToQueryParameters).then(function(e){var t=e.data;if("succeeded"===t.processingStatus||"failed"===t.processingStatus)return t;throw new Error("Processing not finished")})},10,1e3,2)}}]),e}();t.MediaApi=f},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new o.default(function(i,o){!function t(n,a){n>0?e().then(i).catch(function(e){setTimeout(function(){t(n-1,a*r)},a)}):e().then(i).catch(o)}(t,n)})}var i=n(21),o=function(e){return e&&e.__esModule?e:{default:e}}(i);Object.defineProperty(t,"__esModule",{value:!0}),t.retryTask=r},function(e,t){e.exports={baseUrl:"https://d2lmxj1uc02uys.cloudfront.net",usingVersions:!0,html:{popup:"./html/popup.html",popupInject:"./html/popup/popup.html",dropzone:"./html/dropzone.html",redirectUrl:"./html/link-account-handler/handler.html",userMethodsHelperUrl:"./html/user-methods-helper/helper.html"},version:"11.1.11"}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(305);t.default=function(e){return new i.default(function(t,n){o.fileToBase64(e).then(function(e){var r=new Image;r.src=e,r.onload=function(){return t({src:r.src,width:r.width,height:r.height})},r.onerror=n})})}},function(e,t,n){n(273),n(274),n(289),n(293),e.exports=n(36).Promise},function(e,t){},function(e,t,n){"use strict";var r=n(275)(!0);n(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(84),i=n(85);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){e.exports=!n(37)&&!n(137)(function(){return 7!=Object.defineProperty(n(87)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(56);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(27)},function(e,t,n){"use strict";var r=n(280),i=n(138),o=n(90),a={};n(27)(a,n(8)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(28),i=n(281),o=n(142),a=n(89)("IE_PROTO"),s=function(){},u=function(){var e,t=n(87)("iframe"),r=o.length;for(t.style.display="none",n(143).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(55),i=n(28),o=n(282);e.exports=n(37)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(283),i=n(142);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(57),i=n(88),o=n(285)(!1),a=n(89)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(58);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(88),i=n(139),o=n(286);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(84),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(57),i=n(288),o=n(89)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(85);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(290);for(var r=n(13),i=n(27),o=n(38),a=n(8)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var r=n(291),i=n(292),o=n(38),a=n(88);e.exports=n(134)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,a=n(135),s=n(13),u=n(54),c=n(144),l=n(136),f=n(56),d=n(86),h=n(294),p=n(295),v=n(299),m=n(145).set,y=n(301)(),b=s.TypeError,g=s.process,_=s.Promise,g=s.process,w="process"==c(g),x=function(){},k=!!function(){try{var e=_.resolve(1),t=(e.constructor={})[n(8)("species")]=function(e){e(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),A=function(e,t){return e===t||e===_&&t===o},S=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return A(_,e)?new O(e):new i(e)},O=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},I=function(e){try{e()}catch(e){return{error:e}}},E=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&C(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(b("Promise-chain cycle")):(o=S(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){m.call(s,function(){var t,n,r,i=e._v;if(T(e)&&(t=I(function(){w?g.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=w||T(e)?2:1),e._a=void 0,t)throw t.error})},T=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!T(t.promise))return!1;return!0},C=function(e){m.call(s,function(){var t;w?g.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=S(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(M,r,1))}catch(e){M.call(r,e)}}):(n._v=e,n._s=1,E(n,!1))}catch(e){M.call({_w:n,_d:!1},e)}}};k||(_=function(e){h(this,_,"Promise","_h"),d(e),r.call(this);try{e(u(U,this,1),u(M,this,1))}catch(e){M.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(302)(_.prototype,{then:function(e,t){var n=P(v(this,_));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=w?g.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&E(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),O=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(M,e,1)}),l(l.G+l.W+l.F*!k,{Promise:_}),n(90)(_,"Promise"),n(303)("Promise"),o=n(36).Promise,l(l.S+l.F*!k,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!k),"Promise",{resolve:function(e){if(e instanceof _&&A(e.constructor,this))return e;var t=P(this);return(0,t.resolve)(e),t.promise}}),l(l.S+l.F*!(k&&n(304)(function(e){_.all(e).catch(x)})),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=I(function(){var n=[],o=0,a=1;p(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=I(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(54),i=n(296),o=n(297),a=n(28),s=n(139),u=n(298),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(28);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(38),i=n(8)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(144),i=n(8)("iterator"),o=n(38);e.exports=n(36).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(28),i=n(86),o=n(8)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(13),i=n(145).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(58)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(27);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(13),i=n(36),o=n(55),a=n(37),s=n(8)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(8)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBase64=function(e){return new i.default(function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onabort=function(){return n("abort")},r.onerror=n,r.readAsDataURL(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var p=n(48),v=n(25),m=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.browseElem=document.createElement("INPUT"),i.browseElem.setAttribute("type","file"),i.browseElem.style.display="none",r.multiple&&i.browseElem.setAttribute("multiple",""),r.fileExtensions&&i.browseElem.setAttribute("accept",r.fileExtensions.join(",")),document.body.appendChild(i.browseElem),i.uploadService.addBrowse(i.browseElem),i.context.trackEvent(new v.MPBrowserLoaded),i}return(0,h.default)(t,e),(0,c.default)(t,[{key:"browse",value:function(){this.browseElem.click()}},{key:"teardown",value:function(){var e=this.browseElem.parentNode;e&&e.removeChild(this.browseElem)}}]),t}(p.MediaLocalUpload);t.Browser=m},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup{display:none;position:fixed;z-index:2147483647;left:0;top:0;width:100%;height:100%;background-color:rgba(9,30,66,.44);transition:opacity .2s;transition-delay:.1s}.mediaPickerPopup .aui-dialog2-header{height:50px!important}.mediaPickerPopup .aui-dialog2-content{padding:0!important;height:100%;position:relative!important;overflow:hidden!important}.mediaPickerPopup .aui-dialog2-content iframe{width:100%;height:100%;border-width:0;position:absolute}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=n(25),m=n(147),y=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return r.pasteHandler=function(e){for(var t=e.clipboardData.files,n=0;n<t.length;++n){var i=t[n];r.uploadService.addFile(i)}},r.context.trackEvent(new v.MPClipboardLoaded),r}return(0,h.default)(t,e),(0,c.default)(t,[{key:"activate",value:function(){var e=this;m(function(){e.deactivate(),document.addEventListener("paste",e.pasteHandler,!1)})}},{key:"deactivate",value:function(){document.removeEventListener("paste",this.pasteHandler)}}]),t}(p.MediaLocalUpload);t.Clipboard=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(16),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),d=n(19),h=r(d),p=n(20),v=r(p);Object.defineProperty(t,"__esModule",{value:!0}),n(310);var m=n(80),y=n(48),b=n(22),g=n(25),_=n(148),w=n(312),x=function(e){return[].slice.call(e,0)},k=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.default)(this,t);var i=(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));i.onDragOver=function(e){if(e.preventDefault(),i.instance&&t.dragContainsFiles(e)){var n=e.dataTransfer,r=void 0;try{r=n.effectAllowed}catch(e){}n.dropEffect="move"===r||"linkMove"===r?"move":"copy",i.instance.classList.add("active");var o=i.getDraggedItemsLength(n);i.emitDragOver({length:o})}},i.onDragLeave=function(e){i.instance&&(e.preventDefault(),i.instance.classList.remove("active"),i.emitDragLeave())},i.onDrop=function(e){var n=i.instance;n&&t.dragContainsFiles(e)&&(n.classList.remove("active"),i.emit("drop",void 0),i.emitDragLeave())};var o=r;return i.container=o.container||document.body,i.headless=o.headless||!1,i.uiActive=!1,i.context.trackEvent(new g.MPDropzoneLoaded),i}return(0,v.default)(t,e),(0,f.default)(t,[{key:"activate",value:function(){var e=this;return w.whenDomReady.then(function(){if(e.container=e.container||document.body,!e.instance)return e.createInstance()}).then(function(){e.deactivate(),e.container.addEventListener("dragover",e.onDragOver,!1),e.container.addEventListener("dragleave",e.onDragLeave,!1),e.uploadService.addDropzone(e.container)})}},{key:"deactivate",value:function(){this.container.removeEventListener("dragover",this.onDragOver,!1),this.container.removeEventListener("dragleave",this.onDragLeave,!1),this.uploadService.removeDropzone()}},{key:"getDraggedItemsLength",value:function(e){return e.items?x(e.items).filter(function(e){return"file"===e.kind}).length:e.files.length}},{key:"createInstance",value:function(){var e=this;return this.getDropzoneUI().then(function(t){e.instance=t,e.container.appendChild(e.instance),e.uploadService.on("file-dropped",e.onDrop)})}},{key:"getDropzoneUI",value:function(){var e=this;return this.headless?o.default.resolve(document.createElement("DIV")):new o.default(function(t,n){return m.default.get(e.getStaticAssetUrl("dropzone")).then(function(e){t(_.parseHTML(e.data))},function(e){b.handleError("dropzone_load_fail",e),n(e)})})}},{key:"emitDragOver",value:function(e){this.uiActive||(this.uiActive=!0,this.emit("drag-enter",e))}},{key:"emitDragLeave",value:function(){var e=this;this.uiActive&&(this.uiActive=!1,window.setTimeout(function(){e.uiActive||e.emit("drag-leave",void 0)},50))}}],[{key:"dragContainsFiles",value:function(e){var t=e.dataTransfer.types;return x(t).indexOf("Files")>-1}}]),t}(y.MediaLocalUpload);t.Dropzone=k},function(e,t,n){var r=n(311);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerDropzone{position:fixed;left:0;top:0;width:100%;height:0;overflow:hidden;margin:auto;font-family:Source Sans Pro,Helvetica Neue,Helvetica,Arial,sans-serif;pointer-events:none}@keyframes atlassian-doc{0%{transform:rotate(0deg)}to{transform:rotate(-18deg)}}@keyframes spreadsheet{0%{transform:rotate(0deg)}to{transform:rotate(20deg)}}.mediaPickerDropzone .mp-content{width:100vw;height:100vh}.mediaPickerDropzone .mp-content .mp-circle{transition:width .2s ease,height .2s ease,top .2s ease,left .2s ease;width:0;height:0;transform:scale(1);background-color:#0052cc;border-radius:50%;margin:auto;position:absolute;overflow:hidden;color:#fff;top:50%;left:50%}.mediaPickerDropzone .mp-content .mp-circle .mp-title{font-weight:500;font-size:40px;margin-bottom:20px}.mediaPickerDropzone .mp-content .mp-circle .mp-description{font-size:16px;font-weight:500}.mediaPickerDropzone .mp-content .mp-circle .mp-text{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;left:0;right:0;top:130px;position:absolute;text-align:center}.mediaPickerDropzone .mp-content .mp-circle .mp-text span{display:block}.mediaPickerDropzone .mp-content .mp-circle .mp-fileIcon{width:auto;height:200px;position:absolute;bottom:0;margin:auto;transform-origin:bottom;left:150px}.mediaPickerDropzone.active{height:100%;background-color:hsla(0,0%,100%,.7);position:fixed;z-index:500}.mediaPickerDropzone.active .mp-circle{width:500px;height:500px;top:calc(50% - 250px);left:calc(50% - 250px)}.mediaPickerDropzone.active .mp-circle .mp-iconAtlassianDoc{left:100px;width:183px;height:212px;bottom:-15px;animation:atlassian-doc .75s .2s forwards}.mediaPickerDropzone.active .mp-circle .mp-iconOtherDoc{left:170px;z-index:1;width:173px;height:224px}.mediaPickerDropzone.active .mp-circle .mp-iconPageSpreadsheet{left:250px;animation:spreadsheet .75s .2s forwards}",""])},function(e,t,n){"use strict";var r=n(21),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.whenDomReady=function(){return"complete"===document.readyState?i.default.resolve():new i.default(function(e){window.addEventListener("load",e)})}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.id,n=e.name,r=e.size,i=e.creationDate,o=e.type,a=e.publicId;return new S.MediaFile(t,n,r,i,o,a)}var o=n(21),a=r(o),s=n(50),u=r(s),c=n(16),l=r(c),f=n(0),d=r(f),h=n(1),p=r(h),v=n(19),m=r(v),y=n(20),b=r(y);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var g=n(51),_=n(132),w=n(314),x=n(22),k=n(315),A=n(25),S=n(129),P=n(128),O=n(131),I=n(147),E=n(148),j=n(316);t.USER_RECENTS_COLLECTION="recents";var T=function(e){function t(e,n,r){var i=r.userAuthProvider,o=r.container;(0,d.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.config=n,a.context.trackEvent(new A.MPPopupLoaded),a.uploadParams=(0,u.default)({},O.defaultUploadParams,n.uploadParams),a.userAuthProvider=i,a.container=o||document.body,I(function(){a.init()}),a}return(0,b.default)(t,e),(0,p.default)(t,[{key:"init",value:function(){this.popupReady=!1;var e=g.v4(),t={channelName:e,apiUrl:this.config.apiUrl,redirectUrl:this.getStaticAssetUrl("redirectUrl")};this.instance=this._createInstance(t),this.container.appendChild(this.instance),this.popupIframe=this._createInteractionLayer(e)}},{key:"show",value:function(){var e=this;return this.instance||this.init(),this.config.authProvider({collectionName:this.uploadParams.collection}).then(function(t){return e.popupIframe.setTenant({auth:t,uploadParams:e.uploadParams}),e.popupIframe.resetView(),e._show(),a.default.resolve()})}},{key:"cancel",value:function(e){this.popupIframe.cancelUpload(e)}},{key:"teardown",value:function(){this.instance&&(this.instance.parentNode&&this.instance.parentNode.removeChild(this.instance),delete this.instance),this.localFileBrowser&&this.localFileBrowser.teardown()}},{key:"hide",value:function(){this.instance&&(this.instance.style.display="none"),this.emit("closed",void 0),this.context.trackEvent(new A.MPPopupHidden)}},{key:"setUploadParams",value:function(e){this.uploadParams=(0,u.default)({},O.defaultUploadParams,e)}},{key:"_show",value:function(){this.popupReady&&(this.instance.style.display="block",this.context.trackEvent(new A.MPPopupShown))}},{key:"_createInstance",value:function(e){var t=e.apiUrl,n=e.channelName,r=e.redirectUrl,i="?channelName="+encodeURIComponent(n)+"&apiUrl="+encodeURIComponent(t)+"&redirectUrl="+encodeURIComponent(r);return E.parseHTML('<div class="mediaPickerPopup mpAUI">\n        <section role="dialog" id="demo-dialog" class="aui-layer aui-dialog2 aui-dialog2-large" aria-hidden="false">\n            <div class="aui-dialog2-content">\n                <iframe class="mpApp" src="'+this.getStaticAssetUrl("popupInject")+i+'"></iframe>\n            </div>\n        </section>\n      </div>')}},{key:"_createInteractionLayer",value:function(e){var t=this,n=this.instance.querySelector(".mpApp"),r=n.contentWindow,o=w({window:r,scope:e});this.messageService=new j.PostisMessageService(o),this.messageService.handle("uploadFinalizeReady",function(e){return new a.default(function(n){t.emitUploadFinalizeReady(i(e),function(){return n()})})}),this.messageService.handle("getUserAuth",function(e){return t.userAuthProvider(e)});var s=new k.InteractionLayer(this,o);return s.on("uploadEvent",function(e){switch(e.name){case"upload-start":t.emitUploadStart(i(e.data.file));break;case"upload-status-update":t.emitUploadProgress(i(e.data.file),e.data.progress);break;case"upload-preview-update":var n=e.data,r=n.file,o=n.preview;t.emitUploadPreviewUpdate(i(r),o);break;case"upload-processing":t.emitUploadProcessing(i(e.data.file));break;case"upload-end":t.emitUploadEnd(i(e.data.file),e.data.public);break;case"upload-error":var a=e.data,s=a.file,u=a.error;t.emitUploadError(i(s),new P.MediaError(u.fileId,u.name,u.description)),x.handleError(u.name,u.description)}}),s.on("ready",function(){t.emit("ready",void 0),t.popupReady=!0}),s.initProtocol(),s}}]),t}(_.MPComponent);t.Popup=T},function(e,t){function n(e){var t,n=e.scope,r=e.window,i=e.windowForEventListening||window,o={},a=[],s={},u=!1,c=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if(t.postis&&t.scope===n){var r=o[t.method];if(r)for(var i=0;i<r.length;i++)r[i].call(null,t.params);else s[t.method]=s[t.method]||[],s[t.method].push(t.params)}};i.addEventListener("message",c,!1);var l={listen:function(e,t){o[e]=o[e]||[],o[e].push(t);var n=s[e];if(n)for(var r=o[e],i=0;i<r.length;i++)for(var a=0;a<n.length;a++)r[i].call(null,n[a]);delete s[e]},send:function(e){var t=e.method;(u||"__ready__"===e.method)&&r&&"function"==typeof r.postMessage?r.postMessage(JSON.stringify({postis:!0,scope:n,method:t,params:e.params}),"*"):a.push(e)},ready:function(e){u?e():setTimeout(function(){l.ready(e)},50)},destroy:function(e){clearInterval(t),u=!1,i&&"function"==typeof i.removeEventListener&&i.removeEventListener("message",c),e&&e()}},f=+new Date+Math.random()+"";return t=setInterval(function(){l.send({method:"__ready__",params:f})},50),l.listen("__ready__",function(e){if(e===f){clearInterval(t),u=!0;for(var n=0;n<a.length;n++)l.send(a[n]);a=[]}else l.send({method:"__ready__",params:e})}),l}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(77),c=function(){function e(t,n){(0,o.default)(this,e),this.popup=t,this.channel=n,this.sanitizeUploadParams=function(e){return{collection:e.collection,fetchMetadata:e.fetchMetadata,autoFinalize:e.autoFinalize}},this.emitter=new u.EventEmitter2}return(0,s.default)(e,[{key:"initProtocol",value:function(){var e=this;this.channel.ready(function(){e.channel.listen("hidePopup",function(){e.popup.hide()}),e.channel.listen("showPopup",function(){e.popup.show()}),e.channel.listen("ready",function(){e.emit("ready",void 0)}),e.channel.listen("uploadEvent",function(t){e.emit("uploadEvent",t.event)})})}},{key:"resetView",value:function(){this.channel.send({method:"resetView"})}},{key:"cancelUpload",value:function(e){this.channel.send({method:"cancelUpload",params:{uploadId:e}})}},{key:"setTenant",value:function(e){var t=e.auth,n=e.uploadParams;this.channel.send({method:"setTenant",params:{auth:t,uploadParams:this.sanitizeUploadParams(n)}})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"emit",value:function(e,t){this.emitter.emit(e,t)}}]),e}();t.InteractionLayer=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(115);n(317),n(318);var f=n(51),d=function(){function e(t){(0,s.default)(this,e),this.channel=t,this.requests=this.observeChannelRequests(t),this.responses=this.observeChannelResponses(t)}return(0,c.default)(e,[{key:"post",value:function(e){var t=this;return new o.default(function(n,r){var i=f.v4(),o=t.responses.filter(function(e){return e.traceId===i}).subscribe({next:function(e){var t=e.response,i=e.error;i?r(i):n(t),o.unsubscribe()}});t.channel.send({method:"REQUEST",params:{traceId:i,message:e}})})}},{key:"handle",value:function(e,t){var n=this;this.requests.filter(function(t){return t.message.type===e}).subscribe({next:function(e){var r=e.traceId,i=e.message;t(i.payload).then(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,response:e}})}).catch(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,error:e}})})}})}},{key:"observeChannelRequests",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("REQUEST",function(e){t.next(e)})}),t}},{key:"observeChannelResponses",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("RESPONSE",function(e){t.next(e)})}),t}}]),e}();t.PostisMessageService=d},function(e,t){e.exports=n(73)},function(e,t){e.exports=n(75)}]))},function(e,t,n){"use strict";var r=n(27),i=n(28),o=n(39),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=i.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=a},function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i="undefined"!=typeof e&&e,o=n||i||r;t.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(a.empty)}var i=n(29),o=n(38),a=n(37);t.toSubscriber=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30),o=n(31),a=n(37),s=n(38),u=function(e){function t(n,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!n){this.destination=a.empty;break}if("object"==typeof n){n instanceof t?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},
t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(o.Subscription);t.Subscriber=u;var c=function(e){function t(t,n,r,o){e.call(this),this._parentSubscriber=t;var s,u=this;i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t){"use strict";function n(e){return"function"==typeof e}t.isFunction=n},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var i=n(32),o=n(33),a=n(30),s=n(34),u=n(35),c=n(36),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,f=n._parents,d=n._unsubscribe,h=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,v=f?f.length:0;l;)l.remove(this),l=++p<v&&f[p]||null;if(a.isFunction(d)){var m=s.tryCatch(d).call(this);m===u.errorObject&&(t=!0,e=e||(u.errorObject.e instanceof c.UnsubscriptionError?r(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(h))for(p=-1,v=h.length;++p<v;){var y=h[p];if(o.isObject(y)){var m=s.tryCatch(y.unsubscribe).call(y);if(m===u.errorObject){t=!0,e=e||[];var b=u.errorObject.e;b instanceof c.UnsubscriptionError?e=e.concat(r(b.errors)):e.push(b)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?r.indexOf(e)===-1&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=l},function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return null!=e&&"object"==typeof e}t.isObject=n},function(e,t,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function i(e){return o=e,r}var o,a=n(35);t.tryCatch=i},function(e,t){"use strict";t.errorObject={e:{}}},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(t,e),t}(Error);t.UnsubscriptionError=r},function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=n(27),i=r.root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var i=n(27);t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},function(e,t,n){"use strict";var r=n(26),i=n(41);r.Observable.prototype.publishReplay=i.publishReplay},function(e,t,n){"use strict";function r(e,t,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),o.multicast.call(this,new i.ReplaySubject(e,t,n))}var i=n(42),o=n(55);t.publishReplay=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(43),o=n(46),a=n(31),s=n(53),u=n(44),c=n(45),l=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new f(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?t=a.Subscription.EMPTY:this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),r&&e.add(e=new s.ObserveOnSubscriber(e,r));for(var i=n.length,o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.Subject);t.ReplaySubject=l;var f=function(){function e(e,t){this.time=e,this.value=t}return e}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(29),a=n(31),s=n(44),u=n(45),c=n(38),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(o.Subscriber);t.SubjectSubscriber=l;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.Observable);t.Subject=f;var d=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(f);t.AnonymousSubject=d},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ObjectUnsubscribedError=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(31),o=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);n!==-1&&t.splice(n,1)}}},t}(i.Subscription);t.SubjectSubscription=o},function(e,t,n){"use strict";var r=n(47),i=n(50);t.queue=new i.QueueScheduler(r.QueueAction)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(48),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(i.AsyncAction);t.QueueAction=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(27),o=n(49),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&this.pending===!1?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o.Action);t.AsyncAction=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(31),o=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i.Subscription);t.Action=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(51),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(i.AsyncScheduler);t.QueueScheduler=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(52),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(i.Scheduler);t.AsyncScheduler=o},function(e,t){"use strict";var n=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=n},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29),a=n(54);t.observeOn=r;var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var u=function(e){function t(t,n,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=n,this.delay=r}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(o.Subscriber);t.ObserveOnSubscriber=u;var c=function(){function e(e,t){this.notification=e,this.destination=t}return e}();t.ObserveOnMessage=c},function(e,t,n){"use strict";var r=n(26),i=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",(void 0),t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",(void 0)),e}();t.Notification=i},function(e,t,n){"use strict";function r(e,t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new o(n,t));var r=Object.create(this,i.connectableObservableDescriptor);return r.source=this,r.subjectFactory=n,r}var i=n(56);t.multicast=r;var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();t.MulticastOperator=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(43),o=n(26),a=n(29),s=n(31),u=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.Subscription,e.add(this.source.subscribe(new l(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new f(this))},t}(o.Observable);t.ConnectableObservable=u;var c=u.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};var l=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),f=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new d(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()},t}(a.Subscriber)},function(e,t,n){"use strict";var r=n(26),i=n(58);r.Observable.of=i.of},function(e,t,n){"use strict";var r=n(59);t.of=r.ArrayObservable.of},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(60),a=n(61),s=n(62),u=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var i=e.length;return i>1?new t(e,r):1===i?new o.ScalarObservable(e[0],r):new a.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.count,i=e.subscriber;return n>=r?void i.complete():(i.next(t[n]),void(i.closed||(e.index=n+1,this.schedule(e))))},t.prototype._subscribe=function(e){var n=0,r=this.array,i=r.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:r,index:n,count:i,subscriber:e});for(var a=0;a<i&&!e.closed;a++)e.next(r[a]);e.complete()},t}(i.Observable);t.ArrayObservable=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;return t?void r.complete():(r.next(n),void(r.closed||(e.done=!0,this.schedule(e))))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;return r?r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e}):(e.next(n),void(e.closed||e.complete()))},t}(i.Observable);t.ScalarObservable=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;return n?n.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(i.Observable);t.EmptyObservable=o},function(e,t){"use strict";function n(e){return e&&"function"==typeof e.schedule}t.isScheduler=n},function(e,t,n){"use strict";var r=n(26),i=n(64);r.Observable.prototype.startWith=i.startWith},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];u.isScheduler(n)?e.pop():n=null;var r=e.length;return 1===r?s.concatStatic(new o.ScalarObservable(e[0],n),this):r>1?s.concatStatic(new i.ArrayObservable(e,n),this):s.concatStatic(new a.EmptyObservable(n),this)}var i=n(59),o=n(60),a=n(61),s=n(65),u=n(62);t.startWith=r},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(i.apply(void 0,[this].concat(e)))}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,r=e;return a.isScheduler(r[e.length-1])&&(n=r.pop()),null===n&&1===e.length&&e[0]instanceof o.Observable?e[0]:new s.ArrayObservable(e,n).lift(new u.MergeAllOperator(1))}var o=n(26),a=n(62),s=n(59),u=n(66);t.concat=r,t.concatStatic=i},function(e,t,n){"use strict";function r(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new s(e))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(67),a=n(68);t.mergeAll=r;var s=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.concurrent))},e}();t.MergeAllOperator=s;var u=function(e){function t(t,n){e.call(this,t),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);t.MergeAllSubscriber=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i.Subscriber);t.OuterSubscriber=o},function(e,t,n){"use strict";function r(e,t,n,r){var d=new l.InnerSubscriber(e,n,r);if(d.closed)return null;if(t instanceof u.Observable)return t._isScalar?(d.next(t.value),d.complete(),null):t.subscribe(d);if(o.isArrayLike(t)){for(var h=0,p=t.length;h<p&&!d.closed;h++)d.next(t[h]);d.closed||d.complete()}else{if(a.isPromise(t))return t.then(function(e){d.closed||(d.next(e),d.complete())},function(e){return d.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),d;if(t&&"function"==typeof t[c.iterator])for(var v=t[c.iterator]();;){var m=v.next();if(m.done){d.complete();break}if(d.next(m.value),d.closed)break}else if(t&&"function"==typeof t[f.observable]){var y=t[f.observable]();if("function"==typeof y.subscribe)return y.subscribe(new l.InnerSubscriber(e,n,r));d.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var b=s.isObject(t)?"an invalid object":"'"+t+"'",g="You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";d.error(new TypeError(g))}}return null}var i=n(27),o=n(69),a=n(70),s=n(33),u=n(26),c=n(71),l=n(72),f=n(39);t.subscribeToResult=r},function(e,t){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}t.isPromise=n},function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n(27);t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i.Subscriber);t.InnerSubscriber=o},function(e,t,n){"use strict";var r=n(26),i=n(74);r.Observable.prototype.filter=i.filter},function(e,t,n){"use strict";function r(e,t){return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29);t.filter=r;var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(o.Subscriber)},function(e,t,n){"use strict";var r=n(26),i=n(76);r.Observable.prototype.map=i.map},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29);t.map=r;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.Subscriber)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.on("upload-start",function(e){return u.default.publish(f+"new",e)}),e.on("upload-preview-update",function(e){return u.default.publish(f+"preview",e)}),e.on("upload-status-update",function(e){return u.default.publish(f+"progress",e)}),e.on("upload-error",function(e){return u.default.publish(f+"error",e)}),e.on("upload-processing",function(e){return u.default.publish(f+"done",e)}),e.on("upload-end",function(e){return u.default.publish(f+"done",e)}),u.default.subscribe(f+"cancel",function(t){e.cancel&&e.cancel(t)}),e}function o(e){return u.default.subscribe("issue/changed",function(t){l.default.getUploadParameters().then(e.setUploadParams.bind(e))}),e}function a(e){return u.default.subscribe("project/changed",function(t){l.default.getTemporaryAttachmentUploadParameters(t).then(e.setUploadParams.bind(e))}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.connect=i,t.connectToIssueChanges=o,t.connectToProjectChanges=a;var s=n(10),u=r(s),c=n(3),l=r(c),f="upload/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(16),s=r(a),u=n(10),c=r(u),l=n(20),f=r(l);t.default=function(e,t,n,r,a){var u="create-issue/drop-zone",l=(0,o.temporaryAttachmentDropzone)(e,r).then(function(e){return e.on("drop",function(){s.default.triggerAttachRequested(u)}),e}),d=!1;return{activate:function(){return l.then(function(r){d||(d=!0,r.activate(),c.default.publish("upload/switch-context",{name:u,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},a)}),c.default.publish("project/changed",e))})},deactivate:function(){return l.then(function(e){d&&(e.deactivate(),d=!1)})},drop:function(){return l.catch(function(e){s.default.triggerInitialisationException((0,f.default)(e)),c.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(80),o=r(i),a=n(20),s=r(a),u=n(16),c=r(u),l=n(10),f=r(l),d=n(83),h=r(d),p="jira.issue.media-picker.show",v={
blockWikiEditorMarkupInsert:!1},m=void 0,y=function(e){var t="view-issue/"+e;return(0,o.default)().then(function(e){m=e}).catch(function(e){c.default.triggerInitialisationException((0,s.default)(e))}),function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;n&&n.preventDefault(),h.default.start({key:p,isInitial:!1,threshold:250}),c.default.triggerAttachRequested(e),m?m.show().then(function(){return h.default.end({key:p})}).then(function(){return f.default.publish("upload/switch-context",{name:t,uploadSettings:r})}).catch(function(){f.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")}):c.default.triggerUploadRequestedWhenNotInitialised()}};t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(81),a=r(o),s=n(82),u=r(s),c=n(7),l=r(c),f=function(){return u.default.then(function(){return new a.default(i.popup,i.browser)})};t.default=l.default.memoize(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(16),u=r(s),c=n(20),l=r(c),f=n(3),d=r(f),h=function(){function e(t,n){var r=this;i(this,e);var o=d.default.userAuthProvider;o().then(function(e){e?r.componentPromise=t(o).then(function(e){return[e,"popup"]}).catch(function(e){return e.logged||u.default.triggerGenericPopupInitialisationError((0,l.default)(e)),n().then(function(e){return[e,"browser"]})}).then(r.handleComponentInitSuccess.bind(r)).catch(r.handleComponentInitFailure.bind(r)):r.componentPromise=r.initializeBrowser.call(r,n)})}return a(e,[{key:"initializeBrowser",value:function(e){return e().then(function(e){return[e,"browser"]}).then(this.handleComponentInitSuccess.bind(this)).catch(this.handleComponentInitFailure.bind(this))}},{key:"handleComponentInitSuccess",value:function(e){var t=o(e,2),n=t[0],r=t[1];return this.mediaComponent=n,this.componentType=r,[n,r]}},{key:"handleComponentInitFailure",value:function(e){u.default.triggerInitialisationException((0,l.default)(e)),this.componentType="none"}},{key:"show",value:function(){var e=this;switch(this.componentType){case"browser":return this.showBrowser();case"popup":return this.showPopup();case"none":return Promise.reject("Component initialisation error");default:return d.default.userAuthProvider().then(function(){return e.componentPromise}).then(function(){return"popup"===e.componentType?e.showPopup():(u.default.triggerBrowserRequestedWhenNotInitialised(),Promise.resolve())})}}},{key:"showPopup",value:function(){return this.mediaComponent.show().then(function(){return u.default.triggerPopupShown()}).catch(function(e){return u.default.triggerPopupFailedToShow((0,l.default)(e)),Promise.reject(e)})}},{key:"showBrowser",value:function(){var e=this;return new Promise(function(t,n){try{e.mediaComponent.browse(),u.default.triggerAttachFileBrowserShown(),t()}catch(e){u.default.triggerAttachFileBrowserFailedToShow((0,l.default)(e)),n(e)}})}}]),e}();t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Promise(function(e,t){"undefined"==typeof document?t("Document is not available"):/^loaded|^interactive|^complete/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(t){return e()})})},function(e,t){e.exports=require("internal/browser-metrics")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return _||(0,u.default)(e).then(function(e){_=e}).catch(function(e){d.default.triggerInitialisationException((0,l.default)(e))}),p.default.publish("project/changed",e),function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return r&&r.preventDefault(),m.default.start({key:y,isInitial:!1,threshold:250}),d.default.triggerAttachRequested(b),_?(i=a({},i,{projectId:e,formToken:t,panelNode:n}),p.default.publish("project/changed",e),_.show().then(function(){return m.default.end({key:y})}).then(function(){return p.default.publish("upload/switch-context",{name:b,uploadSettings:i})}).catch(function(){p.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})):void d.default.triggerUploadRequestedWhenNotInitialised()}}function o(){_=null}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i,t.resetMediaComponent=o;var s=n(85),u=r(s),c=n(20),l=r(c),f=n(16),d=r(f),h=n(10),p=r(h),v=n(83),m=r(v),y="jira.create.issue.media-picker.show",b="create-issue/link",g={blockWikiEditorMarkupInsert:!1},_=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(81),a=r(o),s=n(82),u=r(s),c=n(7),l=r(c),f=function(e){var t=(0,i.temporaryAttachmentPopup)(e),n=(0,i.temporaryAttachmentBrowser)(e);return u.default.then(function(){return new a.default(t,n)})};t.default=l.default.memoize(f)},function(e,t){e.exports=require("dndattachment/integration-register")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(3),a=r(o),s=n(88),u=r(s),c=n(16),l=r(c),f=n(20),d=r(f),h=n(89),p=r(h);t.default=function(e,t,n,r){var o="view-issue/attach-screenshot",s=p.default.Deferred();(0,i.binary)(e).then(function(t){return t.on("upload-start",function(e){s.notify("init"),l.default.triggerUploadStarted(e.file.id,e.file.size)}),t.on("upload-status-update",function(e){s.notify({loaded:e.progress.absolute,total:e.progress.max})}),t.on("upload-end",function(t){return a.default.createTemporaryAttachment(e,t.file.publicId,r).then(function(e){s.resolve({id:e.attachmentId})})}),t.on("upload-processing",function(e){s.notify({loaded:e.absolute,total:e.max})}),t.on("upload-error",function(e){s.reject(null,e.name,e.description,{}),l.default.triggerUploadError(e.name,e.fileId)}),t}).then(function(e){return l.default.triggerAttachRequested(o),(0,u.default)(t).then(function(t){e.upload(t,n)})}).catch(function(e){return l.default.triggerInitialisationException((0,d.default)(e))});return s}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(){n(this)},r.readAsDataURL(e)})}},function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(88),s=r(a),u=n(10),c=r(u),l=n(16),f=r(l),d=n(20),h=r(d),p={blockWikiEditorMarkupInsert:!0},v=function(e,t,n){var r="create-issue/attach-screenshot",a=(0,o.connectedTemporaryBinary)(e).catch(function(e){f.default.triggerInitialisationException((0,h.default)(e))});return function(o){return a.then(function(a){return(0,s.default)(o).then(function(s){f.default.triggerAttachRequested(r),c.default.publish("project/changed",e),c.default.publish("upload/switch-context",{name:r,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},p)}),a.upload(s,o.name)})}).catch(function(){c.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}};t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(10),a=r(o),s=n(92),u=r(s),c=n(109),l=r(c);n(24),t.default=function(){a.default.subscribe("upload/new",function(e){var t=e.file;u.default.startUpload(t)}),a.default.subscribe("upload/preview",function(e){var t=e.file,n=e.preview,r=l.default.decodeBase64DataUri(n.src),i=new Blob([r],{type:t.type});i.name=t.name,u.default.updatePreview(t,i)}),a.default.subscribe("upload/progress",function(e){var t=e.file,n=e.progress;u.default.progress(t,n)}),a.default.subscribe("upload/error",function(e){var t=e.error;t.isMediaError=!0,u.default.error(t)}),a.default.subscribe("upload/done",function(e){var t=e.file.publicId?e.file:i({},e.file,{publicId:e.public.id});u.default.done(t)}),a.default.subscribe("media/error",u.default.globalError)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(93),s=r(a),u=n(99),c=r(u),l=n(101),f=r(l),d=n(102),h=r(d),p=n(11),v=r(p),m=n(9),y=r(m),b=n(3),g=r(b),_=n(104),w=r(_),x=n(10),k=r(x),A=n(105),S=r(A),P=n(16),O=r(P),I=n(107),E=r(I),j=n(108),T=r(j),C=new Map,M=function(e){return e&&0===e.indexOf("create-issue")};t.default={startUpload:function(e){var t=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1};O.default.triggerUploadStarted(e.id,e.size);var n=this._createUpload(e);C.set(e.id,n),t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e),n.then(function(e){var t=e.view,n=e.uploadContext,r=e.uploadSettings;M(n)?f.default.insertUpload(r.panelNode,t.$node):c.default.insertUpload(t.$node)}),this._validate(e)},updatePreview:function(e,t){t&&C.get(e.id)&&C.get(e.id).then(function(e){e.preview=t,e.view.loadThumbnail(t)})},progress:function(e,t){C.get(e.id)&&C.get(e.id).then(function(e){var n=e.view;return n.progress(t.portion)})},error:function(e){e.fileId&&C.get(e.fileId)&&C.get(e.fileId).then(function(t){var n=t.view,r=t.file,i=t.uploadContext,o=t.uploadSettings;e.logged||O.default.triggerUploadError(e.description,e.fileId),e.isMediaError&&(e.description="We could not connect to the file storage service. Please try again in a moment."),n.fail(e),M(i)||c.default.uploadError(r.name,e.description,function(){n.destroy(),C.delete(r.id)}),o.onFileUploadFinished&&o.onFileUploadFinished.call(r,r)})},globalError:function(e){c.default.globalError(e)},done:function(e){var t=this;O.default.triggerFileUploadFinished(e.id),C.get(e.id).then(function(n){var r=n.view,i=n.uploadContext,o=n.uploadSettings;return r.done(),M(i)?t.createTemporaryAttachment(e,o):t.createAttachment(o.issueId,e)})},createTemporaryAttachment:function(e,t){var n=this;Promise.all([t.projectId,t.formToken]).then(function(t){var n=o(t,2),r=n[0],i=n[1];if(!r||!i)throw new Error("Missing form data associated with upload");return g.default.createTemporaryAttachment(r,e.publicId,i)}).then(this.temporaryAttachmentCreated.bind(this,e)).catch(function(t){var r=t.message;O.default.triggerCantCreateTemporaryAttachmentInJIRA(r,e.id),n.error({fileId:e.id,description:r||"Couldn't create attachment"})})},createAttachment:function(e,t){var n=this;g.default.createAttachment(e,t.publicId).then(this.attachmentCreated.bind(this,t)).catch(function(e){var r=e.message;O.default.triggerCantCreateAttachmentInJIRA(r,t.id),n.error({fileId:t.id,description:r||"Couldn't create attachment"})})},attachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(r){var i=r.view,o=r.wikiFieldsContext,a=r.issueLinkHTML,s=r.uploadSettings;O.default.triggerAttachmentCreatedInJIRA(e.id),n.updateViewWithCreatedAttachment(e,t,i,s.issueId,o),c.default.notifyUserOfCreatedAttachment(e,a),C.delete(e.id)})},temporaryAttachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(e){var r=e.view,i=e.wikiFieldsContext,o=e.uploadSettings,a=e.preview,s=e.file;O.default.triggerTemporaryAttachmentCreatedInJIRA(s.id),n.addAttachmentToDndStore(t.attachmentId,s,a),r.attachmentCreated(t.attachmentId),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,s.name),o.onFileUploadFinished&&o.onFileUploadFinished.call(s,s),C.delete(s.id)})},addAttachmentToDndStore:function(e,t,n){return T.default.putAttachment(e,n?n:t)},updateViewWithCreatedAttachment:function(e,t,n,r,i){var o=h.default.create(e,t,{viewType:c.default.getViewType(),issueId:r});n.$node.replaceWith(o),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,e.name)},cancel:function(e){C.has(e.id)&&C.get(e.id).then(function(t){var n=t.uploadSettings;O.default.triggerUploadCancelled(e.id),k.default.publish("upload/cancel",e.id),C.delete(e.id),n.onFileUploadFinished&&onFileUploadFinished.call(e,e)})},_createUpload:function(e){var t=this,n=y.default.getUploadContextName(),r=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1},o=void 0;return o=M(n)?Promise.resolve(r):v.default.getIssueId().then(function(e){return i({},r,{issueId:e})}),o.then(function(r){var i=S.default.getWikiFieldsContextInformation(),o=void 0;i&&i.isWikiFieldFocused&&r.blockWikiEditorMarkupInsert&&(i.isWikiFieldFocused=!1),o=M(n)?s.default.createIssue(e,{},function(){t.cancel(e)}):s.default.viewIssue(e,{viewType:c.default.getViewType()},function(){t.cancel(e)});var a=v.default.getIssuePermlink(),u=v.default.getIssueKey(),l=E.default.getHtml(u,a);return{view:o,file:e,wikiFieldsContext:i,issueLinkHTML:l,uploadContext:n,uploadSettings:r}})},_validate:function(e){var t=w.default.validateFile(e),n=t.valid,r=t.message;n||(O.default.triggerUploadValidationFailed(r,e.id),this.error({fileId:e.id,description:r,logged:!0}),k.default.publish("upload/cancel",e.id))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(94),o=r(i),a=n(98),s=r(a);t.default={viewIssue:function(e,t,n){return new o.default(e,t,n)},createIssue:function(e,t,n){return new s.default(e,t,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(95),s=r(a),u=n(96),c=r(u),l=n(97),f=r(l),d=n(89),h=r(d),p=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="attachments-upload-progress-bar"/>'),this.$node.data("viewMode",this.context.viewType),this.render()}return o(e,[{key:"render",value:function(){var e=s.default.AttachmentsUploadProgressBar({isImageType:"gallery"===this.context.viewType});"list"===this.context.viewType&&this.$node.addClass("attachment-content"),this.$node.html(e),this.renderFileProperties()}},{key:"renderFileProperties",value:function(){var e=this;"gallery"==this.context.viewType?(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode):(0,h.default)(c.default.renderAttachmentIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__upload-control span").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size))}},{key:"loadThumbnail",value:function(e){if("gallery"===this.context.viewType){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.$node.find(".upload-progress-bar__upload-control").hide(),this.$node.addClass("upload-progress-bar__upload-finished")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%")}},{key:"destroy",value:function(){this.$node.remove()}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=p},function(e,t){e.exports=JIRA.Templates.DnDAttachmentPlugin},function(e,t){e.exports=JIRA.Templates.ViewIssue},function(e,t){"use strict";function n(e){var t=e/a;return t.toFixed(2)+u}function r(e){var t=Math.round(e/o);return t+s}function i(e){var t=e/o;return t.toFixed(1)+s}Object.defineProperty(t,"__esModule",{value:!0});var o=1024,a=o*o,s=" kB",u=" MB";t.default=function(e){return e>a?n(e):e>o?r(e):i(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(95),s=r(a),u=n(96),c=r(u),l=n(97),f=r(l),d=n(89),h=r(d),p=["aui-iconfont-close-dialog","aui-iconfont-success","aui-iconfont-error"],v=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="upload-progress-bar"/>'),this.render()}return o(e,[{key:"render",value:function(){var e=this,t=s.default.UploadProgressBar({isImageType:!0});this.$node.html(t),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__control button").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size)),(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.thumbnailNode.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui")}},{key:"loadThumbnail",value:function(e){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.setIcon("aui-iconfont-success"),this.progress(1)}},{key:"attachmentCreated",value:function(e){this.$checkbox=(0,h.default)('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",e).attr("id","filetoconvert-"+e).prop("checked",!0).insertBefore(this.$node),this.$node.addClass("upload-progress-bar__upload-ready").addClass("upload-progress-bar__upload-finished"),this.setIcon("aui-iconfont-close-dialog")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%"),this.$node.find(".upload-progress-bar__error-message").text(e.description)}},{key:"destroy",value:function(){this.$checkbox&&this.$checkbox.prop("checked",!1).prop("value",null),this.$node.remove()}},{key:"setIcon",value:function(e){var t=this.$node.find(".upload-progress-bar__control button .aui-icon");p.forEach(function(n){t.toggleClass(n,n===e)})}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(100),s=r(a),u="#file_attachments, #attachment_thumbnails",c=function(){return(0,o.default)(u)};t.default={getViewType:function(){return"file_attachments"===c().attr("id")?"list":"gallery"},insertUpload:function(e){if(0===c().length)throw new Error("Attachment List is not present");c().prepend(e)},uploadError:function(e,t,n){var r=s.default.showErrorMsg(AJS.format("\"{0}\" was not uploaded.",AJS.escapeHtml(e)),AJS.escapeHtml(t));(0,o.default)(r).on("aui-flag-close",n)},globalError:function(e){return s.default.showErrorMsg("Cannot upload attachments",AJS.escapeHtml(e))},notifyUserOfCreatedAttachment:function(e,t){s.default.showSuccessMsg("",AJS.format("{0} was attached successfully to {1}.",AJS.escapeHtml(e.name),t))}}},function(e,t){e.exports=require("jira/flag")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i);t.default={insertUpload:function(e,t){var n=(0,o.default)(e);if(0===n.length)throw new Error("Cannot find temp attachment dropzone");n.after((0,o.default)(t))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(96),o=r(i),a=n(8),s=r(a),u=n(97),c=r(u),l=n(103),f=n(89),d=r(f),h=function(){return"undefined"==typeof window?"":window&&window.location&&window.location.origin}(),p=(0,s.default)(),v=""+h+p,m=function(e){return encodeURIComponent(e)},y=function(e,t){var n=m(e.name);return"secure/attachment/"+t.attachmentId+"/"+n},b=function(e,t){var n=m(e.name);return(0,l.isImageType)(e)?v+"/secure/thumbnail/"+t.attachmentId+"/"+n+"?default=false":null},g=function(e,t){var n=m(e.name);return t.expandable?null:v+"/secure/thumbnail/"+t.attachmentId+"/"+n};t.default={create:function(e,t,n){var r=[{id:t.attachmentId,attachmentUrl:y(e,t),thumbnailUrl:b(e,t),jiraThumbnailUrl:g(e,t),fileName:e.name,mimeType:e.type,expandable:t.expandable,deletable:t.deletable,fileSize:(0,c.default)(e.size),createdIso8601:e.creationDate,createdDateTime:e.creationDate}];return(0,d.default)(o.default.renderAttachments({baseurl:p,fullBaseUrl:v,issue:{id:n.issueId},attachments:r,viewMode:n.viewType})).find(".attachment-content")}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=u.default.getThumbnailMimeType().split(",");return e&&e.type&&a.default.contains(t,e.type)}Object.defineProperty(t,"__esModule",{value:!0}),t.isImageType=void 0;var o=n(7),a=r(o),s=n(4),u=r(s);t.isImageType=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(97),o=r(i),a=n(4),s=r(a);t.default={validateFile:function(e){var t=this.fileNameContainsInvalidCharacter(e.name),n=void 0;return""!==t&&(n=AJS.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",e.name,t)),this.sizeExceedsMaximum(e.size)&&(n="File exceeds maximum size limit set by the administrator ({0}).".replace("{0}",(0,o.default)(s.default.getMaxFileSize()))),n?{valid:!1,message:n}:{valid:!0}},fileNameContainsInvalidCharacter:function(e){return s.default.getInvalidChars().reduce(function(t,n){return e.indexOf(n)!==-1?n:t},"")},sizeExceedsMaximum:function(e){return e>s.default.getMaxFileSize()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(106),s=r(a);t.default={getWikiFieldsContextInformation:function(){var e=(0,o.default)("textarea.wiki-textfield:visible:focus");return e?{isWikiFieldFocused:e.length>0,focusedField:e[0]}:void 0},insertWikiMarkup:function(e,t){var n=(0,o.default)(e);s.default.insertWikiMarkup(t,e,e.selectionStart,e.selectionStart),n.is(":focus")||n.focus()}}},function(e,t){e.exports=require("dndattachment/ctrlv/utility")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(95),s=r(a);t.default={getHtml:function(e,t){var n=(0,o.default)("#summary-val input"),r=(0,o.default)("#summary-val"),i=n&&n.attr("value")||r&&r.text();return s.default.SuccessMessageLink({issueLink:t,issueKey:e,issueSummary:i})}}},function(e,t){e.exports=require("dndattachment/TemporaryAttachments")},function(e,t){e.exports=require("dndattachment/ctrlv/base64decode")}]);;
;
/* module-key = 'jira.webresources:calendar-en', location = '/includes/lib/calendar/lang/calendar-en.js' */
Calendar._DN=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"),Calendar._SDN=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"),Calendar._FD=0,Calendar._MN=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),Calendar._SMN=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),Calendar._TT={},Calendar._TT.INFO="About the calendar",Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the «, » buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.",Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.",Calendar._TT.PREV_YEAR="Prev. year (hold for menu)",Calendar._TT.PREV_MONTH="Prev. month (hold for menu)",Calendar._TT.GO_TODAY="Go Today",Calendar._TT.NEXT_MONTH="Next month (hold for menu)",Calendar._TT.NEXT_YEAR="Next year (hold for menu)",Calendar._TT.SEL_DATE="Select date",Calendar._TT.DRAG_TO_MOVE="Drag to move",Calendar._TT.PART_TODAY=" (today)",Calendar._TT.DAY_FIRST="Display %s first",Calendar._TT.WEEKEND="0,6",Calendar._TT.CLOSE="Close",Calendar._TT.TODAY="Today",Calendar._TT.TIME_PART="(Shift-)Click or drag to change value",Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d",Calendar._TT.TT_DATE_FORMAT="%a, %b %e",Calendar._TT.WK="wk",Calendar._TT.TIME="Time:",Calendar._TT.AM="AM",Calendar._TT.PM="PM",Calendar._TT.am="am",Calendar._TT.pm="pm";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-issue-type-whitelist', location = 'jira-agile-module/includes/js/rapid/analytics/register-software-issue-types.js' */
function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}require(["jira/analytics/transformers/issue-type"],function(e){var r=(_defineProperty(r={},"Story","Story"),_defineProperty(r,"Epic","Epic"),r);e.registerAll(r)});;
;
/* module-key = 'com.atlassian.plugin.jslibs:keymaster-1.6.2', location = 'atlassian-jslibs/libs/keymaster/1.6.2/keymaster-1.6.2.js' */
(function(e){define("atlassian/libs/keymaster-1.6.2",function(){var j={};e(j);return"undefined"!==typeof module?module.exports.noConflict():j.key.noConflict()})})(function(e){function j(a,b){for(var d=a.length;d--;)if(a[d]===b)return d;return-1}function v(a){var b,d,c,e,o,r;b=a.keyCode;-1==j(l,b)&&l.push(b);if(93==b||224==b)b=91;if(b in f)for(c in f[b]=!0,k)k[c]==b&&(m[c]=!0);else{for(g in f)f[g]=a[w[g]];if(m.filter.call(this,a)&&b in h){r=p();for(e=0;e<h[b].length;e++)if(d=h[b][e],d.scope==r||"all"==
d.scope){o=0<d.mods.length;for(c in f)if(!f[c]&&-1<j(d.mods,+c)||f[c]&&-1==j(d.mods,+c))o=!1;if((0==d.mods.length&&!f[16]&&!f[18]&&!f[17]&&!f[91]||o)&&!1===d.method(a,d))a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0)}}}}function m(a,b,d){var c,e;c=s(a);void 0===d&&(d=b,b="all");for(var f=0;f<c.length;f++)e=[],a=c[f].split("+"),1<a.length&&(e=t(a),a=[a[a.length-1]]),a=a[0],a=n[a]||a.toUpperCase().charCodeAt(0),a in h||
(h[a]=[]),h[a].push({shortcut:c[f],scope:b,method:d,key:c[f],mods:e})}function p(){return u||"all"}function s(a){a=a.replace(/\s/g,"");a=a.split(",");""==a[a.length-1]&&(a[a.length-2]+=",");return a}function t(a){for(var a=a.slice(0,a.length-1),b=0;b<a.length;b++)a[b]=k[a[b]];return a}function q(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&a.attachEvent("on"+b,function(){d(window.event)})}var g,h={},f={16:!1,18:!1,17:!1,91:!1},u="all",k={"\u21e7":16,shift:16,"\u2325":18,alt:18,
option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},n={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=[];for(g=1;20>g;g++)n["f"+g]=111+g;var w={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(g in k)m[g]=!1;q(document,"keydown",function(a){v(a)});q(document,"keyup",function(a){var a=
a.keyCode,b,d=j(l,a);0<=d&&l.splice(d,1);if(93==a||224==a)a=91;if(a in f)for(b in f[a]=!1,k)k[b]==a&&(m[b]=!1)});q(window,"focus",function(){for(g in f)f[g]=!1;for(g in k)m[g]=!1});var x=e.key;e.key=m;e.key.setScope=function(a){u=a||"all"};e.key.getScope=p;e.key.deleteScope=function(a){var b,d,c;for(b in h){d=h[b];for(c=0;c<d.length;)d[c].scope===a?d.splice(c,1):c++}};e.key.filter=function(a){a=(a.target||a.srcElement).tagName;return!("INPUT"==a||"SELECT"==a||"TEXTAREA"==a)};e.key.isPressed=function(a){"string"==
typeof a&&(a=n[a]||a.toUpperCase().charCodeAt(0));return-1!=j(l,a)};e.key.getPressedKeyCodes=function(){return l.slice(0)};e.key.noConflict=function(){var a=e.key;e.key=x;return a};e.key.unbind=function(a,b){var d,c,e=[],f,g;d=s(a);for(g=0;g<d.length;g++){c=d[g].split("+");1<c.length&&(e=t(c),a=c[c.length-1]);a=n[a]||a.toUpperCase().charCodeAt(0);void 0===b&&(b=p());if(!h[a])break;for(f in h[a]){c=h[a][f];var i;if(i=c.scope===b)a:if(c=c.mods,c.length!=e.length)i=!1;else{for(i=0;i<c.length;i++)if(c[i]!==
e[i]){i=!1;break a}i=!0}i&&(h[a][f]={})}}};"undefined"!==typeof module&&(module.exports=e.key)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachments-api', location = 'jira-dnd-attachment-module/js/AttachmentsAPI.js' */
define("jira/attachments/api",["dndattachment/upload/handler"],function(n){return{doUpload:function(a){return n.doUpload(a)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/wrappers/aui.js' */
define("wiki-edit/aui",function(){return AJS});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/wrappers/jira.js' */
define("wiki-edit/JIRA",function(){return JIRA});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/wrappers/keymaster.js' */
define("wiki-edit/keymaster",["wiki-edit/aui","atlassian/libs/keymaster-1.6.2"],function(e,i){return e.Meta.get("keyboard-shortcuts-enabled")===!1?function(){}:i});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/templates/wiki-editor.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Plugins&&(JIRA.Templates.Plugins={}),"undefined"==typeof JIRA.Templates.Plugins.WikiEditor&&(JIRA.Templates.Plugins.WikiEditor={}),JIRA.Templates.Plugins.WikiEditor.renderEditor=function(i,t){var e='<div id="wiki-edit-dropdown2-text-style-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="paragraph" title="'+soy.$$escapeHtml("Paragraph")+'">'+soy.$$escapeHtml("Paragraph")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h1" data-operation="h1" title="'+soy.$$escapeHtml("Heading 1")+'">'+soy.$$escapeHtml("Heading 1")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h2" data-operation="h2" title="'+soy.$$escapeHtml("Heading 2")+'">'+soy.$$escapeHtml("Heading 2")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h3" data-operation="h3" title="'+soy.$$escapeHtml("Heading 3")+'">'+soy.$$escapeHtml("Heading 3")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h4" data-operation="h4" title="'+soy.$$escapeHtml("Heading 4")+'">'+soy.$$escapeHtml("Heading 4")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h5" data-operation="h5" title="'+soy.$$escapeHtml("Heading 5")+'">'+soy.$$escapeHtml("Heading 5")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h6" data-operation="h6" title="'+soy.$$escapeHtml("Heading 6")+'">'+soy.$$escapeHtml("Heading 6")+'</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-monospace" data-operation="monospace" title="'+soy.$$escapeHtml("Preformatted")+'">'+soy.$$escapeHtml("Preformatted")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="paragraph-quote" title="'+soy.$$escapeHtml("Paragraph quote")+'">'+soy.$$escapeHtml("Paragraph quote")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="block-quote" title="'+soy.$$escapeHtml("Block quote")+'">'+soy.$$escapeHtml("Block quote")+'</a></li></ul></div></div><div id="wiki-edit-dropdown2-more-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="delete" data-shortcut="ctrl+shift+s, command+shift+s" title="'+soy.$$escapeHtml("Strikethrough")+" ("+soy.$$escapeHtml(i.controlKey)+'+Shift+S)">'+soy.$$escapeHtml("Strikethrough")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="superscript">'+soy.$$escapeHtml("Superscript")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="subscript">'+soy.$$escapeHtml("Subscript")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="cite">'+soy.$$escapeHtml("Citation")+'</a></li></ul></div></div><div id="wiki-edit-dropdown2-link-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-link"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="link" data-shortcut="ctrl+k, command+k" title="'+soy.$$escapeHtml("External link")+" ("+soy.$$escapeHtml(i.controlKey)+'+K)">'+soy.$$escapeHtml("External link")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-mail">'+soy.$$escapeHtml("Mail link")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-anchor">'+soy.$$escapeHtml("Anchor link")+'</a></li></ul></div></div><div id="wiki-edit-dropdown2-attachment-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-attachment"><div class="aui-dropdown2-section wiki-edit-insert-attachment"><ul class="aui-list-truncate"><li><a href="#"></a></li></ul></div><div class="aui-dropdown2-section wiki-edit-browse-image"><ul class="aui-list-truncate"><li><a href="#" class="wiki-attachment-browse"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>&nbsp;&nbsp;'+soy.$$escapeHtml("Browse")+'</a></li></ul></div></div><div id="wiki-edit-color-picker-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-color-picker">',a=["333333","707070","cccccc","205081","59afe1","14892c","8eb021","d04437","f79232","f6c342","654982","f691b2"];e+='<div class="aui-dropdown2-section"><ul>';for(var o=a,s=o.length,r=0;r<s;r++){var n=o[r];e+='<li><a href="#" style="background-color: #'+soy.$$escapeHtml(n)+'" data-operation="color" data-color="#'+soy.$$escapeHtml(n)+'">&nbsp;</a></li>'}return e+='</ul></div></div><div id="wiki-edit-dropdown2-icon-picker-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-icon-picker"><div class="aui-dropdown2-section"><ul><li><a href="#" class="wiki-edit-operation" title=":)" data-operation=":)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/smile.gif" alt="'+soy.$$escapeHtml("smile")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title=":(" data-operation=":("><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/sad.gif" alt="'+soy.$$escapeHtml("sad")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title=":P" data-operation=":P"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/tongue.gif" alt="'+soy.$$escapeHtml("tongue")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title=":D" data-operation=":D"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/biggrin.gif" alt="'+soy.$$escapeHtml("biggrin")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title=";)" data-operation=";)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/wink.gif" alt="'+soy.$$escapeHtml("wink")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(y)" data-operation="(y)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/thumbs_up.gif" alt="'+soy.$$escapeHtml("thumbs up")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(n)" data-operation="(n)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/thumbs_down.gif" alt="'+soy.$$escapeHtml("thumbs down")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(i)" data-operation="(i)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/information.gif" alt="'+soy.$$escapeHtml("information")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(/)" data-operation="(/)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/check.gif" alt="'+soy.$$escapeHtml("check")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(x)" data-operation="(x)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/error.gif" alt="'+soy.$$escapeHtml("error")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(!)" data-operation="(!)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/warning.gif" alt="'+soy.$$escapeHtml("warning")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(+)" data-operation="(+)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/add.gif" alt="'+soy.$$escapeHtml("add")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(-)" data-operation="(-)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/forbidden.gif" alt="'+soy.$$escapeHtml("forbidden")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(?)" data-operation="(?)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/help_16.gif" alt="'+soy.$$escapeHtml("help")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(on)" data-operation="(on)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/lightbulb_on.gif" alt="'+soy.$$escapeHtml("lightbulb on")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(off)" data-operation="(off)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/lightbulb.gif" alt="'+soy.$$escapeHtml("lightbulb")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*)" data-operation="(*)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_yellow.gif" alt="'+soy.$$escapeHtml("star yellow")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*r)" data-operation="(*r)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_red.gif" alt="'+soy.$$escapeHtml("star red")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*g)" data-operation="(*g)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_green.gif" alt="'+soy.$$escapeHtml("star green")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*b)" data-operation="(*b)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_blue.gif" alt="'+soy.$$escapeHtml("star blue")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*y)" data-operation="(*y)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/star_yellow.gif" alt="'+soy.$$escapeHtml("star yellow")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flag)" data-operation="(flag)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/flag.gif" alt="'+soy.$$escapeHtml("flag")+'" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flagoff)" data-operation="(flagoff)"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/emoticons/flag_grey.gif" alt="'+soy.$$escapeHtml("flag off")+'" /></a></li></ul></div></div><div id="wiki-edit-dropdown2-other-'+soy.$$escapeHtml(i.editorId)+'" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="mention">'+soy.$$escapeHtml("User mention")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="table">'+soy.$$escapeHtml("Table")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="code">'+soy.$$escapeHtml("Code")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="noformat">'+soy.$$escapeHtml("Preformatted")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="panel">'+soy.$$escapeHtml("Panel")+'</a></li><li><a href="#" class="wiki-edit-operation" data-operation="hr">'+soy.$$escapeHtml("Horizontal ruler")+'</a></li><li class="wiki-edit-speech-item hidden"><a href="#" class="wiki-edit-operation" data-operation="speech">'+soy.$$escapeHtml("Speech recognition")+'</a></li></ul></div></div><div class="wiki-edit-toolbar" id="wiki-edit-'+soy.$$escapeHtml(i.editorId)+'"><div class="aui-toolbar2"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-style-picker-trigger" aria-owns="wiki-edit-dropdown2-text-style-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-text-style-'+soy.$$escapeHtml(i.editorId)+'">'+soy.$$escapeHtml("Style")+'</a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bold" data-shortcut="ctrl+b, command+b" title="'+soy.$$escapeHtml("Bold")+" ("+soy.$$escapeHtml(i.controlKey)+'+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-bold">'+soy.$$escapeHtml("Bold")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="italic" data-shortcut="ctrl+i, command+i" title="'+soy.$$escapeHtml("Italic")+" ("+soy.$$escapeHtml(i.controlKey)+'+I)"><span class="aui-icon aui-icon-small aui-iconfont-editor-italic">'+soy.$$escapeHtml("Italic")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="underline" data-shortcut="ctrl+u, command+u" title="'+soy.$$escapeHtml("Underline")+" ("+soy.$$escapeHtml(i.controlKey)+'+U)"><span class="aui-icon aui-icon-small aui-iconfont-editor-underline">'+soy.$$escapeHtml("Underline")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation wiki-edit-operation-color" data-operation="color" data-color="red" title="'+soy.$$escapeHtml("Text colour")+'"><span class="aui-icon aui-icon-small aui-iconfont-editor-color">'+soy.$$escapeHtml("Text colour")+'</span><span class="wiki-edit-color-indicator"></span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-color-picker-trigger" data-operation="color-parameter" aria-owns="wiki-edit-color-picker-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" title="'+soy.$$escapeHtml("More colours")+'"><span>'+soy.$$escapeHtml("More colours")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-more-picker-trigger" aria-owns="wiki-edit-dropdown2-more-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-more-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("More")+'"><span class="aui-icon aui-icon-small aui-iconfont-editor-styles">'+soy.$$escapeHtml("More")+'</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-link-picker-trigger" aria-owns="wiki-edit-dropdown2-link-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-link-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("Link")+" ("+soy.$$escapeHtml(i.controlKey)+'+K)"><span class="aui-icon aui-icon-small aui-iconfont-link">'+soy.$$escapeHtml("Link")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-attachment-picker-trigger" aria-owns="wiki-edit-dropdown2-attachment-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-attachment-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("Attachment")+'"><span class="aui-icon aui-icon-small aui-iconfont-file-generic">'+soy.$$escapeHtml("Attachment")+'</span></a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bullet-list" data-shortcut="ctrl+shift+b, command+shift+b" title="'+soy.$$escapeHtml("Bullet list")+" ("+soy.$$escapeHtml(i.controlKey)+'+Shift+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-bullet">'+soy.$$escapeHtml("Bullet list")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="numbered-list" data-shortcut="ctrl+shift+n, command+shift+n" title="'+soy.$$escapeHtml("Numbered list")+" ("+soy.$$escapeHtml(i.controlKey)+'+Shift+N)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-number">'+soy.$$escapeHtml("Numbered list")+'</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-icon-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-icon-picker-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-icon-picker-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("Icons")+'"><span class="aui-icon aui-icon-small aui-iconfont-editor-emoticon">'+soy.$$escapeHtml("Icons")+'</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-other-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-other-'+soy.$$escapeHtml(i.editorId)+'" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-other-'+soy.$$escapeHtml(i.editorId)+'" title="'+soy.$$escapeHtml("Other")+'"><span class="aui-icon aui-icon-small aui-iconfont-add">'+soy.$$escapeHtml("Other")+'</span></a></div><div class="aui-buttons wiki-edit-toolbar-last"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-visible-toggle wiki-edit-tooltip" title="'+soy.$$escapeHtml("Toggle visibility")+'"><span class="aui-icon icon-toolbartoggle">Lock / Unlock</span></a></div></div></div><!-- .aui-toolbar-inner --></div></div>'},JIRA.Templates.Plugins.WikiEditor.renderListItem=function(i,t){return'<li><a href="#" '+soy.$$escapeHtml(i.attachmentType?"data-attachment-type="+i.attachmentType:"")+'><span class="wiki-edit-attachment-type-icon aui-icon aui-icon-small '+soy.$$escapeHtml(null!=(null==i.attachmentTypeIcon?null:i.attachmentTypeIcon.cssClass)?null==i.attachmentTypeIcon?null:i.attachmentTypeIcon.cssClass:"aui-iconfont-file-txt")+'" title="'+soy.$$escapeHtml(null!=(null==i.attachmentTypeIcon?null:i.attachmentTypeIcon.title)?null==i.attachmentTypeIcon?null:i.attachmentTypeIcon.title:"File")+'"></span>&nbsp;&nbsp;<span class="wiki-edit-attachment-name">'+soy.$$escapeHtml(i.text)+"</span></a></li>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/Analytics.js' */
define("wiki-edit/analytics",["wiki-edit/aui"],function(i){function r(i){var r,t=0;if(!i)return"";for(var a=0;a<i.length;a+=1)r=i.charCodeAt(a),t=32*t-t+r,t|=0;return t}var t=i.Analytics&&i.Analytics.triggerPrivacyPolicySafeEvent?function(r,t){i.Analytics.triggerPrivacyPolicySafeEvent("jira.wikieditor."+r,t||{})}:function(r,t){i.trigger("analytics",{name:"jira.wikieditor."+r,data:t||{}})};return{trigger:t,hashCode:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/KeyTester.js' */
define("wiki-edit/KeyTester",function(){return{getActionType:function(i){return this.isNavigation(i)?"navigating":this.isDeleting(i)?"deleting":this.isReturn(i)?"newline":this.isEscape(i)?"escape":this.isTyping(i)?"typing":void 0},isNavigation:function(i){return i>=33&&i<=40||i>=63232&&i<=63235},isDeleting:function(i){return 8==i||46==i||127==i},isReturn:function(i){return 13==i},isEscape:function(i){return 27==i},isTyping:function(i){return i>47&&i<58||i>95&&i<112||i>64&&i<91||i>185&&i<193||i>218&&i<223||32==i||13==i}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/UndoManager.js' */
define("wiki-edit/UndoManager",function(){var t=function(){this._undoStack=[],this._redoStack=[],this._current=void 0};return t.prototype.MAX_STACK=1e3,t.prototype.updateCurrent=function(t,n){t!=this._current&&(this._current=t,n||(this._redoStack.length=0))},t.prototype.push=function(t){this._redoStack.length=0,this._undoStack.length&&_.isEqual(t,this._undoStack[this._undoStack.length-1])||(this._undoStack.push(t),this._current=t),this._undoStack.length>this.MAX_STACK&&this._undoStack.splice(0,this._undoStack.length-this.MAX_STACK)},t.prototype.undo=function(){if(this.canUndo()){var t;do t=this._undoStack.pop();while(_.isEqual(t,this._current)&&this.canUndo());return this._redoStack.push(this._current),this._current=t,t}},t.prototype.redo=function(){if(this.canRedo()){var t=this._redoStack.pop();return this._undoStack.push(this._current),this._current=t,t}},t.prototype.canUndo=function(){return!!this._undoStack.length},t.prototype.canRedo=function(){return!!this._redoStack.length},t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/UndoableTextarea.js' */
define("wiki-edit/UndoableTextarea",["wiki-edit/UndoManager","wiki-edit/KeyTester","jquery"],function(e,t,n){function i(e,t){t!==a&&o==t||("newline"!=o&&e.recordHistoryItem(),o=t)}function r(e,t){if(e.undoManager["can"+t[0].toUpperCase()+t.substring(1)]()){var n=e.undoManager[t]();e.element.value=n.value,e.element.selectionStart=n.selectionStart,e.element.selectionEnd=n.selectionEnd}}var a="cut-paste",o="",s=function(r){this.element=r,this.$el=n(r),this.undoManager=new e,this.undoManager.updateCurrent(this.getValue()),this.undoManager.push(this.getValue());var o=function(e){var n=e.keyCode,r=String.fromCharCode(n);if(n)if(e.ctrlKey||e.metaKey){if((e.ctrlKey||e.metaKey)&&!e.altKey)switch(r.toLowerCase()){case"y":this.undoManager.updateCurrent(this.getValue(),!0),this.redo(),e.preventDefault();break;case"z":this.undoManager.updateCurrent(this.getValue(),!0),e.shiftKey?this.redo():this.undo(),e.preventDefault()}}else this.undoManager.updateCurrent(this.getValue()),i(this,t.getActionType(n));else this.undoManager.updateCurrent(this.getValue()),i(this,"other")}.bind(this);this.$el.on("keydown",o),this.$el.on("paste cut",function(){this.undoManager.updateCurrent(this.getValue()),i(this,a)}.bind(this))};return s.prototype.getValue=function(){return{value:this.element.value,selectionStart:this.element.selectionStart,selectionEnd:this.element.selectionEnd}},s.prototype.updateCurrent=function(){this.undoManager.updateCurrent(this.getValue())},s.prototype.recordHistoryItem=function(){this.undoManager.push(this.getValue())},s.prototype.undo=function(){i(this,"undo"),r(this,"undo"),this.element.scrollTop=this.element.scrollHeight},s.prototype.redo=function(){r(this,"redo"),this.element.scrollTop=this.element.scrollHeight},s});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/TextareaManipulator.js' */
define("wiki-edit/TextareaManipulator",function(){var t=function(t){this.el=t};return t.prototype.NEW_LINE_TOKEN="\n",t.prototype.getSelection=function(){return{start:this.el.selectionStart,end:this.el.selectionEnd,length:this.el.selectionEnd-this.el.selectionStart,text:this.el.value.substring(this.el.selectionStart,this.el.selectionEnd)}},t.prototype.setSelection=function(t,e){1===arguments.length&&(e=t),this.el.selectionStart=t,this.el.selectionEnd=e},t.prototype.replaceSelectionWith=function(t,e){var n=this.el.selectionStart,i=this.el.value;this.el.value=i.substring(0,this.el.selectionStart)+t+i.substring(this.el.selectionEnd,i.length),this.el.selectionEnd=n+t.length,this.el.selectionStart=e?n:this.el.selectionEnd},t.prototype.wrapSelectionWith=function(t,e,n){arguments.length<3&&(n=""),1===arguments.length&&(e=t);var i=this.getSelection(),s=this.el.value;if(s.substring(i.start-t.length,i.start)!==t||s.substring(i.end,i.end+e.length)!==e){var l=s.substring(i.start,i.end);0==l.length&&(l=n),this.el.value=s.substring(0,i.start)+t+l+e+s.substring(i.end,s.length);var r=i.start+t.length;this.setSelection(r,r+l.length)}},t.prototype._getSelectedLines=function(){var t=this.el.value,e=this.getSelection(),n=t.substring(0,e.start).split(this.NEW_LINE_TOKEN).length-1,i=n+t.substring(e.start,e.end).split(this.NEW_LINE_TOKEN).length-1,s=t.split(this.NEW_LINE_TOKEN);return{lines:s,start:n,end:i}},t.prototype.getLineAtCursor=function(){var t=this._getSelectedLines();return t.lines[t.end]},t.prototype.getFirstLineMatch=function(t){var e=this._getSelectedLines(),n=e.lines[e.start].match(t);if(n)return n[0]},t.prototype.areSelectedLinesPrefixed=function(t){var e,n=this._getSelectedLines();for(e=n.start;e<=n.end;e++)if(0==n.lines[e].indexOf(t))return!0;return!1},t.prototype.prefixSelectedLines=function(t){var e,n=this.getSelection(),i=this._getSelectedLines(),s=0,l=!0;for(e=i.start;e<=i.end;e++)0!=i.lines[e].indexOf(t)?(s+=1,i.lines[e]=t+i.lines[e]):e==i.start&&(l=!1);this.el.value=i.lines.join(this.NEW_LINE_TOKEN);var r=t.length*s;this.setSelection(n.start+(l?t.length:0),n.end+r)},t.prototype.unprefixSelectedLines=function(t){var e,n=this.getSelection(),i=this._getSelectedLines(),s=!1,l=0;for(e=i.start;e<=i.end;e++)0==i.lines[e].indexOf(t)&&(l+=1,i.lines[e]=i.lines[e].substring(t.length),e==i.start&&(s=!0));this.el.value=i.lines.join(this.NEW_LINE_TOKEN);var r=t.length*l;this.setSelection(n.start-(s?t.length:0),n.end-r)},t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/keymaster-setup.js' */
define("wiki-edit/keymaster-setup",["jquery","wiki-edit/keymaster"],function(e,i){return{init:function(){i.filter=function(t){var n,r=t.target||t.srcElement||!1;return!!(r&&(" "+r.className+" ").indexOf(" wiki-textfield ")>-1&&(n=e(r).data("wikiEditor")))&&(i.setScope(n.id),!0)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/WikiEnabledTextarea.js' */
define("wiki-edit/WikiEnabledTextarea",["wiki-edit/TextareaManipulator","wiki-edit/UndoableTextarea","wiki-edit/keymaster","wiki-edit/keymaster-setup","wiki-edit/SpeechRecognition","jquery"],function(e,i,t,n,o,r){n.init();var a=0,l=/^[#\*]+ /,p=function(n){if(this.el=n,this.$el=r(n),this.$el.data("wikiEditor"))return this.$el.data("wikiEditor");this.id="wikiEdit"+a,a+=1,this.manipulationEngine=new e(this.el),this.undoRedoEl=new i(n);var o=this;t("enter",o.id,function(e){var i=o.manipulationEngine.getSelection(),t=o.manipulationEngine.getFirstLineMatch(l);t&&(0==i.length&&o.manipulationEngine.getLineAtCursor()===t?o.manipulationEngine.unprefixSelectedLines(t):o.manipulationEngine.replaceSelectionWith("\n"+t),e.preventDefault())}),this.$el.data("wikiEditor",this)},d={bold:["*","*","strong text"],italic:["_","_","emphasized text"],underline:["+","+","underlined text"],delete:["-","-","deleted text"],superscript:["^","^","superscript text"],subscript:["~","~","subscript text"],monospace:["{{","}}","monospaced text"],cite:["??","??","citation"],"block-quote":["{quote}","{quote}","quoted text"],color:["{color:$1}","{color}","coloured text","red"],link:["[","|http://example.com]","link title"],"link-anchor":["[#","]","anchor"],"link-mail":["[mailto:","]","mail@example.com"],image:["!","!","http://example.com/image.png"],mention:["@","","Mention someone by typing their name..."],code:["\n{code:java}\n","\n{code}\n","// Some comments here\npublic String getFoo()\n{\n    return foo;\n}"],noformat:["\n{noformat}\n","\n{noformat}\n","*no* further _formatting_ is done here"],panel:["\n{panel:title="+"My title"+"}\n","\n{panel}\n","Some text with a title"],table:["\n||"+"Heading"+" 1||"+"Heading"+" 2||\n|","|"+"Col"+" A2|\n","Col"+" A1"]};for(var h in d)p.prototype[h]=function(e,i){var t=0;return e.length>3&&(t=e.length-3),function(){var i,n=e[0],o=e[1],r=e[2];for(i=1;i<=t;i++)n=n.replace("$"+i,arguments[i-1]||e[2+i]),o=o.replace("$"+i,arguments[i-1]||e[2+i]);var a=this.el.value,l=this.manipulationEngine.getSelection();this.undoRedoEl.recordHistoryItem(),a.substring(l.start-n.length,l.start)===n&&a.substring(l.end,l.end+o.length)===o?(this.el.value=a.substring(0,l.start-n.length)+a.substring(l.start,l.end)+a.substring(l.end+o.length,a.length),this.manipulationEngine.setSelection(l.start-n.length,l.end-n.length)):this.manipulationEngine.wrapSelectionWith.call(this.manipulationEngine,n,o,r),this.undoRedoEl.recordHistoryItem(),this.$el.trigger("input")}}(d[h],h);var c={paragraph:"","bullet-list":"* ","numbered-list":"# ",h1:"h1. ",h2:"h2. ",h3:"h3. ",h4:"h4. ",h5:"h5. ",h6:"h6. ","paragraph-quote":"bq. "};for(var h in c)p.prototype[h]=function(e){return function(){this.undoRedoEl.recordHistoryItem();for(var i in c)this.manipulationEngine.areSelectedLinesPrefixed(c[i])&&this.manipulationEngine.unprefixSelectedLines(c[i]);this.manipulationEngine.prefixSelectedLines.call(this.manipulationEngine,e),this.undoRedoEl.recordHistoryItem(),this.$el.trigger("input")}}(c[h]);var g={hr:"\n----\n",":)":":)",":(":":(",":P":":P",":D":":D",";)":";)","(y)":"(y)","(n)":"(n)","(i)":"(i)","(/)":"(/)","(x)":"(x)","(!)":"(!)","(+)":"(+)","(-)":"(-)","(?)":"(?)","(on)":"(on)","(off)":"(off)","(*)":"(*)","(*r)":"(*r)","(*g)":"(*g)","(*b)":"(*b)","(*y)":"(*y)","(flag)":"(flag)","(flagoff)":"(flagoff)","image-attachment":[" !$1|thumbnail! ","attachment-name.jpg"],"image-attachment-full":[" !$1! ","attachment-name.gif"],"link-attachment":[" [^$1] ","attachment-name.zip"]};for(var h in g)p.prototype[h]=function(e){var i,t=0;return _.isArray(e)&&(t=e.length-1,i=e.slice(1),e=e[0]),function(){var n,o=e;for(n=1;n<=t;n++)o=e.replace("$"+n,arguments[n-1]||i[n-1]);this.undoRedoEl.recordHistoryItem(),this.manipulationEngine.replaceSelectionWith.call(this.manipulationEngine,o,!1),this.undoRedoEl.recordHistoryItem(),this.$el.trigger("input")}}(g[h]);return p.prototype.speech=function(){o.start(this)},p});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/WikiEditor.js' */
define("wiki-edit/WikiEditor",["wiki-edit/WikiEnabledTextarea","jquery","underscore","wiki-edit/JIRA","wiki-edit/keymaster","wiki-edit/analytics","wiki-edit/WikiEditorUtil","jira/util/events","jira/attachments/api","jira/featureflags/feature-manager"],function(t,e,i,a,n,o,r,d,l,c){function s(t){var e=AJS.$(t).closest(".aui-dropdown2");e.length&&e[0].hide()}var f="Ctrl";navigator.platform.indexOf("Mac")!=-1&&(f="⌘");var h=function(t){return t.match(/\.(bmp|gif|jpg|jpeg|png|tiff|webp)$/i)?"image":"file"},p=function(t,e,i){"image"==i?(e.match(/\.gif$/i)?t["image-attachment-full"](e):t["image-attachment"](e),o.trigger("operation.attachment.image")):(t["link-attachment"](e),o.trigger("operation.attachment.link"))};return{create:function(i){function d(t){t.preventDefault(),t.stopPropagation(),W=!W,S.toggleClass("active",W),u.toggleClass("wiki-edit-toolbar-compact",W),localStorage.setItem("jira.wikieditor.visibility"+i.name+"."+i.id,W?"true":"false"),o.trigger(W?"hide":"show")}if("undefined"!=typeof i.selectionStart){var l=e(i);if(!l.data("wikiEditor")){var c=new t(i);this.wikiEditor=c;var g=e(a.Templates.Plugins.WikiEditor.renderEditor({editorId:c.id,controlKey:f})),u=g.filter(".wiki-edit-toolbar");"webkitSpeechRecognition"in window&&g.find(".wiki-edit-speech-item").removeClass("hidden"),l.parent().before(g);var m,v=l.closest(".jira-dialog").length>0||l.closest("form#issue-create").length>0,k=l.closest("#create-issue-dialog").length>0,w=e("#issue-content").length>0,b=l.closest("#addcomment").length>0,y=g.find(".wiki-edit-operation[title], .aui-dropdown2-trigger, .wiki-edit-tooltip");m=v?"Dialog.beforeHide":a.Events.BEFORE_INLINE_EDIT_CANCEL,y.each(function(){var t=e(this),i={aria:!0,hideOnClick:!0,hoverable:!1};t.parent().is("li")&&(i.gravity="w"),t.tooltip(i)});var E=function(){y.each(function(){e(this).tooltip("hide")})};a.bind(m,E);var C=!1,T=g.filter(".aui-dropdown2");T.on({"aui-dropdown2-show":function(){C=!0,l.focus()},"aui-dropdown2-hide":function(){C=!1,E()}}),l.on("keydown",function(t){C&&t.keyCode===AJS.keyCode.ESCAPE&&(v?a.one("Dialog.beforeHide",function(t){t.preventDefault()}):w&&!b&&a.one(a.Events.BEFORE_INLINE_EDIT_CANCEL,function(t){t.preventDefault()}))});var I=g.filter(".wiki-edit-dropdown-image, .wiki-edit-dropdown-attachment"),_=I.find(".wiki-edit-insert-image, .wiki-edit-insert-attachment"),j=I.find(".wiki-edit-insert-image ul, .wiki-edit-insert-attachment ul");j.on("click","a",function(t){t.preventDefault(),s(t.target);var i=e(this).attr("data-attachment-type");"undefined"==typeof i&&(i="file");var a=e(this).find(".wiki-edit-attachment-name").text();p(c,a,i)}),I.on("aui-dropdown2-show",function(){var t=[],i=[];v&&e(".upload-progress-bar:not(.upload-progress-bar__upload-error) span.upload-progress-bar__file-name").each(function(e,i){t.push(i)}),!k&&w&&e("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content").each(function(e,i){t.push(i)});var n=function(t,e){if(!t)return null;var i=r.getFileExtension(t);return{name:t,type:e,icon:r.translateFileExtensionToAttachmentTypeIcon(i)}},o=e("#ghx-tab-attachments .ghx-container");o.find("#file_attachments li.attachment-content > dl dt.attachment-title a, #file_attachments div.verbose dt.attachment-title a").each(function(t,e){var a=n(e.textContent,"file");a&&i.push(a)}),o.find("#attachment_thumbnails a.attachment-title").each(function(t,e){var a=n(e.textContent,"image");a&&i.push(a)}),j.empty(),_.addClass("hidden"),(v||w)&&t.length?(_.removeClass("hidden"),e(t).each(function(){var t=e(this).is("span.upload-progress-bar__file-name")?e(this).text():e(this).find("a.attachment-title, .attachment-title a").first().text(),i=e(this).attr("data-attachment-type");void 0===i&&(i=h(t));var n=r.defaultAttachmentTypeIcon,o=e(this).attr("data-downloadurl");if(void 0===o&&(o=e(this).find("[data-downloadurl]").attr("data-downloadurl")),void 0!==o&&"string"==typeof o){var d=o.split(":");if(d.length>0){var l=d[0];n=r.translateMimeTypeToAttachmentTypeIcon(l)}}else if(void 0!==t&&"string"==typeof t){var c=t.match(/\.(\w{1,5})$/i);if(c&&c.length>1){var s=c[1];n=r.translateFileExtensionToAttachmentTypeIcon(s)}}j.append(e(a.Templates.Plugins.WikiEditor.renderListItem({text:t,attachmentType:i,attachmentTypeIcon:n})))})):!k&&i.length>0&&(_.removeClass("hidden"),i.forEach(function(t){if(null!=t&&null!=t.name){var i=t.name,n=t.type?t.type:"file",o=t.icon?t.icon:{cssClass:"aui-iconfont-devtools-file",title:""};j.append(e(a.Templates.Plugins.WikiEditor.renderListItem({text:i,attachmentType:n,attachmentTypeIcon:o})))}}))}),r.compareVersion(AJS.version,"5.8.0")<0&&I.on("aui-dropdown2-item-selected",function(){var t=e(this).find(".aui-dropdown2-active");if("object"==typeof t){var i=t.closest("div");if("object"==typeof i){var a=i.offset().top,n=a+i.height(),o=t.offset().top,r=o+t.height();o<a&&i.scrollTop(i.scrollTop()-(a-o)),r>n&&i.scrollTop(i.scrollTop()+(r-n))}}}),g.filter(".wiki-edit-dropdown, .wiki-edit-picker").on("mousedown",function(t){t.preventDefault()}),g.find(".wiki-edit-operation:not(.wiki-edit-operation-color)").each(function(){var t=e(this),i=function(e){e&&(e.preventDefault&&e.preventDefault(),s(e.target),l.focus(),c[t.data("operation")](),o.trigger("operation",{name:t.data("operation"),nameHash:o.hashCode(t.data("operation")),trigger:e.type}),o.trigger("operation."+t.data("operation"),{trigger:e.type}))};t.click(i),t.data("shortcut")&&n(t.data("shortcut"),c.id,i)}),g.find(".wiki-edit-operation-color").each(function(){var t=e(this),i=function(e){e&&(e.preventDefault&&e.preventDefault(),s(e.target),l.focus(),c[t.data("operation")](t.data("color")),o.trigger("operation",{name:t.data("operation"),nameHash:o.hashCode(t.data("operation")),trigger:e.type}),o.trigger("operation."+t.data("operation"),{trigger:e.type}))};t.click(i),t.data("shortcut")&&n(t.data("shortcut"),c.id,i)});var x=window.localStorage.getItem("jira.wikieditor.last.color")?window.localStorage.getItem("jira.wikieditor.last.color"):"red",D=g.find(".wiki-edit-operation-color");D.data("color",x);var A=u.find(".wiki-edit-color-indicator");A.css("background-color",x),g.filter(".wiki-edit-color-picker").on("click","a",function(t){t.preventDefault(),s(t.target),l.focus();var i=e(this).data("color");c.color(i),o.trigger("operation",{name:"color"}),o.trigger("operation.color.picked",{color:i}),D.data("color",i),A.css("background-color",i),window.localStorage.setItem("jira.wikieditor.last.color",i)});var S=g.find(".wiki-edit-visible-toggle"),W="true"===localStorage.getItem("jira.wikieditor.visibility"+i.name+"."+i.id);W&&(S.addClass("active"),u.addClass("wiki-edit-toolbar-compact")),S.on("click",d),u.parent().on("click",".wiki-edit-toolbar-compact",d),e(document).on("showWikiPreview",function(t,a){e(a).find(i).length&&u.addClass("hidden")}),e(document).on("showWikiInput",function(t,a){e(a).find(i).length&&u.removeClass("hidden")})}}},initBrowseLink:function(t){var i=this.wikiEditor,a=e(t),n=a.parent().siblings().find(".wiki-attachment-browse"),r=e("#dnd-metadata-webpanel").data("can-attach"),c=a.closest(".jira-dialog").length>0||a.closest("form#issue-create").length>0;if(c){var f=["#create-issue-dialog:visible","#create-subtask-dialog:visible","#edit-issue-dialog:visible","#create-linked-issue-dialog:visible"],g=e(f.join(",")),u=g.length>0;r=e(".jira-dialog fieldset span:contains('Attachment')").length>0,u||(g=a.closest(".dialog-can-receive-files:visible"),u=g.length>0,r=g.data("can-attach"));var m=g.data("insert-markup-on-browse")}var v=a.parent().siblings().find(".wiki-edit-attachment-picker-trigger");if(!r||c&&!u){n.closest("div").addClass("hidden");var k=e("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content"),w=k.length>0,b=c&&u&&("create-issue-dialog"===g.attr("id")||"create-subtask-dialog"===g.attr("id")),y=w&&!b;y||v.addClass("hidden")}else n.closest("div").removeClass("hidden"),v.removeClass("hidden"),n.data("initialised")||(n.on("click",function(t){t.preventDefault(),s(t.target);var a=function(){var t=e('<input type="file" multiple />');t.change(function(a){var n=t[0].files;if(c){var o=e.Event("drop");o.dataTransfer={files:n},g.find(".issue-drop-zone__target").trigger(o)}else d.trigger("attachmentForPageReceived",{files:n,isWikiTextfieldFocused:!0});if(!c||m)for(var r=0;r<n.length;r++){var l=n[r].name;p(i,l,h(l))}}),t.click(),o.trigger("attachment.dropdown.button.clicked.browse")},n={onFileUploadStarted:function(t){p(i,t.name,h(t.name))},blockWikiEditorMarkupInsert:!0};l.doUpload(n)?o.trigger("issue.wiki-editor.browse-link.media-picker"):(o.trigger("issue.wiki-editor.browse-link.fallback"),a())}),n.data("initialised",!0))}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/WikiEditorUtil.js' */
define("wiki-edit/WikiEditorUtil",["jquery","underscore"],function(i,e){var t={cssClass:"aui-iconfont-devtools-file",title:"File"},n={pdf:"aui-iconfont-file-pdf",gif:"aui-iconfont-image",png:"aui-iconfont-image",jpeg:"aui-iconfont-image",jpg:"aui-iconfont-image",xml:"aui-iconfont-file-code",html:"aui-iconfont-file-code",htm:"aui-iconfont-file-code",txt:"aui-iconfont-file-txt",zip:"aui-iconfont-file-zip",gz:"aui-iconfont-file-zip",tar:"aui-iconfont-file-zip",rar:"aui-iconfont-file-zip","7z":"aui-iconfont-file-zip",doc:"aui-iconfont-file-doc",docx:"aui-iconfont-file-doc",xls:"aui-iconfont-file-xls",xlsx:"aui-iconfont-file-xls",xlsm:"aui-iconfont-file-xls",ppt:"aui-iconfont-file-ppt",pptx:"aui-iconfont-file-ppt",java:"aui-iconfont-file-code",c:"aui-iconfont-file-code",h:"aui-iconfont-file-code",cpp:"aui-iconfont-file-code",hpp:"aui-iconfont-file-code",scala:"aui-iconfont-file-code",php:"aui-iconfont-file-code",css:"aui-iconfont-file-code",less:"aui-iconfont-file-code",soy:"aui-iconfont-file-code",js:"aui-iconfont-file-code",jar:"aui-iconfont-file-zip",war:"aui-iconfont-file-zip",obr:"aui-iconfont-file-zip"},o={pdf:"PDF File",gif:"GIF File",png:"PNG File",jpeg:"JPEG File",jpg:"JPEG File",xml:"XML File",html:"HTML File",htm:"HTML File",txt:"Text File",zip:"Zip Archive",gz:"GZip Archive",doc:"Microsoft Word",docx:"Microsoft Word",xls:"Microsoft Excel",xlsx:"Microsoft Excel",xlsm:"Microsoft Excel",ppt:"Microsoft PowerPoint",pptx:"Microsoft PowerPoint",java:"Java Source File",jar:"Java Archive File",war:"Java Archive File"};return{defaultAttachmentTypeIcon:t,translateMimeTypeToAttachmentTypeIcon:function(i){return{cssClass:JIRA.Templates.ViewIssue.matchFileClass({mimetype:i}),title:JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:i})}},translateFileExtensionToAttachmentTypeIcon:function(i){var c=e.clone(t);if("string"!=typeof i)return c;i=i.toLowerCase(),i=i.replace(/^\.+/,"");var f=n[i];"string"==typeof f&&(c.cssClass=f);var a=o[i];return"string"==typeof a&&(c.title=a),c},compareVersion:function(e,t){var n=e.split("."),o=t.split("."),c=NaN;return i(n).each(function(i,e){if(i>=o.length)return!1;var t=Number(e),n=Number(o[i]);return isNaN(t)||isNaN(n)?(c=NaN,!1):t<n?(c=-1,!1):t>n?(c=1,!1):void(c=0)}),0==c&&n.length!=o.length?n.length>o.length?1:-1:c},getFileExtension:function(i){if("string"!=typeof i)return"";var e=i.match(/\.(\w{1,5})$/i);return e&&e.length>1?e[1]:""}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/SpeechRecognition.js' */
define("wiki-edit/SpeechRecognition",["jquery","aui/flag"],function(e,t){function i(e){return e&&e[0]&&e[0].isFinal}function r(e){return e&&e[0]&&e[0][0]&&e[0][0].transcript||""}return{start:function(e){var t=this,o=new webkitSpeechRecognition;o.continuous=!1,o.interimResults=!0,o.lang=AJS.Meta.get("user-locale").replace("_","-"),o.stop(),o.start(),o.onstart=function(){t.showTimedMessage({title:"You can start speaking now :)"},"info",10),t.selectionStart=e.manipulationEngine.getSelection().start},o.onresult=function(n){t.dismissCurrentMessage();var s=i(n.results),a=r(n.results);a=a.charAt(0).toUpperCase()+a.slice(1),s&&e.undoRedoEl.recordHistoryItem(),e.manipulationEngine.replaceSelectionWith.call(e.manipulationEngine,a,!1);var l=t.selectionStart+a.length;s?(e.manipulationEngine.setSelection(l),e.undoRedoEl.recordHistoryItem(),e.$el.trigger("input"),o.stop()):e.manipulationEngine.setSelection(t.selectionStart,l)},o.onerror=function(e){o.stop();var i={title:"Sorry, I can\'t hear you :(",body:""};switch(e.error){case"not-allowed":i.title="Speech recognition is currently disabled",i.body="Click the camera icon in the browser\'s address bar to enable it.";break;case"network":i.title="No internet connection",i.body="You need a working internet connection to use speech recognition.";break;case"no-speech":i.title="Sorry, I couldn\'t hear anything :(",i.body="Is your microphone working and unmuted?";break;case"aborted":return}t.showTimedMessage(i,"warning",5)},o.onend=function(){o.stop()}},showTimedMessage:function(e,i,r){this.dismissCurrentMessage(),this.speakFlag=t({type:i,title:e.title,body:e.body,persistent:!0}),clearTimeout(this.flagTimer),this.flagTimer=setTimeout(this.dismissCurrentMessage.bind(this),1e3*r)},dismissCurrentMessage:function(){this.speakFlag&&this.speakFlag.close&&(this.speakFlag.close(),this.speakFlag=null)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:skate', location = 'jira-wiki-editor-module/js/lib/skate.js' */
define("wiki-edit/skate",["jira/skate"],function(e){return e});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources-init', location = 'jira-wiki-editor-module/js/wiki-editor-init.js' */
require(["wiki-edit/WikiEditor","wiki-edit/JIRA","wiki-edit/skate","jquery","underscore"],function(i,t,e,o,n){function s(t){var e=this instanceof Element?this:t,s=function(t){i.create(t),i.initBrowseLink(t),t.wikiEnabled=!0};e.wikiEnabled===!1&&(o(e).is(":hidden")?n.defer(s,e):s(e))}function d(){return{type:e.type.CLASSNAME,attached:s,prototype:{wikiEnabled:!1}}}e("wiki-textfield",d()),e("wiki-enabled-textfield",d()),o(function(){o("#gh").length>0&&(t.Dialogs.comment.options.width=810,t.Dialogs.assignIssue.options.width=810,t.Dialogs.attachFile.options.width=810,t.Dialogs.logWork.options.width=810,t.Dialogs.logWork.options.width=810)})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'jira-agile-module/includes/js/rapid/AnalyticsTracker.js' */
define("jira-agile/rapid/analytics-tracker",["require"],function(e){var r=e("underscore");function a(e,a,i){if(r.isUndefined(e))throw new Error("You must specify a category");this.params={},this.params.category=e;e=0;r.isUndefined(a)||(this.params.action=a,e++,r.isUndefined(i)||(this.params.label=i,e++)),this.requiredArgumentNames=["action","label","value"].slice(e),this.useAsync=!0}return a.prototype.setAsync=function(e){return this.useAsync=e,this},a.prototype.trigger=function(){for(var e=r.clone(this.params),a=0;a<arguments.length&&!r.isUndefined(this.requiredArgumentNames[a]);a++)e[this.requiredArgumentNames[a]]=arguments[a];this._validateParams(e);AJS.$(AJS).trigger("gh.analytics.async",e)},a.prototype._validateParams=function(a){r.each(["category","action","label"],function(e){r.isUndefined(a[e])||r.isString(a[e])?r.isUndefined(a[e])&&(a[e]=""):a[e]=a[e].toString()}),r.each(["category","action"],function(e){a[e]=a[e].replace(/\s+/g,"")}),r.isUndefined(a.value)||(a.value=parseInt(a.value,10),isNaN(a.value)&&(a.value=void 0))},a}),AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalissueoperations', location = 'jira-agile-module/includes/js/gh-globalissueoperations.js' */
!function(){function i(r,i){var e="";return(r=AJS.$(r)).hasClass("js-rapidboard-operation-sprint")?e="sprint.":r.hasClass("js-rapidboard-operation-issue")&&(e="issue."),e+=i}var e=new(require("jira-agile/rapid/analytics-tracker"))("gh.issueaction.gotorapidboard").setAsync(!1),r=require("jira/dialog/form-dialog"),a=require("jira/dialog/dialog-register"),o=new(r.extend({_performRedirect:function(r){e.trigger("direct"),window.location.href=r}}))({id:"gh-rapidboard-dialog",trigger:"a.issueaction-greenhopper-rapidboard-operation",ajaxOptions:function(){return a.getDefaultAjaxOptions.apply(this,arguments)}});AJS.$(function(){AJS.$(document).on("simpleClick",".issueaction-greenhopper-rapidboard-operation",function(r){r.preventDefault();r=i(r.currentTarget,"open");e.trigger(r),o.show()}),AJS.$(document).on("simpleClick",".js-select-rapidboard",function(r){r=i(r.currentTarget,"chosen");e.trigger(r)})})}();;;try{window.performance.mark('com.atlassian.jira.jira-quick-edit-plugin,jira.create.issue,jira.webresources,com.atlassian.jira.plugins.jira-dnd-attachment-plugin,com.pyxis.greenhopper.jira,com.atlassian.jira.plugins.jira-wiki-editor,com.pyxis.greenhopper.jira_batch_file_eval:end');} catch(e){};