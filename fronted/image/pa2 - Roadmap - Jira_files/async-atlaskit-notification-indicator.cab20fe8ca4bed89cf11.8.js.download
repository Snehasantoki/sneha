try{window.performance.mark("async-atlaskit-notification-indicator.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-atlaskit-notification-indicator"],{"7QTw":function(t,i,e){"use strict";var n=e("q1tI"),r=e("qKvR");const a={added:{light:"var(--ds-background-subtleSuccess-resting, #E3FCEF)",dark:"var(--ds-background-subtleSuccess-resting, #E3FCEF)"},default:{light:"var(--ds-background-subtleNeutral-resting, #DFE1E6)",dark:"var(--ds-background-subtleNeutral-resting, #3B475C)"},important:{light:"var(--ds-background-boldDanger-resting, #DE350B)",dark:"var(--ds-background-boldDanger-resting, #DE350B)"},primary:{light:"var(--ds-background-boldBrand-resting, #0052CC)",dark:"var(--ds-background-boldBrand-resting, #4C9AFF)"},primaryInverted:{light:"var(--ds-background-default, #FFFFFF)",dark:"var(--ds-background-default, #9FB0CC)"},removed:{light:"var(--ds-background-subtleDanger-resting, #FFEBE6)",dark:"var(--ds-background-subtleDanger-resting, #FFEBE6)"}
},s={added:{light:"var(--ds-text-success, #006644)",dark:"var(--ds-text-success, #006644)"},default:{light:"var(--ds-text-highEmphasis, #172B4D)",dark:"var(--ds-text-highEmphasis, #E6EDFA)"},important:{light:"var(--ds-text-onBold, #FFFFFF)",dark:"var(--ds-text-onBold, #FFFFFF)"},primary:{light:"var(--ds-text-onBold, #FFFFFF)",dark:"var(--ds-text-onBold, #0D1424)"},primaryInverted:{light:"var(--ds-text-brand, #0747A6)",dark:"var(--ds-text-brand, #0D1424)"},removed:{light:"var(--ds-text-danger, #BF2600)",dark:"var(--ds-text-danger, #BF2600)"}};function o(t=0){return t<0?0:t}const d=Object(r.css)({display:"inline-block",minWidth:"1px",padding:"2px 6px",borderRadius:"8px",fontSize:"12px",fontWeight:"normal",lineHeight:1,textAlign:"center"}),c=Object(n.memo)((function({appearance:t="default",children:i=0,max:n=99,style:c,testId:l}){var h,u
;const{mode:p}=Object(e("1chJ").b)(),v=null!==(h=null==c?void 0:c.backgroundColor)&&void 0!==h?h:a[t][p],g=null!==(u=null==c?void 0:c.color)&&void 0!==u?u:s[t][p];return Object(r.jsx)("span",{"data-testid":l,css:d,style:{backgroundColor:v,color:g}},"number"==typeof i?function(t,i){const e=o(t),n=o(i);return n&&n<e?`${n}+`:e===1/0?"\u221e":e.toString()}(i,n):i)}));c.displayName="Badge";i.a=c},VwTp:function(t,i,n){"use strict";n.r(i),n.d(i,"NotificationIndicator",(function(){return h}));var r=n("lSNA"),a=n.n(r),s=n("q1tI"),o=n.n(s);const d="navigation";class c extends s.Component{constructor(...t){super(...t),a()(this,"visibilityChangesSinceTimer",0),a()(this,"state",{count:null}),a()(this,"onVisibilityChange",(()=>{this.props.refreshOnVisibilityChange&&this.shouldRefresh()&&(this.visibilityChangesSinceTimer++,this.refresh("visibility"))})),a()(this,"shouldRefresh",(()=>!document.hidden||this.props.refreshOnHidden)),a()(this,"timerTick",(()=>{this.visibilityChangesSinceTimer=0,
this.refresh("timer")})),a()(this,"handleAnalytics",(t=>{const{newCount:i,oldCount:e,source:n}=t;if(this.props.createAnalyticsEvent&&i>0&&0===e){this.props.createAnalyticsEvent({actionSubject:"notificationIndicator",action:"activated",attributes:{badgeCount:i,refreshSource:n}}).fire(d)}if(this.props.createAnalyticsEvent&&i!==e){this.props.createAnalyticsEvent({actionSubject:"notificationIndicator",action:"updated",attributes:{oldCount:e,newCount:i,refreshSource:n}}).fire(d)}})),a()(this,"refresh",(async t=>{if(!this.notificationLogProvider)return;if(!this.shouldRefresh())return;const i={source:t,visibilityChangesSinceTimer:this.visibilityChangesSinceTimer},n=this.props.onCountUpdating&&this.props.onCountUpdating(i)||{};if(!n.skip)try{const i=n.countOverride||(await this.notificationLogProvider.countUnseenNotifications({queryParams:{currentCount:this.state.count||0}})).count;if(null===this.state.count||this.state.count!==i){const e={oldCount:this.state.count||0,newCount:i,source:t}
;this.handleAnalytics(e),this.props.onCountUpdated&&this.props.onCountUpdated(e),this.setState({count:i})}}catch(e){}}))}async componentDidMount(){this.notificationLogProvider=await this.props.notificationLogProvider,this.refresh("mount"),this.updateInterval(),document.addEventListener("visibilitychange",this.onVisibilityChange)}componentDidUpdate(t){t.refreshRate!==this.props.refreshRate&&this.updateInterval()}componentWillUnmount(){this.intervalId&&clearInterval(this.intervalId),document.removeEventListener("visibilitychange",this.onVisibilityChange)}updateInterval(){const{refreshRate:t}=this.props;this.intervalId&&clearInterval(this.intervalId),t&&t>0&&(this.intervalId=window.setInterval(this.timerTick,t))}render(){const{count:t}=this.state,{appearance:i,max:e}=this.props;return t?o.a.createElement("div",{"data-test-selector":"NotificationIndicator"},o.a.createElement(n("7QTw").a,{max:e,appearance:i},t)):null}}c.displayName="NotificationIndicator",a()(c,"defaultProps",{
appearance:"important",max:9,refreshRate:0,refreshOnHidden:!1,refreshOnVisibilityChange:!0});var l=c;const h=Object(n("VHV8").a)()(l)}}]);try{window.__jsEvalStop("async-atlaskit-notification-indicator.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-atlaskit-notification-indicator.cab20fe8ca4bed89cf11.8.js.map